<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>2013.6-2013.12ä¿©é¡¹ç›®çš„ä¸€äº›åæ€å’Œæ€»ç»“</title>
    <url>/2014/2013.6-2013.12%E4%BF%A9%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8F%8D%E6%80%9D%E5%92%8C%E6%80%BB%E7%BB%93/readme/</url>
    <content><![CDATA[<p>ä»2013.6æœˆä¸­æ—¬åˆ°2013.12æœˆï¼Œè¿ç»­å‚ä¸è®¾è®¡å’Œå¼€å‘äº†ä¸¤ä¸ªäº§å“ï¼ˆä¸€ä¸ªæ˜¯<a href="https://itunes.apple.com/cn/app/zhang-pai/id696406058?mt=8" target="_blank" rel="noopener external nofollow noreferrer">æŒæ‹</a>ï¼Œå¦ä¸€ä¸ªæ˜¯<a href="https://itunes.apple.com/us/app/wang-qiu-quan/id747600291?ls=1&mt=8" target="_blank" rel="noopener external nofollow noreferrer">ç½‘çƒåœˆ</a>ï¼‰ï¼Œå¹¶ç‹¬ç«‹å®Œæˆäº†è¿™ä¸¤ä¸ªäº§å“çš„ iOS å®¢æˆ·ç«¯å¼€å‘ï¼ŒæœŸé—´å¯è°“è·ç›Šè‰¯å¤šï¼Œä¸€ç•ªåçœæ€»ç»“å½’çº³ï¼Œå¾—ç›Šä¸»è¦åœ¨ã€æ²Ÿé€šã€ã€äº§å“è®¾è®¡ã€ã€æŠ€æœ¯ã€è¿™ä¸‰æ–¹é¢ã€‚</p>
<h2 id="æ²Ÿé€š"><a href="#æ²Ÿé€š" class="headerlink" title="æ²Ÿé€š"></a>æ²Ÿé€š</h2><p>å¦‚ä½•æ‰èƒ½æœ‰æ•ˆåœ°æ²Ÿé€šå‘¢ï¼Ÿ</p>
<ol>
<li><p>å°±äº‹è®ºäº‹ï¼Œç†æ€§è®¨è®ºï¼Œæ‹’ç»ä¸ªäººæƒ…ç»ªï¼Œç‰¹åˆ«æ˜¯ä¸è‰¯æƒ…ç»ªã€‚</p>
</li>
<li><p>ä»¥ã€å‘ç°é—®é¢˜ï¼Œè§£å†³é—®é¢˜ã€ä¸ºæ²Ÿé€šç›®çš„ã€‚</p>
</li>
<li><p>åšå†³æŠŠè®¨è®ºçš„é—®é¢˜é™å®šåœ¨æŒ‡å®šèŒƒå›´å†…ï¼Œæ‹’ç»è¶Šç•Œã€è·‘é¢˜ï¼</p>
</li>
<li><p>å‡†å¤‡å……åˆ†ï¼Œå‡†å¤‡å¥½ï¼šã€é—®é¢˜ã€ã€ã€è®ºæ®ã€ã€ã€è§£å†³æ–¹æ¡ˆã€ï¼ˆè‡³å°‘å¾—æ¸…æ¥šè‡ªå·±æƒ³è®¨è®ºçš„æ˜¯ä»€ä¹ˆé—®é¢˜ï¼‰ã€‚</p>
</li>
</ol>
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘åœ¨å‚ä¸ç¬¬ä¸€ä¸ªäº§å“å¼€å‘æ—¶ï¼Œå’Œè´Ÿè´£äººã€åµæ¶ã€n æ¬¡ï¼Œå¤±è´¥ n æ¬¡åå¾—åˆ°çš„ç»éªŒå’Œæ•™è®­ã€‚æ­¤äººæ˜¯æè¥é”€è¿ç»´çš„ï¼Œå£å¤´èƒ½åŠ›ç”šå¼ºï¼Œå¥½å‡ æ¬¡å’Œä»–è®¨è®ºé—®é¢˜çš„æ—¶å€™ï¼Œå°±è¢«ä»–ç”¨ã€å·æ¢æ¦‚å¿µã€+ã€è·‘é¢˜ã€è¿™ä¸¤æ‹›å‡»è´¥o(â•¯â–¡â•°)oï¼›ç„¶åæœ‰å‡ æ¬¡æ˜¯è¢«ä»–çš„å¸‚åœºç»éªŒæ‰“è´¥ï¼ˆè¿™æ‹›ã€æ‰¬é•¿é¿çŸ­ã€ç”šæ˜¯å¥½ç”¨çš„ï¼Œâ†’_â†’ï¼‰ã€‚ã€‚ã€‚</p>
<p>è€Œæœ€é‡è¦çš„æ•™è®­å°±æ˜¯å‘ç°ä¸€æ—¦å¸¦ç€ä¸ªäººæƒ…ç»ªè¿›è¡Œè®¨è®ºçš„æ—¶å€™ï¼Œå¾ˆå®¹æ˜“æ“¦æªèµ°ç«ï¼Œé—®é¢˜ä¸ä½†æ²¡è§£å†³ï¼Œè¿˜è®©å½¼æ­¤éƒ½ä¸çˆ½ã€‚å½±å“å·¥ä½œ~~å›§rz</p>
<h2 id="äº§å“è®¾è®¡"><a href="#äº§å“è®¾è®¡" class="headerlink" title="äº§å“è®¾è®¡"></a>äº§å“è®¾è®¡</h2><p>äº§å“è®¾è®¡æ–¹é¢çš„æ„Ÿæ‚Ÿä¸»è¦æ˜¯ï¼š</p>
<ol>
<li><p>ä»ã€é—®é¢˜ã€æœ¬èº«å‡ºå‘ï¼ˆç”±äºæƒ³è§£å†³ä¸€ä¸ªè¿™ä¹ˆæ ·çš„é—®é¢˜ï¼Œæ‰€ä»¥æ‰åšäº†è¿™ä¹ˆæ ·çš„ä¸€ä¸ªäº§å“ï¼‰ã€‚</p>
</li>
<li><p>åšä½ éœ€è¦çš„è€Œä¸æ˜¯åšä½ æƒ³è¦çš„ï¼ˆfocus on what you need rather than what you wantï¼‰ã€‚</p>
</li>
<li><p><code>ä¸ºäº§å“è®¾è®¡ä¸€å¥—å®Œæ•´çš„ï¼ˆæœ€å¥½æ˜¯å®Œå–„ç”šè‡³æ˜¯å®Œç¾çš„ï¼‰ã€æ¸¸æˆè§„åˆ™ã€ã€‚</code>å¦‚æœè§„åˆ™æ¨¡ç³Šä¸æ¸…æ™°ï¼Œä¸€æ¥ä¼šå¯¼è‡´ä¸šåŠ¡æµç¨‹ä¸Šäº§ç”Ÿ bugï¼ŒäºŒæ¥ä¸åˆ©äºå¼€å‘äººå‘˜çš„å¼€å‘ã€‚</p>
<p> PSï¼š<code>ä½†æ˜¯è§„åˆ™å¯¹ç”¨æˆ·è€Œè¨€åº”è¯¥æ˜¯æ˜¯å‹å–„çš„ã€ç®€å•å¯è¡Œçš„ã€‚</code></p>
</li>
<li><p>å…ˆç¡®å®šä¸šåŠ¡ï¼Œå†ç¡®å®šåŠŸèƒ½ï¼Œç»§è€Œç¡®å®šç•Œé¢ï¼Œæœ€åæ ¹æ®ä¸šåŠ¡ã€åŠŸèƒ½ã€ç•Œé¢UIç­‰éœ€æ±‚ç¡®å®šæŠ€æœ¯æ–¹æ¡ˆã€‚</p>
</li>
<li><p><code>ã€å’Œè°ã€</code>ã€‚äº§å“ï¼ˆä¸»è¦æŒ‡å®¢æˆ·ç«¯ï¼‰åº”è¯¥æœ‰ç»Ÿä¸€çš„é£æ ¼ï¼Œä¸€æ˜¯ UI çš„é£æ ¼ä¸€è‡´ï¼Œå¦‚ é¢œè‰²ã€è‰²è°ƒã€èƒŒæ™¯å›¾ã€æŒ‡ç¤ºå™¨ã€æ–‡å­—å­—ä½“ç­‰å„ç§å…ƒç´ åº”è¯¥æœ‰ä¸€è‡´çš„é£æ ¼ï¼›äºŒæ˜¯äº¤äº’æ–¹å¼çš„é£æ ¼ä¸€è‡´ï¼Œå¦‚ç»Ÿä¸€ä½¿ç”¨ä¸€ç§æ–¹å¼ï¼ˆç‚¹å‡»æˆ–è€…æ»‘åŠ¨ï¼‰æ¥åˆ‡æ¢è§†å›¾ï¼Œå„ç§äº¤äº’è¯­è¨€ï¼ˆUI ä¸­çš„æ–‡æœ¬è¯­è¨€ä»¥åŠæç¤ºç”¨æˆ·æ“ä½œã€ç½‘ç»œè¶…æ—¶ã€ä»»åŠ¡å¤±è´¥ç­‰å„ç§æç¤ºè¯­ï¼‰çš„é£æ ¼è¦ä¸€è‡´ã€‚</p>
</li>
<li><p><code>ã€ç†æ‰€å½“ç„¶ã€</code>ã€‚è®©ç”¨æˆ·ä½¿ç”¨ä½ çš„äº§å“çš„æ—¶å€™ä¼šè§‰å¾—ã€ç†æ‰€å½“ç„¶ï¼Œå°±è¯¥å¦‚æ­¤ã€ï¼Œåƒåœ¨ç½‘é€Ÿå¿«çš„æ—¶å€™ï¼Œä¸€äº›äº¤äº’æ“ä½œåº”è¯¥å¯ä»¥è€ƒè™‘ä¸æç¤ºç”¨æˆ·äº¤äº’çš„è¿›åº¦å§ï¼Ÿ</p>
</li>
</ol>
<a id="more"></a>

<h2 id="æŠ€æœ¯"><a href="#æŠ€æœ¯" class="headerlink" title="æŠ€æœ¯"></a>æŠ€æœ¯</h2><p>æŠ€æœ¯æ–¹é¢çš„æ”¶è·ä¸»è¦æ˜¯ï¼š</p>
<ol>
<li><p>æ›´æ¸…æ¥šäº†è§£ MVC æ¶æ„ã€‚</p>
</li>
<li><p>å¯¹ CoreData çš„è®¾è®¡å’Œä½¿ç”¨çš„è®¤çŸ¥æœ‰äº†è´¨çš„æå‡ï¼Œç‰¹åˆ«æ˜¯å¯¹ CoreData çš„ Relationshipsï¼ˆå…³ç³»ï¼‰ã€<a href="https://developer.apple.com/library/ios/documentation/cocoa/Conceptual/CoreData/Articles/cdMOM.html" target="_blank" rel="noopener external nofollow noreferrer">Entity Inheritance</a>ï¼ˆå®ä½“ç»§æ‰¿ï¼‰ã€Multithreadingï¼ˆå¤šçº¿ç¨‹ï¼‰è¿™ä¸‰æ–¹é¢æœ‰äº†æ·±å…¥çš„è®¤è¯†ã€‚</p>
</li>
<li><p>æ¨¡å—åŒ–è®¾è®¡çš„æ„è¯†æœ‰äº†é•¿è¿›ï¼Œå¦‚ç½‘çƒåœˆå®¢æˆ·ç«¯è®¾è®¡æ—¶ï¼Œæœ‰æ„è¯†åœ°è®¾è®¡ä¸€ä¸ªå•ç‹¬æ¨¡å—ç®¡ç†å®šä½ã€‚</p>
</li>
<li><p>ç•Œé¢ä¸­éœ€è¦ç»å¸¸æ›´æ–°çš„ä¸€äº›å…ƒç´ ä¸è¦å†™æˆ–å†™æ­»åœ¨ xib/storyboard ä¸­ï¼Œå°½é‡ä½¿ç”¨ code æ¥æ§åˆ¶ï¼Œä»¥åŠæ ¹æ®è¿”å›çš„æ•°æ®é€æ­¥æ˜¾ç¤ºå¯¹åº”çš„ç•Œé¢å…ƒç´ ã€‚</p>
</li>
</ol>
<h2 id="å…¶å®ƒåæ€"><a href="#å…¶å®ƒåæ€" class="headerlink" title="å…¶å®ƒåæ€"></a>å…¶å®ƒåæ€</h2><ol>
<li><p>ä»¥å²ä¸ºé‰´ï¼Œä»åˆ«äººçš„é”™è¯¯ä¸­å­¦ä¹ ï¼Œé˜²æ­¢è·Œå…¥åŒä¸€ä¸ªé™·é˜±ã€‚</p>
<p> åƒåœ¨åšæŒæ‹è¿™ä¸ªäº§å“çš„æ—¶å€™ï¼Œè·Ÿç”µä¿¡çš„é¢†å¯¼æœ‰è¿‡æ¥è§¦ï¼Œå‘ç°ä»–ä»¬ä¼šç”±äºçŸ¥è¯†çš„ç›²ç‚¹è€Œé€ æˆæ— çŸ¥ï¼Œç»§è€Œæå‡ºä¹±ä¸ƒå…«ç³Ÿçš„æƒ³æ³•å’Œéœ€æ±‚ã€‚ä¸è¿‡ï¼Œæƒ³æ¥ï¼Œè‡ªå·±ä¹Ÿå¸¸ç”±äºçŸ¥è¯†çš„ç›²ç‚¹è€Œé€ æˆæ— çŸ¥ï¼Œæ‰€ä»¥ä¿æŒå¼€é˜”è§†é‡ï¼Œå¸æ”¶å­¦ä¹ æ–°çŸ¥è¯†æ‰æ˜¯ç‹é“å•Šã€‚</p>
</li>
<li><p><code>ä¿æŒé«˜å·¥ä½œæ•ˆç‡çš„æœ€å¥½æ–¹æ³•æ˜¯ï¼šä¿æŒå¤§è„‘å’Œèº«ä½“çš„æ´»åŠ›æ€§ï¼</code></p>
<p> <code>a. æ¯å¤©å¼€å§‹å·¥ä½œå‰ï¼Œå®šåˆ¶å¥½ä¸€å¤©çš„å·¥ä½œç›®æ ‡å’Œå·¥ä½œé‡ã€‚</code></p>
<p> <code>b. å…»æˆè‰¯å¥½çš„å·¥ä½œè§„å¾‹ï¼Œå¦‚ code ä¸¤å°æ—¶ï¼Œbreak åŠå°æ—¶ï¼Œå‘¨è€Œå¤å§‹ã€‚</code></p>
<p> <code>c. æ‹’ç»éå¿…è¦æ€§çš„åŠ ç­ï¼Œåšæ‹’é•¿æ—¶é—´æ€§çš„åŠ ç­ã€‚</code></p>
</li>
<li><p>æå‡äº§å“çš„ä»·å€¼éœ€è¦æ•´ä¸ªå›¢é˜Ÿçš„å›¢ç»“ååŠ©å’Œå¦è¯šï¼Œç‰¹åˆ«æ˜¯é˜Ÿå‘˜ä»¬çš„å¦è¯šï¼šå› ä¸ºé˜Ÿå‘˜ä»¬åœ¨å¼€å‘è¯¥äº§å“çš„è¿‡ç¨‹<br>ä¸­äº§ç”Ÿçš„æœ‰å…³è¯¥äº§å“çš„æ„Ÿè§‰æ˜¯å¾ˆæœ‰è®¨è®ºä»·å€¼çš„ï¼Œä¹Ÿç‰¹åˆ«æœ‰åŠ©äºäº§å“çš„æ”¹è¿›ã€‚å¾—çŸ¥ä»¥åŠè®¨è®ºä»–ä»¬çš„æ„Ÿè§‰è®¤çŸ¥åï¼Œæ‰å¯<br>è®©ä»–ä»¬è®¤å¯äº§å“ï¼ˆå› ä¸ºäº§å“çš„è®¾è®¡ä»æ­¤ä¹Ÿæœ‰äº†ä»–ä»¬çš„èº«å½±æ‰€åœ¨ï¼‰ï¼Œè€Œåªæœ‰é˜Ÿå‘˜ä»¬è®¤å¯äº†äº§å“ï¼Œé˜Ÿå‘˜ä»¬æ‰ä¼šæœ‰åŠ¨åŠ›å’Œæ¿€æƒ…åšåˆ°æè‡´ã€‚</p>
</li>
</ol>
<p/>
<p align="right">2013-12-03äºåå·¥ä¿¡å…ƒå—åŒº</p>]]></content>
      <categories>
        <category>äººæ–‡</category>
      </categories>
      <tags>
        <tag>2014</tag>
        <tag>äººæ–‡</tag>
      </tags>
  </entry>
  <entry>
    <title>Compile WebRTC for iOS on Mac OS X</title>
    <url>/2014/Compile%20WebRTC%20for%20iOS%20on%20Mac%20OS%20X/readme/</url>
    <content><![CDATA[<h2 id="æˆ‘çš„ç¼–è¯‘ç¯å¢ƒï¼š"><a href="#æˆ‘çš„ç¼–è¯‘ç¯å¢ƒï¼š" class="headerlink" title="æˆ‘çš„ç¼–è¯‘ç¯å¢ƒï¼š"></a>æˆ‘çš„ç¼–è¯‘ç¯å¢ƒï¼š</h2><p>Mac OS X 10.9 + Command Line Toolsï¼ˆXCode 4.6.3ï¼‰</p>
<h2 id="ç¼–è¯‘æ­¥éª¤ï¼š"><a href="#ç¼–è¯‘æ­¥éª¤ï¼š" class="headerlink" title="ç¼–è¯‘æ­¥éª¤ï¼š"></a>ç¼–è¯‘æ­¥éª¤ï¼š</h2><h3 id="ä¸€ã€å®‰è£…ä¾èµ–å·¥å…·"><a href="#ä¸€ã€å®‰è£…ä¾èµ–å·¥å…·" class="headerlink" title="ä¸€ã€å®‰è£…ä¾èµ–å·¥å…·"></a>ä¸€ã€å®‰è£…ä¾èµ–å·¥å…·</h3><ol>
<li><p>å®‰è£… gitã€svnï¼ˆä¸è¿‡ï¼Œä¸€èˆ¬Xcodeè‡ªå¸¦å®‰è£…å¥½äº†ï¼‰</p>
</li>
<li><p>å®‰è£…depot_tools  </p>
<p> a. åœ¨æŒ‡å®šç›®å½•ä¸‹æ‰§è¡Œï¼ˆæˆ‘é€‰æ‹©åœ¨ <code>/Developer</code> ï¼‰ï¼š  </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">svn co http://src.chromium.org/svn/trunk/tools/depot_tools</span><br></pre></td></tr></table></figure>

<p> b. æŠŠdepot_tools æ·»åŠ åˆ° PATHï¼ˆç¯å¢ƒå˜é‡ï¼‰ä¸­ï¼š</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /private/etc/paths</span><br></pre></td></tr></table></figure>

<p> ç„¶åå¾€æ‰“å¼€çš„æ–‡ä»¶æ·»åŠ  <code>depot_tools</code> çš„è·¯å¾„ï¼ˆæˆ‘æ·»åŠ çš„æ˜¯ï¼š`/Developer/depot_tools ï¼‰</p>
</li>
</ol>
<h3 id="äºŒã€ä¸‹è½½æºä»£ç ä»¥åŠç”Ÿæˆé¡¹ç›®æ–‡ä»¶"><a href="#äºŒã€ä¸‹è½½æºä»£ç ä»¥åŠç”Ÿæˆé¡¹ç›®æ–‡ä»¶" class="headerlink" title="äºŒã€ä¸‹è½½æºä»£ç ä»¥åŠç”Ÿæˆé¡¹ç›®æ–‡ä»¶"></a>äºŒã€ä¸‹è½½æºä»£ç ä»¥åŠç”Ÿæˆé¡¹ç›®æ–‡ä»¶</h3><p>1.ä¸‹è½½æºä»£ç </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir webrtc_src</span><br><span class="line">cd webrtc_src</span><br><span class="line">gclient config http://webrtc.googlecode.com/svn/trunk</span><br><span class="line">giclaient sync â€”force	//å¦‚æœä¸­é€”ä¸­æ–­äº†ï¼Œå†æ¬¡æ‰§è¡Œè¯¥å‘½ä»¤</span><br></pre></td></tr></table></figure>

<p>2.ç”Ÿæˆ iOS é¡¹ç›®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd trunk</span><br><span class="line">export GYP_GENERATORS="xcode"	//è®¾ç½®ç¯å¢ƒé…ç½®</span><br><span class="line">./build/gyp_chromium --depth=.  -DOS=ios -Dtarget_arch=arm -Dinclude_tests=0 -Denable_protobuf=0 all.gyp</span><br></pre></td></tr></table></figure>

<p>ï¼ˆå…¶å®ƒç”Ÿæˆä¾‹å­ï¼š<code>./build/gyp_chromium --depth=.  -DOS=ios -Dtarget_arch=arm -Dinclude_tests=0 -Denable_protobuf=0 -Denable_video=1 webrtc/webrtc.gyp</code>ï¼‰</p>
<a id="more"></a>

<h2 id="å…¶å®ƒçŸ¥è¯†ï¼š"><a href="#å…¶å®ƒçŸ¥è¯†ï¼š" class="headerlink" title="å…¶å®ƒçŸ¥è¯†ï¼š"></a>å…¶å®ƒçŸ¥è¯†ï¼š</h2><ol>
<li><p>å…³äº gclient </p>
<p> <a href="http://blog.csdn.net/doon/article/details/9287693" target="_blank" rel="noopener external nofollow noreferrer">http://blog.csdn.net/doon/article/details/9287693</a>  </p>
</li>
<li><p>å…³äºConfiguring gyp</p>
<p> <a href="https://code.google.com/p/chromium/wiki/LinuxBuildInstructions" target="_blank" rel="noopener external nofollow noreferrer">https://code.google.com/p/chromium/wiki/LinuxBuildInstructions</a></p>
<blockquote>
<p>Configuring gyp</p>
<p>See Configuring the Build for details; most often youâ€™ll be changing the GYP_DEFINES options, which is discussed here.</p>
<p>gyp supports a minimal amount of build configuration via the -D flag.</p>
<p><code>build/gyp_chromium -Dflag1=value1 -Dflag2=value2</code></p>
<p>You can store these in the GYP_DEFINES environment variable, separating flags with spaces, as in:</p>
<p><code>export GYP_DEFINES=&quot;flag1=value1 flag2=value2&quot;</code></p>
</blockquote>
</li>
</ol>
<h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><ol>
<li><a href="http://www.cnblogs.com/ProbeStar/p/3411510.html" target="_blank" rel="noopener external nofollow noreferrer">http://www.cnblogs.com/ProbeStar/p/3411510.html</a></li>
<li><a href="https://bitbucket.org/dashboard/overview" target="_blank" rel="noopener external nofollow noreferrer">https://bitbucket.org/dashboard/overview</a></li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2014</tag>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title>CoreData: Entity Inheritance</title>
    <url>/2014/CoreData%EF%BC%9AEntity%20Inheritance/readme/</url>
    <content><![CDATA[<p>åœ¨ä¸ºã€æŒæ‹ã€iOS å®¢æˆ·ç«¯è®¾è®¡æ•°æ®åº“çš„æ—¶å€™ï¼Œå¤§å¹…åº¦ä½¿ç”¨äº† CoreData ä¸­çš„ã€Entity Inheritanceã€è¿™ä¸ªç‰¹æ€§ï¼Œç”±æ­¤å¾ˆå¥½åœ°è§£å†³äº†å¤šä¸ªå®ä½“æœ‰å…±åŒ property çš„é—®é¢˜ï¼Œè€Œç‰¹åˆ«å€ŸåŠ©å®ä½“ç±»åŒ–ï¼ˆç”±å®ä½“ç”Ÿæˆå¯¹åº”çš„ç±»ï¼‰åçš„åŠ¨æ€æ€§ï¼Œè§£å†³äº†æ•°æ®åŠ¨æ€ä¼ é€’çš„é—®é¢˜ã€‚è¿™ä¹‹åï¼Œå¯¹ã€Entity Inheritanceã€ç®—æ˜¯æœ‰äº†ç»éªŒï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å½’çº³æ€»ç»“ï¼Œç°åœ¨æ€»ç»“å¦‚ä¸‹ï¼š</p>
<a id="more"></a>

<p>åœ¨ CoreData ä¸­ï¼Œã€å®ä½“çš„ç»§æ‰¿ã€ï¼ˆentity inheritanceï¼‰ç±»ä¼¼äºã€ç±»çš„ç»§æ‰¿ã€ï¼ˆclass inheritanceï¼‰ï¼Œå¦‚æœä½ æœ‰è‹¥å¹²ä¸ªç›¸ä¼¼çš„å®ä½“ï¼Œå°±å¯ä»¥æŠ½ç¦»å‡ºå®ƒä»¬å…±åŒçš„ property (æ³¨æ„ï¼šproperty åŒ…æ‹¬äº†Attributes å’ŒRelationships ä¸¤æ–¹é¢) ä½œä¸ºä¸€ä¸ªã€çˆ¶å®ä½“ã€ï¼Œç„¶åç»§æ‰¿è¯¥ã€çˆ¶å®ä½“ã€ï¼Œè€Œä¸æ˜¯åœ¨è®©å¤šä¸ªå®ä½“å»é‡å¤æè¿°å…±åŒçš„propertyï¼Œå¯¼è‡´æ€§èƒ½çš„ä¸‹é™ã€‚ä¾‹å¦‚ï¼Œæœ‰å¦‚ä¸‹ä¸¤ä¸ªå®ä½“ï¼š</p>
<p><img src="/2014/CoreData%EF%BC%9AEntity%20Inheritance/readme/entity_teacher_student.png" alt=""></p>
<p>å¦‚å›¾ï¼ŒTeacherå®ä½“å’Œ Student å®ä½“å…·æœ‰ç›¸åŒçš„attributeï¼Œæˆ‘ä»¬å¯ä»¥æŠ½ç¦»å‡ºæ¥ä½œä¸ºä¸€ä¸ªçˆ¶å®ä½“ï¼Œå†è®©å®ƒä»¬ç»§æ‰¿çˆ¶å®ä½“ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="/2014/CoreData%EF%BC%9AEntity%20Inheritance/readme/entity_person_teacher_student.png" alt=""></p>
<p>è¿™æ · Teacher å®ä½“å’Œ Student å®ä½“éƒ½ç»§æ‰¿äº† name å’Œ sex è¿™ä¸¤ä¸ªattributeã€‚</p>
<p>é‚£ä¹ˆè¯¥å¦‚ä½•è®¾ç½®çˆ¶å®ä½“å‘¢ï¼Ÿ</p>
<ol>
<li><p>ä½¿ç”¨Xcodeçš„å¯è§†åŒ–å»ºæ¨¡å·¥å…·æ¥åˆ›å»ºï¼š</p>
<p> <img src="/2014/CoreData%EF%BC%9AEntity%20Inheritance/readme/xcode_entity_inheritance.png" alt=""></p>
</li>
<li><p>ä½¿ç”¨ code æ¥åˆ›å»ºã€‚ä½†è¿™éœ€è¦è‡ªé¡¶å‘ä¸‹æ¥æ‰§è¡Œï¼Œå³ä¸€ä¸ªå®ä½“ä¸èƒ½ç›´æ¥è®¾ç½®çˆ¶å®ä½“ï¼Œè€Œåªèƒ½è®©çˆ¶å®ä½“å»è®¾ç½®å­å®ä½“ã€‚å…·ä½“æ“ä½œæ˜¯ï¼šæŠŠ Teacher å®ä½“ å’Œ Student å®ä½“æ·»åŠ åˆ°å­å®ä½“æ•°ç»„ä¸­ï¼Œç„¶åè®©ç›®æ ‡çˆ¶å®ä½“ Person è°ƒç”¨ <a href="https://developer.apple.com/library/ios/documentation/cocoa/Reference/CoreDataFramework/Classes/NSEntityDescription_Class/NSEntityDescription.html#jumpTo_25" target="_blank" rel="noopener external nofollow noreferrer"><code>setSubentities:</code></a> æ¥è¿›è¡Œè®¾ç½®ã€‚</p>
</li>
</ol>
<hr>
<h3 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h3><ol>
<li><a href="https://developer.apple.com/library/ios/documentation/cocoa/Conceptual/CoreData/Articles/cdMOM.html" target="_blank" rel="noopener external nofollow noreferrer">https://developer.apple.com/library/ios/documentation/cocoa/Conceptual/CoreData/Articles/cdMOM.html</a></li>
<li><a href="http://www.objc.io/issue-4/core-data-models-and-model-objects.html" target="_blank" rel="noopener external nofollow noreferrer">http://www.objc.io/issue-4/core-data-models-and-model-objects.html</a></li>
<li><a href="http://blog.csdn.net/focusjava/article/details/9949499" target="_blank" rel="noopener external nofollow noreferrer">http://blog.csdn.net/focusjava/article/details/9949499</a></li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2014</tag>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title>Objective-C: class method VS static method</title>
    <url>/2014/Objective-C%EF%BC%9AClass%20Method%20vs%20Static%20Method/readme/</url>
    <content><![CDATA[<p>åœ¨æ¯”è¾ƒä¹‹å‰ï¼Œä½ åº”è¯¥äº†è§£ä»¥ä¸‹çŸ¥è¯†ï¼š</p>
<ol>
<li><a href="http://blog.csdn.net/likendsl/article/details/7566031" target="_blank" rel="noopener external nofollow noreferrer">Objcetive-Cçš„å‡½æ•°è°ƒç”¨æœºåˆ¶</a></li>
<li><a href="http://blog.devtang.com/blog/2013/10/15/objective-c-object-model/" target="_blank" rel="noopener external nofollow noreferrer">Objective-Cçš„å¯¹è±¡æ¨¡å‹</a></li>
<li><a href="http://blog.leezhong.com/ios/2013/08/03/dynamic-tips-and-tricks-with-objective-c.html" target="_blank" rel="noopener external nofollow noreferrer">Objective-Cçš„åŠ¨æ€ç‰¹æ€§</a></li>
</ol>
<hr>
<p>åœ¨é˜…è¯»å®Œæ¯•ï¼Œäº†è§£çŸ¥é“Objective-C ä¸­çš„ <em>Messageã€Objectã€Classã€MetaClassã€Methodï¼ˆSEL-IMP)</em> çš„é‡è¦æ¦‚å¿µåï¼Œç°åœ¨å¼€å§‹æ¯”è¾ƒï¼</p>
<p>ä¸‹é¢æ˜¯æ¥è‡ª WIKI çš„å¯¹ static method çš„<a href="http://en.wikipedia.org/wiki/Method_(computer_programming)#Static_methods" target="_blank" rel="noopener external nofollow noreferrer">å®šä¹‰</a>ï¼š</p>
<blockquote>
<p>Static methods neither require an instance of the class nor can they implicitly access the data (or this, self, Me, etc.) of such an instance. A static method is distinguished in some programming languages with the static keyword placed somewhere in the methodâ€™s signature.</p>
</blockquote>
<blockquote>
<p>In statically typed languages such as Java, static methods are called â€œstaticâ€ because they are resolved statically (i.e. at compile time) based on the class they are called on and not dynamically as in the case with instance methods which are resolved polymorphically based on the runtime type of the object. Therefore, static methods cannot be overridden.</p>
</blockquote>
<p>ä»å®šä¹‰å¯ä»¥çœ‹å‡ºï¼ŒObjective-C çš„ class method æ ¹æœ¬ä¸æ˜¯ static methodï¼Œè€Œå®é™…ä¸Šï¼Œ<strong>Objective-C ä¹Ÿä¸å­˜åœ¨ static methodï¼</strong>ï¼ˆå°½ç®¡ class method å› ä¸ºç”¨æ³•è€Œçœ‹ä¼¼ static methodï¼Œä½†å®ƒä»¬æ˜¯æœ‰æœ¬è´¨çš„å·®åˆ«çš„ã€‚ï¼‰</p>
<p>é‚£ä¹ˆå®ƒä»¬çš„åŒºåˆ«æ˜¯ï¼Ÿï¼ˆå‡ºäºå¥½å¥‡å¿ƒï¼Œæˆ‘ä»¬å‡è®¾ä¸‹ Objective-C ä¸­æœ‰ static method â†’ â†’ï¼‰</p>
<a id="more"></a>

<p>ä»å®šä¹‰å¯çŸ¥ï¼Œ<strong>static method æ˜¯ä¸å¯ç»§æ‰¿(inherit)å’Œè¦†ç›–(override)çš„ï¼›</strong></p>
<p>ä½†æ˜¯ï¼Œ<strong>class method æ˜¯å¯ä»¥ç»§æ‰¿(inherit)å’Œè¦†ç›–(override)çš„ã€‚</strong></p>
<p>è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š  </p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Animal</span> : <span class="title">NSObject</span></span></span><br><span class="line">+ (<span class="keyword">id</span>)newAnimal;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Animal</span></span></span><br><span class="line">+ (<span class="keyword">id</span>)newAnimal</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"now new an animal..."</span>);</span><br><span class="line">    <span class="keyword">return</span> [[<span class="keyword">self</span> alloc] init];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Dock</span> : <span class="title">Animal</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Dock</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Chicken</span> : <span class="title">Animal</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Chicken</span></span></span><br><span class="line">+ (<span class="keyword">id</span>)newAnimal</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">id</span> animal = [<span class="keyword">super</span> newAnimal];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"now new a Chicken..."</span>);</span><br><span class="line">    <span class="keyword">return</span> animal;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Test</span></span><br><span class="line">Dock *dock = [Dock newAnimal];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"---------------åˆ†å‰²çº¿----------------"</span>);</span><br><span class="line">Chicken *chicken = [Chicken newAnimal];</span><br><span class="line">... etc ...</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœæ˜¯ï¼š  </p>
<pre><code>now new an animal...
---------------åˆ†å‰²çº¿----------------
now new an animal...
now new a Chicken...</code></pre><p>ç”±ç»“æœå¯ä»¥éªŒè¯äº†class method æ˜¯å¯ä»¥ç»§æ‰¿(inherit)å’Œè¦†ç›–(override)çš„ã€‚</p>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆ class method æ˜¯å¯ä»¥ç»§æ‰¿å’Œè¦†ç›–ï¼Ÿå› ä¸ºï¼š</p>
<p>åœ¨ Objective-C ä¸­ï¼Œclass å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåªä¸è¿‡å®ƒæ˜¯ä¸€ä¸ªç‰¹åˆ«çš„å¯¹è±¡â€”â€”ç”± MetaClass ç”Ÿæˆçš„ä¸€ä¸ªå®ä¾‹ï¼ˆan instance of metaclassï¼‰ï¼Œè€Œ object åˆ™æ˜¯ç”± Class ç”Ÿæˆçš„ä¸€ä¸ªå®ä¾‹ã€‚ï¼ˆä½ å¯ä»¥åƒå‘é€æ¶ˆæ¯ç»™ object é‚£æ ·å‘é€æ¶ˆæ¯ç»™ class ä»¥è°ƒç”¨å¯¹åº”çš„ class methodï¼Œå¦‚ä¸Šé¢çš„<code>[Chicken newAnimal]</code>ï¼Œå‘é€ä¸€æ¡æ¶ˆæ¯ç»™ <code>Chicken</code> ç±»ä»¥è°ƒç”¨ <code>newAnimal</code> è¿™ä¸ªclass methodã€‚ï¼‰</p>
<p>è€Œ MetaClass åˆ™æ˜¯ Objective-C ä¸­æœ€åŸºæœ¬çš„ç±»ã€‚Objectã€Classã€MetaClass ä¸‰è€…çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šï¼ˆè¯¥å›¾ç‰‡æ¥è‡ª<a href="http://www.sealiesoftware.com/blog/archive/2009/04/14/objc_explain_Classes_and_metaclasses.html" target="_blank" rel="noopener external nofollow noreferrer">è¿™é‡Œ</a>ï¼‰</p>
<p><img src="/2014/Objective-C%EF%BC%9AClass%20Method%20vs%20Static%20Method/readme/class_diagram.png" alt="class_diagram"></p>
<p>æ‰€ä»¥ï¼Œ<strong>class method å…¶å®å°±æ˜¯ MetaClass çš„ instance methodã€‚</strong>è¿™å°±æ˜¯å®ƒçš„æœ¬è´¨ï¼Œä¹Ÿæ˜¯å¯ä»¥ç»§æ‰¿å’Œè¦†ç›–çš„åŸå› ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><ol>
<li><a href="http://programmers.stackexchange.com/questions/191856/what-is-a-static-method-compared-to-instance-class-private-public-methods" target="_blank" rel="noopener external nofollow noreferrer">http://programmers.stackexchange.com/questions/191856/what-is-a-static-method-compared-to-instance-class-private-public-methods</a></li>
<li><a href="http://stackoverflow.com/questions/15965865/static-method-which-isnt-class-2.method-in-objective-c" target="_blank" rel="noopener">http://stackoverflow.com/questions/15965865/static-method-which-isnt-class-2.method-in-objective-c</a></li>
<li><a href="http://stackoverflow.com/questions/8089186/whats-the-difference-between-class-method-and-static-method" target="_blank" rel="noopener">http://stackoverflow.com/questions/8089186/whats-the-difference-between-class-method-and-static-method</a>  </li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2014</tag>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title>svn2gitæ€»ç»“</title>
    <url>/2016/svn2git%E6%80%BB%E7%BB%93/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬æ–‡ä¸»è¦æ€»ç»“äº†<code>svn</code>è¿ç§»åˆ°<code>git</code>çš„æ­¥éª¤ã€‚</p>
<a id="more"></a>

<h2 id="1-ä¸‹è½½è¿ç§»å·¥å…·subgit"><a href="#1-ä¸‹è½½è¿ç§»å·¥å…·subgit" class="headerlink" title="1. ä¸‹è½½è¿ç§»å·¥å…·subgit"></a>1. ä¸‹è½½è¿ç§»å·¥å…·<a href="https://subgit.com/" target="_blank" rel="noopener external nofollow noreferrer">subgit</a></h2><p><code>subgit</code>æ˜¯ä¸€ä¸ªåŸºäºjavaå¼€å‘çš„svn2gitå•†ä¸šè¿ç§»å·¥å…·ï¼Œå¤¸å¹³å°ï¼Œå…¶<code>importåŠŸèƒ½</code>ï¼ˆä¸€æ¬¡æ€§æŠŠä»£ç ä»<code>svn</code>è¿ç§»åˆ°<code>git</code>ï¼‰æ˜¯å…è´¹çš„ï¼Œå…¶ä»–åŠŸèƒ½ï¼ˆä¸»è¦æ˜¯å„ç§<code>mirror</code>åŠŸèƒ½ï¼‰åˆ™æ˜¯æ”¶è´¹çš„ã€‚</p>
<h2 id="2-è¿ç§»å‰çš„å‡†å¤‡å·¥ä½œ"><a href="#2-è¿ç§»å‰çš„å‡†å¤‡å·¥ä½œ" class="headerlink" title="2. è¿ç§»å‰çš„å‡†å¤‡å·¥ä½œ"></a>2. è¿ç§»å‰çš„å‡†å¤‡å·¥ä½œ</h2><p>ç”±äº<code>svn</code>ç”¨æˆ·æ ¼å¼ï¼ˆåªæœ‰ç”¨æˆ·åï¼‰ä¸<code>git</code>ç”¨æˆ·æ ¼å¼ï¼ˆç”±ç”¨æˆ·åå’Œç”¨æˆ·é‚®ç®±ç»„æˆï¼‰æ˜¯ä¸ä¸€æ ·çš„ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·æ˜ å°„æ–‡ä»¶<code>authors.txt</code>ï¼Œä»¥åœ¨è¿ç§»è®°å½•æ—¶è¿›è¡Œè½¬æ¢ã€‚<code>authors.txt</code>çš„å†…å®¹æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">york &#x3D; york &lt;york@example.com&gt;</span><br><span class="line">kiii &#x3D; kitty &lt;kitty@example.com&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚ä½•å¿«é€Ÿè·å¾—<code>svn</code>ä»“åº“é‡Œæ›¾ç»æäº¤è¿‡è®°å½•çš„çš„ç”¨æˆ·å‘¢ï¼Ÿå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¡Œè·å¾—ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd path/to/svn_repo</span><br><span class="line">svn log --quiet | grep -E "r[0-9]+ \| .+ \|" | cut -d'|' -f2 | sed 's/ //g' | sort | uniq</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ç›´æ¥ä»è¿œç¨‹ä»“åº“è·å¾—ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">svn <span class="built_in">log</span> --quiet http://path/to/root/of/project | grep -E <span class="string">"r[0-9]+ \| .+ \|"</span> | cut -d<span class="string">'|'</span> -f2 | sed <span class="string">'s/ //g'</span> | sort | uniq</span></span><br></pre></td></tr></table></figure>

</blockquote>
<h2 id="3-å¼€å§‹è¿ç§»"><a href="#3-å¼€å§‹è¿ç§»" class="headerlink" title="3. å¼€å§‹è¿ç§»"></a>3. å¼€å§‹è¿ç§»</h2><ol>
<li><p>ä½¿ç”¨subgitçš„importåŠŸèƒ½ï¼Œä¸€æ¬¡æ€§æŠŠä»£ç ä»svnè¿ç§»åˆ°git</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd svn2git_workspace</span><br><span class="line">path/to/subgit-3.2.2/bin/subgit import --non-interactive --default-domain YOUR_DOMAIN --authors-file path/to/authors.txt --trunk trunk --tags tags --branches branches --username SVN_USERNAME --password SVN_PASSWORD --svn-url http://svn.example.com/path/to/repo repo.git</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚æœè¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°é”™è¯¯å¯¼è‡´ä¸­æ–­ï¼Œæ‰§è¡Œ <code>subgit import repo.git</code>è¿›è¡Œæ¢å¤</p>
</blockquote>
</li>
<li><p>å…‹éš†ä¸€ä¸ªè£¸åº“ï¼Œå»æ‰æ— ç”¨çš„svnä¿¡æ¯</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone --bare repo.git repo-clone.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¨é€ä»£ç åˆ°gitè¿œç¨‹ä»“åº“</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd repo-clone.git</span><br><span class="line">git remote add gitlab http://gitlab.example.com/path/to/repo.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¨é€éœ€è¦çš„åˆ†æ”¯åˆ°è¿œç¨‹å‚è€ƒ</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">//æ¨é€æ‰€æœ‰æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</span><br><span class="line">git push gitlab --all </span><br><span class="line"></span><br><span class="line">//æˆ–è€…</span><br><span class="line">//æ¨é€æŒ‡å®šåˆ†æ”¯</span><br><span class="line">git push gitlab master:master</span><br><span class="line">git push gitlab v1.3.0:develop</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¨é€æ‰€æœ‰æœ¬åœ°tagåˆ°è¿œç¨‹ä»“åº“</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push gitlab --tags</span><br></pre></td></tr></table></figure>

</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2016</tag>
        <tag>æ•™ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>ATS è‡ªåŠ¨å¼€å¯å…³é—­</title>
    <url>/2017/ATS%20%E8%87%AA%E5%8A%A8%E5%BC%80%E5%90%AF%E5%85%B3%E9%97%AD/readme/</url>
    <content><![CDATA[<p>ç”±äºé¡¹ç›®çš„æ­£å¼ç½‘ç»œç¯å¢ƒçš„ host æ˜¯èµ°åŸŸåï¼Œèƒ½æ”¯æŒ https ï¼Œæµ‹è¯•ç½‘ç»œç¯å¢ƒçš„ host æ˜¯èµ° IP ï¼Œæ— æ³•æ”¯æŒ https ï¼Œå¯¼è‡´åœ¨åš ATS æ”¯æŒçš„æ—¶å€™ï¼Œé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šåœ¨ debug è¿‡ç¨‹éœ€è¦åˆ‡æ¢ç½‘ç»œç¯å¢ƒçš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦æ‰‹åŠ¨å»å¼€å¯æˆ–è€…å…³é—­ ATS ã€‚ä¸ºäº†èŠ‚çœè¿™äº›æ—¶é—´ï¼Œå†™äº†ä¸€ä¸ªè„šæœ¬å»è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè®© ATS æ ¹æ®ç½‘ç»œç¯å¢ƒçš„å€¼è‡ªåŠ¨å»å¼€å¯æˆ–è€…å…³é—­ã€‚ä¸‹é¢å°†ä¼šåˆ—å‡ºå…·ä½“æ­¥éª¤ã€‚</p>
<a id="more"></a>

<p>1.åœ¨ [<code>Your Target</code>-Build Settings -Preprocessor Macros] æ·»åŠ ä½ çš„ç¯å¢ƒå®å˜é‡ <code>NETWORK_FOR_PRODUCTION</code> ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/2017/ATS%20%E8%87%AA%E5%8A%A8%E5%BC%80%E5%90%AF%E5%85%B3%E9%97%AD/readme/Preprocessor_Macros_Image.png" alt="Preprocessor_Macros_Image.png"></p>
<p>2.åœ¨é¡¹ç›®çš„ <code>Info.plist</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>NSAppTransportSecurity</code> ï¼Œç±»å‹ä¸ºå­—å…¸ï¼›ç„¶ååœ¨å­—å…¸ä¸­æ·»åŠ ä¸€ä¸ª <code>NSAllowsArbitraryLoads</code> ï¼Œç±»å‹ä¸ºå¸ƒå°”å€¼ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>NSAppTransportSecurity<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">key</span>&gt;</span>NSAllowsArbitraryLoads<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">false</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å…³äºé…ç½®çš„å‘<br>åœ¨ iOS 10ä¸‹ï¼Œå¤šäº† <code>NSAllowsArbitraryLoadsForMedia</code> å’Œ <code>NSAllowsArbitraryLoadsInWebContent</code> ä¸¤ä¸ªé€‰é¡¹ã€‚<br>å½“è¿™2ä¸ªé€‰é¡¹ä¸ <code>NSAllowsArbitraryLoads</code> é€‰é¡¹åŒæ—¶å­˜åœ¨æ—¶ï¼Œåœ¨ iOS 10 ä¸‹ï¼Œä¼šä¼˜å…ˆçœ‹ <code>NSAllowsArbitraryLoadsForMedia</code> å’Œ <code>NSAllowsArbitraryLoadsInWebContent</code> çš„é…ç½®ï¼Œè€Œå¿½ç•¥æ‰  <code>NSAllowsArbitraryLoads</code>ã€‚<br>åŸºäºä»¥ä¸Šè§„åˆ™ï¼Œé‡åˆ°çš„å‘æ˜¯ï¼šæˆ‘è®¾ç½®äº† <code>NSAllowsArbitraryLoadsInWebContent</code> ä¸º <code>true</code> ï¼ˆå…è®¸æµè§ˆå™¨åŠ è½½httpç½‘é¡µï¼‰ï¼Œè®¾ç½®äº† <code>NSAllowsArbitraryLoads</code> ä¸º <code>false</code> ï¼ˆå…³é—­ATSï¼‰ï¼Œåœ¨ iOS 10 ä¸‹ï¼Œè¿è¡ŒAPPï¼ŒATS å®é™…ä¸Šå¹¶æ²¡æœ‰è¢«å…³é—­ï¼Œå› ä¸º iOS 10 ä¼˜å…ˆçœ‹äº† <code>NSAllowsArbitraryLoadsInWebContent</code> çš„é…ç½®ï¼Œè®¤ä¸º ATS æ˜¯å¼€å¯çš„ï¼Œ è€Œ <code>NSAllowsArbitraryLoads</code> çš„é…ç½®æ˜¯ç›´æ¥è¢«å¿½ç•¥äº†ã€‚</p>
</blockquote>
<p>3.åœ¨ [<code>Your Target</code>-Build Phases-Run Script] æ·»åŠ ä»¥ä¸‹è„šæœ¬ä»£ç å³å¯ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">NETWORK_FOR_PRODUCTION=`echo $&#123;GCC_PREPROCESSOR_DEFINITIONS&#125; | awk '&#123;print $4&#125;'  | awk -F'[=]' '&#123;print $2&#125;'`</span><br><span class="line"></span><br><span class="line">infoplist="$BUILT_PRODUCTS_DIR/$INFOPLIST_PATH"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ›´æ”¹plistæ–‡ä»¶çš„ATSé…ç½®</span></span><br><span class="line">if [[ $&#123;NETWORK_FOR_PRODUCTION&#125; == 1 ]]; then</span><br><span class="line">    echo "æ‰“å¼€ATS"</span><br><span class="line">    /usr/libexec/PlistBuddy -c "Set :NSAppTransportSecurity:NSAllowsArbitraryLoads false" $&#123;infoplist&#125;</span><br><span class="line">else</span><br><span class="line">    echo "å…³é—­ATS"</span><br><span class="line">    /usr/libexec/PlistBuddy -c "Set :NSAppTransportSecurity:NSAllowsArbitraryLoads true" $&#123;infoplist&#125;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>Run Script</code>çš„é…ç½®å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/2017/ATS%20%E8%87%AA%E5%8A%A8%E5%BC%80%E5%90%AF%E5%85%B3%E9%97%AD/readme/Run_Script_Config_Image.png" alt="Run_Script_Config_Image.png"></p>
<blockquote>
<p>å…³é”®è„šæœ¬ä»£ç è¯¦è§£ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">NETWORK_FOR_PRODUCTION=`echo $&#123;GCC_PREPROCESSOR_DEFINITIONS&#125; | awk '&#123;print $4&#125;'  | awk -F'[=]' '&#123;print $2&#125;'`</span><br></pre></td></tr></table></figure>
<p>æ­¤å¥ä»£ç æ˜¯é€šè¿‡awkè§£æè·å– <code>NETWORK_FOR_PRODUCTION</code> çš„å…·ä½“å€¼ï¼š0æˆ–è€…1<br>PSï¼šå¦‚æœä½ éœ€è¦æ ¹æ®å…¶ä»–å˜é‡æ¥è®¾ç½® ATS ï¼Œåˆ™éœ€è¦è‡ªå·±è°ƒæ•´ä¸Šè¿°è¯­å¥ï¼Œè·å–ä½ æŒ‡å®šçš„å˜é‡çš„å€¼ã€‚</p>
</blockquote>
<p>4.å¦‚å¸¸è¿è¡Œè°ƒè¯•ä»£ç å³å¯~enjoyğŸ˜„</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>æ•™ç¨‹</tag>
        <tag>2017</tag>
      </tags>
  </entry>
  <entry>
    <title>Swiftçš„å­—é¢é‡ç±»å‹ï¼ˆLiteral Typeï¼‰å’Œå­—é¢é‡åè®®ï¼ˆLiteral Protocolï¼‰</title>
    <url>/2017/Swift%E7%9A%84%E5%AD%97%E9%9D%A2%E9%87%8F%E7%B1%BB%E5%9E%8B%EF%BC%88Literal%20Type%EF%BC%89%E5%92%8C%E5%AD%97%E9%9D%A2%E9%87%8F%E5%8D%8F%E8%AE%AE%EF%BC%88Literal%20Protocol%EF%BC%89/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½ è‡ªå®šä¹‰äº†ä¸€ä¸ªæ•°æ®ç±»å‹åï¼Œæ˜¯å¦å¸Œæœ›åƒ<code>var num: Int = 10</code>è¿™æ ·é€šè¿‡ä¸€ä¸ªå­—é¢é‡åˆå§‹åŒ–ä¸€ä¸ªç±»å‹çš„å®ä¾‹å‘¢ï¼Ÿæ˜¯çš„è¯ï¼Œè¯·çœ‹ä¸‹æ–‡è¯¦ç»†ä»‹ç»ã€‚</p>
<a id="more"></a>

<h2 id="ä¸€ã€å­—é¢é‡ç±»å‹ï¼ˆLiteral-Typeï¼‰"><a href="#ä¸€ã€å­—é¢é‡ç±»å‹ï¼ˆLiteral-Typeï¼‰" class="headerlink" title="ä¸€ã€å­—é¢é‡ç±»å‹ï¼ˆLiteral Typeï¼‰"></a>ä¸€ã€å­—é¢é‡ç±»å‹ï¼ˆLiteral Typeï¼‰</h2><p>åœ¨ä»‹ç»å­—é¢é‡ç±»å‹å‰ï¼Œæˆ‘ä»¬å…ˆè®¤è¯†ä¸‹å­—é¢é‡çš„æ¦‚å¿µã€‚</p>
<p><strong>æ‰€è°“å­—é¢é‡ï¼Œæ˜¯æŒ‡ä¸€æ®µèƒ½è¡¨ç¤ºç‰¹å®šç±»å‹çš„å€¼ï¼ˆå¦‚æ•°å€¼ã€å¸ƒå°”å€¼ã€å­—ç¬¦ä¸²ï¼‰çš„æºç è¡¨è¾¾å¼ï¼ˆit is the source code representation of a fixed valueï¼‰</strong>ã€‚æ¯”å¦‚ä¸‹é¢ä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> num: <span class="type">Int</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">let</span> flag: <span class="type">Bool</span> = <span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> str: <span class="type">String</span> = <span class="string">"hello"</span></span><br></pre></td></tr></table></figure>

<p>ä¾‹å­ä¸­çš„<code>10</code>ã€<code>true</code>ã€<code>hello</code>éƒ½æ˜¯å­—é¢é‡ã€‚</p>
<p>é‚£ä»€ä¹ˆæ˜¯å­—é¢é‡ç±»å‹å‘¢ï¼Ÿ</p>
<p><strong>å­—é¢é‡ç±»å‹å°±æ˜¯æ”¯æŒé€šè¿‡å­—é¢é‡è¿›è¡Œå®ä¾‹åˆå§‹åŒ–çš„æ•°æ®ç±»å‹</strong>ï¼Œå¦‚ä¾‹å­ä¸­çš„<code>Int</code>ã€<code>Bool</code>ã€<code>String</code>ç±»å‹ã€‚</p>
<p>åœ¨Swiftä¸­ï¼Œå…¶çš„å­—é¢é‡ç±»å‹æœ‰ï¼š</p>
<ul>
<li>æ‰€æœ‰çš„æ•°å€¼ç±»å‹: Intã€Doubleã€Floatä»¥åŠå…¶çš„ç›¸å…³ç±»å‹ï¼ˆå¦‚UIntã€Int16ã€Int32ç­‰ï¼‰</li>
<li>å¸ƒå°”å€¼ç±»å‹ï¼šBool</li>
<li>å­—ç¬¦ä¸²ç±»å‹ï¼šString</li>
<li>ç»„åˆç±»å‹ï¼šArrayã€Dictionaryã€Set</li>
<li>ç©ºç±»å‹ï¼šNil</li>
</ul>
<h2 id="äºŒã€å­—é¢é‡åè®®ï¼ˆLiteral-Protocolï¼‰"><a href="#äºŒã€å­—é¢é‡åè®®ï¼ˆLiteral-Protocolï¼‰" class="headerlink" title="äºŒã€å­—é¢é‡åè®®ï¼ˆLiteral Protocolï¼‰"></a>äºŒã€å­—é¢é‡åè®®ï¼ˆLiteral Protocolï¼‰</h2><p>Swiftæ˜¯å¦‚ä½•è®©ä¸Šè¿°çš„æ•°æ®ç±»å‹å…·æœ‰å­—é¢é‡åˆå§‹åŒ–çš„èƒ½åŠ›å‘¢ï¼Ÿ</p>
<p><strong>ç­”æ¡ˆæ˜¯ï¼šå®ç°æŒ‡å®šçš„å­—é¢é‡åè®®ã€‚</strong></p>
<p>æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ä¹Ÿèƒ½é€šè¿‡å­—é¢é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œåªè¦å®ç°å¯¹åº”çš„å­—é¢é‡åè®®å³å¯ã€‚</p>
<p>Swiftä¸­çš„å­—é¢é‡åè®®ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p>
<ul>
<li><code>ExpressibleByNilLiteral</code> // nilå­—é¢é‡åè®®</li>
<li><code>ExpressibleByIntegerLiteral</code> // æ•´æ•°å­—é¢é‡åè®®</li>
<li><code>ExpressibleByFloatLiteral</code> // æµ®ç‚¹æ•°å­—é¢é‡åè®®</li>
<li><code>ExpressibleByBooleanLiteral</code> // å¸ƒå°”å€¼å­—é¢é‡åè®®</li>
<li><code>ExpressibleByStringLiteral</code> // å­—ç¬¦ä¸²å­—é¢é‡åè®®</li>
<li><code>ExpressibleByArrayLiteral</code> // æ•°ç»„å­—é¢é‡åè®®</li>
<li><code>ExpressibleByDictionaryLiteral</code> // å­—å…¸å­—é¢é‡åè®®</li>
</ul>
<p>å…¶ä¸­ï¼Œ <code>ExpressibleByStringLiteral</code> å­—ç¬¦ä¸²å­—é¢é‡åè®®ç›¸å¯¹å¤æ‚ä¸€ç‚¹ï¼Œè¯¥åè®®è¿˜ä¾èµ–äºä»¥ä¸‹2ä¸ªåè®®ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå®ç°<code>ExpressibleByStringLiteral</code>æ—¶ï¼Œè¿˜éœ€è¦å®ç°ä¸‹é¢2ä¸ªåè®®ï¼‰:</p>
<ul>
<li><code>ExpressibleByUnicodeScalarLiteral</code></li>
<li><code>ExpressibleByExtendedGraphemeClusterLiteral</code></li>
</ul>
<blockquote>
<p>åœ¨ Swift3.0 ä¹‹å‰ï¼Œä¸Šè¿°çš„å­—é¢é‡åè®®çš„åç§°å¯¹åº”å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>NilLiteralConvertible</code></li>
<li><code>IntegerLiteralConvertible</code></li>
<li><code>FloatLiteralConvertible</code></li>
<li><code>BooleanLiteralConvertible</code></li>
<li><code>StringLiteralConvertible</code></li>
<li><code>ArrayLiteralConvertible</code></li>
<li><code>DictionaryLiteralConvertible</code></li>
</ul>
</blockquote>
<h2 id="ä¸‰ã€å­—é¢é‡åè®®ä¾‹å­ï¼ˆLiteral-Protocol-Exampleï¼‰"><a href="#ä¸‰ã€å­—é¢é‡åè®®ä¾‹å­ï¼ˆLiteral-Protocol-Exampleï¼‰" class="headerlink" title="ä¸‰ã€å­—é¢é‡åè®®ä¾‹å­ï¼ˆLiteral Protocol Exampleï¼‰"></a>ä¸‰ã€å­—é¢é‡åè®®ä¾‹å­ï¼ˆLiteral Protocol Exampleï¼‰</h2><p>ä¸‹é¢å°†ä¼šé€šè¿‡å…·ä½“ä¾‹å­ä¸ºå¤§å®¶æ¼”ç¤ºå¦‚ä½•é€šè¿‡å®ç°ä¸Šè¿°çš„å­—é¢é‡åè®®ã€‚</p>
<blockquote>
<p>ä¸‹é¢çš„ä¾‹å­å‡å·²ç»ä¸Šä¼ GitHubï¼ŒæŸ¥çœ‹ä¸‹è½½è¯·ç‚¹å‡»<a href="https://github.com/YK-Unit/Swift-LiteralProtocolExample" target="_blank" rel="noopener">LiteralProtocolExample</a></p>
</blockquote>
<h3 id="1ã€å®šä¹‰Moenyç±»å‹ï¼Œå®ç°é€šè¿‡æ•´æ•°å­—é¢é‡ã€æµ®ç‚¹æ•°å­—é¢é‡ã€å­—ç¬¦ä¸²å­—é¢é‡ã€å¸ƒå°”å€¼å­—é¢é‡åˆå§‹åŒ–Moneyå®ä¾‹ï¼š"><a href="#1ã€å®šä¹‰Moenyç±»å‹ï¼Œå®ç°é€šè¿‡æ•´æ•°å­—é¢é‡ã€æµ®ç‚¹æ•°å­—é¢é‡ã€å­—ç¬¦ä¸²å­—é¢é‡ã€å¸ƒå°”å€¼å­—é¢é‡åˆå§‹åŒ–Moneyå®ä¾‹ï¼š" class="headerlink" title="1ã€å®šä¹‰Moenyç±»å‹ï¼Œå®ç°é€šè¿‡æ•´æ•°å­—é¢é‡ã€æµ®ç‚¹æ•°å­—é¢é‡ã€å­—ç¬¦ä¸²å­—é¢é‡ã€å¸ƒå°”å€¼å­—é¢é‡åˆå§‹åŒ–Moneyå®ä¾‹ï¼š"></a>1ã€å®šä¹‰<code>Moeny</code>ç±»å‹ï¼Œå®ç°é€šè¿‡æ•´æ•°å­—é¢é‡ã€æµ®ç‚¹æ•°å­—é¢é‡ã€å­—ç¬¦ä¸²å­—é¢é‡ã€å¸ƒå°”å€¼å­—é¢é‡åˆå§‹åŒ–<code>Money</code>å®ä¾‹ï¼š</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//: Playground - noun: a place where people can play</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Money</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value: <span class="type">Double</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(value: <span class="type">Double</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.value = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°CustomStringConvertibleåè®®ï¼Œæä¾›descriptionæ–¹æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Money</span>: <span class="title">CustomStringConvertible</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> description: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"\(value)"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°ExpressibleByIntegerLiteralå­—é¢é‡åè®®</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Money</span>: <span class="title">ExpressibleByIntegerLiteral</span> </span>&#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">IntegerLiteralType</span> = <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(integerLiteral value: <span class="type">IntegerLiteralType</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(value: <span class="type">Double</span>(value))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°ExpressibleByFloatLiteralå­—é¢é‡åè®®</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Money</span>: <span class="title">ExpressibleByFloatLiteral</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(floatLiteral value: <span class="type">FloatLiteralType</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(value: value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°ExpressibleByStringLiteralå­—é¢é‡åè®®</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Money</span>: <span class="title">ExpressibleByStringLiteral</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(stringLiteral value: <span class="type">StringLiteralType</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> doubleValue = <span class="type">Double</span>(value) &#123;</span><br><span class="line">            <span class="keyword">self</span>.<span class="keyword">init</span>(value: doubleValue)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.<span class="keyword">init</span>(value: <span class="number">0</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®ç°ExpressibleByExtendedGraphemeClusterLiteralå­—é¢é‡åè®®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(extendedGraphemeClusterLiteral value: <span class="type">StringLiteralType</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> doubleValue = <span class="type">Double</span>(value) &#123;</span><br><span class="line">            <span class="keyword">self</span>.<span class="keyword">init</span>(value: doubleValue)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.<span class="keyword">init</span>(value: <span class="number">0</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®ç°ExpressibleByUnicodeScalarLiteralå­—é¢é‡åè®®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(unicodeScalarLiteral value: <span class="type">StringLiteralType</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> doubleValue = <span class="type">Double</span>(value) &#123;</span><br><span class="line">            <span class="keyword">self</span>.<span class="keyword">init</span>(value: doubleValue)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.<span class="keyword">init</span>(value: <span class="number">0</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°ExpressibleByBooleanLiteralå­—é¢é‡åè®®</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Money</span>: <span class="title">ExpressibleByBooleanLiteral</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(booleanLiteral value: <span class="type">BooleanLiteralType</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> doubleValue: <span class="type">Double</span> = value ? <span class="number">1.0</span> : <span class="number">0.0</span></span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(value: doubleValue)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡æ•´æ•°å­—é¢é‡åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">let</span> intMoney: <span class="type">Money</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡æµ®ç‚¹æ•°å­—é¢é‡åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">let</span> floatMoney: <span class="type">Money</span> = <span class="number">10.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡å­—ç¬¦ä¸²å­—é¢é‡åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">let</span> strMoney: <span class="type">Money</span> = <span class="string">"10.2"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡å¸ƒå°”å€¼åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">let</span> boolMoney: <span class="type">Money</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="2ã€å®šä¹‰Bookç±»å‹ï¼Œå®ç°é€šè¿‡å­—å…¸å­—é¢é‡ã€æ•°ç»„å­—é¢é‡ã€nilå­—é¢é‡åˆå§‹åŒ–Bookå®ä¾‹"><a href="#2ã€å®šä¹‰Bookç±»å‹ï¼Œå®ç°é€šè¿‡å­—å…¸å­—é¢é‡ã€æ•°ç»„å­—é¢é‡ã€nilå­—é¢é‡åˆå§‹åŒ–Bookå®ä¾‹" class="headerlink" title="2ã€å®šä¹‰Bookç±»å‹ï¼Œå®ç°é€šè¿‡å­—å…¸å­—é¢é‡ã€æ•°ç»„å­—é¢é‡ã€nilå­—é¢é‡åˆå§‹åŒ–Bookå®ä¾‹:"></a>2ã€å®šä¹‰<code>Book</code>ç±»å‹ï¼Œå®ç°é€šè¿‡å­—å…¸å­—é¢é‡ã€æ•°ç»„å­—é¢é‡ã€nilå­—é¢é‡åˆå§‹åŒ–<code>Book</code>å®ä¾‹:</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//: Playground - noun: a place where people can play</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> id: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(id: <span class="type">Int</span>, name: <span class="type">String</span> = <span class="string">"unnamed"</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.id = id</span><br><span class="line">        <span class="keyword">self</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°CustomStringConvertibleåè®®ï¼Œæä¾›descriptionæ–¹æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Book</span>: <span class="title">CustomStringConvertible</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> description: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"id:\(id)\nname:ã€Š\(name)ã€‹"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°ExpressibleByDictionaryLiteralå­—é¢é‡åè®®</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Book</span>: <span class="title">ExpressibleByDictionaryLiteral</span> </span>&#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Key</span> = <span class="type">String</span></span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Value</span> = <span class="type">Any</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(dictionaryLiteral elements: (<span class="type">Key</span>, <span class="type">Value</span>)...) &#123;</span><br><span class="line">        <span class="keyword">var</span> dictionary = [<span class="type">Key</span>: <span class="type">Value</span>](minimumCapacity: elements.<span class="built_in">count</span>)</span><br><span class="line">        <span class="keyword">for</span> (k, v) <span class="keyword">in</span> elements &#123;</span><br><span class="line">            dictionary[k] = v</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> id = (dictionary[<span class="string">"id"</span>] <span class="keyword">as</span>? <span class="type">Int</span>) ?? <span class="number">0</span></span><br><span class="line">        <span class="keyword">let</span> name = (dictionary[<span class="string">"name"</span>] <span class="keyword">as</span>? <span class="type">String</span>) ?? <span class="string">"unnamed"</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(id: id, name: name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°ExpressibleByArrayLiteralå­—é¢é‡åè®®</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Book</span>: <span class="title">ExpressibleByArrayLiteral</span> </span>&#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">ArrayLiteralElement</span> = <span class="type">Any</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(arrayLiteral elements: <span class="type">ArrayLiteralElement</span>...) &#123;</span><br><span class="line">        <span class="keyword">var</span> id: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> eId = elements.first <span class="keyword">as</span>? <span class="type">Int</span> &#123;</span><br><span class="line">            id = eId</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> name = <span class="string">"unnamed"</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> eName = elements[<span class="number">1</span>] <span class="keyword">as</span>? <span class="type">String</span> &#123;</span><br><span class="line">            name = eName</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(id: id, name: name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°ExpressibleByNilLiteralå­—é¢é‡åè®®</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Book</span>: <span class="title">ExpressibleByNilLiteral</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(nilLiteral: ()) &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡å­—å…¸å­—é¢é‡åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">let</span> dictBook: <span class="type">Book</span> = [<span class="string">"id"</span>: <span class="number">100</span>, <span class="string">"name"</span>: <span class="string">"Love is Magic"</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"\(dictBook)\n"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡æ•°ç»„å­—é¢é‡åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">let</span> arrayBook: <span class="type">Book</span> = [<span class="number">101</span>, <span class="string">"World is word"</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"\(arrayBook)\n"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡nilå­—é¢é‡åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">let</span> nilBook: <span class="type">Book</span> = <span class="literal">nil</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"\(nilBook)\n"</span>)</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€å…³äº-â€˜not-expressible-by-any-literal-enumâ€™-Error"><a href="#å››ã€å…³äº-â€˜not-expressible-by-any-literal-enumâ€™-Error" class="headerlink" title="å››ã€å…³äº â€˜not expressible by any literal enumâ€™ Error"></a>å››ã€å…³äº â€˜not expressible by any literal enumâ€™ Error</h2><p>å½“ä½ ä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ç±»å‹å®šä¹‰æšä¸¾æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹ç±»ä¼¼é”™è¯¯ï¼š</p>
<blockquote>
<p>raw type â€˜XX_TYPEâ€™ is not expressible by any literal<br>enum XX_ENUM: XX_TYPE</p>
</blockquote>
<p>è¿™æ˜¯è¯´ä½ çš„è‡ªå®šä¹‰æ•°æ®ç±»å‹æ²¡æœ‰å®ç°å­—é¢é‡åè®®ã€‚ç„¶è€Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>enumç›®å‰æ”¯æŒçš„å­—é¢é‡åè®®æ˜¯æœ‰é™åˆ¶çš„ï¼Œå…¶ç›®å‰åªæ”¯æŒä»¥ä¸‹å‡ ä¸ªå­—é¢é‡åè®®ï¼š</strong></p>
<ul>
<li>ExpressibleByIntegerLiteral</li>
<li>ExpressibleByFloatLiteral</li>
<li>ExpressibleByStringLiteral</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè‹¥ä½ çš„è‡ªå®šä¹‰æ•°æ®ç±»å‹å®ç°çš„å­—é¢é‡åè®®æ²¡æœ‰åŒ…å«ä¸Šé¢ä¸­çš„ä¸€ä¸ªï¼Œå°±ä¼šå¾—åˆ°æ­¤ç§é”™è¯¯ã€‚å…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//: Playground - noun: a place where people can play</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">StockType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> number: <span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°CustomStringConvertibleåè®®ï¼Œæä¾›descriptionæ–¹æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">StockType</span>: <span class="title">CustomStringConvertible</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> description: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Stock Number:\(number)"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°Equatableåè®®ï¼Œæä¾›==æ–¹æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">StockType</span>: <span class="title">Equatable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> ==<span class="params">(lhs: StockType, rhs: StockType)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lhs.number == rhs.number</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°ExpressibleByDictionaryLiteralå­—é¢é‡åè®®</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">StockType</span>: <span class="title">ExpressibleByDictionaryLiteral</span> </span>&#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Key</span> = <span class="type">String</span></span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Value</span> = <span class="type">Any</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(dictionaryLiteral elements: (<span class="type">Key</span>, <span class="type">Value</span>)...) &#123;</span><br><span class="line">        <span class="keyword">var</span> dictionary = [<span class="type">Key</span>: <span class="type">Value</span>](minimumCapacity: elements.<span class="built_in">count</span>)</span><br><span class="line">        <span class="keyword">for</span> (k, v) <span class="keyword">in</span> elements &#123;</span><br><span class="line">            dictionary[k] = v</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> number = (dictionary[<span class="string">"number"</span>] <span class="keyword">as</span>? <span class="type">Int</span>) ?? <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(number: number)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°ExpressibleByIntegerLiteralå­—é¢é‡åè®®</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">StockType</span>: <span class="title">ExpressibleByIntegerLiteral</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(integerLiteral value: <span class="type">IntegerLiteralType</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(number: value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> è‹¥StockTypeæ²¡æœ‰å®ç° ExpressibleByIntegerLiteralã€ExpressibleByFloatLiteralã€ExpressibleByStringLiteralä¸­çš„ä¸€ä¸ªï¼Œä¼šæŠ¥é”™è¯¯ï¼šerror: raw type 'StockType' is not expressible by any literal</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// ä½ å¯ä»¥å°è¯•å»æ‰ExpressibleByIntegerLiteralçš„å®ç°ï¼Œçœ‹çœ‹ç¼–è¯‘å™¨æŠ¥çš„é”™è¯¯</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Stock</span>: <span class="title">StockType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> apple = <span class="number">1001</span></span><br><span class="line">    <span class="keyword">case</span> google = <span class="number">1002</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> appleStock = <span class="type">Stock</span>.apple.rawValue</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"\(appleStock)"</span>)</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä¾‹å­ä¸­ï¼Œå®šä¹‰äº†<code>StockType</code>æ•°æ®ç±»å‹å’Œ<code>Stock</code>æšä¸¾ç±»å‹ã€‚è‹¥<code>StockType</code>å»æ‰<code>ExpressibleByIntegerLiteral</code>å­—é¢é‡çš„åè®®çš„å®ç°ï¼Œå°†ä¼šè·å¾—ä¸Šè¿°çš„ç¼–è¯‘é”™è¯¯ã€‚</p>
<h2 id="èµ„æ–™å‚è€ƒ"><a href="#èµ„æ–™å‚è€ƒ" class="headerlink" title="èµ„æ–™å‚è€ƒ"></a>èµ„æ–™å‚è€ƒ</h2><ul>
<li><a href="https://developer.apple.com/documentation/swift/initialization_with_literals" target="_blank" rel="noopener external nofollow noreferrer">Initialization with Literals</a></li>
<li><a href="http://blog.krzyzanowskim.com/2015/03/12/swift-raw-not-representable-enum/" target="_blank" rel="noopener external nofollow noreferrer">Swift: Raw{Not}Representable enum</a></li>
<li><a href="https://www.tutorialspoint.com/swift/swift_literals.htm" target="_blank" rel="noopener external nofollow noreferrer">Swift - Literals</a></li>
<li><a href="http://nshipster.com/swift-literal-convertible/" target="_blank" rel="noopener external nofollow noreferrer">Swift Literal Convertibles</a></li>
<li><a href="http://swifter.tips/literal/" target="_blank" rel="noopener external nofollow noreferrer">å­—é¢é‡è½¬æ¢</a></li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>2017</tag>
      </tags>
  </entry>
  <entry>
    <title>Airbnb å¼€æºåŠ¨ç”»åº“ Lottie ä»‹ç»ä»¥åŠè¯¦ç»†ç¤ºä¾‹</title>
    <url>/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¯¥æ–‡ç« ä¸»è¦ä»‹ç»äº† Lottieæ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ä¸º Lottie åˆ¶ä½œåŠ¨ç”»ï¼Œä»¥åŠ Lottieçš„åº”ç”¨åœºæ™¯ã€‚é€‚åˆè®¾è®¡å¸ˆå’Œå¼€å‘è€…é˜…è¯»ä»¥åŠç»“å¯¹å®è·µã€‚</p>
<a id="more"></a>


<h2 id="Lottie-ä»‹ç»"><a href="#Lottie-ä»‹ç»" class="headerlink" title="Lottie ä»‹ç»"></a>Lottie ä»‹ç»</h2><p>Lottie æ˜¯ Airbnb å¼€æºçš„ä¸€ä¸ªåŠ¨ç”»æ¸²æŸ“åº“ï¼ŒåŒæ—¶æ”¯æŒ Androidã€iOSã€React Native å¹³å°ã€‚Lottie ç›®å‰åªæ”¯æŒæ¸²æŸ“æ’­æ”¾ After Effects åŠ¨ç”»ã€‚ <a href="http://airbnb.design/lottie/" target="_blank" rel="noopener external nofollow noreferrer">Lottie</a> ä½¿ç”¨ä» <a href="https://github.com/bodymovin/bodymovin" target="_blank" rel="noopener">bodymovin</a> (å¼€æºçš„ After Effects æ’ä»¶)å¯¼å‡ºçš„jsonæ•°æ®æ¥ä½œä¸ºåŠ¨ç”»æ•°æ®ã€‚æ‰€ä»¥ä»åŠ¨ç”»åˆ¶ä½œåˆ°åŠ¨ç”»ä½¿ç”¨çš„æ•´ä¸ªå·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/Lottie%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="æ­¤å›¾å¼•ç”¨è‡ªhttp://cdn.trojx.me/blog_pic/lottie_sum.png"></p>
<ol>
<li>è®¾è®¡å¸ˆä½¿ç”¨ After Effects åˆ¶ä½œåŠ¨ç”»ï¼Œå¹¶å¯¼å‡ºjsonæ–‡ä»¶ç»™å¼€å‘è€…</li>
<li>å„ç«¯çš„å¼€å‘è€…é€šè¿‡ Lottie æ¸²æŸ“æ’­æ”¾åŠ¨ç”»</li>
</ol>
<p>æˆªæ­¢ç›®å‰ï¼Œå„å¹³å°çš„ Lottie æ”¯æŒçš„ After Effects ç‰¹æ€§å¯ä»ä¸‹é¢ç½‘é¡µè·å¾—ï¼š</p>
<blockquote>
<p><a href="http://airbnb.io/lottie/supported-features.html" target="_blank" rel="noopener external nofollow noreferrer">http://airbnb.io/lottie/supported-features.html</a></p>
</blockquote>
<p><strong>æ‰€ä»¥ï¼Œè®¾è®¡å¸ˆåœ¨ä½¿ç”¨ After Effects åˆ¶ä½œåŠ¨ç”»æ—¶ï¼Œå»ºè®®å…ˆé¢„è§ˆä¸Šè¿°ç½‘é¡µï¼Œä»¥çŸ¥é“åº”è¯¥ä½¿ç”¨å“ªäº›ç‰¹æ€§åˆ¶ä½œåŠ¨ç”»ï¼Œå› ä¸ºè‹¥ä½¿ç”¨ Lottie è¿˜ä¸æ”¯æŒçš„ç‰¹æ€§ï¼Œå¦‚3Då›¾å±‚ï¼Œåˆ™ Lottie ä¼šæ— æ³•æ­£ç¡®æ¸²æŸ“ã€‚</strong></p>
<p>ä¸ºäº†æ¨å¹¿Lottieï¼ŒAirbnb è¿˜å»ºç«‹äº†ä¸€ä¸ªLottieåŠ¨ç”»ç½‘ç«™ï¼Œä¾›ç½‘å‹åˆ†äº«è‡ªå·±åˆ¶ä½œçš„åŠ¨ç”»ã€‚ç½‘ç«™åœ°å€ä¸ºï¼š</p>
<blockquote>
<p><a href="https://www.lottiefiles.com" target="_blank" rel="noopener external nofollow noreferrer">https://www.lottiefiles.com</a></p>
</blockquote>
<h2 id="ä¸º-Lottie-åˆ¶ä½œåŠ¨ç”»"><a href="#ä¸º-Lottie-åˆ¶ä½œåŠ¨ç”»" class="headerlink" title="ä¸º Lottie åˆ¶ä½œåŠ¨ç”»"></a>ä¸º Lottie åˆ¶ä½œåŠ¨ç”»</h2><p>ä¸º Lottie åˆ¶ä½œåŠ¨ç”»ï¼Œéœ€è¦ï¼š After Effects + bodymovinã€‚After Effectsåˆ¶ä½œå¥½åŠ¨ç”»åï¼Œé€šè¿‡æ’ä»¶ bodymovin å¯¼å‡ºä¸€ä»½ jsonæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ Lottie è¿›è¡Œæ¸²æŸ“æ’­æ”¾ã€‚ä¸‹é¢å°†ä¼šä»‹ç»å¦‚ä½•å®‰è£…è¯¥æ’ä»¶ä»¥åŠå¦‚ä½•å¯¼å‡ºjsonæ–‡ä»¶ã€‚</p>
<h3 id="å®‰è£…-After-Effects"><a href="#å®‰è£…-After-Effects" class="headerlink" title="å®‰è£… After Effects"></a>å®‰è£… After Effects</h3><p>PSï¼š å·²ç»å®‰è£…å¥½ After Effects çš„ç«¥é‹å¯ä»¥å¿½ç•¥æ­¤ç¯èŠ‚</p>
<p>After Effects å¯ä»¥ä»Adobeå®˜ç½‘ä¸‹è½½å®‰è£…è¯•ç”¨ï¼Œå…¶ç›®å‰å”®ä»·ä¸ºï¼š3499ï¿¥/å¹´ï¼Œç›¸å¯¹æ¥è¯´è¿˜æ˜¯å¾ˆè´µçš„ã€‚å¯¹äºè´Ÿæ‹…ä¸èµ·çš„ç«¥é‹æ¥è¯´ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ç ´è§£ç‰ˆæœ¬ã€‚ä»¥ä¸‹æ˜¯Mac çš„ç ´è§£ç‰ˆæœ¬çš„ä¸‹è½½é“¾æ¥ï¼š</p>
<blockquote>
<p>ç™¾åº¦äº‘ç›˜ï¼š<a href="https://pan.baidu.com/s/1eRMCL26" target="_blank" rel="noopener external nofollow noreferrer">https://pan.baidu.com/s/1eRMCL26</a><br>æå–å¯†ç ï¼šxyu5</p>
</blockquote>
<p>ä¸‹è½½çš„æ–‡ä»¶å¤¹ä¸­åŒ…å«å®‰è£…æ–‡ä»¶<code>After Effects CC 2017.dmg</code>ä»¥åŠç ´è§£æ–‡ä»¶<code>Adobe Zii cc2017.app</code>å‹ç¼©åŒ…ã€‚å®‰è£…å¥½ After Effects åï¼Œè§£å‹è¿è¡ŒAdobe Zii cc2017.app å³å¯å…è´¹ä½¿ç”¨ After Effects ã€‚ä½†æ˜¯ï¼Œå»ºè®®è´Ÿæ‹…çš„èµ·çš„ç«¥é‹è¿˜æ˜¯è´­ä¹°æ­£ç‰ˆæœåŠ¡ï¼Œå§‹ç»ˆå¯ä»¥å¾—åˆ°å„ç§å‡çº§æœåŠ¡ã€‚</p>
<h3 id="å®‰è£…-After-Effects-æ’ä»¶-bodymovin"><a href="#å®‰è£…-After-Effects-æ’ä»¶-bodymovin" class="headerlink" title="å®‰è£… After Effects æ’ä»¶ bodymovin"></a>å®‰è£… After Effects æ’ä»¶ bodymovin</h3><p><strong>1. ä¸‹è½½æ’ä»¶ <code>bodymovin.zxp</code></strong></p>
<ul>
<li>ä¸‹è½½ <a href="https://codeload.github.com/bodymovin/bodymovin/zip/master" target="_blank" rel="noopener external nofollow noreferrer">bodymovinå‹ç¼©æ–‡ä»¶</a></li>
<li>è§£å‹æ–‡ä»¶ï¼Œåœ¨ç›®å½• â€˜/build/extensionâ€™ æ‰¾åˆ° <code>bodymovin.zxp</code></li>
</ul>
<p><strong>2. å®‰è£…æ’ä»¶</strong></p>
<ul>
<li><p>ä¸‹è½½ After Effects æ’ä»¶å®‰è£…å™¨ <a href="http://aescripts.com/learn/zxp-installer/" target="_blank" rel="noopener external nofollow noreferrer">ZXP Installer</a>ï¼ˆæœ‰ Windows å’Œ Mac ç‰ˆæœ¬ï¼‰</p>
</li>
<li><p>è¿è¡Œ <code>ZXP Installer</code>ï¼ŒæŒ‰ç…§æŒ‡ç¤ºæ‹–åŠ¨<code>bodymovin.zxp</code> åˆ°å…¶çª—å£ï¼Œå³å¯å®‰è£…å®Œæˆ</p>
<p>  <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%8B%96%E5%8A%A8%E5%AE%89%E8%A3%85bodymovin.zxp.png" alt="æ‹–åŠ¨å®‰è£…bodymovin.zxp.png"></p>
<p>å®‰è£…æˆåŠŸåï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/bodymovin.zxp%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F.png" alt="bodymovin.zxpå®‰è£…æˆåŠŸ.png"></p>
</li>
</ul>
<p><strong>3. é‡å¯ After Effectsï¼Œç„¶åä¿®æ”¹ AE çš„è®¾ç½®ï¼Œåœ¨ â€˜After Effects CC -&gt; Preferences -&gt;  Generalâ€™ ä¸­æ‰“å¼€<br> â€˜Allow Scripts to Write Files and Access Networkâ€™</strong></p>
<p>   <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%89%93%E5%BC%80-'Allow-Scripts-to-Write-Files-and-Access-Network'.png" alt="æ‰“å¼€
 &#39;Allow Scripts to Write Files and Access Network&#39;.png"></p>
<p>   ç°åœ¨å¯ä»¥å¼€å§‹åˆ¶ä½œä½ çš„åŠ¨ç”»äº†ï¼Œåˆ¶ä½œå®Œæ¯•åï¼Œéœ€è¦ä½¿ç”¨ bodymovin æ—¶ï¼Œå‰å¾€ â€˜window -&gt; extensionsâ€™ å³å¯æ‰¾åˆ° bodymovinï¼š</p>
<p>   <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/bodymovin.png" alt="bodymovin.png"></p>
<h3 id="ä½¿ç”¨-After-Effects-åˆ¶ä½œåŠ¨ç”»"><a href="#ä½¿ç”¨-After-Effects-åˆ¶ä½œåŠ¨ç”»" class="headerlink" title="ä½¿ç”¨ After Effects åˆ¶ä½œåŠ¨ç”»"></a>ä½¿ç”¨ After Effects åˆ¶ä½œåŠ¨ç”»</h3><p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%AD%A4%E5%A4%84%E8%AF%B7%E5%BC%80%E5%A7%8B%E4%BD%A0%E7%9A%84%E8%A1%A8%E6%BC%94~.png" alt="æ­¤å¤„è¯·å¼€å§‹ä½ çš„è¡¨æ¼”~"></p>
<h3 id="ä½¿ç”¨-bodymovin-å¯¼å‡º-jsonæ–‡ä»¶"><a href="#ä½¿ç”¨-bodymovin-å¯¼å‡º-jsonæ–‡ä»¶" class="headerlink" title="ä½¿ç”¨ bodymovin å¯¼å‡º jsonæ–‡ä»¶"></a>ä½¿ç”¨ bodymovin å¯¼å‡º jsonæ–‡ä»¶</h3><p>å½“åŠ¨ç”»åˆ¶ä½œå®Œæ¯•åï¼Œè¿è¡Œ bodymovinï¼Œé€‰æ‹©ä½ è¦å¯¼å‡ºçš„åŠ¨ç”»ï¼Œä»¥åŠä¿å­˜jsonæ–‡ä»¶çš„ç›®å½•ï¼Œç‚¹å‡» â€˜Renderâ€™ å³å¯å¯¼å‡ºï¼Œå…·ä½“æµç¨‹å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E5%AF%BC%E5%87%BAjson%E6%96%87%E4%BB%B6%E6%B5%81%E7%A8%8B.png" alt="å¯¼å‡ºjsonæ–‡ä»¶æµç¨‹.png"></p>
<h3 id="åœ¨çº¿é¢„è§ˆåŠ¨ç”»æ•ˆæœ"><a href="#åœ¨çº¿é¢„è§ˆåŠ¨ç”»æ•ˆæœ" class="headerlink" title="åœ¨çº¿é¢„è§ˆåŠ¨ç”»æ•ˆæœ"></a>åœ¨çº¿é¢„è§ˆåŠ¨ç”»æ•ˆæœ</h3><p>åˆ¶ä½œå¥½ After Effects åŠ¨ç”»ï¼Œå¯¼å‡ºjsonæ–‡ä»¶ï¼Œå½“ç„¶è¦éªŒè¯ä¸€ä¸‹ Lottie èƒ½å¦æ­£ç¡®æ¸²æŸ“æ’­æ”¾äº†ã€‚</p>
<p>Airbnb æä¾›äº†  <a href="https://www.lottiefiles.com/ios" target="_blank" rel="noopener external nofollow noreferrer">iOS APP</a> ã€<a href="https://www.lottiefiles.com/android" target="_blank" rel="noopener external nofollow noreferrer"> Android APP</a> ä»¥åŠ <a href="https://www.lottiefiles.com/preview" target="_blank" rel="noopener external nofollow noreferrer">Lottie åŠ¨ç”»åœ¨çº¿é¢„è§ˆç½‘ç«™</a> ä¾›è®¾è®¡å¸ˆè¿›è¡ŒåŠ¨ç”»é¢„è§ˆã€‚</p>
<p>åœ¨ç½‘ç«™é¢„è§ˆçš„è¯ï¼Œè®¾è®¡å¸ˆåªè¦æŠŠå¯¼å‡ºåçš„ json æ–‡ä»¶ï¼Œæ‹–åŠ¨åˆ°ç½‘é¡µçš„é¢„è§ˆæ¡†ï¼Œå³å¯åœ¨çº¿çœ‹åˆ° Lottie æ¸²æŸ“æ’­æ”¾çš„åŠ¨ç”»æ•ˆæœã€‚</p>
<p>ä½¿ç”¨ APP é¢„è§ˆçš„è¯ï¼Œåˆ™éœ€è¦ä¸Šä¼  json æ–‡ä»¶åˆ°æœåŠ¡ç«¯ï¼Œé€šè¿‡é“¾æ¥è¿›è¡Œé¢„è§ˆã€‚å»ºè®®è®¾è®¡å¸ˆä¸Šä¼ æ–‡ä»¶åˆ° Airbnb å»ºç«‹çš„åˆ†äº«ç½‘ç«™ <a href="https://www.lottiefiles.com" target="_blank" rel="noopener external nofollow noreferrer">lottiefiles.com</a>ã€‚</p>
<h2 id="å“ªäº›åœºæ™¯é€‚å®œä½¿ç”¨-Lottieï¼Ÿ"><a href="#å“ªäº›åœºæ™¯é€‚å®œä½¿ç”¨-Lottieï¼Ÿ" class="headerlink" title="å“ªäº›åœºæ™¯é€‚å®œä½¿ç”¨ Lottieï¼Ÿ"></a>å“ªäº›åœºæ™¯é€‚å®œä½¿ç”¨ Lottieï¼Ÿ</h2><p>Lottie ä½œä¸ºä¸€ä¸ªåŠ¨ç”»æ¸²æŸ“åº“ï¼Œåœ¨æ¢ç´¢è¿‡ç¨‹ä¸­ï¼Œç¬”è€…è®¤ä¸ºå…¶æ¯”è¾ƒé€‚å®œè§£å†³ä»¥ä¸‹åœºæ™¯çš„é—®é¢˜ï¼š</p>
<ul>
<li>å¯åŠ¨(splash)åŠ¨ç”»ï¼šå…¸å‹åœºæ™¯æ˜¯APP logoåŠ¨ç”»çš„æ’­æ”¾</li>
<li>ä¸Šä¸‹æ‹‰åˆ·æ–°åŠ¨ç”»ï¼šæ‰€æœ‰APPéƒ½å¿…å¤‡çš„åŠŸèƒ½ï¼Œåˆ©ç”¨ Lottie å¯ä»¥åšçš„æ›´åŠ ç®€å•é…·ç‚«äº†</li>
<li>åŠ è½½(loading)åŠ¨ç”»ï¼šå…¸å‹åœºæ™¯æ˜¯ç½‘ç»œè¯·æ±‚çš„loadingåŠ¨ç”»</li>
<li>æç¤º(tips)åŠ¨ç”»ï¼šå…¸å‹åœºæ™¯æ˜¯ç©ºç™½é¡µçš„æç¤º</li>
<li>æŒ‰é’®(button)åŠ¨ç”»ï¼šå…¸å‹åœºæ™¯å¦‚switchæŒ‰é’®ã€ç¼–è¾‘æŒ‰é’®ã€æ’­æ”¾æŒ‰é’®ç­‰æŒ‰é’®çš„åˆ‡æ¢è¿‡æ¸¡åŠ¨ç”»</li>
<li>ç¤¼ç‰©(gift)åŠ¨ç”»ï¼šå…¸å‹åœºæ™¯æ˜¯ç›´æ’­ç±»APPçš„é«˜çº§åŠ¨ç”»æ’­æ”¾</li>
<li>è§†å›¾è½¬åœºåŠ¨ç”»</li>
</ul>
<p>å„åœºæ™¯çš„ç¤ºä¾‹å¦‚ä¸‹ï¼šï¼ˆä»¥iOSå¹³å°ä¸ºä¾‹ï¼‰</p>
<ul>
<li><p>å¯åŠ¨(splash)åŠ¨ç”».gif</p>
<p>  <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E5%90%AF%E5%8A%A8(splash)%E5%8A%A8%E7%94%BB.gif" alt="å¯åŠ¨(splash)åŠ¨ç”».gif"></p>
</li>
<li><p>ä¸Šä¸‹æ‹‰åˆ·æ–°åŠ¨ç”»<br>  <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E4%B8%8A%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E5%8A%A8%E7%94%BB.gif" alt="ä¸Šä¸‹æ‹‰åˆ·æ–°åŠ¨ç”».gif"></p>
</li>
<li><p>åŠ è½½(loading)åŠ¨ç”»+æç¤º(tips)åŠ¨ç”»<br>  <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E5%8A%A0%E8%BD%BD(loading)%E5%8A%A8%E7%94%BB+%E6%8F%90%E7%A4%BA(tips)%E5%8A%A8%E7%94%BB.gif" alt="åŠ è½½(loading)åŠ¨ç”»+æç¤º(tips)åŠ¨ç”».gif"></p>
</li>
<li><p>æŒ‰é’®(button)åŠ¨ç”»+ç¤¼ç‰©(gift)åŠ¨ç”»<br>  <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%8C%89%E9%92%AE(button)%E5%8A%A8%E7%94%BB+%E7%A4%BC%E7%89%A9(gift)%E5%8A%A8%E7%94%BB.gif" alt="æŒ‰é’®(button)åŠ¨ç”»+ç¤¼ç‰©(gift)åŠ¨ç”».gif"></p>
</li>
<li><p>è½¬åœºåŠ¨ç”»<br>  <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB.gif" alt="è½¬åœºåŠ¨ç”».gif"></p>
</li>
</ul>
<h2 id="æ¥å…¥-Lottie"><a href="#æ¥å…¥-Lottie" class="headerlink" title="æ¥å…¥ Lottie"></a>æ¥å…¥ Lottie</h2><p>åˆ¶ä½œå¥½åŠ¨ç”»ï¼Œå¯¼å‡ºjsonæ–‡ä»¶åï¼ŒiOSã€Androidã€React Nativeçš„å¼€å‘è€…ä»¬å°±å¯ä»¥åƒä½¿ç”¨é™æ€èµ„æºä¸€æ ·ä½¿ç”¨åŠ¨ç”»äº†ã€‚æ¥å…¥æ•™ç¨‹å¯ä»¥çœ‹å®˜ç½‘æ•™ç¨‹æˆ–è€… å„å¹³å°çš„ Lottie é¡¹ç›®çš„githubï¼š</p>
<ul>
<li><a href="http://airbnb.io/lottie/" target="_blank" rel="noopener external nofollow noreferrer">å®˜ç½‘æ•™ç¨‹</a></li>
<li><a href="https://github.com/airbnb/lottie-ios" target="_blank" rel="noopener">lottie-ios-git</a></li>
<li><a href="https://github.com/airbnb/lottie-android" target="_blank" rel="noopener">lottie-android-git</a></li>
<li><a href="https://github.com/airbnb/lottie-react-native" target="_blank" rel="noopener">lottie-react-native-git</a></li>
</ul>
<blockquote>
<p>lottie-iOS çš„åº”ç”¨ç¤ºä¾‹ï¼ˆåŒ…æ‹¬ä¸Šè¿°æ‰€æœ‰ä¾‹å­ï¼‰å¯è®¿é—®ï¼š<br><a href="https://github.com/YK-Unit/LottieExample" target="_blank" rel="noopener">https://github.com/YK-Unit/LottieExample</a></p>
</blockquote>
<h2 id="lottie-ios-æé€Ÿä¸Šæ‰‹æ‰‹å†Œ"><a href="#lottie-ios-æé€Ÿä¸Šæ‰‹æ‰‹å†Œ" class="headerlink" title="lottie-ios æé€Ÿä¸Šæ‰‹æ‰‹å†Œ"></a>lottie-ios æé€Ÿä¸Šæ‰‹æ‰‹å†Œ</h2><h3 id="å®‰è£…-Lottie"><a href="#å®‰è£…-Lottie" class="headerlink" title="å®‰è£… Lottie"></a>å®‰è£… Lottie</h3><p>å¯é€šè¿‡ Cocoapods æˆ–è€… Carthage å¯¼å…¥ Lottieã€‚</p>
<ul>
<li>Cocoapodsï¼š<code>pod &#39;lottie-ios&#39;</code></li>
<li>Carthageï¼š <code>github &quot;airbnb/lottie-ios&quot; &quot;master&quot;</code></li>
</ul>
<h3 id="åŠ è½½-Lottie-åŠ¨ç”»"><a href="#åŠ è½½-Lottie-åŠ¨ç”»" class="headerlink" title="åŠ è½½ Lottie åŠ¨ç”»"></a>åŠ è½½ Lottie åŠ¨ç”»</h3><p>Lottie åŠ¨ç”»æ”¯æŒä»æœ¬åœ°æˆ–è€…æœåŠ¡å™¨çš„jsonæ–‡ä»¶åŠ è½½ã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä»æœ¬åœ°jsonåŠ è½½</span></span><br><span class="line">LOTAnimationView *animationView = [LOTAnimationView animationNamed:<span class="string">@"Lottie"</span>];</span><br><span class="line"><span class="comment">//ä»æœ¬åœ°æŒ‡å®šçš„bundleçš„jsonåŠ è½½</span></span><br><span class="line">LOTAnimationView *animationView = [LOTAnimationView animationNamed:<span class="string">@"Lottie"</span> inBundle:[<span class="built_in">NSBundle</span> YOUR_BUNDLE]];</span><br><span class="line"><span class="comment">//ä»æœåŠ¡å™¨çš„jsonåŠ è½½</span></span><br><span class="line">LOTAnimationView *animationView = [[LOTAnimationView alloc] initWithContentsOfURL:[<span class="built_in">NSURL</span> URLWithString:URL_TO_JSON]];</span><br><span class="line"></span><br><span class="line">animationView.frame = <span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">[<span class="keyword">self</span>.view addSubview:animationView];</span><br></pre></td></tr></table></figure>

<h3 id="æ’­æ”¾-Lottie-åŠ¨ç”»"><a href="#æ’­æ”¾-Lottie-åŠ¨ç”»" class="headerlink" title="æ’­æ”¾ Lottie åŠ¨ç”»"></a>æ’­æ”¾ Lottie åŠ¨ç”»</h3><p>Lottie åŠ¨ç”»çš„æ’­æ”¾æ§åˆ¶ï¼Œé™¤äº†å¸¸è§„çš„æ§åˆ¶ï¼Œè¿˜æ”¯æŒè¿›åº¦æ’­æ”¾ã€å¸§æ’­æ”¾ã€‚</p>
<ul>
<li><p>æ’­æ”¾ã€æš‚åœã€åœæ­¢</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">LOTAnimationView *animationView = [LOTAnimationView animationNamed:<span class="string">@"Lottie"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»ä¸Šä¸€æ¬¡çš„åŠ¨ç”»ä½ç½®å¼€å§‹æ’­æ”¾</span></span><br><span class="line">[animationView play];</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="comment">//æš‚åœåŠ¨ç”»æ’­æ”¾</span></span><br><span class="line">[animationView pause];</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line"><span class="comment">//åœæ­¢åŠ¨ç”»æ’­æ”¾ï¼Œæ­¤æ—¶åŠ¨ç”»è¿›åº¦é‡ç½®ä¸º0</span></span><br><span class="line">[animationView stop];</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ§åˆ¶è¿›åº¦æ’­æ”¾ï¼šå¯å‚è€ƒç¤ºä¾‹çš„ä¸Šä¸‹æ‹‰åˆ·æ–°åŠ¨ç”»</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">LOTAnimationView *animationView = [LOTAnimationView animationNamed:<span class="string">@"RefreshHeaderAnim"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç›´æ¥æ’­æ”¾åˆ°æŒ‡å®šè¿›åº¦</span></span><br><span class="line">[animationView playToProgress:<span class="number">0.8</span> withCompletion:^(<span class="built_in">BOOL</span> animationFinished) &#123;</span><br><span class="line"><span class="comment">// do something</span></span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»è¿›åº¦Aæ’­æ”¾åˆ°è¿›åº¦B</span></span><br><span class="line">[animationView playFromProgress:<span class="number">0</span> toProgress:<span class="number">0.8</span> withCompletion:^(<span class="built_in">BOOL</span> animationFinished) &#123;</span><br><span class="line"><span class="comment">// do something</span></span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç›´æ¥è®¾ç½®å½“å‰è¿›åº¦</span></span><br><span class="line">animationView.animationProgress = currentProgress;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ§åˆ¶å¸§æ’­æ”¾ï¼šå¯å‚è€ƒç¤ºä¾‹çš„switchæŒ‰é’®åŠ¨ç”»</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">LOTAnimationView *animationView = [LOTAnimationView animationNamed:<span class="string">@"Switch"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç›´æ¥æ’­æ”¾åˆ°æŒ‡å®šå¸§</span></span><br><span class="line">[animationView playToFrame:@(<span class="number">40</span>) withCompletion:^(<span class="built_in">BOOL</span> animationFinished) &#123;</span><br><span class="line"></span><br><span class="line"> &#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»Aå¸§æ’­æ”¾åˆ°Bå¸§</span></span><br><span class="line">[animationView playFromFrame:@(<span class="number">20</span>) toFrame:@(<span class="number">40</span>) withCompletion:^(<span class="built_in">BOOL</span> animationFinished) &#123;</span><br><span class="line"></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¾ªç¯æ’­æ”¾åŠ¨ç”»ï¼šå¯å‚è€ƒç¤ºä¾‹çš„Play-PauseæŒ‰é’®åŠ¨ç”»</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">LOTAnimationView *animationView = [LOTAnimationView animationNamed:<span class="string">@"Play-Pause"</span>];</span><br><span class="line"><span class="comment">//è®¾ç½®å¾ªç¯æ’­æ”¾</span></span><br><span class="line">animationView.loopAnimation = <span class="literal">YES</span>;</span><br><span class="line"><span class="comment">//è®¾ç½®è‡ªåŠ¨å€’é€€æ’­æ”¾</span></span><br><span class="line">animationView.autoReverseAnimation = <span class="literal">YES</span>;</span><br><span class="line">[animationView playFromFrame:@(<span class="number">90</span>) toFrame:@(<span class="number">180</span>) withCompletion:^(<span class="built_in">BOOL</span> animationFinished) &#123;</span><br><span class="line"></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¾‘æŸå¸§çš„åŠ¨ç”»å¯¹è±¡çš„å±æ€§ï¼šå¯å‚è€ƒç¤ºä¾‹çš„switchæŒ‰é’®åŠ¨ç”»</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">[<span class="keyword">self</span>.switchButton setValue:[<span class="built_in">UIColor</span> orangeColor] forKeypath:<span class="string">@"Background 2.Shape 1.Fill 1.Color"</span> atFrame:@(<span class="number">0</span>)];</span><br><span class="line">[<span class="keyword">self</span>.switchButton setValue:[<span class="built_in">UIColor</span> blueColor] forKeypath:<span class="string">@"Background 2.Shape 1.Fill 1.Color"</span> atFrame:@(<span class="number">13</span>)];</span><br></pre></td></tr></table></figure>

<p>  è¦ä¿®æ”¹å¯¹è±¡çš„å±æ€§ï¼Œéœ€è¦çŸ¥é“å±æ€§çš„è·¯å¾„ï¼ˆKeypathï¼‰ã€‚è·å–å±æ€§çš„è·¯å¾„çš„æ–¹æ³•æœ‰ï¼š</p>
<ul>
<li><p>ç›´æ¥æ‰“å°å¯¹è±¡çš„æ‰€æœ‰å±‚çº§å±æ€§ï¼Œä»æ—¥å¿—ä¸­è·å–ï¼š<br>  <code>[animationView logHierarchyKeypaths];</code> </p>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/logHierarchyKeypaths%E6%97%A5%E5%BF%97.png" alt="logHierarchyKeypathsæ—¥å¿—.png"></p>
</li>
<li><p>é€šè¿‡AEæ–‡ä»¶è·å¾—ï¼š<code>Background 2.Shape 1.Fill 1.Color</code></p>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/Keypath.png" alt="Keypath.png"></p>
</li>
</ul>
</li>
<li><p>è§†å›¾æ§åˆ¶å™¨è½¬åœºåŠ¨ç”»ï¼ˆView Controller Transitionsï¼‰ï¼šå¯å‚è€ƒç¤ºä¾‹çš„è½¬åœºåŠ¨ç”»<br>Lottie æä¾›äº† <code>LOTAnimationTransitionController</code>ç”Ÿæˆ <code>id &lt;UIViewControllerAnimatedTransitioning&gt;</code> å¯¹è±¡ã€‚</p>
 <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"> <span class="meta">#<span class="meta-keyword">pragma</span> mark - UIViewControllerTransitioningDelegate</span></span><br><span class="line"> - (<span class="keyword">nullable</span> <span class="keyword">id</span> &lt;<span class="built_in">UIViewControllerAnimatedTransitioning</span>&gt;)animationControllerForPresentedController:(<span class="built_in">UIViewController</span> *)presented presentingController:(<span class="built_in">UIViewController</span> *)presenting sourceController:(<span class="built_in">UIViewController</span> *)source &#123;</span><br><span class="line">	</span><br><span class="line">    LOTAnimationTransitionController *animationController = [[LOTAnimationTransitionController alloc] initWithAnimationNamed:<span class="string">@"vcTransition1"</span></span><br><span class="line">                                                                                                              fromLayerNamed:<span class="string">@"outLayer"</span></span><br><span class="line">                                                                                                                toLayerNamed:<span class="string">@"inLayer"</span></span><br><span class="line">                                                                                                     applyAnimationTransform:<span class="literal">NO</span>];</span><br><span class="line">    <span class="keyword">return</span> animationController;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="keyword">id</span> &lt;<span class="built_in">UIViewControllerAnimatedTransitioning</span>&gt;)animationControllerForDismissedController:(<span class="built_in">UIViewController</span> *)dismissed &#123;</span><br><span class="line">    LOTAnimationTransitionController *animationController = [[LOTAnimationTransitionController alloc] initWithAnimationNamed:<span class="string">@"vcTransition2"</span></span><br><span class="line">                                                                                                              fromLayerNamed:<span class="string">@"outLayer"</span></span><br><span class="line">                                                                                                                toLayerNamed:<span class="string">@"inLayer"</span></span><br><span class="line">                                                                                                     applyAnimationTransform:<span class="literal">NO</span>];</span><br><span class="line">    <span class="keyword">return</span> animationController;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="æ·»åŠ è§†å›¾åˆ°-Layer-å±‚ï¼šå¯å‚è€ƒâ€œæ·»åŠ -View-åˆ°-Layer-ç¤ºä¾‹â€"><a href="#æ·»åŠ è§†å›¾åˆ°-Layer-å±‚ï¼šå¯å‚è€ƒâ€œæ·»åŠ -View-åˆ°-Layer-ç¤ºä¾‹â€" class="headerlink" title="æ·»åŠ è§†å›¾åˆ° Layer å±‚ï¼šå¯å‚è€ƒâ€œæ·»åŠ  View åˆ° Layer ç¤ºä¾‹â€"></a>æ·»åŠ è§†å›¾åˆ° Layer å±‚ï¼šå¯å‚è€ƒâ€œæ·»åŠ  View åˆ° Layer ç¤ºä¾‹â€</h3><p>Lottie é™¤äº†æ”¯æŒåŠ¨ç”»æ’­æ”¾ï¼Œè¿˜æ”¯æŒæ·»åŠ è‡ªå®šä¹‰çš„è§†å›¾åˆ°æŒ‡å®šçš„ Layer ï¼š</p>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%B7%BB%E5%8A%A0%E8%A7%86%E5%9B%BE%E5%88%B0Layer%E5%B1%82.gif" alt="æ·»åŠ è§†å›¾åˆ°Layerå±‚.gif"></p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *layerNames = @[<span class="string">@"Green Solid 1"</span>,<span class="string">@"Shape Layer 1"</span>,<span class="string">@"Shape Layer 2"</span>,<span class="string">@"Shape Layer 3"</span>,<span class="string">@"Shape Layer 4"</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSString</span> *layerName <span class="keyword">in</span> layerNames) &#123;</span><br><span class="line">    <span class="built_in">CGRect</span> subRectViewFrame = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">15</span>, <span class="number">15</span>);</span><br><span class="line">    <span class="built_in">UIView</span> *subRectView = [[<span class="built_in">UIView</span> alloc] initWithFrame:subRectViewFrame];</span><br><span class="line">    subRectViewFrame = [<span class="keyword">self</span>.rectView convertRect:subRectViewFrame toLayerNamed:layerName];</span><br><span class="line">    subRectView.frame = subRectViewFrame;</span><br><span class="line">    subRectView.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">    [<span class="keyword">self</span>.rectView addSubview:subRectView toLayerNamed:layerName applyTransform:<span class="literal">YES</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨AEä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šç”¨åˆ°2ç§ç±»å‹çš„ Layer æ¥åˆ¶ä½œåŠ¨ç”»ï¼šSolid Layerï¼ˆå›ºæ€å›¾å±‚ï¼‰å’Œ Shape Layerï¼ˆå½¢çŠ¶å›¾å±‚ï¼‰ã€‚å›¾ä¸­ï¼Œç»¿è‰²çš„è§†å›¾å…ƒç´ å°±æ˜¯Solid Layerï¼Œè“è‰²ã€çº¢è‰²ã€é»„è‰²ã€æ£•è‰²çš„è§†å›¾å…ƒç´ å°±æ˜¯ Shape Layerã€‚</p>
<p>ç»†å¿ƒçš„è¯»è€…å¯ä»¥å‘ç°ï¼Œæ·»åŠ åŒä¸€ä¸ª subRectView åˆ° ä¸åŒçš„ Layer ï¼ŒsubRectView çš„ç»˜åˆ¶ä½ç½®ä¸ä¸€æ ·ï¼Œè¿™æ˜¯å› ä¸ºä¸åŒç±»å‹çš„ Layer å…¶åæ ‡ç³»ç»Ÿä¸ä¸€æ ·ï¼š</p>
<ul>
<li><p>Solid Layer çš„åæ ‡åŸç‚¹åœ¨å·¦ä¸Šè§’ä½ç½®ï¼Œå‘å³æ˜¯Xè½´æ­£æ–¹å‘ï¼Œå‘ä¸‹æ˜¯Yè½´æ­£æ–¹å‘</p>
</li>
<li><p>Shape Layer çš„åæ ‡åŸç‚¹ç”±<code>ShapeLayer-Contents-layer-AnchorPoint</code>ï¼ˆå†…å®¹å›¾å±‚çš„é”šç‚¹ä½ç½®ï¼‰å†³å®šï¼ŒXè½´å’ŒYè½´çš„æ­£æ–¹å‘åˆ™å–å†³äºå…¶<code>ShapeLayer-Transform-Scale</code>çš„å€¼çš„æ­£è´Ÿï¼Œå…·ä½“å¦‚å›¾æ‰€ç¤ºï¼š</p>
</li>
</ul>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/Shape-Layer%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F.jpg" alt="Shape Layeråæ ‡ç³»ç»Ÿ.jpg"></p>
<p>åœ¨ä¸Šé¢æ¼”ç¤ºçš„Gifå›¾ä¸­ï¼Œ<code>Shape Layer 1</code>ã€<code>Shape Layer 2</code>ã€<code>Shape Layer 3</code>ã€<code>Shape Layer 4</code>çš„åæ ‡åŸç‚¹éƒ½åœ¨å›¾å±‚ä¸­å¿ƒä½ç½®ï¼Œä¸åŒçš„æ˜¯å…¶Xè½´å’ŒYè½´çš„æ­£æ–¹å‘ä½ç½®ã€‚æ„Ÿå…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥ä¸‹è½½æ‰“å¼€ Demo é‡Œçš„ <a href="https://github.com/YK-Unit/LottieExample/tree/master/AE-Files" target="_blank" rel="noopener">RectComp.aep</a> æ–‡ä»¶ï¼ŒæŸ¥çœ‹å¯¹åº” Layer çš„åæ ‡ç³»ç»Ÿæ•°æ®ï¼Œç„¶åä½ ä¹Ÿå¯ä»¥å°è¯•ç¼–è¾‘ä¿®æ”¹å¯¹åº”å›¾å±‚çš„åæ ‡åŸç‚¹ä½ç½®å’ŒXYè½´æ–¹å‘ï¼Œå¯¼å‡ºåŠ¨ç”»æ•°æ®è¿›è¡Œè¯•éªŒã€‚</p>
<p>æ€»å¾—æ¥è¯´ï¼Œè‹¥ä½ è¦æ·»åŠ è§†å›¾åˆ°Layerï¼Œåœ¨æ·»åŠ å‰ï¼Œæœ€å¥½æ‰“å¼€AEæ–‡ä»¶ï¼ŒæŸ¥çœ‹å¯¹åº”çš„ Layer çš„åæ ‡ç³»ç»Ÿä¿¡æ¯ã€‚å½“ç„¶ï¼Œæ›´å¥½çš„åšæ³•è¿˜æ˜¯å’ŒAEè®¾è®¡å¸ˆç»“å¯¹å¼€å‘åŠ¨ç”»ï¼Œè¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿çŸ¥é“å„ä¸ªLayerçš„ä¿¡æ¯ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>æ•™ç¨‹</tag>
        <tag>2017</tag>
      </tags>
  </entry>
  <entry>
    <title>Unicodeå’ŒUTF-8ã€UTF-16</title>
    <url>/2017/Unicode%E5%92%8CUTF-8%E3%80%81UTF-16/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Unicode å’Œ UTF-8 ã€UTF-16æ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿè¿™æ˜¯æˆ‘æœ€è¿‘å¥½å¥‡çš„ä¸€ä¸ªé—®é¢˜ã€‚</p>
<a id="more"></a>

<h2 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h2><p>Unicode æ˜¯è®¡ç®—æœºç§‘å­¦é¢†åŸŸé‡Œçš„ä¸€é¡¹ä¸šç•Œæ ‡å‡†ï¼ŒåŒ…æ‹¬å­—ç¬¦é›†ï¼ˆåŒ…å«æ¥è‡ªä¸–ç•Œå„å›½å„åœ°çš„æ–‡å­—å­—ç¬¦ï¼‰å’Œç¼–ç æ–¹æ¡ˆï¼ˆå°†æ¯ä¸ªå­—ç¬¦å”¯ä¸€æ˜ å°„åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶ç¼–ç ï¼‰ã€‚</p>
<h3 id="Unicode-ç¼–ç æ–¹å¼"><a href="#Unicode-ç¼–ç æ–¹å¼" class="headerlink" title="Unicode ç¼–ç æ–¹å¼"></a>Unicode ç¼–ç æ–¹å¼</h3><p>Unicode çš„åŸºæœ¬å…ƒç´ æ˜¯<em>ç ä½ï¼ˆcode pointï¼‰</em>ï¼Œå…±åŒ…å«1114112ä¸ªç ä½ã€‚ç ä½é€šè¿‡ä½¿ç”¨æ•°å€¼è¡¨ç¤ºï¼Œæ•°å€¼æ ¼å¼ä¸ºï¼š<em>U+hhhh</em>ï¼Œå…¶ä¸­æ¯ä¸ª<em>h</em>ä»£è¡¨ä¸€ä¸ªåå…­è¿›åˆ¶æ•°å­—ã€‚</p>
<p>Unicode çš„æ‰€æœ‰ç ä½ç»„æˆäº†ä¸€ä¸ªç¼–ç ç©ºé—´ã€‚åœ¨Unicodeç¼–ç ç©ºé—´ï¼ŒUnicodeç ä½åˆ†ä¸º17ç»„ç¼–æ’ï¼Œæ¯ç»„ç§°ä¸º<strong>å¹³é¢</strong>ï¼ˆPlaneï¼‰ï¼Œè€Œæ¯å¹³é¢æ‹¥æœ‰65536ä¸ªç ä½ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2017/Unicode%E5%92%8CUTF-8%E3%80%81UTF-16/readme/Unicode%E7%BC%96%E7%A0%81%E7%A9%BA%E9%97%B4.png" alt="Unicode ç¼–ç ç©ºé—´.png"></p>
<p>Unicode éµå®ˆæ—¢å®šè§„åˆ™æŠŠä¸–ç•Œä¸Šçš„å­—ç¬¦ä¸€ä¸€æ˜ å°„åˆ°ç ä½ä¸­ã€‚è¢«ä½¿ç”¨çš„ç ä½ï¼Œå…¶ç ç‚¹å€¼å°±æ˜¯å¯¹åº”å­—ç¬¦çš„Unicodeç¼–ç ã€‚å¦‚ï¼Œ <a href="http://unicode.org/cldr/utility/character.jsp?a=A" target="_blank" rel="noopener external nofollow noreferrer">U+0041</a> è¡¨ç¤ºæ‹‰ä¸å­—æ¯ â€œAâ€ï¼›<a href="http://unicode.org/cldr/utility/character.jsp?a=40000&B1=Show" target="_blank" rel="noopener external nofollow noreferrer">U+40000</a> ç”±äºæ²¡ä½¿ç”¨ï¼Œä¸è¡¨ç¤ºä»»ä½•å­—ç¬¦ã€‚</p>
<p>æˆªæ­¢ç›®å‰ï¼Œæ‰128237 ä¸ªç ä½è¢«ä½¿ç”¨â€”â€”ç¼–ç ç©ºé—´çš„ 12% è¢«èµ‹å€¼ï¼Œåœ¨åé¢è¿˜æœ‰å¾ˆå¤šç©ºé—´å¯åº”å¯¹æ–°å‡ºç°çš„å­—ç¬¦ã€‚</p>
<h3 id="Unicode-å®ç°æ–¹å¼"><a href="#Unicode-å®ç°æ–¹å¼" class="headerlink" title="Unicode å®ç°æ–¹å¼"></a>Unicode å®ç°æ–¹å¼</h3><p>Unicode è§„å®šäº†å­—ç¬¦çš„ç¼–ç ï¼Œä½†æ˜¯æ²¡æœ‰è§„å®šå¦‚ä½•å®ç°å­—ç¬¦çš„ç¼–ç ã€‚å®ç°ç¼–ç çš„æ–¹å¼ç§°ä¸º<strong>Unicode è½¬æ¢æ ¼å¼</strong>ï¼ˆUnicode Transformation Formatï¼Œç®€ç§°ä¸ºUTFï¼‰ã€‚</p>
<p>Unicode ç¼–ç èŒƒå›´ä» U+0000 åˆ° U+10FFFFã€‚å¯¹äºè®¡ç®—æœºè€Œè¨€ï¼Œå®ç°Unicode ç¼–ç çš„æœ€ç®€å•æ–¹å¼æ˜¯ä½¿ç”¨32-bitè¡¨ç¤ºã€‚ä½†æ˜¯æ¯ä¸ªå­—ç¬¦ä½¿ç”¨4ä¸ªå­—èŠ‚è¡¨ç¤ºä¼šé€ æˆæµªè´¹ã€‚å½“ä½ å¤„ç†å¤§é‡æ–‡æœ¬çš„æ—¶å€™ï¼Œä½¿ç”¨ 32-bit å­˜å‚¨ Unicode å­—ç¬¦ä¼šå ç”¨å¤§é‡é¢å¤–å­˜å‚¨ã€å†…å­˜ã€å¸¦å®½ç­‰ï¼Œå› ä¸ºå¤§å¤šå­—ç¬¦çš„ç¬¬1å’Œç¬¬2ä¸ªå­—èŠ‚éƒ½æ˜¯0ã€‚</p>
<p>åœ¨æ—¥å¸¸ï¼ŒUnicodeç¼–ç çš„å®ç°æ–¹å¼ä¸»è¦æœ‰ï¼šUTF-8ã€UTF-16ã€‚</p>
<h2 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h2><p>UTF-8æ˜¯ä¸€ç§å¯å˜é•¿åº¦å­—ç¬¦ç¼–ç æ–¹å¼ï¼Œä»¥8-bit ä¸ºå•å…ƒï¼Œä½¿ç”¨1è‡³4ä¸ªå­—èŠ‚ä¸ºæ¯ä¸ªå­—ç¬¦ç¼–ç ã€‚</p>
<p>UTF-8ç¼–ç è§„åˆ™å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Unicodeç¼–ç èŒƒå›´ ï¼ˆåå…­è¿›åˆ¶ï¼‰</th>
<th>UTF-8ç¼–ç å ç”¨å­—èŠ‚</th>
<th>UTF-8 ç¼–ç ï¼ˆäºŒè¿›åˆ¶ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>U+0000 - U+007F</td>
<td>1</td>
<td>0xxxxxxx</td>
</tr>
<tr>
<td>U+0080 - U+07FF</td>
<td>2</td>
<td>110xxxxx 10xxxxxx</td>
</tr>
<tr>
<td>U+0800 - U+FFFF</td>
<td>3</td>
<td>1110xxxx 10xxxxxx 10xxxxxx</td>
</tr>
<tr>
<td>U+10000 - U+10FFFF</td>
<td>4</td>
<td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
</tr>
</tbody></table>
<ul>
<li><p>æ ¹æ®å­—ç¬¦æ‰€åœ¨ç¼–ç èŒƒå›´ï¼Œç¡®å®šå…¶æ‰€å å­—èŠ‚æ•°</p>
</li>
<li><p>å•å­—èŠ‚çš„å­—ç¬¦ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º0</p>
</li>
<li><p>nä¸ªå­—èŠ‚çš„å­—ç¬¦(n&gt;1)ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰nä½è®¾ä¸º1ï¼Œç¬¬n+1ä½è®¾ä¸º0ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½éƒ½è®¾ä¸º10ï¼Œè¿™nä¸ªå­—èŠ‚çš„å…¶ä½™ç©ºä½å¡«å……è¯¥å­—ç¬¦unicodeç ï¼Œé«˜ä½ç”¨0è¡¥è¶³</p>
</li>
</ul>
<p>ä¸‹é¢ï¼Œä»¥æ±‰å­—<a href="http://unicode.org/cldr/utility/character.jsp?a=9C7C&B1=Show" target="_blank" rel="noopener external nofollow noreferrer">â€œé±¼â€</a>ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•å®ç°UTF-8ç¼–ç ã€‚</p>
<p>â€œé±¼â€çš„Unicodeç¼–ç æ˜¯<code>9C7C</code>ï¼ˆ<code>1001 1100 0111 1100</code>ï¼‰ï¼Œæ ¹æ®ä¸Šè¡¨ï¼Œ<code>9C7C</code> çš„UTF-8ç¼–ç éœ€è¦å ç”¨3ä¸ªå­—èŠ‚ï¼Œå…¶æ ¼å¼ä¸º<code>1110xxxx 10xxxxxx 10xxxxxx</code>ã€‚ç„¶åï¼Œ<strong>ä»â€œé±¼â€çš„æœ€åä¸€ä¸ªäºŒè¿›åˆ¶ä½å¼€å§‹ï¼Œä¾æ¬¡ä»åå‘å‰å¡«å…¥æ ¼å¼ä¸­çš„<code>x</code>ï¼Œå¤šå‡ºçš„ä½è¡¥<code>0</code></strong>ã€‚è¿™æ ·ï¼Œå°±å¾—åˆ°â€œé±¼â€çš„UTF-8ç¼–ç ï¼š<code>11101001 10110001 10111100</code>ï¼Œè½¬æ¢ä¸ºåå…­è¿›åˆ¶å°±æ˜¯ï¼š<code>E9B1BC</code></p>
<h2 id="UTF-16"><a href="#UTF-16" class="headerlink" title="UTF-16"></a>UTF-16</h2><p>UTF-16æ˜¯ä¸€ç§å¯å˜é•¿åº¦å­—ç¬¦ç¼–ç æ–¹å¼ï¼Œä»¥16-bit ä¸ºå•å…ƒï¼Œä½¿ç”¨2ä¸ªæˆ–4ä¸ªå­—èŠ‚ä¸ºæ¯ä¸ªå­—ç¬¦ç¼–ç ã€‚</p>
<p>UTF-16çš„ç¼–ç è§„åˆ™å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Unicodeç¼–ç èŒƒå›´ ï¼ˆåå…­è¿›åˆ¶ï¼‰</th>
<th>UTF-16ç¼–ç å ç”¨å­—èŠ‚</th>
<th>UTF-16 ç¼–ç ï¼ˆäºŒè¿›åˆ¶ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>U+0000 - U+FFFF</td>
<td>2</td>
<td>xxxxxxxx xxxxxxxx</td>
</tr>
<tr>
<td>U+10000 - U+10FFFF</td>
<td>4</td>
<td>110110yyyyyyyyyy 110111xxxxxxxxxx</td>
</tr>
</tbody></table>
<ul>
<li><p>æŠŠå­—ç¬¦çš„Unicodeç¼–ç è®°ä½œ U</p>
</li>
<li><p>è‹¥U &lt; 0x10000ï¼Œå­—ç¬¦çš„UTF-16ç¼–ç å°±æ˜¯Uå¯¹åº”çš„16ä½äºŒè¿›åˆ¶ï¼šxxxxxxxx xxxxxxxx </p>
</li>
<li><p>è‹¥U â‰¥ 0x10000ï¼Œåˆ™æŠŠå­—ç¬¦æ‹†åˆ†ä¸º2éƒ¨åˆ†ï¼ˆU+10000 ~ U+10FFFFçš„ç©ºé—´å¤§å°æ˜¯2^20ï¼‰ï¼Œå‰åä½æ˜ å°„åˆ°U+D800<del>U+DBFFï¼Œååä½æ˜ å°„åˆ°U+DC00</del>U+DFFFã€‚å…·ä½“æ‹†åˆ†è®¡ç®—å¦‚ä¸‹ï¼š</p>
<ul>
<li>è®¡ç®—Uâ€™=U-0x10000ï¼Œ</li>
<li>å°†Uâ€™å†™æˆäºŒè¿›åˆ¶å½¢å¼ï¼šyyyy yyyy yyxx xxxx xxxxï¼Œ</li>
<li>æŒ‰ç…§<code>110110yyyyyyyyyy 110111xxxxxxxxxx</code>æ ¼å¼å¡«å…¥ï¼Œå³å¾—åˆ°Uçš„UTF-16ç¼–ç ï¼ˆäºŒè¿›åˆ¶ï¼‰ï¼š110110yyyyyyyyyy 110111xxxxxxxxxx</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>åœ¨åŸºæœ¬å¹³é¢ï¼ˆ0x0000<del>0xFFFFï¼‰å†…ï¼ŒU+D800</del>U+DFFFæ˜¯ä¸€ä¸ªç©ºæ®µï¼Œå³è¿™äº›ç ä½ä¸å¯¹åº”ä»»ä½•å­—ç¬¦</li>
<li>è¾…åŠ©å¹³é¢ï¼ˆ0x10000~0x10FFFFï¼‰çš„å­—ç¬¦ä½å…±æœ‰2^20ä¸ª</li>
<li>U+D800<del>U+DBFFï¼Œç©ºé—´å¤§å°æ˜¯2^10ï¼›U+DC00</del>U+DFFFï¼Œç©ºé—´å¤§å°æ˜¯2^10ã€‚äºŒè€…ç»„åˆèµ·æ¥ï¼Œæ­£å¥½å¯ä»¥è¡¨ç¤ºè¾…åŠ©å¹³é¢çš„å­—ç¬¦ã€‚å³ï¼šè¾…åŠ©å¹³é¢çš„å­—ç¬¦å¯ä»¥æ‹†åˆ†ä¸ºä¸¤ä¸ªåŸºæœ¬å¹³é¢çš„å­—ç¬¦è¡¨ç¤ºâ€”â€”å­—ç¬¦å‰10ä½æ˜ å°„åœ¨U+D800åˆ°U+DBFFï¼Œå10ä½æ˜ å°„åœ¨U+DC00åˆ°U+DFFF</li>
</ul>
</blockquote>
<p>ä¸‹é¢ï¼Œä»¥æ±‰å­—<a href="http://unicode.org/cldr/utility/character.jsp?a=9C7C&B1=Show" target="_blank" rel="noopener external nofollow noreferrer">â€œé±¼â€</a>å’Œå­—ç¬¦<a href="http://unicode.org/cldr/utility/character.jsp?a=1D300&B1=Show" target="_blank" rel="noopener external nofollow noreferrer">â€œğŒ€â€</a>ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•å®ç°UTF-16ç¼–ç ã€‚</p>
<p>â€œé±¼â€çš„Unicodeç¼–ç æ˜¯<code>9C7C</code>ï¼Œæ ¹æ®ä¸Šè¡¨ï¼Œ<code>9C7C &lt; 0x10000</code> ï¼Œå…¶UTF-16ç¼–ç å°±æ˜¯å…¶Unicodeç¼–ç ï¼š<code>1001 1100 0111 1100</code>ï¼Œå³0x9C7Cã€‚</p>
<p>â€œğŒ€â€çš„Unicodeç¼–ç æ˜¯<code>1D300</code>ï¼Œæ ¹æ®ä¸Šè¡¨ï¼Œ<code>1D300 &gt; 0x10000</code>ï¼Œç„¶åå‡å»0x10000ï¼Œå¾—åˆ°0xD300ï¼ŒæŒ‰<code>yyyy yyyy yyxx xxxx xxxx</code>æ ¼å¼å†™æˆäºŒè¿›åˆ¶æ˜¯ï¼š<code>0000 1101 0011 0000 0000</code>ï¼Œç„¶åæŒ‰ç…§<code>110110yyyyyyyyyy 110111xxxxxxxxxx</code>æ ¼å¼å¡«å…¥ï¼Œå¾—åˆ°â€œğŒ€â€çš„UTF-16ç¼–ç ï¼ˆäºŒè¿›åˆ¶ï¼‰ï¼š<code>1101100000110100 1101111100000000</code>ï¼Œå³<code>0xD834 0xDF00</code>ã€‚</p>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>å›åˆ°å…ˆå‰çš„ç–‘é—®ï¼šUnicode å’Œ UTF-8 ã€UTF-16æ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p>
<p>æ‰“ä¸ªæ¯”å–»ï¼Œå®ƒä»¬ç†è®ºå’Œå®ç°çš„å…³ç³»ï¼šUnicodeåˆ¶å®šäº†çš„ç†è®ºï¼ŒUTF-8å’ŒUTF-16æ˜¯å…·ä½“çš„å®ç°æ–¹æ¡ˆã€‚</p>
<p>è€Œæ›´å½¢è±¡çš„æ¯”å–»åˆ™æ˜¯ï¼šUnicodeç›¸å½“äºä¸­æ–‡, UTF-8ã€ UTF-16ç­‰ç›¸å½“äº è¡Œä¹¦ã€ æ¥·ä¹¦ã€è‰ä¹¦ç­‰å„ç§ä¹¦å†™æ–¹å¼ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://zh.wikipedia.org/wiki/Unicode" target="_blank" rel="noopener external nofollow noreferrer">https://zh.wikipedia.org/wiki/Unicode</a><br><a href="https://zh.wikipedia.org/wiki/UTF-8" target="_blank" rel="noopener external nofollow noreferrer">https://zh.wikipedia.org/wiki/UTF-8</a><br><a href="https://zh.wikipedia.org/wiki/UTF-16" target="_blank" rel="noopener external nofollow noreferrer">https://zh.wikipedia.org/wiki/UTF-16</a><br><a href="http://www.ruanyifeng.com/blog/2014/12/unicode.html" target="_blank" rel="noopener external nofollow noreferrer">http://www.ruanyifeng.com/blog/2014/12/unicode.html</a><br><a href="http://blog.jobbole.com/111261/" target="_blank" rel="noopener external nofollow noreferrer">http://blog.jobbole.com/111261/</a><br><a href="http://blog.csdn.net/softman11/article/details/6124345" target="_blank" rel="noopener external nofollow noreferrer">http://blog.csdn.net/softman11/article/details/6124345</a><br><a href="https://www.zhihu.com/question/23374078" target="_blank" rel="noopener external nofollow noreferrer">https://www.zhihu.com/question/23374078</a></p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2017</tag>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title>YKPageControllerScrollViewè®¾è®¡æ€»ç»“</title>
    <url>/2017/YKPageControllerScrollView%E8%AE%BE%E8%AE%A1%E6%80%BB%E7%BB%93/readme/</url>
    <content><![CDATA[<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><a href="https://github.com/YK-Unit/YKPageControllerScrollView" target="_blank" rel="noopener">YKPageControllerScrollView</a> æ˜¯ä¸€ä¸ª <code>UIViewController</code> å®¹å™¨ç±»çš„æ»šåŠ¨è§†å›¾ï¼Œæ”¯æŒ <code>UIViewController</code> é‡ç”¨æœºåˆ¶ã€‚<code>YKPageControllerScrollView</code> ç±»çš„è®¾è®¡å‚è€ƒäº† <code>UICollectionView</code> ç±»ï¼Œæ‰€ä»¥ä½ ä¼šå‘ç°ï¼Œå…¶æ¥å£ä»¥åŠä»£ç†æ–¹æ³•å’Œ <code>UICollectionView</code> çš„æ˜¯å¾ˆç›¸ä¼¼çš„ï¼Œä½¿ç”¨ä¸Šä¹Ÿæ˜¯ç›¸ä¼¼çš„ã€‚</p>
<a id="more"></a>

<h2 id="å¦‚ä½•ä¸ã€å®¹å™¨å†…å®¹ã€äº¤äº’ï¼Ÿ"><a href="#å¦‚ä½•ä¸ã€å®¹å™¨å†…å®¹ã€äº¤äº’ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¸ã€å®¹å™¨å†…å®¹ã€äº¤äº’ï¼Ÿ"></a>å¦‚ä½•ä¸ã€å®¹å™¨å†…å®¹ã€äº¤äº’ï¼Ÿ</h2><p>å®¹å™¨æœ‰ä¸€ä¸ªç‰¹æ€§åœ¨æˆ‘çœ‹æ¥æ˜¯å¾ˆé‡è¦çš„ï¼Œé‚£å°±æ˜¯ã€å®¹å™¨ã€å’Œã€å®¹å™¨å†…å®¹ã€ä¹‹é—´çš„äº¤äº’ï¼šã€å®¹å™¨ã€å‘ŠçŸ¥ã€å®¹å™¨å†…å®¹ã€å…¶çŠ¶æ€çš„å˜æ›´ã€‚<br>å¯¹äº<code>YKPageControllerScrollView</code>è€Œè¨€ï¼Œè¿™äº¤äº’å°±æ˜¯ï¼šå‘ŠçŸ¥ã€VCå®ä¾‹ã€çš„æ˜¾ç¤ºçŠ¶æ€ï¼ˆå°†å‡ºç° or å·²å‡ºç° or å·²æ¶ˆå¤±åœ¨è§†å›¾ä¸­ï¼‰ä»¥åŠç”Ÿå‘½çŠ¶æ€ï¼ˆè¢«å®¹å™¨å›æ”¶äº†ï¼‰çš„å˜æ›´ã€‚</p>
<p>é‚£ä¹ˆæ€ä¹ˆè¾¾åˆ°ä»¥ä¸Šçš„ç›®çš„å‘¢ï¼Ÿæ­¤å¤„æ˜¯è®¾è®¡äº†ä¸€ä¸ªåè®® <code>YKPageControllerScrollViewLifeCycleProtocol</code> ï¼Œæ¯ä¸ªè¦æ”¾ç½®å…¥å®¹å™¨å†…çš„ <code>UIViewController</code> ç±»éƒ½åº”è¯¥å»å®ç°è¿™ä¹ˆä¸€ä¸ªåè®®ã€‚åè®®å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">YKPageControllerScrollViewLifeCycleProtocol</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)controllerWillAppearInPageControllerScrollView;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)controllerDidAppearInPageControllerScrollView;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)controllerDidDisappearInPageControllerScrollView;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)controllerDidBeReclaimedByPageControllerScrollView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<p>å®ç°äº†ä¸Šè¿°åè®®çš„ <code>UIViewController</code> åœ¨çŠ¶æ€æœ‰å˜æ›´æ—¶ï¼Œä¼šå¾—åˆ°æ¥è‡ªå®¹å™¨çš„é€šçŸ¥ã€‚</p>
<h2 id="æ€ä¹ˆé€šçŸ¥VCå®ä¾‹æ˜¾ç¤ºçŠ¶æ€çš„å˜æ›´"><a href="#æ€ä¹ˆé€šçŸ¥VCå®ä¾‹æ˜¾ç¤ºçŠ¶æ€çš„å˜æ›´" class="headerlink" title="æ€ä¹ˆé€šçŸ¥VCå®ä¾‹æ˜¾ç¤ºçŠ¶æ€çš„å˜æ›´"></a>æ€ä¹ˆé€šçŸ¥VCå®ä¾‹æ˜¾ç¤ºçŠ¶æ€çš„å˜æ›´</h2><p><code>YKPageControllerScrollView</code> ç»§æ‰¿è‡ª <code>UIView</code>ï¼Œé‚£åœ¨å…¶å†…éƒ¨ï¼Œåˆ°åº•æ˜¯è°çœŸæ­£è£…è½½äº† <code>UIViewController</code> çš„è§†å›¾å†…å®¹å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<code>UICollectionView</code>ã€‚</p>
<p>è€Œ <code>YKPageControllerScrollView</code> æ˜¯æ€ä¹ˆè·å–åˆ°VCå®ä¾‹çš„æ˜¾ç¤ºçŠ¶æ€ï¼ˆå°†å‡ºç° or å·²å‡ºç° or å·²æ¶ˆå¤±åœ¨è§†å›¾ä¸­ï¼‰å‘¢ï¼Ÿæ­£æ˜¯å€ŸåŠ©äº†<code>UICollectionView</code> çš„ <code>UICollectionViewDelegate</code> é‡Œçš„ç›¸å…³å›è°ƒæ–¹æ³•ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView willDisplayCell:(<span class="built_in">UICollectionViewCell</span> *)cell forItemAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView didEndDisplayingCell:(<span class="built_in">UICollectionViewCell</span> *)cell forItemAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ä¸Šè¿°çš„å›è°ƒåªæ˜¯å¸®åŠ© <code>YKPageControllerScrollView</code> é€šçŸ¥åº”ç”¨å±‚å“ªäº›VCå®ä¾‹  ã€å°†å‡ºç°åœ¨è§†å›¾ä¸­ã€ å’Œ ã€å·²æ¶ˆå¤±åœ¨è§†å›¾ä¸­ã€ è€Œå·²ï¼ˆåŒ…æ‹¬é€šçŸ¥å¯¹åº”çš„VCå®ä¾‹ï¼‰ï¼Œå¦å¤–ä¸€ä¸ªã€å·²å‡ºç°åœ¨è§†å›¾ä¸­ã€çš„çŠ¶æ€ï¼Œ<code>YKPageControllerScrollView</code> æ€ä¹ˆé€šçŸ¥åº”ç”¨å±‚å‘¢ï¼Ÿ</p>
<p>æ–¹æ³•å…¶å®ä¹Ÿå¾ˆç®€å•â€”â€”å½“<code>YKPageControllerScrollView</code> é‡Œçš„è§†å›¾æ»‘åŠ¨<br>åœæ­¢åï¼Œè·å–å½“å‰çš„VCå®ä¾‹ï¼Œå³å¯å‘ŠçŸ¥åº”ç”¨å±‚å“ªä¸ªVCå®ä¾‹å·²å‡ºç°åœ¨è§†å›¾ä¸­ï¼ˆåŒ…æ‹¬é€šçŸ¥å½“å‰VCå®ä¾‹ï¼‰ã€‚</p>
<p><code>YKPageControllerScrollView</code> çš„æ»‘åŠ¨çš„äº§ç”Ÿï¼Œä¸€ä¸ªæºè‡ªç”¨æˆ·æ‰‹åŠ¨æ»‘åŠ¨ï¼Œä¸€ä¸ªæºè‡ªç¨‹åºæ¥å£ <code>[UICollectionView setContentOffset:animated:]</code>ã€‚</p>
<p>è‹¥æ˜¯ç”¨æˆ·æ‰‹åŠ¨æ»‘åŠ¨è§†å›¾ï¼Œåˆ™åœ¨ <code>- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView</code> å›è°ƒä¸­ï¼Œæ‰§è¡Œä¸Šè¿°é€šçŸ¥é€»è¾‘å³å¯ã€‚</p>
<p>è‹¥æ˜¯é€šè¿‡ <code>[UICollectionView setContentOffset:animated:]</code> æ»‘åŠ¨è§†å›¾ï¼Œåˆ™éœ€è¦è¿›ä¸€æ­¥åŒºåˆ† <code>animated</code> ä¸º YES å’Œ NO çš„æƒ…å†µï¼š</p>
<ul>
<li><p>å½“<code>animated</code> ä¸º YES  æ—¶ï¼š</p>
<p>æ­¤æ—¶åœ¨ <code>- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView</code> å›è°ƒä¸­ï¼Œæ‰§è¡Œä¸Šè¿°é€šçŸ¥é€»è¾‘å³å¯ã€‚</p>
</li>
<li><p>å½“<code>animated</code> ä¸º NO  æ—¶ï¼š</p>
<p>  æ­¤æ—¶åœ¨ <code>- (void)scrollViewDidScroll:(UIScrollView *)scrollView</code> å›è°ƒä¸­ï¼Œåˆ¤æ–­å½“å‰çš„æ»‘åŠ¨æ˜¯éç”¨æˆ·æ‰‹åŠ¨æ»‘åŠ¨ä¸”<code>animated</code> ä¸º NOçš„æƒ…å†µä¸‹ï¼Œæ‰æ‰§è¡Œä¸Šè¿°é€šçŸ¥é€»è¾‘ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)scrollViewDidScroll:(<span class="built_in">UIScrollView</span> *)scrollView</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>.isScrollWithAnim &amp;&amp; !scrollView.isTracking &amp;&amp; !scrollView.isDragging &amp;&amp; !scrollView.isDecelerating) &#123;</span><br><span class="line">        <span class="keyword">self</span>.currentIndex = (<span class="built_in">NSInteger</span>)(scrollView.contentOffset.x / <span class="keyword">self</span>.frame.size.width);</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">UIViewController</span>&lt;YKPageControllerScrollViewLifeCycleProtocol&gt; *currentVC = [<span class="keyword">self</span> currentViewController];</span><br><span class="line">        <span class="comment">//å¦‚æœå½“å‰VCè¿˜æ²¡ç”Ÿæˆï¼Œåˆ™æ¨è¿Ÿå‘é€é€šçŸ¥</span></span><br><span class="line">        <span class="keyword">if</span> (currentVC) &#123;</span><br><span class="line">            [<span class="keyword">self</span> sendDidDisplayNotificationToViewController:currentVC];</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//åœæ­¢æ»šåŠ¨åï¼Œå›æ”¶å¯å›æ”¶çš„VC</span></span><br><span class="line">            [<span class="keyword">self</span> recycleViewController];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            [<span class="built_in">NSObject</span> cancelPreviousPerformRequestsWithTarget:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(scrollViewDidEndScrollingAnimation:) object:scrollView];</span><br><span class="line">            [<span class="keyword">self</span> performSelector:<span class="keyword">@selector</span>(scrollViewDidEndScrollingAnimation:) withObject:scrollView afterDelay:<span class="number">1.0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="UIViewController-é‡ç”¨æœºåˆ¶"><a href="#UIViewController-é‡ç”¨æœºåˆ¶" class="headerlink" title="UIViewController é‡ç”¨æœºåˆ¶"></a>UIViewController é‡ç”¨æœºåˆ¶</h2><p><code>YKPageControllerScrollView</code> æ”¯æŒçš„ <code>UIViewController</code> é‡ç”¨æœºåˆ¶ç±»ä¼¼äº <code>UICollectionView</code> çš„ <code>cell</code> é‡ç”¨æœºåˆ¶ã€‚</p>
<p>åœ¨åº”ç”¨å±‚é¢ä¸Šï¼ŒäºŒè€…çš„ä½¿ç”¨æ˜¯è¿‘ä¼¼çš„ï¼š</p>
<ol>
<li>é€šè¿‡ <code>[YKPageControllerScrollView registerClassForController:class]</code> æ³¨å†Œå¯é‡ç”¨çš„ <code>ViewController</code> ç±»ã€‚</li>
<li>é€šè¿‡ <code>[YKPageControllerScrollView dequeueReusableViewControllerWithReuseClass:class forIndex:index]</code> è¿”å›å¯é‡ç”¨çš„VCå®ä¾‹ã€‚è‹¥è¿”å›çš„å®ä¾‹ä¸º nilï¼Œåˆ™ç”±åº”ç”¨å±‚ç”Ÿæˆä¸€ä¸ªæ–°çš„VCå®ä¾‹</li>
</ol>
<p>é‚£ä¹ˆï¼Œåœ¨ <code>YKPageControllerScrollView</code> å†…ï¼Œè¯¥æœºåˆ¶æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p>
<p>é‡ç”¨æœºåˆ¶ï¼Œæ€»ä½“æ¥è¯´ï¼Œæ¶‰åŠ3ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>VCæ˜¯æ€ä¹ˆå¾—åˆ°çš„ï¼Ÿ</li>
<li>VCæ˜¯æ€ä¹ˆé‡æ–°åˆ©ç”¨çš„ï¼Ÿ</li>
<li>VCæ˜¯æ€ä¹ˆå›æ”¶çš„ï¼Ÿ</li>
</ul>
<p>åœ¨è§£ç­”ä¸Šè¿°3ä¸ªé—®é¢˜å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹<code>YKPageControllerScrollView</code> çš„è¾…åŠ©å±æ€§ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) <span class="built_in">NSMutableDictionary</span> *dict4ReusableArray; </span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) <span class="built_in">NSMutableDictionary</span> *dict4ActiveController; </span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) <span class="built_in">NSMutableArray</span> *array4PendingControllerIndex;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>dict4ReusableArray</code> ç”¨äºä¿å­˜å¯é‡ç”¨çš„VCå®ä¾‹ï¼ˆæ²¡åŠ è½½åˆ°å®¹å™¨ä¸Šçš„VCå®ä¾‹ï¼‰æ•°ç»„</li>
<li><code>dict4ActiveController</code> ç”¨äºä¿å­˜æ­£åœ¨ä½¿ç”¨çš„VCå®ä¾‹ï¼ˆåŠ è½½åˆ°å®¹å™¨ä¸Šçš„VCå®ä¾‹ï¼‰</li>
<li><code>array4PendingControllerIndex</code> ç”¨äºä¿å­˜é‚£äº›ä¸å¯è§çš„VCå®ä¾‹ï¼ˆåŠ è½½åˆ°å®¹å™¨ä¸Šï¼Œä½†æ˜¯æ²¡åœ¨å¯è§†åŒºåŸŸçš„VCå®ä¾‹ï¼‰çš„ç´¢å¼•</li>
</ul>
<h3 id="VCæ˜¯æ€ä¹ˆå¾—åˆ°çš„ï¼Ÿ"><a href="#VCæ˜¯æ€ä¹ˆå¾—åˆ°çš„ï¼Ÿ" class="headerlink" title="VCæ˜¯æ€ä¹ˆå¾—åˆ°çš„ï¼Ÿ"></a>VCæ˜¯æ€ä¹ˆå¾—åˆ°çš„ï¼Ÿ</h3><p>åœ¨å›è°ƒ <code>- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath</code> ä¸­ï¼Œé€šçŸ¥åº”ç”¨å±‚è¿”å›ä¸€ä¸ªVCå®ä¾‹ï¼Œå¹¶å­˜æ”¾åˆ°<code>dict4ActiveController</code> å­—å…¸ä¸­ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="built_in">UICollectionViewCell</span> *)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView cellForItemAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UICollectionViewCell</span> *cell = [collectionView dequeueReusableCellWithReuseIdentifier:YKPageControllerScrollViewCellIdentifier forIndexPath:indexPath];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSInteger</span> index = indexPath.row;</span><br><span class="line">    <span class="keyword">self</span>.currentIndex = index;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.delegate &amp;&amp; [<span class="keyword">self</span>.delegate respondsToSelector:<span class="keyword">@selector</span>(pageControllerScrollView:controllerForItemAtIndex:)]) &#123;</span><br><span class="line">        <span class="built_in">UIViewController</span>&lt;YKPageControllerScrollViewLifeCycleProtocol&gt; *vc = [<span class="keyword">self</span>.delegate pageControllerScrollView:<span class="keyword">self</span> controllerForItemAtIndex:index];</span><br><span class="line">        </span><br><span class="line">        vc.view.frame = cell.contentView.bounds;</span><br><span class="line">        [cell.contentView addSubview:vc.view];</span><br><span class="line">        [<span class="keyword">self</span>.containerViewController addChildViewController:vc];</span><br><span class="line">        [<span class="keyword">self</span>.dict4ActiveController setObject:vc forKey:@(index)];</span><br><span class="line">        [<span class="keyword">self</span>.array4PendingControllerIndex removeObject:@(index)];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//NSLog(@"cellForItemAtIndex:%d",index);</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> cell;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="VCæ˜¯æ€ä¹ˆé‡æ–°åˆ©ç”¨çš„ï¼Ÿ"><a href="#VCæ˜¯æ€ä¹ˆé‡æ–°åˆ©ç”¨çš„ï¼Ÿ" class="headerlink" title="VCæ˜¯æ€ä¹ˆé‡æ–°åˆ©ç”¨çš„ï¼Ÿ"></a>VCæ˜¯æ€ä¹ˆé‡æ–°åˆ©ç”¨çš„ï¼Ÿ</h3><p>åœ¨åº”ç”¨å±‚ä¸Šï¼Œå½“ <code>YKPageControllerScrollView</code> é€šçŸ¥è¿”å›ä¸€ä¸ª VCå®ä¾‹æ—¶ï¼Œåº”ç”¨å±‚é¦–å…ˆè°ƒç”¨ <code>YKPageControllerScrollView</code> çš„<code>dequeueReusableViewControllerWithReuseClass:forIndex:</code>  æ–¹æ³•è·å–ä¸€ä¸ªå¯é‡ç”¨çš„VCå®ä¾‹ï¼Œè‹¥ä¸ºnilï¼Œæ‰ç”Ÿæˆä¸€ä¸ªVCå®ä¾‹ç»™<code>YKPageControllerScrollView</code>ã€‚VCèƒ½å¤Ÿé‡æ–°åˆ©ç”¨çš„é‡ç‚¹å°±åœ¨äº <code>dequeueReusableViewControllerWithReuseClass:forIndex:</code>çš„å®ç°ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">UIViewController</span>&lt;YKPageControllerScrollViewLifeCycleProtocol&gt; *)dequeueReusableViewControllerWithReuseClass:(<span class="keyword">nonnull</span> Class)reuseClass forIndex:(<span class="built_in">NSInteger</span>)index</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UIViewController</span>&lt;YKPageControllerScrollViewLifeCycleProtocol&gt; *reusableVC = <span class="literal">nil</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSString</span> *identifier = [reuseClass description];</span><br><span class="line">    <span class="built_in">NSMutableArray</span> *reusableArray = [<span class="keyword">self</span>.dict4ReusableArray objectForKey:identifier];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è‹¥reusableArrayä¸ºnilï¼Œè¯´æ˜æ²¡æœ‰æ³¨å†ŒreuseClassï¼ˆæ‰§è¡Œ[YKPageControllerScrollView registerClassForController:reuseClass]ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> (reuseClass &amp;&amp; reusableArray) &#123;</span><br><span class="line">        <span class="built_in">UIViewController</span>&lt;YKPageControllerScrollViewLifeCycleProtocol&gt; *vc = [<span class="keyword">self</span>.dict4ActiveController objectForKey:@(index)];</span><br><span class="line">        <span class="keyword">if</span> (vc) &#123;</span><br><span class="line">            reusableVC = vc;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            vc = [reusableArray firstObject];</span><br><span class="line">            <span class="keyword">if</span> (vc) &#123;</span><br><span class="line">                reusableVC = vc;</span><br><span class="line">                [reusableArray removeObject:vc];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> reusableVC;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>YKPageControllerScrollView</code> æ ¹æ® <code>class</code>ï¼Œä» <code>dict4ReusableArray</code> å­—å…¸ä¸­è·å–å¯¹åº”çš„VCé‡ç”¨æ•°ç»„ï¼Œç„¶åä»æ•°ç»„ä¸­å–å‡ºä¸€ä¸ªå¯ç”¨çš„VCå®ä¾‹ã€‚è‹¥æ•°ç»„ä¸ºç©ºï¼Œåˆ™è¿”å› nilï¼Œç”±åº”ç”¨å±‚è‡ªå·±ç”Ÿæˆä¸€ä¸ªVCå®ä¾‹ã€‚</p>
<h3 id="VCæ˜¯æ€ä¹ˆå›æ”¶ï¼Ÿ"><a href="#VCæ˜¯æ€ä¹ˆå›æ”¶ï¼Ÿ" class="headerlink" title="VCæ˜¯æ€ä¹ˆå›æ”¶ï¼Ÿ"></a>VCæ˜¯æ€ä¹ˆå›æ”¶ï¼Ÿ</h3><p> åœ¨<code>YKPageControllerScrollView</code> æ»‘åŠ¨è¿‡ç¨‹ä¸­ï¼Œä¼šæŠŠæ˜¾ç¤ºçš„VCå®ä¾‹çš„ç´¢å¼•ä» <code>array4PendingControllerIndex</code> ä¸­ç§»é™¤ï¼ŒæŠŠæ¶ˆå¤±çš„VCå®ä¾‹çš„ç´¢å¼•æ·»åŠ åˆ° <code>array4PendingControllerIndex</code> ä¸­ã€‚<br>å½“ <code>YKPageControllerScrollView</code> åœæ­¢æ»‘åŠ¨åï¼Œæ‰§è¡Œå›æ”¶æ“ä½œ <code>[YKPageControllerScrollView  recycleViewController]</code>ï¼šæŠŠæ¶ˆå¤±çš„ä¸”è·ç¦»å½“å‰ç´¢å¼•çš„è·ç¦»å¤§äº3çš„VCå®ä¾‹ä» <code>dict4ActiveController</code> å­—å…¸ä¸­å›æ”¶åˆ°å¯¹åº”é‡ç”¨æ•°ç»„ä¸­ã€‚å›æ”¶æ“ä½œå…·ä½“å¦‚ä¸‹ï¼š</p>
 <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)recycleViewController</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSArray</span> *tempArray = [<span class="built_in">NSArray</span> arrayWithArray:<span class="keyword">self</span>.array4PendingControllerIndex];</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSNumber</span> *indexNum <span class="keyword">in</span> tempArray) &#123;</span><br><span class="line">        <span class="built_in">NSInteger</span> index = [indexNum integerValue];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (labs(<span class="keyword">self</span>.currentIndex - index) &gt;= <span class="number">3</span> ) &#123;</span><br><span class="line">            <span class="built_in">UIViewController</span>&lt;YKPageControllerScrollViewLifeCycleProtocol&gt; *vc = [<span class="keyword">self</span>.dict4ActiveController objectForKey:@(index)];</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (vc) &#123;</span><br><span class="line">                [vc.view removeFromSuperview];</span><br><span class="line">                [vc removeFromParentViewController];</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> ([vc respondsToSelector:<span class="keyword">@selector</span>(controllerDidBeReclaimedByPageControllerScrollView)]) &#123;</span><br><span class="line">                    [vc controllerDidBeReclaimedByPageControllerScrollView];</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                [<span class="keyword">self</span>.dict4ActiveController removeObjectForKey:@(index)];</span><br><span class="line">                [<span class="keyword">self</span>.array4PendingControllerIndex removeObject:@(index)];</span><br><span class="line">                </span><br><span class="line">                Class reuseClass = [vc <span class="keyword">class</span>];</span><br><span class="line">                <span class="built_in">NSString</span> *identifier = [reuseClass description];</span><br><span class="line">                <span class="built_in">NSMutableArray</span> *reusableArray = [<span class="keyword">self</span>.dict4ReusableArray objectForKey:identifier];</span><br><span class="line">                [reusableArray addObject:vc];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è‡³æ­¤ï¼Œ<code>YKPageControllerScrollView</code> å†…å½¢æˆäº†VCå®ä¾‹çš„ç”Ÿæˆã€å›æ”¶ã€é‡ç”¨çš„é—­ç¯ã€‚</p>
<h2 id="æ€ä¹ˆé€šçŸ¥VCå®ä¾‹ç”Ÿå‘½çŠ¶æ€çš„å˜æ›´"><a href="#æ€ä¹ˆé€šçŸ¥VCå®ä¾‹ç”Ÿå‘½çŠ¶æ€çš„å˜æ›´" class="headerlink" title="æ€ä¹ˆé€šçŸ¥VCå®ä¾‹ç”Ÿå‘½çŠ¶æ€çš„å˜æ›´"></a>æ€ä¹ˆé€šçŸ¥VCå®ä¾‹ç”Ÿå‘½çŠ¶æ€çš„å˜æ›´</h2><p>VCå®ä¾‹åœ¨<code>YKPageControllerScrollView</code>é‡Œçš„ç”Ÿå‘½çŠ¶æ€çš„å˜æ›´ä¸»è¦æ˜¯ï¼šVCå®ä¾‹è¢« <code>YKPageControllerScrollView</code> å›æ”¶äº†ã€‚</p>
<p>æ‰€ä»¥ï¼Œåªéœ€è¦åœ¨ <code>YKPageControllerScrollView</code> æ‰§è¡Œå›æ”¶æ“ä½œçš„æ—¶å€™ï¼Œé€šçŸ¥è¢«å›æ”¶çš„VCå®ä¾‹å³å¯ã€‚å…·ä½“ä»£ç ï¼Œå¯çœ‹<code>[YKPageControllerScrollView  recycleViewController]</code> ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>2017</tag>
      </tags>
  </entry>
  <entry>
    <title>YKWebViewJavascriptBridgeè®¾è®¡æ€»ç»“</title>
    <url>/2017/YKWebViewJavascriptBridge%E8%AE%BE%E8%AE%A1%E6%80%BB%E7%BB%93/readme/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨ iOS å¼€å‘ä¸­ï¼Œä½ åº”è¯¥ä¼šç¢°åˆ°ä»¥ä¸‹è¿™ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>å¦‚ä½•å®ç° APP å†…çš„ web é¡µé¢å’Œ Native é¡µé¢çš„äº¤äº’åŠŸèƒ½?<br><em>è¯¥é—®é¢˜çš„æœ¬è´¨æ˜¯ï¼šå®ç° JS å’Œ OC çš„ç›¸äº’è°ƒç”¨ã€‚</em></p>
</blockquote>
<p><a href="https://github.com/YK-Unit/YKWebViewJavascriptBridge" target="_blank" rel="noopener">YKWebViewJavascriptBridge</a> æ˜¯æˆ‘é’ˆå¯¹ä¸Šè¿°é—®é¢˜å®ç°çš„åº“ã€‚ä¸‹é¢å°†ä¼šå…·ä½“ä»‹ç»è¯¥åº“çš„è®¾è®¡æ€è·¯å’Œå…·ä½“å®ç°ã€‚</p>
<a id="more"></a>

<h1 id="YKWebViewJavascriptBridge"><a href="#YKWebViewJavascriptBridge" class="headerlink" title="YKWebViewJavascriptBridge"></a>YKWebViewJavascriptBridge</h1><p><code>YKWebViewJavascriptBridge</code> æ˜¯åŸºäº <code>WKWebView</code>+<code>messageHandler</code>+<code>è‡ªå®šä¹‰æ–‡æœ¬åè®®</code> è¿›è¡Œå®ç°çš„ï¼Œåè®®çš„ä¼ è¾“é‡‡å–çš„æ˜¯è¯·æ±‚å“åº”æ¨¡å¼ã€‚</p>
<p><code>YKWebViewJavascriptBridge</code> çš„è®¾è®¡å¾ˆç®€å•ï¼Œå…¶å†…éƒ¨åªæœ‰2ä¸ªç±»ï¼š</p>
<ul>
<li><code>YKNativeBridgeEngine</code>ï¼šæä¾› Native å±‚è°ƒç”¨ JS æ–¹æ³•çš„æ¥å£ï¼›ç®¡ç†ä¾› JS è°ƒç”¨çš„ OC æ–¹æ³•ï¼›ä¸ Web å±‚è¿›è¡Œåè®®é€šè®¯ï¼ˆå¯¹åè®®è¿›è¡Œç¼–ç ã€è§£ç ä»¥åŠä¼ è¾“ï¼‰</li>
<li><code>YKWebBridgeEngine</code>ï¼šæä¾› Web å±‚è°ƒç”¨ OC æ–¹æ³•çš„æ¥å£ï¼›ç®¡ç†ä¾›OC è°ƒç”¨çš„ JS æ–¹æ³•ï¼›ä¸ Native å±‚è¿›è¡Œåè®®é€šè®¯ï¼ˆå¯¹åè®®è¿›è¡Œç¼–ç ã€è§£ç ä»¥åŠä¼ è¾“ï¼‰</li>
</ul>
<h2 id="å…³äºã€è‡ªå®šä¹‰æ–‡æœ¬åè®®ã€"><a href="#å…³äºã€è‡ªå®šä¹‰æ–‡æœ¬åè®®ã€" class="headerlink" title="å…³äºã€è‡ªå®šä¹‰æ–‡æœ¬åè®®ã€"></a>å…³äºã€è‡ªå®šä¹‰æ–‡æœ¬åè®®ã€</h2><p><code>YKWebViewJavascriptBridge</code> é‡Œè®¾è®¡çš„ã€åè®®ã€æ˜¯ä¸€ä¸ª JSON æ ¼å¼çš„æ–‡æœ¬åè®®ï¼Œå…¶å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>è¯·æ±‚æ–¹å‘å‡ºçš„åè®®æ•°æ®ï¼š</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"reqId"</span>:<span class="number">100</span>, <span class="comment">// è¯·æ±‚ID</span></span><br><span class="line">    <span class="attr">"name"</span>:<span class="string">"GetLocation"</span>, <span class="comment">// è¯·æ±‚å“åº”æ–¹æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line">    <span class="attr">"data"</span>:<span class="string">"some data from Requester"</span> <span class="comment">// ç»™å“åº”æ–¹çš„æ•°æ®ï¼ˆè‹¥æ²¡æœ‰æ•°æ®ç»™å“åº”æ–¹ï¼Œåˆ™ä¸å­˜åœ¨è¯¥keyï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å“åº”æ–¹è¿”å›çš„åè®®æ•°æ®ï¼š</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"respId"</span>:<span class="number">100</span>, <span class="comment">// å“åº”IDï¼Œå€¼æºè‡ªreqId</span></span><br><span class="line">    <span class="attr">"data"</span>:<span class="string">"some data from Responser"</span> <span class="comment">// ç»™è¯·æ±‚æ–¹çš„å“åº”æ•°æ®ï¼ˆè‹¥æ²¡æœ‰å“åº”æ•°æ®ï¼Œåˆ™ä¸å­˜åœ¨è¯¥keyï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…³äºã€ç¼–ç ã€è§£ç ã€"><a href="#å…³äºã€ç¼–ç ã€è§£ç ã€" class="headerlink" title="å…³äºã€ç¼–ç ã€è§£ç ã€"></a>å…³äºã€ç¼–ç ã€è§£ç ã€</h2><p><code>YKWebViewJavascriptBridge</code> çš„ç¼–ç å’Œè§£ç ï¼Œå…¶å®å°±æ˜¯æŠŠæ•°æ®å¯¹è±¡åºåˆ—åŒ–ä¸º JSON å’ŒæŠŠ JSON ååºåˆ—åŒ–ä¸ºæ•°æ®å¯¹è±¡ã€‚</p>
<h2 id="å…³äºã€åè®®ä¼ è¾“ã€"><a href="#å…³äºã€åè®®ä¼ è¾“ã€" class="headerlink" title="å…³äºã€åè®®ä¼ è¾“ã€"></a>å…³äºã€åè®®ä¼ è¾“ã€</h2><p>Nativeå±‚çš„åè®®ä¼ è¾“å’ŒWebå±‚çš„åè®®ä¼ è¾“åˆ†åˆ«ç”± <code>YKNativeBridgeEngine</code>  å’Œ <code>YKWebBridgeEngine</code> å„è‡ªå®ç°ã€‚å…¶ä¼ è¾“æ¥å£å®ç°å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>YKNativeBridgeEngine</code>çš„åè®®ä¼ è¾“æ¥å£</li>
</ul>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)_bridgeEngineDidWriteData:(<span class="built_in">NSString</span> *)jsonMessage</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!jsonMessage) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (![jsonMessage isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è°ƒç”¨YKWebBridgeEngineçš„_bridgeEngineDidReadDataæ–¹æ³•ä¼ é€’åè®®æ•°æ®ç»™YKWebBridgeEngine</span></span><br><span class="line">    <span class="built_in">NSString</span> *jsCode = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"YKWebBridgeEngine._bridgeEngineDidReadData('%@')"</span>,jsonMessage];</span><br><span class="line">    [<span class="keyword">self</span>.webView evaluateJavaScript:jsCode completionHandler:^(<span class="keyword">id</span> _Nullable result, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"bridgeEngineDidWriteData:%@-%@"</span>,result,error);</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)_bridgeEngineDidReadData:(<span class="built_in">NSString</span> *)jsonMessage</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!jsonMessage) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (![jsonMessage isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¯¹æ¥æ”¶åˆ°çš„jsonæ–‡æœ¬åè®®è¿›è¡Œè§£ç ï¼Œè½¬æ¢å±‚å­—å…¸å¯¹è±¡</span></span><br><span class="line">    <span class="built_in">NSDictionary</span> *messgaeDict = [<span class="keyword">self</span> deserializeJSONMessage:jsonMessage];</span><br><span class="line">    <span class="keyword">if</span> (!messgaeDict) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ ¹æ®è§£ç åçš„åè®®ï¼Œæ‰§è¡Œå…·ä½“æ“ä½œ</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>YKWebBridgeEngine</code>çš„åè®®ä¼ è¾“æ¥å£</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_bridgeEngineDidWriteData</span>(<span class="params">jsonMessage</span>) </span>&#123;</span><br><span class="line">	<span class="comment">//é€šè¿‡WKWebViewçš„messageHandleråŠŸèƒ½ï¼Œä¼ é€’æ•°æ®ç»™YKNativeBridgeEngine     </span></span><br><span class="line">    <span class="built_in">window</span>.webkit.messageHandlers.NativeBridgeEngineDidReadData.postMessage(jsonMessage);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_bridgeEngineDidReadData</span>(<span class="params">jsonMessage</span>) </span>&#123;</span><br><span class="line">	<span class="comment">// å¯¹æ¥æ”¶åˆ°çš„jsonæ–‡æœ¬åè®®è¿›è¡Œè§£ç ï¼Œè½¬æ¢å±‚å­—å…¸å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">var</span> messageDict = <span class="built_in">JSON</span>.parse(jsonMessage);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®è§£ç ååè®®å†…å®¹ï¼Œæ‰§è¡Œå…·ä½“çš„æ“ä½œ</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç†Ÿæ‚‰<code>WKWebView</code>+<code>messageHandler</code> çš„ç«¥é‹çœ‹åˆ°è¿™ï¼Œåº”è¯¥çŸ¥é“ï¼Œ<code>YKWebViewJavascriptBridge</code> çš„åè®®ä¼ è¾“å®Œå…¨æ˜¯åŸºäº <code>WKWebView</code> å®ç°çš„ï¼š</p>
<ul>
<li><p><code>[WKWebView evaluateJavaScript:completionHandler:]</code> æä¾›äº† Native å±‚å‘æ•°æ®ç»™ Web å±‚çš„èƒ½åŠ›</p>
</li>
<li><p><code>window.webkit.messageHandlers. NativeMethod.postMessage(messageData);</code> æä¾›äº† Web å±‚å‘é€æ•°æ®ç»™ Native å±‚çš„èƒ½åŠ›</p>
</li>
</ul>
<h2 id="YKNativeBridgeEngine-è®¾è®¡è¦ç‚¹"><a href="#YKNativeBridgeEngine-è®¾è®¡è¦ç‚¹" class="headerlink" title="YKNativeBridgeEngine è®¾è®¡è¦ç‚¹"></a>YKNativeBridgeEngine è®¾è®¡è¦ç‚¹</h2><h3 id="åœ¨åº”ç”¨ä¸­çš„åˆå§‹åŒ–æµç¨‹"><a href="#åœ¨åº”ç”¨ä¸­çš„åˆå§‹åŒ–æµç¨‹" class="headerlink" title="åœ¨åº”ç”¨ä¸­çš„åˆå§‹åŒ–æµç¨‹"></a>åœ¨åº”ç”¨ä¸­çš„åˆå§‹åŒ–æµç¨‹</h3><p><code>YKNativeBridgeEngine</code> åœ¨åº”ç”¨ä¸­çš„åˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">WKWebViewConfiguration</span> *configuration = [[<span class="built_in">WKWebViewConfiguration</span> alloc] init];</span><br><span class="line">configuration.userContentController = [<span class="built_in">WKUserContentController</span> new];</span><br><span class="line"></span><br><span class="line"><span class="built_in">WKPreferences</span> *preferences = [<span class="built_in">WKPreferences</span> new];</span><br><span class="line">preferences.javaScriptCanOpenWindowsAutomatically = <span class="literal">YES</span>;</span><br><span class="line">preferences.minimumFontSize = <span class="number">40.0</span>;</span><br><span class="line">configuration.preferences = preferences;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1ã€æ ¹æ®WKWebViewConfigurationç”ŸæˆnativeBridgeEngineå®ä¾‹</span></span><br><span class="line"><span class="keyword">self</span>.nativeBridgeEngine = [[YKNativeBridgeEngine alloc] initWithWebViewConfiguration:configuration];;</span><br><span class="line"><span class="keyword">self</span>.webView = [[<span class="built_in">WKWebView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">200</span>, <span class="keyword">self</span>.view.frame.size.width, <span class="keyword">self</span>.view.frame.size.height - <span class="number">100</span>) configuration:<span class="keyword">self</span>.nativeBridgeEngine.configuration];</span><br><span class="line"><span class="comment">// 2ã€ç»‘å®šå…·ä½“çš„WKWebViewå®ä¾‹</span></span><br><span class="line">[<span class="keyword">self</span>.nativeBridgeEngine bridgeForWebView:<span class="keyword">self</span>.webView];</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šè¿°ä»£ç æ‰€ç¤ºï¼Œ<code>YKNativeBridgeEngine</code> åœ¨åº”ç”¨ä¸­çš„åˆå§‹åŒ–éœ€è¦2æ­¥ï¼š</p>
<ol>
<li><p>æ ¹æ® <code>WKWebViewConfiguration</code> ç”Ÿæˆ <code>nativeBridgeEngine</code> å®ä¾‹</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆéœ€è¦ <code>WKWebViewConfiguration</code> æ¥ç”Ÿæˆ<code>nativeBridgeEngine</code> å®ä¾‹ï¼Ÿ<br>çœ‹ä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">instancetype</span>)initWithWebViewConfiguration:(<span class="built_in">WKWebViewConfiguration</span> *)configuration</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">self</span> init];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (configuration) &#123;</span><br><span class="line">            <span class="keyword">self</span>.configuration = configuration;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">WKWebViewConfiguration</span> *configuration = [[<span class="built_in">WKWebViewConfiguration</span> alloc] init];</span><br><span class="line">            configuration.userContentController = [[<span class="built_in">WKUserContentController</span> alloc] init];</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">self</span>.configuration = configuration;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">self</span>.configuration.userContentController) &#123;</span><br><span class="line">            <span class="keyword">self</span>.configuration.userContentController = [<span class="built_in">WKUserContentController</span> new];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//é€šè¿‡JSæ³¨å…¥æ–¹å¼ï¼Œåˆå§‹åŒ–WebBridgeEngine</span></span><br><span class="line">        <span class="built_in">NSString</span> *js = YKWebBridgeEngine_js();</span><br><span class="line">        <span class="built_in">WKUserScript</span> *script = [[<span class="built_in">WKUserScript</span> alloc] initWithSource:js</span><br><span class="line">                                                      injectionTime:<span class="built_in">WKUserScriptInjectionTimeAtDocumentStart</span></span><br><span class="line">                                                   forMainFrameOnly:<span class="literal">YES</span>];</span><br><span class="line">        [<span class="keyword">self</span>.configuration.userContentController addUserScript:script];</span><br><span class="line">        </span><br><span class="line">        [<span class="keyword">self</span>.configuration.userContentController addScriptMessageHandler:<span class="keyword">self</span> name:<span class="string">@"NativeBridgeEngineDidReadData"</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>WKWebViewConfiguration</code> çš„ä½œç”¨ä¸»è¦æ˜¯ï¼š</p>
<ul>
<li>æ³¨å…¥ JS ä»£ç åˆ° <code>WebView</code>ï¼Œåœ¨ <code>Document</code> å…ƒç´ å¼€å§‹ç”Ÿæˆæ—¶ï¼Œæ‰§è¡Œ <code>YKWebBridgeEngine</code> åˆå§‹åŒ–ä»£ç </li>
<li>æ·»åŠ  ScriptMessageHandlerï¼Œæä¾›æ–¹æ³•ç»™ <code>YKWebBridgeEngine</code> å‘é€æ•°æ®ç»™ <code>YKNativeBridgeEngine</code> </li>
</ul>
</blockquote>
</li>
<li><p>ç»‘å®šå…·ä½“çš„ <code>WKWebView</code> å®ä¾‹</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆéœ€è¦ç»‘å®šå…·ä½“çš„ <code>WKWebView</code> å®ä¾‹ï¼Ÿ<br>çœ‹ä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)_bridgeEngineDidWriteData:(<span class="built_in">NSString</span> *)jsonMessage</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!jsonMessage) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (![jsonMessage isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSString</span> *jsCode = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"YKWebBridgeEngine._bridgeEngineDidReadData('%@')"</span>,jsonMessage];</span><br><span class="line">    [<span class="keyword">self</span>.webView evaluateJavaScript:jsCode completionHandler:^(<span class="keyword">id</span> _Nullable result, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"bridgeEngineDidWriteData:%@-%@"</span>,result,error);</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>YKNativeBridgeEngine</code> å†…éƒ¨æŒæœ‰ <code>webView</code> çš„ç”¨å¤„å°±æ˜¯åœ¨äºå€ŸåŠ© <code>webView</code> çš„ <code>evaluateJavaScript:completionHandler:</code> åŠŸèƒ½ï¼Œè¾¾åˆ°å‘æ•°æ®ç»™ <code>YKWebBridgeEngine</code> çš„ç›®çš„ã€‚</p>
</blockquote>
</li>
</ol>
<h3 id="å…³äºã€è§£ç åçš„é€»è¾‘ã€"><a href="#å…³äºã€è§£ç åçš„é€»è¾‘ã€" class="headerlink" title="å…³äºã€è§£ç åçš„é€»è¾‘ã€"></a>å…³äºã€è§£ç åçš„é€»è¾‘ã€</h3><p>åœ¨ <code>YKNativeBridgeEngine</code> æ”¶åˆ° <code>YKWebBridgeEngine</code> å‘æ¥çš„ JSONæ–‡æœ¬æ•°æ®åï¼Œ<code>YKNativeBridgeEngine</code> ä¼šå¯¹æ•°æ®è¿›è¡Œè§£ç ï¼šååºåˆ—åŒ–JSONï¼Œå¾—åˆ°ä¸€ä¸ª <code>messageDict</code> ï¼Œç„¶åæ ¹æ®å…¶å†…å®¹è¿›è¡Œå…·ä½“çš„é€»è¾‘æ“ä½œã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)_bridgeEngineDidReadData:(<span class="built_in">NSString</span> *)jsonMessage</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!jsonMessage) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (![jsonMessage isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSDictionary</span> *messgaeDict = [<span class="keyword">self</span> deserializeJSONMessage:jsonMessage];</span><br><span class="line">    <span class="keyword">if</span> (!messgaeDict) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSArray</span> *allKeys = messgaeDict.allKeys;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ”¶åˆ°WebBridgeEngineå‘æ¥çš„è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">if</span> ([allKeys containsObject:<span class="string">@"reqId"</span>]) &#123;</span><br><span class="line">        <span class="built_in">NSInteger</span> reqId = [[messgaeDict objectForKey:<span class="string">@"reqId"</span>] integerValue];</span><br><span class="line">        <span class="keyword">id</span> data = [messgaeDict objectForKey:<span class="string">@"data"</span>];</span><br><span class="line">        <span class="built_in">NSString</span> *name = [messgaeDict objectForKey:<span class="string">@"name"</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (!name) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        YKMessageHandler handler = [<span class="keyword">self</span>.messageHandlerDict objectForKey:name];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (!handler) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        __<span class="keyword">weak</span> <span class="keyword">typeof</span>(<span class="keyword">self</span>) weakSelf = <span class="keyword">self</span>;</span><br><span class="line">        YKResponseCallback responseCallback = ^(<span class="keyword">id</span> responseData) &#123;</span><br><span class="line">            <span class="built_in">NSMutableDictionary</span> *respMessageDict = [[<span class="built_in">NSMutableDictionary</span> alloc] initWithCapacity:<span class="number">8</span>];</span><br><span class="line">            [respMessageDict setObject:@(reqId) forKey:<span class="string">@"respId"</span>];</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (responseData) &#123;</span><br><span class="line">                [respMessageDict setObject:responseData forKey:<span class="string">@"data"</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">NSString</span> *jsonMessage = [weakSelf serializeMessage:respMessageDict];</span><br><span class="line">            [weakSelf _bridgeEngineDidWriteData:jsonMessage];</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        handler(data,responseCallback);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ”¶åˆ°WebBridgeEngineè¿”å›çš„å“åº”æ•°æ®</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ([allKeys containsObject:<span class="string">@"respId"</span>]) &#123;</span><br><span class="line">        <span class="built_in">NSInteger</span> respId = [[messgaeDict objectForKey:<span class="string">@"respId"</span>] integerValue];</span><br><span class="line">        <span class="keyword">id</span> responseData = [messgaeDict objectForKey:<span class="string">@"data"</span>];</span><br><span class="line">        YKResponseCallback responseCallback = [<span class="keyword">self</span>.responseCallbackDict objectForKey:@(respId)];</span><br><span class="line">        <span class="keyword">if</span> (responseCallback) &#123;</span><br><span class="line">            responseCallback(responseData);</span><br><span class="line">            [<span class="keyword">self</span>.responseCallbackDict removeObjectForKey:@(respId)];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ”¶åˆ°æ•°æ®åï¼Œä¼šæ ¹æ®è§£ç åçš„ <code>messgaeDict</code> çš„ key åˆ¤æ–­è¿™æ˜¯ä¸€ä¸ªã€è¯·æ±‚ç±»å‹çš„æ•°æ®ã€è¿˜æ˜¯ä¸€ä¸ªã€å“åº”ç±»çš„æ•°æ®ã€ï¼šè‹¥ key ä¸­å­˜åœ¨ <code>reqId</code> ï¼Œåˆ™æ˜¯ã€è¯·æ±‚ç±»å‹çš„æ•°æ®ã€ï¼Œç„¶åæ‰§è¡Œå¯¹åº”çš„è¯·æ±‚ï¼Œå¹¶è¿”å›å“åº”æ•°æ®ï¼›è‹¥æ˜¯å­˜åœ¨ <code>respId</code> ï¼Œåˆ™æ˜¯ä¸€ä¸ªã€å“åº”ç±»å‹çš„æ•°æ®ã€ï¼Œç„¶åæŠŠè¿”å›çš„å“åº”æ•°æ®é€šè¿‡å›è°ƒå‘ŠçŸ¥åº”ç”¨å±‚ã€‚</p>
<h2 id="å…³äº-YKWebBridgeEngine"><a href="#å…³äº-YKWebBridgeEngine" class="headerlink" title="å…³äº YKWebBridgeEngine"></a>å…³äº YKWebBridgeEngine</h2><p><code>YKWebBridgeEngine</code> çš„è®¾è®¡ï¼ˆæ¥å£å’ŒåŠŸèƒ½ï¼‰ å’Œ <code>YKNativeBridgeEngine</code> æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«åœ¨äºå‰è€…æ˜¯ OC è¯­è¨€å®ç°çš„ï¼Œåè€…æ˜¯ JS è¯­è¨€å®ç°è€Œå·²ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>YKWebBridgeEngine</code>åˆå§‹åŒ–ä¾èµ–ä¸<code>YKNativeBridgeEngine</code>ï¼Œé€šè¿‡ JSæ³¨å…¥ï¼Œè®©<code>webview</code>åœ¨å¼€å§‹åŠ è½½ <code>Document</code> å…ƒç´ æ—¶æ‰§è¡Œ<code>YKWebBridgeEngine</code>çš„åˆå§‹åŒ–ä»£ç ã€‚</p>
<h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><p> æƒ³è¯¦ç»†äº†è§£<code>WKWebView</code> å’Œ <code>messageHandler</code> çš„ç«¥é‹ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://www.jianshu.com/p/433e59c5a9eb" target="_blank" rel="noopener external nofollow noreferrer">iOSä¸‹JSä¸OCäº’ç›¸è°ƒç”¨ï¼ˆä¸‰ï¼‰â€“MessageHandler</a></li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ul>
<li><a href="http://www.jianshu.com/p/433e59c5a9eb" target="_blank" rel="noopener external nofollow noreferrer">iOSä¸‹JSä¸OCäº’ç›¸è°ƒç”¨ï¼ˆä¸‰ï¼‰â€“MessageHandler</a></li>
<li><a href="https://github.com/marcuswestin" target="_blank" rel="noopener">marcuswestin</a>/<a href="https://github.com/marcuswestin/WebViewJavascriptBridge" target="_blank" rel="noopener">WebViewJavascriptBridge</a></li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>2017</tag>
        <tag>å¤§å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>private_external_symbol VS external_symbol</title>
    <url>/2017/private_external_symbol%20VS%20external_symbol/readme/</url>
    <content><![CDATA[<p>è…¾è®¯æä¾›çš„iOS SDK â€”â€”<a href="http://wiki.open.qq.com/wiki/mobile/SDK%E4%B8%8B%E8%BD%BD" target="_blank" rel="noopener external nofollow noreferrer">TencentOpenApi</a> æ˜¯é™æ€åº“ï¼Œç„¶åå› ä¸ºä¸šåŠ¡éœ€æ±‚ï¼Œéœ€è¦æŠŠå®ƒè½¬æ¢ä¸ºåŠ¨æ€åº“ï¼ˆå–åï¼šDynamicTencentOpenApiï¼‰ã€‚åœ¨å®é™…å¼€å‘æ—¶ï¼Œå‘ç°äº†ä¸€ä¸ªå¥‡æ€ªçš„äº‹æƒ…ï¼š</p>
<a id="more"></a>

<p>æ•´ä¸ªå·¥ç¨‹å¦‚ä¸‹ï¼š<br>ï¼ˆæœ‰å…´è¶£çš„è¯»è€…ï¼Œå¯ç›´æ¥ä¸‹è½½<a href="https://github.com/YK-Unit/DynamicTencentOpenApi" target="_blank" rel="noopener">è¯¥å·¥ç¨‹</a>ï¼Œè¿›è¡Œå®éªŒï¼‰</p>
<p><img src="/2017/private_external_symbol%20VS%20external_symbol/readme/DynamicTencentOpenApi-Project.png" alt="DynamicTencentOpenApi Project.png"></p>
<p>Demo çš„æµ‹è¯• DynamicTencentOpenApi.Framework  çš„ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•TencentOAuth</span></span><br><span class="line"><span class="built_in">NSString</span> *version = [TencentOAuth sdkVersion];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,version);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•QQApiInterface</span></span><br><span class="line"><span class="built_in">NSString</span> *qqInstallUrl = [QQApiInterface getQQInstallUrl];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,qqInstallUrl);</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç¼–è¯‘å·¥ç¨‹çš„ DynamicTencentOpenApi Target å’Œ Demo Targetï¼Œå¾—åˆ°ç»“æœå¦‚ä¸‹ï¼š</p>
<ul>
<li>DynamicTencentOpenApi.Framework ç¼–è¯‘è¿è¡ŒæˆåŠŸ</li>
<li>Demo ç¼–è¯‘é“¾æ¥å¤±è´¥ï¼ŒæŠ¥é”™è¯¯ï¼š<code>Undefined symbols for architecture x86_64: &quot;_OBJC_CLASS_$_QQApiInterface&quot;</code></li>
</ul>
<p>è¿™é‡Œå¥‡æ€ªçš„åœ°æ–¹åœ¨äºï¼š</p>
<ul>
<li>DynamicTencentOpenApi.Framework ç¼–è¯‘è¿è¡ŒæˆåŠŸ</li>
<li>Demo ç¼–è¯‘é“¾æ¥æ—¶ï¼ŒTencentOAuth çš„ symbol èƒ½æ‰¾åˆ°ï¼ŒQQApiInterface çš„ symbol å´æ‰¾ä¸åˆ°ï¼Ÿ</li>
</ul>
<p>ç”¨ <a href="https://github.com/gdbinit/MachOView" target="_blank" rel="noopener">MachOView</a> æŸ¥çœ‹ DynamicTencentOpenApi.Framework é‡Œçš„ binary æ–‡ä»¶å‘ç°ï¼š</p>
<p><img src="/2017/private_external_symbol%20VS%20external_symbol/readme/TencentOAuth-Symbol.png" alt="TencentOAuth Symbol.png"></p>
<p><img src="/2017/private_external_symbol%20VS%20external_symbol/readme/QQApiInterface-Symbol.png" alt="QQApiInterface Symbol.png"></p>
<ul>
<li><code>_OBJC_CLASS_$_QQApiInterface</code> symbol çš„ç±»å‹æ˜¯ï¼š<code>N_PEXT</code></li>
<li><code>_OBJC_CLASS_$_TencentOAuth</code> symbol çš„ç±»å‹æ˜¯ï¼š<code>N_EXT</code></li>
</ul>
<p><code>N_PEXT</code> å’Œ <code>N_EXT</code> çš„åŒºåˆ«æ˜¯ï¼š</p>
<blockquote>
<p>N_PEXT (0x10)â€”If this bit is on, this symbol is marked as having limited global scope. When the file is fed to the static linker, it clears the N_EXT bit for each symbol with the N_PEXT bit set. (The ld option -keep_private_externs turns off this behavior.) With macOS GCC, you can use the <strong>private_extern</strong> function attribute to set this bit.</p>
<p>N_EXT (0x01)â€”If this bit is on, this symbol is an external symbol, a symbol that is either defined outside this file or that is defined in this file but can be referenced by other files.</p>
<p><a href="https://developer.apple.com/documentation/kernel/nlist_64" target="_blank" rel="noopener external nofollow noreferrer">https://developer.apple.com/documentation/kernel/nlist_64</a></p>
</blockquote>
<p>ç¿»è¯‘è¿‡æ¥ï¼Œè¿™2è€…çš„åŒºåˆ«æ˜¯ï¼š</p>
<ul>
<li><code>N_PEXT</code> ï¼Œæ„æ€æ˜¯ï¼šprivate_externã€‚è¯¥ç±»å‹çš„ symbol åœ¨æŒ‡å®šèŒƒå›´å†…å¯è§</li>
<li><code>N_EXT</code> ï¼Œæ„æ€æ˜¯ï¼šexternã€‚è¯¥ç±»å‹çš„ symbolï¼Œåœ¨ä»»ä½•èŒƒå›´å†…å‡å¯è§</li>
</ul>
<p>å…³äºèŒƒå›´å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2017/private_external_symbol%20VS%20external_symbol/readme/N_PEXT%E5%92%8CN_EXT%E7%9A%84%E8%8C%83%E5%9B%B4.png" alt="N_PEXTå’ŒN_EXTçš„èŒƒå›´.png"></p>
<p>å› æ­¤ï¼Œåœ¨ç¼–è¯‘Demo-OCæ—¶ï¼Œåˆ°é“¾æ¥é˜¶æ®µæ—¶ï¼Œå°±æ‰¾ä¸åˆ°è¿™ä¸ª<code>_OBJC_CLASS_$_QQApiInterface</code> symbolï¼Œç»§è€Œç¼–è¯‘å¤±è´¥ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<p>åˆ›å»ºä¸€ä¸ª<code>QQApiInterfaceé•œåƒç±»</code> ï¼Œé•œåƒç±» wrap <code>QQApiInterface</code>ï¼Œå¯¹å¤–æä¾›å’Œ<code>QQApiInterface</code>ä¸€è‡´çš„æ¥å£ï¼Œåœ¨å†…åˆ™æŠŠå¯¹åº”çš„æ–¹æ³•å“åº”è½¬å‘ç»™<code>QQApiInterface</code>ã€‚å…·ä½“å¯çœ‹ä¾‹å­ä¸­çš„é•œåƒç±» <a href="https://github.com/YK-Unit/DynamicTencentOpenApi/blob/master/DynamicTencentOpenApi/QQApiInterfaceMirror.m" target="_blank" rel="noopener">QQApiInterfaceMirror</a>ã€‚</p>
<p>åŸæ¥å‡†å¤‡æŒ‰ç…§è¿™ä¸ªæ–¹æ¡ˆå®ç° DynamicTencentOpenApi ï¼Œä½†æ˜¯åé¢å‘ç°ï¼ŒTencentOpenApi SDK é‡Œä¸æ­¢ QQApiInterface çš„ symbol æ˜¯<code>N_PEXT</code>ç±»å‹ï¼Œè¿˜æœ‰<code>QQApiTextObject</code>ã€<code>QQApiExtendObject</code>ã€<code>QQApiImageObject</code>ã€<code>QQApiWebImageObject</code> ç­‰ç±»çš„ symbol éƒ½æ˜¯<code>N_PEXT</code>ç±»å‹çš„ã€‚è€ƒè™‘åˆ°å¼€å‘æˆæœ¬ï¼ˆä¸ºè¿™äº›ç±»åˆ›å»ºåŒç­‰çš„é•œåƒç±»ï¼‰å’Œç»´æŠ¤æˆæœ¬ï¼ˆTencentOpenApi SDK å‡çº§åï¼Œæ¯ä¸ªé•œåƒç±»éƒ½å¾—é‡æ–°æµ‹è¯•ï¼‰ï¼Œæœ€ç»ˆæ˜¯æ”¾å¼ƒæŠŠ TencentOpenApi ä»é™æ€åº“è½¬æ¢åˆ°åŠ¨æ€åº“ DynamicTencentOpenApiã€‚</p>
<p>è¿™ç§ç¼–è¯‘é“¾æ¥çš„é”™è¯¯ï¼ˆsymbolçš„èŒƒå›´å—é™å¯¼è‡´é“¾æ¥å¤±è´¥ï¼‰ï¼Œç›¸å¯¹æ¥è¯´ï¼Œæ˜¯æ¯”è¾ƒå°‘è§çš„ï¼Œå› è€ŒèŠ±äº†å¾ˆå¤šæ—¶é—´å»æŸ¥ï¼Œæ‰æ‰¾åˆ°äº†åŸå› ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½è®©åé¢çš„æ¥è€…å¯ä»¥é¿å¼€æ­¤å‘ã€‚enjoy~</p>
<h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><ul>
<li><a href="https://pewpewthespells.com/blog/convert_static_to_dynamic.html" target="_blank" rel="noopener external nofollow noreferrer">convert_static_to_dynamic</a></li>
<li><a href="https://developer.apple.com/documentation/kernel/nlist_64" target="_blank" rel="noopener external nofollow noreferrer">https://developer.apple.com/documentation/kernel/nlist_64</a></li>
<li><a href="https://developer.apple.com/library/content/documentation/DeveloperTools/Conceptual/CppRuntimeEnv/Articles/SymbolVisibility.html" target="_blank" rel="noopener external nofollow noreferrer">Controlling Symbol Visibility</a></li>
<li><a href="https://stackoverflow.com/questions/32485110/how-to-use-static-library-in-embedded-private-frameworks-and-app-on-ios" target="_blank" rel="noopener">How to Use Static Library in Embedded Private Frameworks and App on iOS</a></li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2017</tag>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ merge --ffã€ VS ã€ merge --no-ff ã€ VSã€ rebase ã€</title>
    <url>/2017/%E3%80%8E%20merge%20--ff%E3%80%8F%20VS%20%E3%80%8E%20merge%20--no-ff%20%E3%80%8F%20VS%E3%80%8E%20rebase%20%E3%80%8F/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨åˆå¹¶åˆ†æ”¯æ—¶ï¼ˆå¦‚åˆå¹¶developåˆ†æ”¯åˆ°masteråˆ†æ”¯ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä»¥ä¸‹å‘½ä»¤çš„é€‰æ‹©ï¼š</p>
<ul>
<li><code>git merge // ç­‰åŒäº git merge --ff</code></li>
<li><code>git merge --no-ff</code></li>
<li><code>git rebase</code></li>
</ul>
<p>é‚£ä¹ˆï¼Œè¿™ä¸‰è€…ä¹‹é—´æœ‰å“ªäº›åŒºåˆ«å‘¢ï¼Ÿå¯¹æ­¤ï¼Œæˆ‘å°†ä¼šé€šè¿‡ä¸‹é¢çš„å®éªŒè¿›è¡Œæ¯”è¾ƒè¯´æ˜ï¼š</p>
<p><img src="/2017/%E3%80%8E%20merge%20--ff%E3%80%8F%20VS%20%E3%80%8E%20merge%20--no-ff%20%E3%80%8F%20VS%E3%80%8E%20rebase%20%E3%80%8F/readme/%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6%E5%AE%9E%E9%AA%8C%E8%AF%B4%E6%98%8E%E5%9B%BE.png" alt="åˆ†æ”¯åˆå¹¶å®éªŒè¯´æ˜å›¾.png"></p>
<a id="more"></a>

<h2 id="å®éªŒè¯´æ˜"><a href="#å®éªŒè¯´æ˜" class="headerlink" title="å®éªŒè¯´æ˜"></a>å®éªŒè¯´æ˜</h2><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œåˆå¹¶çš„ä¸¤ä¸ªåˆ†æ”¯ï¼ˆä¸‹é¢å°†ä¼šä»¥æ—¥å¸¸ç”¨åˆ°çš„masteråˆ†æ”¯å’Œdevelopåˆ†æ”¯è¿™2ä¸ªåˆ†æ”¯è¿›è¡Œä¸¾ä¾‹ï¼‰ï¼Œå­˜åœ¨è¿™2ä¸ªæƒ…å½¢ï¼š</p>
<ul>
<li>masteråˆ†æ”¯å’Œdevelopåˆ†æ”¯æ— åˆ†å‰ï¼šåªæœ‰developåˆ†æ”¯æœ‰æ›´æ–°</li>
<li>masteråˆ†æ”¯å’Œdevelopåˆ†æ”¯æœ‰åˆ†å‰ï¼šä¸¤ä¸ªåˆ†æ”¯å‡æœ‰æ›´æ–°</li>
</ul>
<p>æ¥ä¸‹æ¥çš„å®éªŒå°±æ˜¯ï¼šåˆ†åˆ«åœ¨è¿™ä¸¤ä¸ªæƒ…å½¢ä¸‹ï¼Œåˆ†åˆ«é€šè¿‡ <code>git merge --ff</code> ã€<code>git merge --no-ff</code> ã€<code>git rebase</code> å‘½ä»¤æŠŠdevelopåˆ†æ”¯åˆå¹¶åˆ°masteråˆ†æ”¯ï¼Œç„¶åæ¯”è¾ƒåˆå¹¶åçš„masterçš„commit-treeã€‚</p>
<p><code>merge --ff</code> ã€<code>merge --no-ff</code> ã€<code>rebase</code> å„è‡ªåˆå¹¶çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>ä½¿ç”¨ <code>merge --ff</code>åˆå¹¶çš„æ­¥éª¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge develop  // ç­‰åŒ git merge --ff develop</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨ <code>merge --no-ff</code> åˆå¹¶çš„æ­¥éª¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge --no-ff develop</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨ <code>rebase</code> åˆå¹¶çš„æ­¥éª¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git rebase master</span><br><span class="line">git checkout master</span><br><span class="line">git merge develop</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="å®éªŒç»“æœ"><a href="#å®éªŒç»“æœ" class="headerlink" title="å®éªŒç»“æœ"></a>å®éªŒç»“æœ</h2><h3 id="åˆ†æ”¯æ— åˆ†å‰çš„åœºæ™¯ä¸‹ï¼š"><a href="#åˆ†æ”¯æ— åˆ†å‰çš„åœºæ™¯ä¸‹ï¼š" class="headerlink" title="åˆ†æ”¯æ— åˆ†å‰çš„åœºæ™¯ä¸‹ï¼š"></a>åˆ†æ”¯æ— åˆ†å‰çš„åœºæ™¯ä¸‹ï¼š</h3><p>åˆå¹¶å‰ï¼š</p>
<p><img src="/2017/%E3%80%8E%20merge%20--ff%E3%80%8F%20VS%20%E3%80%8E%20merge%20--no-ff%20%E3%80%8F%20VS%E3%80%8E%20rebase%20%E3%80%8F/readme/%E5%90%88%E5%B9%B6%E5%89%8D.png" alt="åˆå¹¶å‰.png"></p>
<p>åˆ†åˆ«æ‰§è¡Œmerge/rebaseåçš„æƒ…å†µå¯¹æ¯”ï¼š</p>
<ul>
<li><p>åº”ç”¨<code>git merge --ff</code></p>
<p>  <img src="/2017/%E3%80%8E%20merge%20--ff%E3%80%8F%20VS%20%E3%80%8E%20merge%20--no-ff%20%E3%80%8F%20VS%E3%80%8E%20rebase%20%E3%80%8F/readme/merge-ff.png" alt="merge-ff.png"></p>
</li>
<li><p>åº”ç”¨<code>git merge --no-ff</code></p>
<p>  <img src="/2017/%E3%80%8E%20merge%20--ff%E3%80%8F%20VS%20%E3%80%8E%20merge%20--no-ff%20%E3%80%8F%20VS%E3%80%8E%20rebase%20%E3%80%8F/readme/merge-no-ff.png" alt="merge-no-ff.png"></p>
</li>
<li><p>åº”ç”¨<code>git rebase</code></p>
<p>  <img src="/2017/%E3%80%8E%20merge%20--ff%E3%80%8F%20VS%20%E3%80%8E%20merge%20--no-ff%20%E3%80%8F%20VS%E3%80%8E%20rebase%20%E3%80%8F/readme/rebase.png" alt="rebase.png"></p>
</li>
</ul>
<h3 id="åˆ†æ”¯æœ‰åˆ†å‰çš„åœºæ™¯ä¸‹ï¼š"><a href="#åˆ†æ”¯æœ‰åˆ†å‰çš„åœºæ™¯ä¸‹ï¼š" class="headerlink" title="åˆ†æ”¯æœ‰åˆ†å‰çš„åœºæ™¯ä¸‹ï¼š"></a>åˆ†æ”¯æœ‰åˆ†å‰çš„åœºæ™¯ä¸‹ï¼š</h3><p>åˆå¹¶å‰ï¼š</p>
<p><img src="/2017/%E3%80%8E%20merge%20--ff%E3%80%8F%20VS%20%E3%80%8E%20merge%20--no-ff%20%E3%80%8F%20VS%E3%80%8E%20rebase%20%E3%80%8F/readme/%E5%90%88%E5%B9%B6%E5%89%8D-2.png" alt="åˆå¹¶å‰.png"></p>
<p>åˆ†åˆ«æ‰§è¡Œmerge/rebaseåçš„æƒ…å†µå¯¹æ¯”ï¼š</p>
<ul>
<li><p>åº”ç”¨<code>git merge --ff</code></p>
<p>  <img src="/2017/%E3%80%8E%20merge%20--ff%E3%80%8F%20VS%20%E3%80%8E%20merge%20--no-ff%20%E3%80%8F%20VS%E3%80%8E%20rebase%20%E3%80%8F/readme/merge-ff-2.png" alt="merge-ff.png"> </p>
</li>
<li><p>åº”ç”¨<code>git merge --no-ff</code></p>
<p>  <img src="/2017/%E3%80%8E%20merge%20--ff%E3%80%8F%20VS%20%E3%80%8E%20merge%20--no-ff%20%E3%80%8F%20VS%E3%80%8E%20rebase%20%E3%80%8F/readme/merge-no-ff-2.png" alt="merge-no-ff.png"></p>
</li>
<li><p>åº”ç”¨<code>git rebase</code></p>
<p>  <img src="/2017/%E3%80%8E%20merge%20--ff%E3%80%8F%20VS%20%E3%80%8E%20merge%20--no-ff%20%E3%80%8F%20VS%E3%80%8E%20rebase%20%E3%80%8F/readme/rebase-2.png" alt="rebase.png"></p>
</li>
</ul>
<h2 id="å®éªŒç»“è®º"><a href="#å®éªŒç»“è®º" class="headerlink" title="å®éªŒç»“è®º"></a>å®éªŒç»“è®º</h2><p>é€šè¿‡ç»“æœå›¾çš„å¯¹æ¯”ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹ç»“è®ºï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th align="left">git merge â€“ff</th>
<th align="left">git merge â€“no-ff</th>
<th align="left">git rebase</th>
</tr>
</thead>
<tbody><tr>
<td>åˆ†æ”¯æ— åˆ†å‰</td>
<td align="left">æŠŠdevelopä¸Šæ–°çš„commitå«æ¥åˆ°masterçš„æœ€åcommitä¸Šï¼Œæ•ˆæœç­‰åŒäºrebaseï¼Œè®©masterçš„commit-treeä¿æŒçº¿æ€§</td>
<td align="left">ç”Ÿæˆä¸€ä¸ªæ–°çš„commitç”¨äºè®°å½•è¿™ä¸ªåˆå¹¶æ“ä½œ</td>
<td align="left">æŠŠdevelopä¸Šæ–°çš„commitå«æ¥åˆ°masterçš„æœ€åä¸€ä¸ªcommitä¸Šï¼Œè®©masterçš„commit-treeä¿æŒçº¿æ€§</td>
</tr>
<tr>
<td>åˆ†æ”¯æœ‰åˆ†å‰</td>
<td align="left">åˆå¹¶æ—¶ï¼Œç”±äºå­˜åœ¨å†²çªï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„commitç”¨äºè®°å½•æ­¤å†²çªï¼Œæ•ˆæœç­‰åŒäº merge â€“no-ff</td>
<td align="left">ç”Ÿæˆä¸€ä¸ªæ–°çš„commitç”¨äºè®°å½•è¿™ä¸ªåˆå¹¶æ“ä½œ</td>
<td align="left">é€šè¿‡rebaseï¼ŒæŠŠdevelopä¸Šæ–°çš„commitå«æ¥åˆ°masterçš„æœ€åä¸€ä¸ªcommitä¸Šï¼Œè®©masterçš„commit-treeä¿æŒçº¿æ€§</td>
</tr>
</tbody></table>
<h2 id="æ€ä¹ˆé€‰æ‹©"><a href="#æ€ä¹ˆé€‰æ‹©" class="headerlink" title="æ€ä¹ˆé€‰æ‹©"></a>æ€ä¹ˆé€‰æ‹©</h2><p>é€šè¿‡åˆå¹¶ç»“æœå¯¹æ¯”å¯ä»¥çŸ¥é“ï¼Œåœ¨åˆå¹¶æ—¶ï¼Œæˆ‘ä»¬å°±åªéœ€è¦ã€merge â€“no-ff ã€å’Œ ã€rebaseã€ä¹‹é—´åšé€‰æ‹©å³å¯ã€‚é‚£ä¹ˆåœ¨æ—¥å¸¸å¼€å‘ä¸­æ€ä¹ˆé€‰æ‹©å‘¢ï¼Ÿæ ¹æ®ä½ çš„åˆå¹¶ç›®çš„æ¥ï¼š</p>
<table>
<thead>
<tr>
<th>åˆå¹¶ç›®çš„</th>
<th align="center">éœ€è¦è®°å½•æ­¤æ¬¡åˆå¹¶ï¼Œå¦‚åˆå¹¶releaseåˆ†æ”¯</th>
<th align="center">å¸Œæœ›commit-treeæ•´æ´å’Œæˆçº¿æ€§ï¼Œå¦‚åˆå¹¶featureåˆ†æ”¯</th>
<th align="center">å¯¹commit-treeæ— è¦æ±‚ï¼Œé€‚åˆåˆå­¦è€…</th>
</tr>
</thead>
<tbody><tr>
<td>åˆå¹¶å‘½ä»¤</td>
<td align="center">git merge â€“no-ff</td>
<td align="center">git rebase</td>
<td align="center">git merge</td>
</tr>
</tbody></table>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://www.idaima.com/article/6773" target="_blank" rel="noopener external nofollow noreferrer">https://www.idaima.com/article/6773</a><br><a href="http://www.jianshu.com/p/73ea5aca8bf3" target="_blank" rel="noopener external nofollow noreferrer">http://www.jianshu.com/p/73ea5aca8bf3</a><br><a href="http://www.jianshu.com/p/0613d8249863" target="_blank" rel="noopener external nofollow noreferrer">http://www.jianshu.com/p/0613d8249863</a></p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2017</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒçº§æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</title>
    <url>/2017/%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E6%8C%87%E5%90%91%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%EF%BC%9F/readme/</url>
    <content><![CDATA[<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä»£ç ç‰‡æ®µæ‘˜è‡ªè‹¹æœå¼€æºçš„runtimeä»£ç ï¼ˆobjc4-208ç‰ˆæœ¬ï¼‰</span></span><br><span class="line"><span class="comment">//https://opensource.apple.com/source/objc4/objc4-208/runtime/objc-class.h</span></span><br><span class="line"><span class="keyword">struct</span> objc_class &#123;			</span><br><span class="line">	<span class="keyword">struct</span> objc_class *isa;	</span><br><span class="line">	<span class="keyword">struct</span> objc_class *super_class;	</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span> *name;		</span><br><span class="line">	<span class="keyword">long</span> version;</span><br><span class="line">	<span class="keyword">long</span> info;</span><br><span class="line">	<span class="keyword">long</span> instance_size;</span><br><span class="line">	<span class="keyword">struct</span> objc_ivar_list *ivars;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> defined(Release3CompatibilityBuild)</span></span><br><span class="line">	<span class="keyword">struct</span> objc_method_list *methods;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">	<span class="keyword">struct</span> objc_method_list **methodLists;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">struct</span> objc_cache *cache;</span><br><span class="line"> 	<span class="keyword">struct</span> objc_protocol_list *protocols;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯Objective-C 2.0ä¸­çš„ç±»çš„ä»£ç ï¼Œç›¸ä¿¡åšiOSå¼€å‘çš„åŒå­¦éƒ½å¾ˆç†Ÿæ‚‰çš„äº†ã€‚æœ‰å¤©åœ¨æŸ¥èµ„æ–™åˆçœ‹åˆ°å®ƒçš„æ—¶å€™ï¼Œæƒ³åˆ°äº†ä¸€ä¸ªå¥½å¥‡çš„é—®é¢˜ï¼š</p>
<blockquote>
<p><code>methodLists</code> æ˜¯ä¸€ä¸ªäºŒçº§æŒ‡é’ˆï¼Œåœ¨å†…å­˜ä¸­ï¼Œå®ƒæŒ‡å‘çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿï¼ˆæˆ–è€…è¯´ï¼Œå…¶æŒ‡å‘çš„æ•°æ®ç»“æ„åˆ°åº•æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿï¼‰</p>
</blockquote>
<a id="more"></a>

<p>ç„¶åï¼Œæˆ‘æƒ³åˆ°äº†ä¸‹é¢å‡ ä¸ªå¯èƒ½æ€§ï¼š</p>
<ul>
<li><p><code>methodLists</code> æŒ‡å‘çš„æ˜¯ä¸€ä¸ªç»“æ„ä½“çš„æŒ‡é’ˆ</p>
<p><img src="/2017/%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E6%8C%87%E5%90%91%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%EF%BC%9F/readme/aP-bP-obj.png" alt="aP-bP-obj.png"></p>
</li>
<li><p><code>methodLists</code> æŒ‡å‘çš„æ˜¯ç»“æ„ä½“æ•°ç»„çš„æŒ‡é’ˆ</p>
<p><img src="/2017/%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E6%8C%87%E5%90%91%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%EF%BC%9F/readme/aP-bP-objArray.png" alt="aP-bP-objArray.png"></p>
</li>
<li><p><code>methodLists</code> æŒ‡å‘çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆæ•°ç»„</p>
<p><img src="/2017/%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E6%8C%87%E5%90%91%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%EF%BC%9F/readme/aP-bPArray.png" alt="aP-bPArray.png"></p>
</li>
</ul>
<p>é‚£ä¹ˆä¸Šé¢çš„å¯èƒ½æ€§éƒ½æ˜¯å­˜åœ¨çš„å—ï¼Ÿä¸ºäº†éªŒè¯ï¼Œæˆ‘å†™äº†ä¸‹é¢çš„ä»£ç è¿›è¡Œæµ‹è¯•ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">  <span class="keyword">float</span> version;</span><br><span class="line">&#125; method;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span> </span>&#123;</span><br><span class="line">  method **methodList;</span><br><span class="line"></span><br><span class="line">  method aMethod;</span><br><span class="line">  aMethod.version = <span class="number">1.1</span>;</span><br><span class="line"></span><br><span class="line">  method bMethod;</span><br><span class="line">  bMethod.version = <span class="number">2.2</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"å¼€å§‹éªŒè¯ç¬¬1ç§å¯èƒ½æ€§ï¼šaP-&gt;bP-&gt;obj\n"</span>);</span><br><span class="line">  method *aMethodP = &amp;aMethod;</span><br><span class="line">  methodList = &amp;aMethodP;</span><br><span class="line"></span><br><span class="line">  method* currentMethod = *methodList;</span><br><span class="line">  <span class="keyword">float</span> version = currentMethod-&gt;version;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"version:%0.1f\n"</span>,version);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"ç»“æŸéªŒè¯ç¬¬1ç§å¯èƒ½æ€§ã€‚\n"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"å¼€å§‹éªŒè¯ç¬¬2ç§å¯èƒ½æ€§ï¼šaP-&gt;bP-&gt;obj[]\n"</span>);</span><br><span class="line">  method methodArray[<span class="number">2</span>];</span><br><span class="line">  methodArray[<span class="number">0</span>] = aMethod;</span><br><span class="line">  methodArray[<span class="number">1</span>] = bMethod;</span><br><span class="line"></span><br><span class="line">  *methodList = methodArray;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">    method* currentMethod = &amp;((*methodList)[i]);</span><br><span class="line">    <span class="keyword">float</span> version = currentMethod-&gt;version;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"version:%0.1f\n"</span>,version);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"ç»“æŸéªŒè¯ç¬¬2ç§å¯èƒ½æ€§ã€‚\n"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"å¼€å§‹éªŒè¯ç¬¬3ç§å¯èƒ½æ€§ï¼šaP-&gt;[(bP-&gt;obj)]\n"</span>);</span><br><span class="line">  method* methodPointArray[<span class="number">2</span>];</span><br><span class="line">  methodPointArray[<span class="number">0</span>]=&amp;aMethod;</span><br><span class="line">  methodPointArray[<span class="number">1</span>]=&amp;bMethod;</span><br><span class="line"></span><br><span class="line">  methodList = &amp;(methodPointArray[<span class="number">0</span>]);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">    method* currentMethod = *(methodList+i);</span><br><span class="line">    <span class="keyword">float</span> version = currentMethod-&gt;version;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"version:%0.1f\n"</span>,version);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"ç»“æŸéªŒè¯ç¬¬3ç§å¯èƒ½æ€§ã€‚\n"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="/2017/%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E6%8C%87%E5%90%91%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%EF%BC%9F/readme/%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E5%8F%AF%E8%83%BD%E6%80%A7%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.png" alt="äºŒçº§æŒ‡é’ˆå¯èƒ½æ€§è¿è¡Œç»“æœ.png"></p>
<p>æŒ‰ç…§ä¸Šé¢æå‡ºçš„æ¨¡å‹æ‰€ç¼–å†™çš„ä»£ç å¯ä»¥è¿è¡Œé€šè¿‡ï¼Œè¿™è¯æ˜æ‰€è¯´çš„3ç§å¯èƒ½æ€§éƒ½å­˜åœ¨ï¼Œç„¶è€Œåœ¨<code>runtime</code>é‡Œä½¿ç”¨çš„æ˜¯å“ªç§å‘¢ï¼Ÿ</p>
<p>ä¸ºæ­¤ï¼Œç‰¹æ„å»çœ‹äº†ç›¸å…³çš„ä»£ç ï¼Œå¾—åˆ°çš„ç­”æ¡ˆæ˜¯ï¼šç¬¬ä¸‰ç§ã€‚</p>
<p>è®ºæ®ä¸ºï¼š<code>runtime</code>ä¸­çš„<code>class</code>ç§»é™¤<code>method</code>çš„æ–¹æ³•ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä»£ç ç‰‡æ®µæ‘˜è‡ªè‹¹æœå¼€æºçš„runtimeä»£ç ï¼ˆobjc4-208ç‰ˆæœ¬ï¼‰</span></span><br><span class="line"><span class="comment">//https://opensource.apple.com/source/objc4/objc4-208/runtime/objc-class.m</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">class_removeMethods</span> <span class="params">(Class cls, struct objc_method_list * meths)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// Remove atomically.</span></span><br><span class="line">	_objc_removeMethods (meths, &amp;((struct objc_class *) cls)-&gt;methodLists);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// Must flush when dynamically removing methods.  No need to flush</span></span><br><span class="line">	<span class="comment">// all the class method caches.  If cls is a meta class, though,</span></span><br><span class="line">	<span class="comment">// this will still flush it and any of its sub-meta classes.</span></span><br><span class="line">	flush_caches (cls, NO); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä»£ç ç‰‡æ®µæ‘˜è‡ªè‹¹æœå¼€æºçš„runtimeä»£ç ï¼ˆobjc4-208ç‰ˆæœ¬ï¼‰</span></span><br><span class="line"><span class="comment">//https://opensource.apple.com/source/objc4/objc4-208/runtime/objc-runtime.m</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _objc_removeMethods (struct objc_method_list * mlist, struct objc_method_list *** <span class="built_in">list</span>)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">objc_method_list</span> **	<span class="title">ptr</span>;</span></span><br><span class="line"> </span><br><span class="line">        <span class="comment">// Locate list in the array </span></span><br><span class="line">        ptr = *<span class="built_in">list</span>;</span><br><span class="line">        <span class="keyword">while</span> (*ptr != mlist) &#123;</span><br><span class="line">                <span class="comment">// fix for radar # 2538790</span></span><br><span class="line">                <span class="keyword">if</span> ( *ptr == END_OF_METHODS_LIST ) <span class="keyword">return</span>;</span><br><span class="line">                ptr += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// Remove this entry </span></span><br><span class="line">        *ptr = <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// Left shift the following entries</span></span><br><span class="line">        <span class="keyword">while</span> (*(++ptr) != END_OF_METHODS_LIST)</span><br><span class="line">                *(ptr<span class="number">-1</span>) = *ptr;</span><br><span class="line">        *(ptr<span class="number">-1</span>) = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>é‚£ä¹ˆå¯¹äºæ ‡é¢˜æå‡ºçš„é—®é¢˜ï¼šã€äºŒçº§æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿã€ï¼Œå®ƒçš„æ ‡å‡†ç­”æ¡ˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼šæ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œå®ƒçš„ç­”æ¡ˆåº”è¯¥æ˜¯ç»“åˆå…·ä½“çš„ä¸šåŠ¡ä»£ç æ¥å›ç­”çš„ï¼Œæ¯”å¦‚<code>Runtime</code>é‡Œçš„<code>methodLists</code>ã€‚</p>
<p>å¦å¤–ï¼Œåœ¨æœ€åï¼Œä¸å¾—ä¸æ„Ÿå¹ä¸‹ï¼šæŒ‡é’ˆçœŸæ˜¯Cè¯­è¨€çš„çµé­‚ï¼Œå…¶è®©Cå˜å¾—ä½•å…¶çµæ´»ï¼ï¼ˆå½“ç„¶ï¼ŒåŒæ—¶ä¹Ÿè®©Cå˜å¾—å¤æ‚ï¼Œåœ¨ä½ ä¸çŸ¥é“ä½œè€…çš„æŒ‡é’ˆæ„å›¾çš„æ—¶å€™ï¼‰</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2017</tag>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Macä¸‹ä½¿ç”¨Atomæ­å»ºCå¼€å‘ç¯å¢ƒ</title>
    <url>/2017/%E5%9C%A8Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Atom%E6%90%AD%E5%BB%BAC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/readme/</url>
    <content><![CDATA[<p>åœ¨ Mac ä¸‹å†™ C çš„æ—¶å€™ï¼Œå¦‚æœç¨‹åºå¹¶ä¸å¤æ‚ï¼Œå…¶å®è›®ä¸æ„¿æ„æ‰“å¼€ Xcode è¿™ä¸ªåºç„¶å¤§ç‰©çš„ã€‚ä¸ºæ­¤ï¼Œç‰¹æ„æ‰¾æ—¶é—´è§£å†³äº†è¿™ä¸ªäº‹æƒ…ï¼š<code>Atom</code> + <code>Atom æ’ä»¶</code> = <code>C è½»é‡çº§ IDE</code>ã€‚</p>
<p>ä¸‹é¢å°†ä¼šåˆ—å‡ºæ‰€ç”¨åˆ°çš„ä¸»è¦æ’ä»¶ï¼š</p>
<ul>
<li><p><a href="https://atom.io/packages/autocomplete-clang" target="_blank" rel="noopener external nofollow noreferrer">autocomplete-clang</a><br>autocomplete for C/C++/ObjC using clang</p>
</li>
<li><p><a href="https://atom.io/packages/build" target="_blank" rel="noopener external nofollow noreferrer">build</a><br>Build your current project, directly from Atom</p>
</li>
<li><p><a href="https://atom.io/packages/linter" target="_blank" rel="noopener external nofollow noreferrer">linter</a><br>A Base Linter with Cow Powers to visualize errors and other kind-of messages, easily</p>
</li>
<li><p><a href="https://atom.io/packages/linter-clang" target="_blank" rel="noopener external nofollow noreferrer">linter-clang</a><br>A linter plugin for <a href="https://atom.io/packages/linter" target="_blank" rel="noopener external nofollow noreferrer">Linter</a> provides an interface to clang</p>
</li>
<li><p><a href="https://atom.io/packages/script" target="_blank" rel="noopener external nofollow noreferrer">script</a><br>Run code in Atom!</p>
<blockquote>
<p>åœ¨ Mac ä¸‹ï¼ŒæŒ‰ cmd-i ï¼Œè¯¥æ’ä»¶å°±ä¼šè°ƒç”¨ clang ç¼–è¯‘å¹¶è¿è¡Œå½“å‰çš„ c ç¨‹åº</p>
</blockquote>
</li>
</ul>
<p>å®‰è£…å®Œæ¯•åï¼Œå¼€å§‹ä½ çš„ C æ—…ç¨‹å§~</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>2017</tag>
      </tags>
  </entry>
  <entry>
    <title>é…ç½®å¤šä¸ªSSH-Key</title>
    <url>/2017/%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AASSH-Key/readme/</url>
    <content><![CDATA[<p>ä¸ºäº†å®‰å…¨æ€§ï¼Œä¸ªäººçš„githubå’Œå…¬å¸çš„gitlabéœ€è¦é…ç½®ä¸åŒçš„SSH-Keyã€‚å…·ä½“å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>åˆ‡æ¢åˆ°ç³»ç»Ÿçš„SSHç›®å½•</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd ~/.ssh</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸ºä¸ªäººçš„githubç”ŸæˆSSH-Keyï¼ˆè‹¥è¿˜æ²¡æœ‰ï¼‰</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C "your_mail@example.com" -f github_rsa</span><br></pre></td></tr></table></figure>

<p> ç„¶åï¼Œå‰å¾€githubæ·»åŠ SSHå…¬é’¥ã€‚</p>
</li>
<li><p>ä¸ºå…¬å¸çš„gitlabç”ŸæˆSSH-Keyï¼ˆè‹¥è¿˜æ²¡æœ‰ï¼‰</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C "your_mail@company.com" -f company_rsa</span><br></pre></td></tr></table></figure>

<p> ç„¶åï¼Œå‰å¾€gitlabæ·»åŠ SSHå…¬é’¥ã€‚</p>
</li>
<li><p>æ·»åŠ é…ç½®æ–‡ä»¶ï¼ˆè‹¥è¿˜æ²¡æœ‰ï¼‰</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">touch config</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸ºé…ç½®æ–‡ä»¶<code>config</code>æ·»åŠ å¦‚ä¸‹å†…å®¹</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> github.com</span></span><br><span class="line">Host github.com</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/github_rsa</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> gitlab.company.com</span></span><br><span class="line">Host gitlab.company.com</span><br><span class="line">HostName gitlab.company.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/company_rsa</span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>
<p> è¾“å‡ºï¼š</p>
<blockquote>
<p>Hi YK-Unit! Youâ€™ve successfully authenticated, but GitHub does not provide shell access.</p>
</blockquote>
<p> ä»¥ä¸Šè¡¨ç¤ºæˆåŠŸè¿æ¥åˆ°äº†ä¸ªäººçš„githubã€‚<br> ç„¶åå¯ä»¥ç”¨åŒæ ·æ–¹å¼æµ‹è¯•å…¬å¸çš„gitlabã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>2017</tag>
      </tags>
  </entry>
  <entry>
    <title>Gambler&#39;s Ruin Problemï¼ˆèµŒå¾’ç ´äº§é—®é¢˜ï¼‰ç ”ç©¶æ€»ç»“</title>
    <url>/2018/Gambler&#39;s%20Ruin%20Problem%EF%BC%88%E8%B5%8C%E5%BE%92%E7%A0%B4%E4%BA%A7%E9%97%AE%E9%A2%98%EF%BC%89%E7%A0%94%E7%A9%B6%E6%80%BB%E7%BB%93/readme/</url>
    <content><![CDATA[<h2 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h2><p>ä»¥ä¸‹æ˜¯å¯¹â€œèµŒå¾’ç ´äº§â€ç³»åˆ—é—®é¢˜çš„ç ”ç©¶æ€»ç»“ã€‚é€šè¿‡æ•°å­¦è¯æ˜ï¼Œå¯è§â€œåèµŒä¹è¾“â€å¹¶éè™šè¨€ã€‚</p>
<p>PSï¼šç”±äºMarkDownä¸æ”¯æŒæ•°å­¦å…¬å¼ï¼Œæ‰€ä»¥ä¸‹é¢é—®é¢˜çš„è¯æ˜è¿‡ç¨‹æ˜¯é€šè¿‡ <a href="https://chrome.google.com/webstore/detail/daum-equation-editor/dinfmiceliiomokeofbocegmacmagjhe?hl=zh-CN" target="_blank" rel="noopener external nofollow noreferrer">Daum Equation Editor</a> æ¥æ’°å†™ï¼Œç„¶åå¯¼å‡ºå›¾ç‰‡æ¥å±•ç¤ºã€‚</p>
<a id="more"></a>


<h2 id="åº„å®¶è¾“æ‰æ‰€æœ‰ç­¹ç çš„æ¦‚ç‡"><a href="#åº„å®¶è¾“æ‰æ‰€æœ‰ç­¹ç çš„æ¦‚ç‡" class="headerlink" title="åº„å®¶è¾“æ‰æ‰€æœ‰ç­¹ç çš„æ¦‚ç‡"></a>åº„å®¶è¾“æ‰æ‰€æœ‰ç­¹ç çš„æ¦‚ç‡</h2><blockquote>
<p>åº„å®¶æœ‰nä¸ªç­¹ç ï¼Œæ¯æ¬¡æœ‰æ¦‚ç‡pèµ¢å¾—ä¸€ä¸ªç­¹ç ï¼Œæˆ–è€…æ¦‚ç‡qï¼ˆq=1-pï¼‰è¾“æ‰ä¸€ä¸ªç­¹ç ã€‚åº„å®¶è¾“æ‰æ‰€æœ‰é’±åï¼Œå³ç»ˆæ­¢æ¸¸æˆã€‚å‡è®¾å„æ¬¡èµŒåšéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ±‚åº„å®¶æŠŠæ‰€æœ‰ç­¹ç è¾“å…‰çš„æ¦‚ç‡ã€‚</p>
</blockquote>
<p><strong>è§£ç­”å¦‚ä¸‹ï¼š</strong></p>
<p><img src="/2018/Gambler%27s%20Ruin%20Problem%EF%BC%88%E8%B5%8C%E5%BE%92%E7%A0%B4%E4%BA%A7%E9%97%AE%E9%A2%98%EF%BC%89%E7%A0%94%E7%A9%B6%E6%80%BB%E7%BB%93/readme/%E5%BA%84%E5%AE%B6%E8%BE%93%E6%8E%89%E6%89%80%E6%9C%89%E7%AD%B9%E7%A0%81%E7%9A%84%E6%A6%82%E7%8E%87.png" alt="åº„å®¶è¾“æ‰æ‰€æœ‰ç­¹ç çš„æ¦‚ç‡.png"></p>
<p><strong>è¿™æ˜¯ä¸Šè¿°æ•°å­¦å…¬å¼çš„äºŒç»´å›¾å½¢ï¼š</strong></p>
<p><img src="/2018/Gambler%27s%20Ruin%20Problem%EF%BC%88%E8%B5%8C%E5%BE%92%E7%A0%B4%E4%BA%A7%E9%97%AE%E9%A2%98%EF%BC%89%E7%A0%94%E7%A9%B6%E6%80%BB%E7%BB%93/readme/%E5%BA%84%E5%AE%B6%E8%BE%93%E6%8E%89%E6%89%80%E6%9C%89%E7%AD%B9%E7%A0%81%E7%9A%84%E6%A6%82%E7%8E%87-%E4%BA%8C%E7%BB%B4%E5%9B%BE.png" alt="åº„å®¶è¾“æ‰æ‰€æœ‰ç­¹ç çš„æ¦‚ç‡-äºŒç»´å›¾.png"></p>
<p>ç”±å…¬å¼å’Œå›¾å¯å¾—ï¼š</p>
<ul>
<li>å½“ p  &lt; q æ—¶ï¼Œåº„å®¶å¿…ç„¶è¾“å…‰ç­¹ç </li>
<li>å½“ p  &gt;= q æ—¶ï¼Œp ç›¸åŒæ—¶ï¼Œåº„å®¶é’±è¶Šå¤šï¼Œè¾“å…‰ç­¹ç çš„æ¦‚ç‡è¶Šå°</li>
</ul>
<h2 id="èµŒå¾’èµ¢å¾—Nä¸ªç­¹ç çš„æ¦‚ç‡"><a href="#èµŒå¾’èµ¢å¾—Nä¸ªç­¹ç çš„æ¦‚ç‡" class="headerlink" title="èµŒå¾’èµ¢å¾—Nä¸ªç­¹ç çš„æ¦‚ç‡"></a>èµŒå¾’èµ¢å¾—Nä¸ªç­¹ç çš„æ¦‚ç‡</h2><blockquote>
<p>ä¸€ä¸ªèµŒå¾’åˆå§‹æ—¶æœ‰nä¸ªç­¹ç ï¼Œæ¯æ¬¡æœ‰æ¦‚ç‡pèµ¢å¾—ä¸€ä¸ªç­¹ç ï¼Œæˆ–è€…æ¦‚ç‡qï¼ˆq=1-pï¼‰è¾“æ‰ä¸€ä¸ªç­¹ç ã€‚èµŒå¾’èµ¢å¾—Nä¸ªç­¹ç åï¼Œæˆ–è€…è¾“æ‰æ‰€æœ‰é’±åï¼Œå³ç»ˆæ­¢æ¸¸æˆã€‚å‡è®¾å„æ¬¡èµŒåšéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ±‚èµŒå¾’åœ¨è¾“æ‰åˆå§‹ç­¹ç å‰èµ¢å¾—Nä¸ªç­¹ç çš„æ¦‚ç‡ã€‚</p>
</blockquote>
<p><strong>è§£ç­”å¦‚ä¸‹ï¼š</strong></p>
<p><img src="/2018/Gambler%27s%20Ruin%20Problem%EF%BC%88%E8%B5%8C%E5%BE%92%E7%A0%B4%E4%BA%A7%E9%97%AE%E9%A2%98%EF%BC%89%E7%A0%94%E7%A9%B6%E6%80%BB%E7%BB%93/readme/%E8%B5%8C%E5%BE%92%E8%B5%A2%E5%BE%97N%E4%B8%AA%E7%AD%B9%E7%A0%81%E7%9A%84%E6%A6%82%E7%8E%87.png" alt="èµŒå¾’èµ¢å¾—Nä¸ªç­¹ç çš„æ¦‚ç‡.png"></p>
<p><strong>è¿™æ˜¯ä¸Šè¿°æ•°å­¦å…¬å¼çš„äºŒç»´å›¾å½¢ï¼š</strong></p>
<p><img src="/2018/Gambler%27s%20Ruin%20Problem%EF%BC%88%E8%B5%8C%E5%BE%92%E7%A0%B4%E4%BA%A7%E9%97%AE%E9%A2%98%EF%BC%89%E7%A0%94%E7%A9%B6%E6%80%BB%E7%BB%93/readme/%E8%B5%8C%E5%BE%92%E8%B5%A2%E5%BE%97N%E4%B8%AA%E7%AD%B9%E7%A0%81%E7%9A%84%E6%A6%82%E7%8E%87-%E4%BA%8C%E7%BB%B4%E5%9B%BE.png" alt="èµŒå¾’èµ¢å¾—Nä¸ªç­¹ç çš„æ¦‚ç‡-äºŒç»´å›¾.png"></p>
<p>ç”±å…¬å¼å’Œå›¾å¯å¾—ï¼š</p>
<ul>
<li>å½“ p  &lt;= q æ—¶ï¼ŒèµŒå¾’æ˜¯æ— æ³•èµ¢å¾—äº†ç›®æ ‡ç­¹ç æ•°ç›®çš„</li>
<li>å½“ p  &gt; q æ—¶ï¼Œp ç›¸åŒæ—¶ï¼Œèµ¢é’±ç›®æ ‡è¶Šå¤§ï¼ŒèµŒå¾’èµ¢å–çš„æ¦‚ç‡è¶Šå¤§</li>
</ul>
<p>ç»¼åˆä»¥ä¸Šæ•°å­¦è¯æ˜ï¼Œå†ç»“åˆç°å®æƒ…å†µï¼š</p>
<ul>
<li>åº„å®¶çš„ç­¹ç å¾€å¾€å¤šäºä¸€èˆ¬èµŒå¾’</li>
<li>æ²¡æœ‰ä¸€ä¸ªèµŒåœºä¼šè®©èµŒå¾’èµ¢çš„æ¦‚ç‡è¶…è¿‡50%ï¼ˆå³ p &gt; q ï¼‰</li>
</ul>
<p>èµŒå¾’è¿›å»èµŒåœºåï¼Œåœ¨æœ‰é’±çš„åº„å®¶é¢å‰ï¼Œç©ç€ä¸è¶…è¿‡50%èƒœç‡çš„æ¸¸æˆï¼Œèµ¢é’±å°±åªæ˜¯ä¸€ä¸ªç¾ä¸½çš„æ³¡æ²«ã€‚</p>
<p>å¦‚æœä½ ä¸æƒ³è¾“é’±ï¼Œé‚£å°±è¿œç¦»èµŒåšå§â€”â€”è¿™æ˜¯ä¿è¯ç™¾åˆ†ä¹‹ä¸€ç™¾ä¸ä¼šè¾“é’±çš„æ–¹æ³•ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2018</tag>
        <tag>åŒºå—é“¾</tag>
      </tags>
  </entry>
  <entry>
    <title>UICollectionView-DecorationView å¼€å‘æ€»ç»“</title>
    <url>/2018/UICollectionView-DecorationView%20%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨é¡¹ç›®æ–°ç‰ˆæœ¬ä¸­ï¼Œè¦å®ç°ç±»ä¼¼ä»¥ä¸‹çš„æ•ˆæœï¼šç»™æ¯ä¸ª<code>section</code>åŒºåŸŸæ·»åŠ ä¸€ä¸ªå¡ç‰‡è£…é¥°èƒŒæ™¯ä»¥åŠä¸€ä¸ªè¢–æ ‡è£…é¥°å›¾æ ‡ï¼ˆå¡ç‰‡åœ¨æ‰€æœ‰çš„<code>cell</code>ä¸‹ï¼Œè¢–æ ‡åœ¨<code>cell</code>ä¸Šé¢ï¼‰ã€‚</p>
<p><img src="/2018/UICollectionView-DecorationView%20%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/readme/%E6%95%88%E6%9E%9C-1.png" alt="æ•ˆæœ-1.png"></p>
<p><img src="/2018/UICollectionView-DecorationView%20%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/readme/%E6%95%88%E6%9E%9C-2.png" alt="æ•ˆæœ-2.png"></p>
<p>è¿™å¯ä»¥é€šè¿‡<code>UICollectionView</code> çš„ <code>DecorationView</code> ç‰¹æ€§æ¥è¾¾åˆ°ä»¥ä¸Šæ•ˆæœã€‚æœ¬æ–‡ä¸»è¦æ˜¯æ€»ç»“ <code>DecorationView</code> çš„å®ç°ã€é‡ç”¨æœºåˆ¶å’Œå­˜åœ¨çš„å‘ã€‚</p>
<a id="more"></a>

<h2 id="DecorationView-çš„å®ç°ï¼ˆåŒ…æ‹¬å‘ï¼‰"><a href="#DecorationView-çš„å®ç°ï¼ˆåŒ…æ‹¬å‘ï¼‰" class="headerlink" title="DecorationView çš„å®ç°ï¼ˆåŒ…æ‹¬å‘ï¼‰"></a>DecorationView çš„å®ç°ï¼ˆåŒ…æ‹¬å‘ï¼‰</h2><h3 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h3><ol>
<li>ç»§æ‰¿ <code>UICollectionViewLayoutAttributes</code>ï¼Œå®ç°ç”¨äºæè¿°è£…é¥°è§†å›¾çš„å¸ƒå±€å±æ€§çš„ç±»ï¼Œå¦‚æè¿°å¡ç‰‡è£…é¥°è§†å›¾çš„<code>SectionCardDecorationCollectionViewLayoutAttributes</code></li>
<li>ç»§æ‰¿ <code>UICollectionReusableView</code>ï¼Œå®ç°è‡ªå·±çš„è£…é¥°è§†å›¾ï¼Œå¦‚å¡ç‰‡è£…é¥°è§†å›¾ <code>SectionCardDecorationReusableView</code></li>
<li>ç»§æ‰¿ <code>UICollectionViewFlowLayout</code>ï¼Œå®ç°è‡ªå·±çš„å¸ƒå±€è®¡ç®—ï¼šä¸»è¦æ˜¯æ³¨å†Œè‡ªå®šä¹‰çš„è£…é¥°è§†å›¾å’Œè®¡ç®—ç®¡ç†è¿™äº›è£…é¥°è§†å›¾çš„å¸ƒå±€å±æ€§ã€‚å¦‚ <code>SectionCardDecorationCollectionViewLayout</code></li>
<li>ç»§æ‰¿ <code>UICollectionView</code>ï¼Œoverride <code>layoutSubviews</code> æ–¹æ³•ï¼Œè§£å†³è£…é¥°è§†å›¾çš„ä¸€ä¸ªå‘ï¼ˆå…³äºæ­¤å‘ï¼Œè¯·çœ‹æ–‡ç« å…·ä½“æè¿°ï¼‰</li>
</ol>
<h3 id="æ ¸å¿ƒä»£ç "><a href="#æ ¸å¿ƒä»£ç " class="headerlink" title="æ ¸å¿ƒä»£ç "></a>æ ¸å¿ƒä»£ç </h3><p><strong>1. è‡ªå®šä¹‰è£…é¥°å›¾çš„å¸ƒå±€å±æ€§</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// sectionå¡ç‰‡è£…é¥°å›¾çš„å¸ƒå±€å±æ€§</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SectionCardDecorationCollectionViewLayoutAttributes</span>: <span class="title">UICollectionViewLayoutAttributes</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//èƒŒæ™¯è‰²</span></span><br><span class="line">    <span class="keyword">var</span> backgroundColor = <span class="type">UIColor</span>.white</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ‰€å®šä¹‰å±æ€§çš„ç±»å‹éœ€è¦éµä» NSCopying åè®®</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">copy</span><span class="params">(with zone: NSZone? = <span class="literal">nil</span>)</span></span> -&gt; <span class="type">Any</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> copy = <span class="keyword">super</span>.copy(with: zone) <span class="keyword">as</span>! <span class="type">SectionCardDecorationCollectionViewLayoutAttributes</span></span><br><span class="line">        copy.backgroundColor = <span class="keyword">self</span>.backgroundColor</span><br><span class="line">        <span class="keyword">return</span> copy</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ‰€å®šä¹‰å±æ€§çš„ç±»å‹è¿˜è¦å®ç°ç›¸ç­‰åˆ¤æ–­æ–¹æ³•ï¼ˆisEqualï¼‰</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">isEqual</span><span class="params">(<span class="number">_</span> object: <span class="keyword">Any</span>?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> rhs = object <span class="keyword">as</span>? <span class="type">SectionCardDecorationCollectionViewLayoutAttributes</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> !<span class="keyword">self</span>.backgroundColor.isEqual(rhs.backgroundColor) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.isEqual(object)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2. è‡ªå®šä¹‰è£…é¥°å›¾</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// Sectionå¡ç‰‡è£…é¥°è§†å›¾</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SectionCardDecorationReusableView</span>: <span class="title">UICollectionReusableView</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line">        <span class="keyword">self</span>.customInit()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(coder: aDecoder)!</span><br><span class="line">        <span class="keyword">self</span>.customInit()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">customInit</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.backgroundColor = <span class="type">UIColor</span>.white</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.layer.cornerRadius = <span class="number">6.0</span></span><br><span class="line">        <span class="keyword">self</span>.layer.borderColor = <span class="type">UIColor</span>.clear.cgColor</span><br><span class="line">        <span class="keyword">self</span>.layer.borderWidth = <span class="number">1.0</span></span><br><span class="line">        <span class="comment">// SketchShadow: color-(0,0,0,0.17),x-0,y-1,blur-2,spread-0</span></span><br><span class="line">        <span class="keyword">self</span>.layer.shadowColor = <span class="type">UIColor</span>.black.cgColor</span><br><span class="line">        <span class="keyword">self</span>.layer.shadowOpacity = <span class="number">0.17</span></span><br><span class="line">        <span class="keyword">self</span>.layer.shadowOffset = <span class="type">CGSize</span>.<span class="keyword">init</span>(width: <span class="number">0</span>, height: <span class="number">1.0</span>)</span><br><span class="line">        <span class="keyword">self</span>.layer.shadowRadius = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€šè¿‡applyæ–¹æ³•è®©è‡ªå®šä¹‰å±æ€§ç”Ÿæ•ˆ</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">apply</span><span class="params">(<span class="number">_</span> layoutAttributes: UICollectionViewLayoutAttributes)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.apply(layoutAttributes)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> attr = layoutAttributes <span class="keyword">as</span>? <span class="type">SectionCardDecorationCollectionViewLayoutAttributes</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.backgroundColor = attr.backgroundColor</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="type">SectionCardDecorationViewKind</span> = <span class="string">"SectionCardDecorationReuseIdentifier"</span></span><br></pre></td></tr></table></figure>

<p><strong>3. è‡ªå®šä¹‰ <code>UICollectionViewFlowLayout</code></strong></p>
<blockquote>
<p>è‡ªå®šä¹‰ <code>UICollectionViewFlowLayout</code>ï¼Œä¸»è¦æ˜¯å®ç°è‡ªå·±çš„å¸ƒå±€è®¡ç®—ã€‚ä¸»è¦çš„è®¡ç®—æ“ä½œæœ‰ï¼š</p>
<ul>
<li>åˆå§‹åŒ–æ—¶è¿›è¡Œè£…é¥°è§†å›¾çš„æ³¨å†Œæ“ä½œï¼ˆå¯¹åº” <code>setup</code> æ–¹æ³•ï¼‰</li>
<li>override <code>prepare</code> æ–¹æ³•ï¼Œè®¡ç®—ç”Ÿæˆè£…é¥°è§†å›¾çš„å¸ƒå±€å±æ€§</li>
<li>override <code>layoutAttributesForElements</code> æ–¹æ³•ï¼Œè¿”å›å¯è§†èŒƒå›´ä¸‹è£…é¥°è§†å›¾çš„å¸ƒå±€å±æ€§</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// å¡ç‰‡å¼èƒŒæ™¯CollectionViewLayout</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SectionCardDecorationCollectionViewLayout</span>: <span class="title">UICollectionViewFlowLayout</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¿å­˜æ‰€æœ‰è‡ªå®šä¹‰çš„sectionèƒŒæ™¯çš„å¸ƒå±€å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> cardDecorationViewAttrs: [<span class="type">Int</span>:<span class="type">UICollectionViewLayoutAttributes</span>] = [:]</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> armbandDecorationViewAttrs: [<span class="type">Int</span>:<span class="type">UICollectionViewLayoutAttributes</span>] = [:]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">weak</span> <span class="keyword">var</span> decorationDelegate: <span class="type">SectionCardDecorationCollectionViewLayoutDelegate?</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">        setup()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(coder: aDecoder)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">awakeFromNib</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.awakeFromNib()</span><br><span class="line"></span><br><span class="line">        setup()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–æ—¶è¿›è¡Œä¸€äº›æ³¨å†Œæ“ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">//æ³¨å†ŒDecorationView</span></span><br><span class="line">        <span class="keyword">self</span>.register(<span class="type">SectionCardDecorationReusableView</span>.<span class="keyword">self</span>,</span><br><span class="line">                      forDecorationViewOfKind: <span class="type">SectionCardDecorationViewKind</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.register(<span class="type">SectionCardArmbandDecorationReusableView</span>.<span class="keyword">self</span>,</span><br><span class="line">                      forDecorationViewOfKind: <span class="type">SectionCardArmbandDecorationViewKind</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">prepare</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.prepare()</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœcollectionViewå½“å‰æ²¡æœ‰åˆ†åŒºï¼Œåˆ™ç›´æ¥é€€å‡º</span></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> numberOfSections = <span class="keyword">self</span>.collectionView?.numberOfSections</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> flowLayoutDelegate: <span class="type">UICollectionViewDelegateFlowLayout?</span> = <span class="keyword">self</span>.collectionView?.delegate <span class="keyword">as</span>? <span class="type">UICollectionViewDelegateFlowLayout</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸å­˜åœ¨cardDecorationDelegateå°±é€€å‡º</span></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> strongCardDecorationDelegate = decorationDelegate <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ é™¤æ—§çš„è£…é¥°è§†å›¾çš„å¸ƒå±€æ•°æ®</span></span><br><span class="line">        <span class="keyword">self</span>.cardDecorationViewAttrs.removeAll()</span><br><span class="line">        <span class="keyword">self</span>.armbandDecorationViewAttrs.removeAll()</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ†åˆ«è®¡ç®—æ¯ä¸ªsectionçš„è£…é¥°è§†å›¾çš„å¸ƒå±€å±æ€§</span></span><br><span class="line">        <span class="keyword">for</span> section <span class="keyword">in</span> <span class="number">0</span>..&lt;numberOfSections &#123;</span><br><span class="line">            <span class="comment">//è·å–è¯¥sectionä¸‹ç¬¬ä¸€ä¸ªï¼Œä»¥åŠæœ€åä¸€ä¸ªitemçš„å¸ƒå±€å±æ€§</span></span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> numberOfItems = <span class="keyword">self</span>.collectionView?.numberOfItems(inSection: section),</span><br><span class="line">                numberOfItems &gt; <span class="number">0</span>,</span><br><span class="line">                <span class="keyword">let</span> firstItem = <span class="keyword">self</span>.layoutAttributesForItem(at:</span><br><span class="line">                    <span class="type">IndexPath</span>(item: <span class="number">0</span>, section: section)),</span><br><span class="line">                <span class="keyword">let</span> lastItem = <span class="keyword">self</span>.layoutAttributesForItem(at:</span><br><span class="line">                    <span class="type">IndexPath</span>(item: numberOfItems - <span class="number">1</span>, section: section))</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è·å–è¯¥sectionçš„å†…è¾¹è·</span></span><br><span class="line">            <span class="keyword">var</span> sectionInset = <span class="keyword">self</span>.sectionInset</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> inset = flowLayoutDelegate?.collectionView?(<span class="keyword">self</span>.collectionView!,</span><br><span class="line">                                                              layout: <span class="keyword">self</span>, insetForSectionAt: section) &#123;</span><br><span class="line">                sectionInset = inset</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è®¡ç®—å¾—åˆ°è¯¥sectionå®é™…çš„ä½ç½®</span></span><br><span class="line">            <span class="keyword">var</span> sectionFrame = firstItem.frame.union(lastItem.frame)</span><br><span class="line">            <span class="comment">//è®¡ç®—å¾—åˆ°è¯¥sectionå®é™…çš„å°ºå¯¸</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">self</span>.scrollDirection == .horizontal &#123;</span><br><span class="line">                sectionFrame.origin.x -= sectionInset.<span class="keyword">left</span></span><br><span class="line">                sectionFrame.origin.y = sectionInset.top</span><br><span class="line">                sectionFrame.size.width += sectionInset.<span class="keyword">left</span> + sectionInset.<span class="keyword">right</span></span><br><span class="line">                sectionFrame.size.height = <span class="keyword">self</span>.collectionView!.frame.height</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                sectionFrame.origin.x = sectionInset.<span class="keyword">left</span></span><br><span class="line">                sectionFrame.origin.y -= sectionInset.top</span><br><span class="line">                sectionFrame.size.width = <span class="keyword">self</span>.collectionView!.frame.width</span><br><span class="line">                sectionFrame.size.height += sectionInset.top + sectionInset.bottom</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// æƒ³åˆ¤æ–­å¡ç‰‡æ˜¯å¦å¯è§</span></span><br><span class="line">            <span class="keyword">let</span> cardDisplayed = strongCardDecorationDelegate.collectionView(<span class="keyword">self</span>.collectionView!, layout: <span class="keyword">self</span>, decorationDisplayedForSectionAt: section)</span><br><span class="line">            <span class="keyword">guard</span> cardDisplayed == <span class="literal">true</span> <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è®¡ç®—å¡ç‰‡è£…é¥°å›¾çš„å±æ€§</span></span><br><span class="line">            <span class="keyword">let</span> cardDecorationInset = strongCardDecorationDelegate.collectionView(<span class="keyword">self</span>.collectionView!, layout: <span class="keyword">self</span>, decorationInsetForSectionAt: section)</span><br><span class="line">            <span class="comment">//è®¡ç®—å¾—åˆ°cardDecorationè¯¥å®é™…çš„å°ºå¯¸</span></span><br><span class="line">            <span class="keyword">var</span> cardDecorationFrame = sectionFrame</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">self</span>.scrollDirection == .horizontal &#123;</span><br><span class="line">                cardDecorationFrame.origin.x = sectionFrame.origin.x + cardDecorationInset.<span class="keyword">left</span></span><br><span class="line">                cardDecorationFrame.origin.y = cardDecorationInset.top</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                cardDecorationFrame.origin.x = cardDecorationInset.<span class="keyword">left</span></span><br><span class="line">                cardDecorationFrame.origin.y = sectionFrame.origin.y + cardDecorationInset.top</span><br><span class="line">            &#125;</span><br><span class="line">            cardDecorationFrame.size.width = sectionFrame.size.width - (cardDecorationInset.<span class="keyword">left</span> + cardDecorationInset.<span class="keyword">right</span>)</span><br><span class="line">            cardDecorationFrame.size.height = sectionFrame.size.height - (cardDecorationInset.top + cardDecorationInset.bottom)</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ ¹æ®ä¸Šé¢çš„ç»“æœè®¡ç®—å¡ç‰‡è£…é¥°å›¾çš„å¸ƒå±€å±æ€§</span></span><br><span class="line">            <span class="keyword">let</span> cardAttr = <span class="type">SectionCardDecorationCollectionViewLayoutAttributes</span>(</span><br><span class="line">                forDecorationViewOfKind: <span class="type">SectionCardDecorationViewKind</span>,</span><br><span class="line">                with: <span class="type">IndexPath</span>(item: <span class="number">0</span>, section: section))</span><br><span class="line">            cardAttr.frame = cardDecorationFrame</span><br><span class="line"></span><br><span class="line">            <span class="comment">// zIndexç”¨äºè®¾ç½®front-to-backå±‚çº§ï¼›å€¼è¶Šå¤§ï¼Œä¼˜å…ˆå¸ƒå±€åœ¨ä¸Šå±‚ï¼›cellçš„zIndexä¸º0</span></span><br><span class="line">            cardAttr.zIndex = -<span class="number">1</span></span><br><span class="line">            <span class="comment">//é€šè¿‡ä»£ç†æ–¹æ³•è·å–è¯¥sectionå¡ç‰‡è£…é¥°å›¾ä½¿ç”¨çš„é¢œè‰²</span></span><br><span class="line">            <span class="keyword">let</span> backgroundColor = strongCardDecorationDelegate.collectionView(<span class="keyword">self</span>.collectionView!, layout: <span class="keyword">self</span>, decorationColorForSectionAt: section)</span><br><span class="line">            cardAttr.backgroundColor = backgroundColor</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å°†è¯¥sectionçš„å¡ç‰‡è£…é¥°å›¾çš„å¸ƒå±€å±æ€§ä¿å­˜èµ·æ¥</span></span><br><span class="line">            <span class="keyword">self</span>.cardDecorationViewAttrs[section] = cardAttr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// å…ˆåˆ¤æ–­è¢–æ ‡æ˜¯å¦å¯è§</span></span><br><span class="line">            <span class="keyword">let</span> armbandDisplayed = strongCardDecorationDelegate.collectionView(<span class="keyword">self</span>.collectionView!, layout: <span class="keyword">self</span>, armbandDecorationDisplayedForSectionAt: section)</span><br><span class="line">            <span class="keyword">guard</span> armbandDisplayed == <span class="literal">true</span> <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¦‚æœè¢–æ ‡å›¾ç‰‡åç§°ä¸ºnilï¼Œå°±è·³è¿‡</span></span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> imageName = strongCardDecorationDelegate.collectionView(<span class="keyword">self</span>.collectionView!, layout: <span class="keyword">self</span>, armbandDecorationImageForSectionAt: section) <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è®¡ç®—è¢–æ ‡è£…é¥°å›¾çš„å±æ€§</span></span><br><span class="line">            <span class="keyword">var</span> armbandDecorationInset = cardDecorationInset</span><br><span class="line">            armbandDecorationInset.<span class="keyword">left</span> = <span class="number">1</span></span><br><span class="line">            armbandDecorationInset.top = <span class="number">18</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> topOffset = strongCardDecorationDelegate.collectionView(<span class="keyword">self</span>.collectionView!, layout: <span class="keyword">self</span>, armbandDecorationTopOffsetForSectionAt: section) &#123;</span><br><span class="line">                armbandDecorationInset.top = topOffset</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è®¡ç®—å¾—åˆ°armbandDecorationè¯¥å®é™…çš„å°ºå¯¸</span></span><br><span class="line">            <span class="keyword">var</span> armbandDecorationFrame = sectionFrame</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">self</span>.scrollDirection == .horizontal &#123;</span><br><span class="line">                armbandDecorationFrame.origin.x = sectionFrame.origin.x + armbandDecorationInset.<span class="keyword">left</span></span><br><span class="line">                armbandDecorationFrame.origin.y = armbandDecorationInset.top</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                armbandDecorationFrame.origin.x = armbandDecorationInset.<span class="keyword">left</span></span><br><span class="line">                armbandDecorationFrame.origin.y = sectionFrame.origin.y + armbandDecorationInset.top</span><br><span class="line">            &#125;</span><br><span class="line">            armbandDecorationFrame.size.width = <span class="number">80</span></span><br><span class="line">            armbandDecorationFrame.size.height = <span class="number">53</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ ¹æ®ä¸Šé¢çš„ç»“æœè®¡ç®—è¢–æ ‡è£…é¥°è§†å›¾çš„å¸ƒå±€å±æ€§</span></span><br><span class="line">            <span class="keyword">let</span> armbandAttr = <span class="type">SectionCardArmbandDecorationCollectionViewLayoutAttributes</span>(</span><br><span class="line">                forDecorationViewOfKind: <span class="type">SectionCardArmbandDecorationViewKind</span>,</span><br><span class="line">                with: <span class="type">IndexPath</span>(item: <span class="number">0</span>, section: section))</span><br><span class="line">            armbandAttr.frame = armbandDecorationFrame</span><br><span class="line">            armbandAttr.zIndex = <span class="number">1</span></span><br><span class="line">            armbandAttr.imageName = imageName</span><br><span class="line">            <span class="comment">//å°†è¯¥sectionçš„è¢–æ ‡è£…é¥°è§†å›¾çš„å¸ƒå±€å±æ€§ä¿å­˜èµ·æ¥</span></span><br><span class="line">            <span class="keyword">self</span>.armbandDecorationViewAttrs[section] = armbandAttr</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›rectèŒƒå›´ä¸‹çˆ¶ç±»çš„æ‰€æœ‰å…ƒç´ çš„å¸ƒå±€å±æ€§ä»¥åŠå­ç±»è‡ªå®šä¹‰è£…é¥°è§†å›¾çš„å¸ƒå±€å±æ€§</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutAttributesForElements</span><span class="params">(<span class="keyword">in</span> rect: CGRect)</span></span></span><br><span class="line">        -&gt; [<span class="type">UICollectionViewLayoutAttributes</span>]? &#123;</span><br><span class="line">            <span class="keyword">var</span> attrs = <span class="keyword">super</span>.layoutAttributesForElements(<span class="keyword">in</span>: rect)</span><br><span class="line">            attrs?.append(contentsOf: <span class="keyword">self</span>.cardDecorationViewAttrs.values.<span class="built_in">filter</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> rect.intersects($<span class="number">0</span>.frame)</span><br><span class="line">            &#125;)</span><br><span class="line">            attrs?.append(contentsOf: <span class="keyword">self</span>.armbandDecorationViewAttrs.values.<span class="built_in">filter</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> rect.intersects($<span class="number">0</span>.frame)</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">return</span> attrs</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›å¯¹åº”äºindexPathçš„ä½ç½®çš„è£…é¥°è§†å›¾çš„å¸ƒå±€å±æ€§</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutAttributesForDecorationView</span><span class="params">(ofKind elementKind: String,</span></span></span><br><span class="line"><span class="function"><span class="params">                                                    at indexPath: IndexPath)</span></span> -&gt; <span class="type">UICollectionViewLayoutAttributes?</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> section = indexPath.section</span><br><span class="line">        <span class="keyword">if</span> elementKind == <span class="type">SectionCardDecorationViewKind</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">self</span>.cardDecorationViewAttrs[section]</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> elementKind == <span class="type">SectionCardArmbandDecorationViewKind</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">self</span>.armbandDecorationViewAttrs[section]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.layoutAttributesForDecorationView(ofKind: elementKind,</span><br><span class="line">                                                       at: indexPath)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4. è‡ªå®šä¹‰ <code>UICollectionView</code>ï¼Œè§£å†³è£…é¥°è§†å›¾çš„å‘</strong></p>
<blockquote>
<p>åœ¨æè¿°è¿™ä¸ªå‘å‰ï¼Œéœ€è¦å…ˆæ™®åŠä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼šå¦‚ä½•æ§åˆ¶<code>UICollectionView</code>çš„å­è§†å›¾çš„å±‚çº§å…³ç³»ï¼Œå¦‚è®©å¡ç‰‡è£…é¥°è§†å›¾å±…äºcellä¸‹é¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼šä½¿ç”¨<code>UICollectionViewLayoutAttributes</code> çš„ <code>zIndex</code> å±æ€§ã€‚  <code>UICollectionView</code>è¿›è¡Œå¸ƒå±€æ—¶ï¼Œä¼šä¾æ®å­è§†å›¾çš„å¸ƒå±€å±æ€§çš„ <code>zIndex</code> çš„å€¼çš„å¤§å°æ¥æ§åˆ¶å­è§†å›¾çš„ <strong>front-to-back</strong> å±‚çº§å…³ç³»ï¼ˆåœ¨å‰æˆ–è€…åœ¨åï¼‰ã€‚cell çš„å¸ƒå±€å±æ€§çš„ <code>zIndex</code> çš„å€¼ä¸º0ï¼Œæ‰€ä»¥è‹¥è¦å¡ç‰‡è£…é¥°è§†å›¾åœ¨ cell ä¸‹é¢ï¼Œåªè¦è®¾ç½®å…¶å¸ƒå±€å±æ€§çš„ <code>zIndex</code> çš„å€¼å°äº0å³å¯ã€‚</p>
<p>åœ¨çŸ¥é“è¿™ä¸ªçŸ¥è¯†ç‚¹åï¼Œè®©æˆ‘æ¥å…·ä½“æè¿°ä¸€ä¸‹çš„ <code>UICollectionView</code> çš„åœ¨è£…é¥°è§†å›¾çš„å‘ï¼šåœ¨iOS10+ä¸Šï¼Œ<code>zIndex</code> ä¼šéšæœºå¤±æ•ˆã€‚å…·ä½“è¡¨ç°ä¸ºï¼Œå¡ç‰‡è£…é¥°è§†å›¾çš„å¸ƒå±€å±æ€§çš„ <code>zIndex</code> è®¾ç½®ä¸º -1ï¼Œæ¯” cell çš„å°ï¼Œç†è®ºä¸Šè¿›è¡Œå¸ƒå±€æ—¶ï¼Œå¡ç‰‡è£…é¥°è§†å›¾åº”è¯¥æ€»æ˜¯åœ¨ cell ä¸‹é¢ï¼›ä½†æ˜¯å®é™…ä¸Šï¼Œå½“ä½ çš„ <code>UICollectionView</code> æ¯”è¾ƒå¤æ‚æ—¶ï¼Œä¼š <strong>éšæœº</strong> å‡ºç°æŸäº› cell å¸ƒå±€åœ¨äº†å¡ç‰‡è£…é¥°è§†å›¾ä¸‹é¢ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ˆç”±äºè¿™ä¸ªâ€œéšæœºé—®é¢˜â€åªå‡ºç°åœ¨å…·ä½“çš„é¡¹ç›®ä¸­ï¼Œä¸å‡ºç°åœ¨Demoä¸­ï¼Œä¸ºäº†æ–¹ä¾¿è¯´æ˜é—®é¢˜ï¼Œç‰¹æ„â€œæ‰‹åŠ¨â€å®ç°è¿™ç§â€œéšæœºé—®é¢˜â€çš„æ•ˆæœæ¥ç”Ÿæˆæˆªå›¾ğŸ˜‚ï¼‰ï¼š</p>
<p><img src="/2018/UICollectionView-DecorationView%20%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/readme/bug%E7%A4%BA%E4%BE%8B.png" alt="bugç¤ºä¾‹.png"></p>
<p>å¯¹äºè¿™ä¸ªâ€œéšæœºâ€é—®é¢˜ï¼Œå›½å¤–è®ºå›ä¹Ÿæœ‰å¯¹åº”çš„<a href="https://github.com/lionheart/openradar-mirror/issues/15453" target="_blank" rel="noopener">è®¨è®º</a>ã€‚</p>
<p>åœ¨è¯¥è®¨è®ºçš„å¸–å­ä¸‹ï¼Œæœ‰å¼€å‘è€…å»ºè®®é€šè¿‡è®¾ç½® <code>cell.layer.zPosition</code> æ¥è§£å†³ï¼Œä½†æ˜¯æˆ‘åœ¨å°è¯•åï¼Œå‘ç°è¿™ä¸ªæ–¹æ³•æ— æ•ˆã€‚æœ€åï¼Œæˆ‘ä½¿ç”¨äº†å¦ä¸€ä¸ªæ–¹æ³•æ¥è§£å†³ï¼šè‡ªå®šä¹‰ <code>UICollectionView</code>ï¼Œoverride <code>layoutSubviews</code> æ–¹æ³•ï¼Œæ‰‹åŠ¨è°ƒæ•´è£…é¥°è§†å›¾å’Œcellçš„å±‚çº§å…³ç³»ã€‚</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CardCollectionView</span>: <span class="title">UICollectionView</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutSubviews</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.layoutSubviews()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> sectionCardViews: [<span class="type">UIView</span>] = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.subviews.forEach &#123; (subview) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> decorationView = subview <span class="keyword">as</span>? <span class="type">SectionCardDecorationReusableView</span> &#123;</span><br><span class="line">                sectionCardViews.append(decorationView)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sectionCardViews.forEach &#123; (decorationView) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.sendSubview(toBack: decorationView)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="DecorationView-çš„é‡ç”¨æœºåˆ¶"><a href="#DecorationView-çš„é‡ç”¨æœºåˆ¶" class="headerlink" title="DecorationView çš„é‡ç”¨æœºåˆ¶"></a>DecorationView çš„é‡ç”¨æœºåˆ¶</h2><p>åœ¨ <code>UICollectionView</code> é‡Œï¼ŒDecorationView çš„é‡ç”¨æœºåˆ¶å’Œ Cell çš„é‡ç”¨æœºåˆ¶æ˜¯ä¸€è‡´çš„ï¼šä½¿ç”¨å‰ï¼Œå…ˆæ³¨å†Œï¼ˆåªä¸è¿‡ DecorationView çš„æ³¨å†Œæ˜¯ç”±<code>UICollectionViewFlowLayout</code>æ¥å‘èµ·â€”â€”å®é™…è¿˜æ˜¯ UICollectionView è¿›è¡Œæœ€ç»ˆçš„æ³¨å†Œæ“ä½œï¼‰ï¼›ä½¿ç”¨æ—¶ï¼Œç”±<code>UICollectionView</code>æ ¹æ®ä¸Šä¸‹æ–‡åˆ›å»ºæ–°çš„ DecorationView æˆ–è€…è¿”å›æ—§çš„ DecorationViewã€‚</p>
<p>é‚£ä¹ˆä»¥ä¸Šç»“è®ºçš„ä¾æ®æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¯·çœ‹ä¸‹é¢çš„<code>UICollectionView</code>çš„é‡ç”¨é˜Ÿåˆ—å±æ€§å³å¯çŸ¥é“ï¼š</p>
<p><img src="/2018/UICollectionView-DecorationView%20%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/readme/UICollectionView%E7%9A%84%E9%87%8D%E7%94%A8%E9%98%9F%E5%88%97%E5%B1%9E%E6%80%A7.png" alt="UICollectionViewçš„é‡ç”¨é˜Ÿåˆ—å±æ€§.png"></p>
<p>åœ¨ <code>UICollectionView</code> é‡Œé¢æœ‰2ç§è§†å›¾ç±»å‹çš„é‡ç”¨é˜Ÿåˆ—ï¼Œåˆ†åˆ«æ˜¯ Cell ç±»å‹ï¼ˆå¯¹åº”<code>cellReuseQueues</code>ï¼‰ å’Œ Supplementary ç±»å‹ï¼ˆå¯¹åº”<code>supplementaryReuseQueues</code>ï¼‰ã€‚è¿™2ç§ç±»å‹çš„é‡ç”¨æœºåˆ¶æ˜¯ä¸€æ ·çš„ã€‚å…¶ä¸­ï¼ŒDecorationView æ˜¯ SupplementaryView çš„ä¸€ç§ã€‚</p>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>æœ€åï¼Œé™„ä¸ŠDemoä»£ç ã€‚å…·ä½“ï¼Œè¯·ç‚¹å‡»è¿™ä¸ª <a href="https://github.com/YK-Unit/DecorationViewDemo" target="_blank" rel="noopener">repo</a>ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>2018</tag>
      </tags>
  </entry>
  <entry>
    <title>Xcode æ–‡æœ¬å®ï¼ˆText Macrosï¼‰çš„ä»‹ç»å’Œåº”ç”¨</title>
    <url>/2018/Xcode%20%E6%96%87%E6%9C%AC%E5%AE%8F%EF%BC%88Text%20Macros%EF%BC%89%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%BA%94%E7%94%A8/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ–‡æœ¬å®ï¼ˆ<code>Text Macros</code>ï¼‰æ˜¯Xcodeéšè—çš„ç‰¹æ€§ï¼Œç›´åˆ°Xcode 9.0åï¼Œè‹¹æœå®˜æ–¹æ‰å¼€å§‹å…è®¸å¼€å‘è€…è¿›è¡Œè‡ªå®šä¹‰æ–‡æœ¬å®ã€‚ä¸‹é¢å°†ä¼šè¯¦ç»†ä»‹ç»æ–‡æœ¬å®çš„ç›¸å…³çŸ¥è¯†å’Œåº”ç”¨åœºæ™¯ã€‚</p>
<a id="more"></a>

<h2 id="ä»€ä¹ˆæ˜¯æ–‡æœ¬å®"><a href="#ä»€ä¹ˆæ˜¯æ–‡æœ¬å®" class="headerlink" title="ä»€ä¹ˆæ˜¯æ–‡æœ¬å®"></a>ä»€ä¹ˆæ˜¯æ–‡æœ¬å®</h2><p>æ–‡æœ¬å®ï¼ˆ<code>Text Macro</code>ï¼‰æ˜¯ä¸€ç§å¯ä»¥å°±åœ°å±•å¼€ï¼ˆ<code>expanded in-place</code>ï¼‰ä¸ºç‰¹å®šæ–‡æœ¬çš„ç¬¦å·ã€‚å…¶å¸¸è§äºXcodeæ–‡ä»¶æ¨¡æ¿ä¸­ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2018/Xcode%20%E6%96%87%E6%9C%AC%E5%AE%8F%EF%BC%88Text%20Macros%EF%BC%89%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%BA%94%E7%94%A8/readme/NSObjectObjective-C%E6%96%87%E4%BB%B6%E6%A8%A1%E6%9D%BF.png" alt="NSObjectObjective-Cæ–‡ä»¶æ¨¡æ¿"></p>
<p>å›¾ä¸­çš„<code>FILEHEADER</code>ã€<code>FILEBASENAME</code>ã€<code>FILEBASENAMEASIDENTIFIER</code>å°±æ˜¯æ‰€è¯´çš„æ–‡æœ¬å®ã€‚Xcodeåœ¨ä½¿ç”¨æ–‡ä»¶æ¨¡æ¿åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œä¼šæŠŠæ–‡ä»¶æ¨¡æ¿ä¸­çš„æ–‡æœ¬å®ï¼Œå±•å¼€ç”Ÿæˆç‰¹å®šçš„æ–‡æœ¬ï¼Œå¦‚ä½¿ç”¨<code>NSObjectObjective-C</code>æ–‡ä»¶æ¨¡æ¿åˆ›å»ºä¸€ä¸ªæ–‡ä»¶åä¸º<code>MyObject.m</code>çš„æ–‡ä»¶æ—¶ï¼Œ<code>FILEHEADER</code>ä¼šå±•å¼€ç”Ÿæˆå¤´éƒ¨æ³¨é‡Šä¿¡æ¯ï¼Œ<code>FILEBASENAME</code>ä¼šå±•å¼€ç”Ÿæˆå­—ç¬¦ä¸²<code>MyObject</code>ï¼Œ<code>FILEBASENAMEASIDENTIFIER</code>ä¼šå±•å¼€ç”Ÿæˆå­—ç¬¦ä¸²<code>MyObject</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2018/Xcode%20%E6%96%87%E6%9C%AC%E5%AE%8F%EF%BC%88Text%20Macros%EF%BC%89%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%BA%94%E7%94%A8/readme/%E6%96%87%E6%9C%AC%E5%AE%8F%E8%A7%A3%E9%87%8A%E7%A4%BA%E4%BE%8B.png" alt="æ–‡æœ¬å®è§£é‡Šç¤ºä¾‹"></p>
<blockquote>
<p><strong>å»¶ä¼¸é˜…è¯»</strong></p>
<p>Xcodeæ¨¡æ¿æœ‰æ–‡ä»¶æ¨¡æ¿å’Œå·¥ç¨‹æ¨¡æ¿ã€‚æ¨¡æ¿æ–‡ä»¶æŒ‰ç…§å¼€å‘å¹³å°å­˜æ”¾ï¼Œå…¶ä¸­æ¯ä¸ªå¹³å°çš„æ¨¡æ¿ä½ç½®å¦‚ä¸‹ï¼š</p>
<ul>
<li>macOSå¹³å°æ¨¡æ¿ï¼š<code>/Applications/Xcode.app/Contents/Developer/Library/Xcode/Templates</code></li>
<li>iOSå¹³å°æ¨¡æ¿ï¼š<code>/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates</code></li>
<li>tvOSå¹³å°æ¨¡æ¿ï¼š<code>/Applications/Xcode.app/Contents/D
eveloper/Platforms/AppleTVOS.platform/Developer/Library/Xcode/Templates</code></li>
<li>watchOSå¹³å°æ¨¡æ¿ï¼š<code>/Applications/Xcode.app/Contents/Developer/Platforms/WatchOS.platform/Developer/Library/Xcode/Templates</code></li>
</ul>
</blockquote>
<h2 id="å…¬å¼€å¯ç”¨çš„æ–‡æœ¬å®"><a href="#å…¬å¼€å¯ç”¨çš„æ–‡æœ¬å®" class="headerlink" title="å…¬å¼€å¯ç”¨çš„æ–‡æœ¬å®"></a>å…¬å¼€å¯ç”¨çš„æ–‡æœ¬å®</h2><p>å½“å‰Xcodeåœ¨å…¶å®˜æ–¹æ–‡æ¡£å…¬å¼€ç»™å¼€å‘è€…å¯ç”¨çš„æ–‡æœ¬å®æœ‰ä»¥ä¸‹å‡ ç±»ï¼š</p>
<p><strong>æ—¶é—´ç±»ï¼š</strong></p>
<ul>
<li><p>DATE</p>
<blockquote>
<p>å½“å‰çš„æ—¥æœŸï¼Œå¦‚<code>2018/12/20</code>ã€‚</p>
</blockquote>
</li>
<li><p>YEAR</p>
<blockquote>
<p>å››ä½æ•°å­—æ ¼å¼çš„å½“å‰å¹´æ•°ï¼Œå¦‚<code>2018</code></p>
</blockquote>
</li>
<li><p>TIME</p>
<blockquote>
<p>å½“å‰çš„æ—¶é—´ï¼Œå¦‚<code>20:48</code></p>
</blockquote>
</li>
</ul>
<p><strong>å¼€å‘ç¯å¢ƒç±»ï¼š</strong></p>
<ul>
<li><p>RUNNINGMACOSVERSION</p>
<blockquote>
<p>å½“å‰<code>macOS</code>ç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚</p>
</blockquote>
</li>
<li><p>DEFAULTTOOLCHAINSWIFTVERSION</p>
<blockquote>
<p>å½“å‰å·¥ç¨‹ä½¿ç”¨çš„<code>Swift</code>ç‰ˆæœ¬ã€‚</p>
</blockquote>
</li>
<li><p>FULLUSERNAME</p>
<blockquote>
<p>å½“å‰ç³»ç»Ÿç”¨æˆ·çš„å…¨åã€‚</p>
</blockquote>
</li>
<li><p>USERNAME</p>
<blockquote>
<p>å½“å‰<code>macOS</code>ç”¨æˆ·çš„ç™»å½•åã€‚</p>
</blockquote>
</li>
</ul>
<p><strong>å¼€å‘å·¥ç¨‹é…ç½®ç±»ï¼š</strong></p>
<ul>
<li><p>ORGANIZATIONNAME</p>
<blockquote>
<p>å½“å‰å·¥ç¨‹é…ç½®çš„å…¬å¸åç§°ã€‚</p>
</blockquote>
</li>
<li><p>WORKSPACENAME</p>
<blockquote>
<p>å½“å‰<code>Workspace</code>çš„åç§°ã€‚å¦‚æœ<code>Workspace</code>ä¸­åªæœ‰ä¸€ä¸ª <code>Project</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªå®çš„å€¼ä¾¿æ˜¯å½“å‰æ‰“å¼€çš„<code>Project</code>çš„åç§°ã€‚</p>
</blockquote>
</li>
<li><p>PROJECTNAME</p>
<blockquote>
<p>å½“å‰å·¥ç¨‹çš„åç§°ã€‚</p>
</blockquote>
</li>
<li><p>TARGETNAME</p>
<blockquote>
<p>å½“å‰<code>Target</code>çš„åç§°ã€‚</p>
</blockquote>
</li>
<li><p>PACKAGENAME</p>
<blockquote>
<p>å½“å‰å·¥ç¨‹<code>Scheme</code>æ‰€è®¾ç½®çš„åŒ…åã€‚</p>
</blockquote>
</li>
<li><p>PACKAGENAMEASIDENTIFIER</p>
<blockquote>
<p>æŠŠä¸ç¬¦åˆ<code>Cè¯­è¨€æ ‡è¯†ç¬¦è§„èŒƒ</code>çš„å­—ç¬¦æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ï¼ˆ<code>_</code>ï¼‰åçš„<code>PACKAGENAME</code>ã€‚</p>
</blockquote>
</li>
<li><p>PRODUCTNAME</p>
<blockquote>
<p>å½“å‰å·¥ç¨‹<code>Scheme</code>è®¾ç½®çš„åº”ç”¨åç§°ã€‚</p>
</blockquote>
</li>
<li><p>COPYRIGHT</p>
<blockquote>
<p>å½“å‰å·¥ç¨‹çš„ç‰ˆæƒä¿¡æ¯ï¼Œå¦‚<code>Copyright Â© 2018 YK-Unit. All rights reserved.</code>ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè‹¥å½“å‰Xcodeå·¥ç¨‹æ²¡æœ‰é…ç½®å…¬å¸åï¼Œè¯¥å€¼ä¼šæ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</p>
</blockquote>
</li>
</ul>
<p><strong>æ–‡æœ¬æ–‡ä»¶ä¿¡æ¯ç±»ï¼š</strong></p>
<ul>
<li><p>FILENAME</p>
<blockquote>
<p>å½“å‰æ–‡ä»¶çš„å®Œæ•´åç§°ï¼ŒåŒ…æ‹¬æ‰©å±•åã€‚</p>
</blockquote>
</li>
<li><p>FILEBASENAME</p>
<blockquote>
<p>åˆ é™¤æ‰æ‰©å±•ååçš„<code>FILENAME</code>ï¼Œå¦‚åˆ›å»ºä¸€ä¸ªåä¸º<code>MyObject.m</code>çš„æ–‡ä»¶ï¼Œè¯¥å€¼ä¸º<code>MyObject</code>ã€‚</p>
</blockquote>
</li>
<li><p>FILEBASENAMEASIDENTIFIER</p>
<blockquote>
<p>æŠŠä¸ç¬¦åˆ<code>Cè¯­è¨€æ ‡è¯†ç¬¦è§„èŒƒ</code>çš„å­—ç¬¦æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ï¼ˆ<code>_</code>ï¼‰åçš„<code>FILEBASENAME</code>ï¼Œå¦‚åˆ›å»ºä¸€ä¸ªåä¸º<code>My-Object.m</code>çš„æ–‡ä»¶ï¼Œè¯¥å€¼ä¸º<code>My_Object</code>ã€‚</p>
<p>æ³¨ï¼š<code>Cè¯­è¨€æ ‡è¯†ç¬¦è§„èŒƒ</code>åªå…è®¸ä½¿ç”¨å­—æ¯ï¼ˆ<code>A-Z</code>, <code>a-z</code>ï¼‰å’Œæ•°å­—ï¼ˆ<code>0-9</code>ï¼‰ä»¥åŠä¸‹åˆ’çº¿ï¼ˆ<code>_</code>ï¼‰ï¼Œä½¿ç”¨è¿™ä¸ªå®ä¼šæŠŠå…¶ä»–çš„å­—ç¬¦è‡ªåŠ¨æ›¿æ¢æˆä¸‹åˆ’çº¿ã€‚</p>
</blockquote>
</li>
<li><p>FILEHEADER</p>
<blockquote>
<p>æ¯ä¸ªæ–‡æœ¬æ–‡ä»¶å¤´éƒ¨çš„æ–‡æœ¬ã€‚</p>
<p>æ³¨ï¼šè¯¥æ–‡æœ¬å®å…¶å®æ˜¯ç”±å¤šä¸ªæ–‡æœ¬å®ç»„æˆï¼Œå…¶é¦–å…ˆæ˜¯å±•å¼€ç”Ÿæˆä»¥ä¸‹æ–‡æœ¬ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;  ___FILENAME___</span><br><span class="line">&#x2F;&#x2F;  ___PACKAGENAME___</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F;  Created by ___FULLUSERNAME___ on ___DATE___.</span><br><span class="line">&#x2F;&#x2F;  ___COPYRIGHT___</span><br><span class="line">&#x2F;&#x2F;</span><br></pre></td></tr></table></figure>
<p>ä¹‹åXcodeå†æŠŠä¸Šè¿°çš„å®æ–‡æœ¬å±•å¼€ç”Ÿæˆå¯¹åº”çš„æ–‡æœ¬ï¼Œæœ€åç”Ÿæˆçš„å°±æ˜¯æˆ‘ä»¬æ—¥å¸¸çœ‹åˆ°çš„æ–‡ä»¶å¤´éƒ¨æ³¨é‡Šä¿¡æ¯äº†ã€‚</p>
</blockquote>
</li>
</ul>
<p><strong>å…¶ä»–ï¼š</strong></p>
<ul>
<li><p>NSHUMANREADABLECOPYRIGHTPLIST</p>
<blockquote>
<p><code>macOS app</code>å·¥ç¨‹çš„<code>target</code>ä¸­çš„<code>Info.plist</code> æ–‡ä»¶ä¸­<code>äººç±»å¯è¯»çš„ç‰ˆæƒä¿¡æ¯</code>æ¡ç›®çš„å€¼ï¼Œè¯¥å€¼åŒ…æ‹¬è¿™ä¸ªæ¡ç›®çš„<code>key</code>å’Œ<code>value</code>ä»¥åŠ<code>XML</code>çš„åˆ†éš”ç¬¦ï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;key&gt;NSHumanReadableCopyright&lt;&#x2F;key&gt;</span><br><span class="line">&lt;string&gt;Copyright Â© 2017 Apple, Inc. All rights reserved.&lt;&#x2F;string&gt;</span><br></pre></td></tr></table></figure>



</blockquote>
</li>
<li><p>UUID</p>
<blockquote>
<p>ä½¿ç”¨è¿™ä¸ªå®çš„æ—¶å€™ï¼Œä¼šè¿”å›ä¸€ä¸ªå”¯ä¸€<code>ID</code>ã€‚å…·ä½“åº”ç”¨åœºæ™¯å¾…æ¢ç´¢ã€‚</p>
</blockquote>
</li>
</ul>
<h2 id="å¦‚ä½•ä½¿ç”¨æ–‡æœ¬å®"><a href="#å¦‚ä½•ä½¿ç”¨æ–‡æœ¬å®" class="headerlink" title="å¦‚ä½•ä½¿ç”¨æ–‡æœ¬å®"></a>å¦‚ä½•ä½¿ç”¨æ–‡æœ¬å®</h2><p>ä½¿ç”¨æ–‡æœ¬å®çš„æ–¹å¼å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨æ–‡æœ¬å®ä¹‹å‰å’Œä¹‹åæ·»åŠ ä¸‰æ¡ä¸‹åˆ’çº¿ï¼ˆ<code>_</code>ï¼‰å³å¯ï¼Œå¦‚ä½¿ç”¨<code>FILENAME</code>æ–‡æœ¬å®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">___FILENAME___</span><br></pre></td></tr></table></figure>

<h2 id="å¦‚ä½•æ ¼å¼åŒ–æ–‡æœ¬å®çš„å€¼"><a href="#å¦‚ä½•æ ¼å¼åŒ–æ–‡æœ¬å®çš„å€¼" class="headerlink" title="å¦‚ä½•æ ¼å¼åŒ–æ–‡æœ¬å®çš„å€¼"></a>å¦‚ä½•æ ¼å¼åŒ–æ–‡æœ¬å®çš„å€¼</h2><p>æ–‡æœ¬å®å±•å¼€ç”Ÿæˆçš„å€¼ï¼Œä¸ä¸€å®šç¬¦åˆå¼€å‘è¦æ±‚ï¼Œå¦‚åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œå¼€å‘è€…è¾“å…¥çš„æ–‡ä»¶åå¸¦æœ‰éæ³•çš„å­—ç¬¦ã€‚ä¸ºæ­¤ï¼ŒXcodeé€šè¿‡æä¾›ä¿®é¥°ç¬¦ï¼ˆ<code>modifier</code>ï¼‰æ¥å¯¹æ–‡æœ¬å®çš„å€¼è¿›è¡Œæ ¼å¼åŒ–ã€‚ä½¿ç”¨ä¿®é¥°ç¬¦çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;MACRO&gt;:&lt;modifier&gt;[,&lt;modifier&gt;]â€¦</span><br></pre></td></tr></table></figure>

<p>æ–‡æœ¬å®å’Œä¿®é¥°ç¬¦ä¹‹é—´ç”¨åˆ†å·ï¼ˆ<code>:</code>ï¼‰åˆ†éš”ã€‚å¤šä¸ªä¿®é¥°ç¬¦ä¹‹é—´å¯ä»¥ç”¨é€—å·ï¼ˆ<code>,</code>ï¼‰åˆ†éš”ã€‚</p>
<p>æŠŠæ–‡æœ¬å®å’Œç‰¹å®šçš„ä¿®é¥°ç¬¦ç»“åˆèµ·æ¥åï¼Œå°±å¯ä»¥ä¿®æ”¹æ–‡æœ¬å®çš„æœ€ç»ˆå€¼ï¼Œå¦‚ä¸‹é¢è¿™æ®µå®å¯ä»¥åˆ é™¤æ‰çš„<code>FILENAME</code>çš„æ‰©å±•åä»¥åŠä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆ<code>_</code>ï¼‰æ›¿æ¢æ‰ä¸ç¬¦åˆ<code>Cæ ‡è¯†ç¬¦</code>çš„å­—ç¬¦ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FILENAME:deletingPathExtension,identifier</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™æ—¶å€™çš„<code>FILENAME:deletingPathExtension,identifier</code>ç­‰åŒäº<code>FILEBASENAMEASIDENTIFIER</code></p>
</blockquote>
<p>å½“å‰Xcodeæä¾›çš„ä¿®é¥°ç¬¦æœ‰ï¼š</p>
<ul>
<li><p>identifier</p>
<blockquote>
<p>ç”¨ä¸‹åˆ’çº¿ï¼ˆ<code>_</code>ï¼‰æ›¿æ¢æ‰€æœ‰ä¸ç¬¦åˆ<code>Cè¯­è¨€æ ‡è¯†ç¬¦è§„èŒƒ</code>çš„å­—ç¬¦ã€‚</p>
<p>æ³¨ï¼š<code>Cè¯­è¨€æ ‡è¯†ç¬¦è§„èŒƒ</code>åªå…è®¸ä½¿ç”¨å­—æ¯ï¼ˆ<code>A-Z</code>, <code>a-z</code>ï¼‰å’Œæ•°å­—ï¼ˆ<code>0-9</code>ï¼‰ä»¥åŠä¸‹åˆ’çº¿ï¼ˆ<code>_</code>ï¼‰</p>
</blockquote>
</li>
<li><p>bundleIdentifier</p>
<blockquote>
<p>ç”¨è¿å­—ç¬¦ï¼ˆ<code>-</code>ï¼‰æ›¿æ¢æ‰€æœ‰ä¸ç¬¦åˆ<code>bundleæ ‡è¯†ç¬¦è§„èŒƒ</code>çš„å­—ç¬¦ã€‚</p>
<p>æ³¨ï¼š<code>bundleæ ‡è¯†ç¬¦è§„èŒƒ</code>åªå…è®¸ä½¿ç”¨å­—æ¯ï¼ˆ<code>A-Z</code>, <code>a-z</code>ï¼‰å’Œæ•°å­—ï¼ˆ<code>0-9</code>ï¼‰ä»¥åŠè¿å­—ç¬¦ï¼ˆ<code>-</code>ï¼‰ã€‚</p>
</blockquote>
</li>
<li><p>rfc1034Identifier</p>
<blockquote>
<p>ç”¨è¿å­—ç¬¦ï¼ˆ<code>-</code>ï¼‰æ›¿æ¢æ‰€æœ‰ä¸ç¬¦åˆ<a href="https://www.ietf.org/rfc/rfc1034.txt" target="_blank" rel="noopener external nofollow noreferrer"><code>rfc1034æ ‡è¯†ç¬¦è§„èŒƒ</code></a>çš„å­—ç¬¦</p>
</blockquote>
</li>
<li><p>xml</p>
<blockquote>
<p>å°†ä¸€äº›ç‰¹æ®Šçš„<code>XML</code>å­—ç¬¦ç”¨å…¶è½¬ä¹‰å­—ç¬¦æ›¿æ¢ã€‚å¦‚ï¼Œ<code>&lt;</code>ä¼šè¢« <code>&amp;lt</code> æ›¿æ¢ã€‚</p>
</blockquote>
</li>
<li><p>deletingLastPathComponent</p>
<blockquote>
<p>ä»å±•å¼€çš„å­—ç¬¦ä¸²ä¸­åˆ é™¤æœ€åä¸€ä¸ªè·¯å¾„ç»„ä»¶ (<code>path component</code>)ã€‚</p>
</blockquote>
</li>
<li><p>deletingPathExtension</p>
<blockquote>
<p>ä»å±•å¼€çš„å­—ç¬¦ä¸²ä¸­åˆ é™¤æ‰©å±•åã€‚</p>
</blockquote>
</li>
<li><p>deletingTrailingDot</p>
<blockquote>
<p>åˆ é™¤æ‰€æœ‰å¥å­æœ«å°¾çš„å¥ç‚¹ï¼ˆ<code>.</code>ï¼‰</p>
</blockquote>
</li>
<li><p>lastPathComponent</p>
<blockquote>
<p>ä»…è¿”å›å­—ç¬¦æœ€åä¸€ä¸ªè·¯å¾„ç»„ä»¶ã€‚</p>
</blockquote>
</li>
<li><p>pathExtension</p>
<blockquote>
<p>è¿”å›å­—ç¬¦çš„æ‰©å±•åã€‚</p>
</blockquote>
</li>
</ul>
<p>â€‹    </p>
<h2 id="æ–‡æœ¬å®çš„åº”ç”¨"><a href="#æ–‡æœ¬å®çš„åº”ç”¨" class="headerlink" title="æ–‡æœ¬å®çš„åº”ç”¨"></a>æ–‡æœ¬å®çš„åº”ç”¨</h2><p>ä»Xcode 9.0å¼€å§‹ï¼Œå¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰æ–‡æœ¬å®ï¼ˆè¦†ç›–å·²æœ‰çš„æ–‡æœ¬å®æˆ–è€…æ·»åŠ æ–°çš„æ–‡æœ¬å®ï¼‰ã€‚ä½†æ˜¯ï¼Œå®é™…å¼€å‘ä¸­ï¼Œæ–‡æœ¬å®çš„åº”ç”¨åœºæ™¯å¾ˆå°‘ï¼Œç›®å‰æš‚æ—¶åªå‘ç°äº†2ä¸ªåº”ç”¨åœºæ™¯ï¼ˆè‹¥æœ‰å…¶ä»–åœºæ™¯ï¼Œæ¬¢è¿è¡¥å……ï¼‰ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š</li>
<li>ç»™åˆ›å»ºçš„ç±»éƒ½æ·»åŠ ç»Ÿä¸€å‰ç¼€</li>
</ul>
<p>ä¸‹é¢å°†ä¼šæ¼”ç¤ºå¦‚ä½•å¦‚ä½•å®ç°ä¸Šè¿°åœºæ™¯ã€‚</p>
<p>ä½†æ˜¯ï¼Œ<strong>åœ¨è¿™ä¹‹å‰ï¼Œå¼€å‘è€…éœ€è¦åˆ›å»ºä¸€ä¸ªåä¸º<code>IDETemplateMacros.plist</code>çš„æ–‡ä»¶ï¼Œå¹¶æŠŠæ–‡ä»¶æ”¾ç½®åœ¨ä¸‹é¢æ–‡ä»¶ç›®å½•åˆ—è¡¨ä¸­çš„ä¸€ä¸ª</strong>ï¼š</p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>ä¸åŒä½ç½®å…·æœ‰ä¸åŒçš„å½±å“èŒƒå›´ã€‚</li>
<li><code>IDETemplateMacros.plist</code>æ–‡ä»¶å¯ä»¥æ”¾ç½®åˆ°ä»¥ä¸‹å‡ ä¸ªä½ç½®ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚ä½†æ˜¯å»ºè®®åªæ”¾ç½®åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚</li>
<li>å½“å­˜åœ¨å¤šä¸ª<code>IDETemplateMacros.plist</code>æ–‡ä»¶æ—¶ï¼ŒXcodeåªä¼šä½¿ç”¨æœ€å…ˆæ‰¾åˆ°çš„<code>IDETemplateMacros.plist</code>ã€‚</li>
</ul>
</blockquote>
<ul>
<li><p><code>Project user data</code>ä½ç½®:</p>
<p>  <code>&lt;ProjectName&gt;.xcodeproj/xcuserdata/[username].xcuserdatad/IDETemplateMacros.plist</code></p>
<p>  å½±å“èŒƒå›´ï¼šå¯¹å½“å‰ Project æŒ‡å®šçš„ç”¨æˆ·ï¼ˆusernameï¼‰åˆ›å»ºçš„æ–‡ä»¶æœ‰å½±å“</p>
</li>
<li><p><code>Project shared data</code>ä½ç½®:</p>
<p>  <code>&lt;ProjectName&gt;.xcodeproj/xcshareddata/IDETemplateMacros.plist</code></p>
<p>  å½±å“èŒƒå›´ï¼šå¯¹å½“å‰ Project çš„æ‰€æœ‰æˆå‘˜åˆ›å»ºçš„æ–‡ä»¶æœ‰å½±å“</p>
</li>
<li><p><code>Workspace user data</code>ä½ç½®:</p>
<p>  <code>&lt;WorkspaceName&gt;.xcworkspace/xcuserdata/[username].xcuserdatad/IDETemplateMacros.plist</code></p>
<p>  å½±å“èŒƒå›´ï¼šå¯¹å½“å‰çš„ Workspace ä¸‹çš„æŒ‡å®šçš„ç”¨æˆ·ï¼ˆusernameï¼‰åˆ›å»ºçš„æ–‡ä»¶æœ‰å½±å“</p>
</li>
<li><p><code>Workspace shared data</code>ä½ç½®:</p>
<p>  <code>&lt;WorkspaceName&gt;.xcworkspace/xcshareddata/IDETemplateMacros.plist</code></p>
<p>  å½±å“èŒƒå›´ï¼šå¯¹å½“å‰ Workspace ä¸‹çš„æ‰€æœ‰æˆå‘˜åˆ›å»ºçš„æ–‡ä»¶æœ‰å½±å“</p>
</li>
<li><p><code>User Xcode data</code>ä½ç½®:</p>
<p>  <code>~/Library/Developer/Xcode/UserData/IDETemplateMacros.plist</code></p>
<p>  å½±å“èŒƒå›´ï¼šå¯¹å½“å‰ Xcode åˆ›å»ºçš„æ–‡ä»¶éƒ½æœ‰å½±å“</p>
</li>
</ul>
<h3 id="è‡ªå®šä¹‰æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š"><a href="#è‡ªå®šä¹‰æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š" class="headerlink" title="è‡ªå®šä¹‰æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š"></a>è‡ªå®šä¹‰æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š</h3><p>Xcodeæ–‡ä»¶æ¨¡æ¿ä¸­ï¼Œä½¿ç”¨<code>FILEHEADER</code>æ–‡æœ¬å®æ¥å±•å¼€ç”Ÿæˆå¤´éƒ¨æ³¨é‡Šï¼Œæ‰€ä»¥åªéœ€è¦åœ¨<code>IDETemplateMacros.plist</code>ä¸­é‡å®šä¹‰<code>FILEHEADER</code>å³å¯ã€‚ç¼–è¾‘åçš„<code>IDETemplateMacros.plist</code>å¦‚ä¸‹:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">plist</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="meta-string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>FILEHEADER<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">string</span>&gt;</span></span><br><span class="line">//                         __   _,--="=--,_   __</span><br><span class="line">//                        /  \."    .-.    "./  \</span><br><span class="line">//                       /  ,/  _   : :   _  \/` \</span><br><span class="line">//                       \  `| /o\  :_:  /o\ |\__/</span><br><span class="line">//                        `-'| :="~` _ `~"=: |</span><br><span class="line">//                           \`     (_)     `/</span><br><span class="line">//                    .-"-.   \      |      /   .-"-.</span><br><span class="line">//.------------------&#123;     &#125;--|  /,.-'-.,\  |--&#123;     &#125;-----------------.</span><br><span class="line">// )                 (_)_)_)  \_/`~-===-~`\_/  (_(_(_)                (</span><br><span class="line">//                                                                     </span><br><span class="line">//		File Name:		___FILENAME___</span><br><span class="line">//		Product Name:	___PRODUCTNAME___</span><br><span class="line">//		Author:			___AUTHOR___</span><br><span class="line">//		Swift Version:	___DEFAULTTOOLCHAINSWIFTVERSION___</span><br><span class="line">//		Created Date:	___DATETIME___</span><br><span class="line">//		</span><br><span class="line">//		Copyright Â© ___YEAR___ ___ORGANIZATIONNAME___.</span><br><span class="line">//		All rights reserved.</span><br><span class="line">// )                                                                  (</span><br><span class="line">//'--------------------------------------------------------------------'</span><br><span class="line">	<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>AUTHOR<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">string</span>&gt;</span>___USERNAME___@___ORGANIZATIONNAME___<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>DATETIME<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">string</span>&gt;</span>___DATE___ ___TIME___<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šç¤ºä¾‹ä¸­ä¸æ­¢æ˜¯é‡å®šä¹‰<code>FILEHEADER</code>ï¼Œè¿˜æ–°å¢äº†æ–°çš„æ–‡æœ¬å®<code>AUTHOR</code>å’Œ<code>DATETIME</code>ã€‚</p>
</blockquote>
<p>è¿™æ—¶å€™ä½¿ç”¨Xcodeåˆ›å»ºçš„æ–‡æœ¬æ–‡ä»¶çš„å¤´éƒ¨æ³¨é‡Šå¦‚ä¸‹ï¼š</p>
<p><img src="/2018/Xcode%20%E6%96%87%E6%9C%AC%E5%AE%8F%EF%BC%88Text%20Macros%EF%BC%89%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%BA%94%E7%94%A8/readme/FILEHEADER%E7%A4%BA%E4%BE%8B.png" alt=""></p>
<blockquote>
<p>æ³¨é‡Šä¸­çš„<code>dog</code>å›¾å½¢æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œå­—ç¬¦å½¢çŠ¶å·¥å…·<a href="https://boxes.thomasjensen.com/" target="_blank" rel="noopener external nofollow noreferrer"><code>boxes</code></a>ç”Ÿæˆã€‚</p>
<p><code>boxes</code>æ”¯æŒåˆ›å»ºå„ç§å­—ç¬¦å½¢çŠ¶ï¼Œæœ‰å…´è¶£çš„ç«¥é‹ä¸å¦¨å»æ¢ç´¢ä¸‹ã€‚</p>
</blockquote>
<h3 id="ç»™åˆ›å»ºçš„ç±»éƒ½æ·»åŠ ç»Ÿä¸€å‰ç¼€"><a href="#ç»™åˆ›å»ºçš„ç±»éƒ½æ·»åŠ ç»Ÿä¸€å‰ç¼€" class="headerlink" title="ç»™åˆ›å»ºçš„ç±»éƒ½æ·»åŠ ç»Ÿä¸€å‰ç¼€"></a>ç»™åˆ›å»ºçš„ç±»éƒ½æ·»åŠ ç»Ÿä¸€å‰ç¼€</h3><p>Xcodeæ–‡ä»¶æ¨¡æ¿ä¸­ï¼Œä½¿ç”¨<code>FILEBASENAMEASIDENTIFIER</code>æ–‡æœ¬å®æ¥å±•å¼€ç”Ÿæˆç±»åï¼Œæ‰€ä»¥åªéœ€è¦åœ¨<code>IDETemplateMacros.plist</code>ä¸­é‡å®šä¹‰<code>FILEBASENAMEASIDENTIFIER</code>å³å¯ã€‚ç¼–è¾‘åçš„<code>IDETemplateMacros.plist</code>å¦‚ä¸‹:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">plist</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="meta-string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>FILEBASENAMEASIDENTIFIER<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">string</span>&gt;</span>YK___FILENAME:deletingPathExtension,identifier___<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å€™ä½¿ç”¨Xcodeåˆ›å»ºçš„ä¸€ä¸ªç±»æ—¶ï¼Œç±»çš„å‰ç¼€éƒ½æ˜¯ä»¥<code>YK</code>å¼€å¤´ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2018/Xcode%20%E6%96%87%E6%9C%AC%E5%AE%8F%EF%BC%88Text%20Macros%EF%BC%89%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%BA%94%E7%94%A8/readme/%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6%E7%A4%BA%E4%BE%8B.png" alt=""></p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://help.apple.com/xcode/mac/9.0/index.html" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠXcode Helpã€‹</a></li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>2018</tag>
      </tags>
  </entry>
  <entry>
    <title>iOS WebViewç”Ÿæˆé•¿æˆªå›¾çš„ç¬¬ä¸‰ç§è§£å†³æ–¹æ¡ˆ</title>
    <url>/2018/iOS%20WebView%E7%94%9F%E6%88%90%E9%95%BF%E6%88%AA%E5%9B%BE%E7%9A%84%E7%AC%AC%E4%B8%89%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç”±äºé¡¹ç›®éœ€è¦ï¼Œæ–°è¿‘å®ç°äº†ä¸€ä¸ªé•¿æˆªå›¾åº“ <a href="https://github.com/YK-Unit/SnapshotKit" target="_blank" rel="noopener">SnapshotKit</a>ã€‚å…¶ä¸­ï¼Œéœ€è¦æ”¯æŒ <code>UIWebView</code>ã€<code>WKWebView</code> ç»„ä»¶ç”Ÿæˆé•¿æˆªå›¾ã€‚ä¸ºäº†å®ç°è¿™ä¸ªç‰¹æ€§ï¼ŒæŸ¥é˜…äº†å¾ˆå¤šèµ„æ–™ï¼ŒåŒæ—¶ä¹Ÿåšäº†ä¸åŒçš„æ–°å¥‡æ€è·¯å°è¯•ï¼Œæœ€ç»ˆå®ç°äº†ä¸€ä¸ªæ–°çš„ã€å–å·§çš„æŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<p>ä»¥ä¸‹ä¸»è¦æ€»ç»“äº†åœ¨â€œWebViewç”Ÿæˆé•¿æˆªå›¾â€éœ€æ±‚æ–¹é¢ï¼Œâ€œç½‘ä¸Šå·²æœ‰æ–¹æ¡ˆâ€å’Œâ€œæˆ‘çš„å…¨æ–°æ–¹æ¡ˆâ€çš„å„è‡ªå®ç°è¦ç‚¹å’Œä¼˜ç¼ºç‚¹ã€‚</p>
<a id="more"></a>

<h2 id="WebViewç”Ÿæˆé•¿æˆªå›¾çš„å·²æœ‰æ–¹æ¡ˆ"><a href="#WebViewç”Ÿæˆé•¿æˆªå›¾çš„å·²æœ‰æ–¹æ¡ˆ" class="headerlink" title="WebViewç”Ÿæˆé•¿æˆªå›¾çš„å·²æœ‰æ–¹æ¡ˆ"></a>WebViewç”Ÿæˆé•¿æˆªå›¾çš„å·²æœ‰æ–¹æ¡ˆ</h2><p>æ ¹æ® Google æ‰€æœç´¢åˆ°çš„èµ„æ–™ï¼Œç›®å‰iOS WebViewç”Ÿæˆé•¿æˆªå›¾çš„æ–¹æ¡ˆä¸»è¦æœ‰2ç§ï¼š</p>
<ul>
<li>æ–¹æ¡ˆä¸€ï¼šä¿®æ”¹Frameï¼Œæˆªå›¾ç»„ä»¶</li>
<li>æ–¹æ¡ˆäºŒï¼šåˆ†é¡µæˆªå›¾ç»„ä»¶å†…å®¹ï¼Œåˆæˆé•¿å›¾</li>
</ul>
<p>ä¸‹é¢å°†ä¼šç®€è¿°æ–¹æ¡ˆä¸€å’Œæ–¹æ¡ˆäºŒçš„å…·ä½“å®ç°ã€‚</p>
<h3 id="æ–¹æ¡ˆä¸€ï¼šä¿®æ”¹Frameï¼Œæˆªå›¾ç»„ä»¶"><a href="#æ–¹æ¡ˆä¸€ï¼šä¿®æ”¹Frameï¼Œæˆªå›¾ç»„ä»¶" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šä¿®æ”¹Frameï¼Œæˆªå›¾ç»„ä»¶"></a>æ–¹æ¡ˆä¸€ï¼šä¿®æ”¹Frameï¼Œæˆªå›¾ç»„ä»¶</h3><p>æ–¹æ¡ˆä¸€çš„å®ç°è¦ç‚¹åœ¨äºï¼šä¿®æ”¹ <code>webView.scrollView</code> çš„ <code>frameSize</code>  ä¸º <code>contentSize</code>ï¼Œç„¶åå¯¹æ•´ä¸ª <code>webView.scrollView</code> è¿›è¡Œæˆªå›¾ã€‚</p>
<p>ä¸è¿‡ï¼Œè¿™ä¸ªæ–¹æ¡ˆåªé€‚ç”¨ <code>UIWebView</code> ç»„ä»¶ï¼Œå› ä¸ºå…¶æ˜¯ä¸€æ¬¡æ€§åŠ è½½ç½‘é¡µæ‰€æœ‰çš„å†…å®¹ã€‚è€Œ <code>WKWebView</code> ç»„ä»¶ï¼Œä¸ºäº†èŠ‚çœå†…å­˜ï¼ŒåŠ è½½ç½‘é¡µå†…å®¹æ—¶ï¼ŒåªåŠ è½½å¯è§†éƒ¨åˆ†â€”â€”è¿™ä¸€ç‚¹ç±»ä¼¼ <code>UITableView</code> ç»„ä»¶ã€‚åœ¨ä¿®æ”¹<code>webView.scrollView</code> çš„ <code>frameSize</code> åï¼Œç«‹å³æ‰§è¡Œäº†æˆªå›¾æ“ä½œï¼Œ è¿™æ—¶å€™ï¼Œ<code>WKWebView</code>ç”±äºè¿˜æ²¡æŠŠç½‘é¡µçš„å†…å®¹åŠ è½½å‡ºæ¥ï¼Œå¯¼è‡´ç”Ÿæˆçš„é•¿æˆªå›¾æ˜¯ç©ºç™½çš„ã€‚</p>
<p>æ–¹æ¡ˆä¸€æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIScrollView</span> </span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">takeSnapshotOfFullContent</span><span class="params">()</span></span> -&gt; <span class="type">UIImage?</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> originalFrame = <span class="keyword">self</span>.frame</span><br><span class="line">        <span class="keyword">let</span> originalOffset = <span class="keyword">self</span>.contentOffset</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.frame = <span class="type">CGRect</span>.<span class="keyword">init</span>(origin: originalFrame.origin, size: <span class="keyword">self</span>.contentSize)</span><br><span class="line">        <span class="keyword">self</span>.contentOffset = .zero</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> backgroundColor = <span class="keyword">self</span>.backgroundColor ?? <span class="type">UIColor</span>.white</span><br><span class="line"></span><br><span class="line">        <span class="type">UIGraphicsBeginImageContextWithOptions</span>(<span class="keyword">self</span>.bounds.size, <span class="literal">true</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> context = <span class="type">UIGraphicsGetCurrentContext</span>() <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">        context.setFillColor(backgroundColor.cgColor)</span><br><span class="line">        context.setStrokeColor(backgroundColor.cgColor)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.drawHierarchy(<span class="keyword">in</span>: <span class="keyword">self</span>.bounds, afterScreenUpdates: <span class="literal">true</span>)</span><br><span class="line">        <span class="keyword">let</span> image = <span class="type">UIGraphicsGetImageFromCurrentImageContext</span>()</span><br><span class="line">        <span class="type">UIGraphicsEndImageContext</span>()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.frame = originalFrame</span><br><span class="line">        <span class="keyword">self</span>.contentOffset = originalOffset</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> image</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// example code</span></span><br><span class="line"> <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">takeSnapshotOfUIWebView</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> image = <span class="keyword">self</span>.webView.scrollView.takeSnapshotOfFullContent()</span><br><span class="line">   <span class="comment">// å¤„ç†image</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ–¹æ¡ˆäºŒï¼šåˆ†é¡µæˆªå›¾ç»„ä»¶å†…å®¹ï¼Œåˆæˆé•¿å›¾"><a href="#æ–¹æ¡ˆäºŒï¼šåˆ†é¡µæˆªå›¾ç»„ä»¶å†…å®¹ï¼Œåˆæˆé•¿å›¾" class="headerlink" title="æ–¹æ¡ˆäºŒï¼šåˆ†é¡µæˆªå›¾ç»„ä»¶å†…å®¹ï¼Œåˆæˆé•¿å›¾"></a>æ–¹æ¡ˆäºŒï¼šåˆ†é¡µæˆªå›¾ç»„ä»¶å†…å®¹ï¼Œåˆæˆé•¿å›¾</h3><p>æ–¹æ¡ˆäºŒçš„å®ç°è¦ç‚¹åœ¨äºï¼šåˆ†é¡µæ»šåŠ¨WebViewç»„ä»¶çš„å†…å®¹ï¼Œç„¶åç”Ÿæˆåˆ†é¡µæˆªå›¾ï¼Œæœ€åæŠŠæ‰€æœ‰åˆ†é¡µæˆªå›¾åˆæˆä¸€å¼ é•¿å›¾ã€‚</p>
<p>è¿™ä¸ªæ–¹æ¡ˆé€‚ç”¨äº <code>UIWebView</code> ç»„ä»¶å’Œ <code>WKWebView</code> ç»„ä»¶ã€‚</p>
<p>æ–¹æ¡ˆäºŒæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIScrollView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">takeScreenshotOfFullContent</span><span class="params">(<span class="number">_</span> completion: @escaping <span class="params">(<span class="params">(UIImage?)</span></span></span></span> -&gt; <span class="type">Void</span>)) &#123;</span><br><span class="line">        <span class="comment">// åˆ†é¡µç»˜åˆ¶å†…å®¹åˆ°ImageContext</span></span><br><span class="line">        <span class="keyword">let</span> originalOffset = <span class="keyword">self</span>.contentOffset</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å½“contentSize.height&lt;bounds.heightæ—¶ï¼Œä¿è¯è‡³å°‘æœ‰1é¡µçš„å†…å®¹ç»˜åˆ¶</span></span><br><span class="line">        <span class="keyword">var</span> pageNum = <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.contentSize.height &gt; <span class="keyword">self</span>.bounds.height &#123;</span><br><span class="line">            pageNum = <span class="type">Int</span>(floorf(<span class="type">Float</span>(<span class="keyword">self</span>.contentSize.height / <span class="keyword">self</span>.bounds.height)))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> backgroundColor = <span class="keyword">self</span>.backgroundColor ?? <span class="type">UIColor</span>.white</span><br><span class="line"></span><br><span class="line">        <span class="type">UIGraphicsBeginImageContextWithOptions</span>(<span class="keyword">self</span>.contentSize, <span class="literal">true</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> context = <span class="type">UIGraphicsGetCurrentContext</span>() <span class="keyword">else</span> &#123;</span><br><span class="line">            completion(<span class="literal">nil</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        context.setFillColor(backgroundColor.cgColor)</span><br><span class="line">        context.setStrokeColor(backgroundColor.cgColor)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.drawScreenshotOfPageContent(<span class="number">0</span>, maxIndex: pageNum) &#123;</span><br><span class="line">            <span class="keyword">let</span> image = <span class="type">UIGraphicsGetImageFromCurrentImageContext</span>()</span><br><span class="line">            <span class="type">UIGraphicsEndImageContext</span>()</span><br><span class="line">            <span class="keyword">self</span>.contentOffset = originalOffset</span><br><span class="line">            completion(image)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">drawScreenshotOfPageContent</span><span class="params">(<span class="number">_</span> index: Int, maxIndex: Int, completion: @escaping <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span>.setContentOffset(<span class="type">CGPoint</span>(x: <span class="number">0</span>, y: <span class="type">CGFloat</span>(index) * <span class="keyword">self</span>.frame.size.height), animated: <span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">let</span> pageFrame = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="type">CGFloat</span>(index) * <span class="keyword">self</span>.frame.size.height, width: <span class="keyword">self</span>.bounds.size.width, height: <span class="keyword">self</span>.bounds.size.height)</span><br><span class="line"></span><br><span class="line">        <span class="type">DispatchQueue</span>.main.asyncAfter(deadline: <span class="type">DispatchTime</span>.now() + <span class="number">0.3</span>) &#123;</span><br><span class="line">            <span class="keyword">self</span>.drawHierarchy(<span class="keyword">in</span>: pageFrame, afterScreenUpdates: <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> index &lt; maxIndex &#123;</span><br><span class="line">                <span class="keyword">self</span>.drawScreenshotOfPageContent(index + <span class="number">1</span>, maxIndex: maxIndex, completion: completion)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                completion()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// example code</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">takeSnapshotOfUIWebView</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.uiWebView.scrollView.takeScreenshotOfFullContent &#123; (image) <span class="keyword">in</span></span><br><span class="line">        <span class="comment">// å¤„ç†image</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">takeSnapshotOfWKWebView</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.wkWebView.scrollView.takeScreenshotOfFullContent &#123; (image) <span class="keyword">in</span></span><br><span class="line">        <span class="comment">// å¤„ç†image</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="WebViewç”Ÿæˆé•¿æˆªå›¾çš„æ–°æ–¹æ¡ˆ"><a href="#WebViewç”Ÿæˆé•¿æˆªå›¾çš„æ–°æ–¹æ¡ˆ" class="headerlink" title="WebViewç”Ÿæˆé•¿æˆªå›¾çš„æ–°æ–¹æ¡ˆ"></a>WebViewç”Ÿæˆé•¿æˆªå›¾çš„æ–°æ–¹æ¡ˆ</h2><p>é™¤äº†æ–¹æ¡ˆä¸€å’Œæ–¹æ¡ˆäºŒï¼Œè¿˜æœ‰æ–°æ–¹æ¡ˆå—ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯è‚¯å®šåŠ ç¡®å®šä»¥åŠä¸€å®šçš„ã€‚</p>
<p>è¿™ä¸ªæ–°æ–¹æ¡ˆçš„è¦ç‚¹åœ¨äºï¼šiOSç³»ç»Ÿçš„WebViewæ‰“å°åŠŸèƒ½ã€‚</p>
<p>iOSç³»ç»Ÿæ”¯æŒæŠŠWebViewçš„å†…å®¹æ‰“å°åˆ°PDFæ–‡ä»¶ä¸Šï¼Œå€ŸåŠ©è¿™ä¸ªç‰¹æ€§ï¼Œæ–°æ–¹æ¡ˆçš„è®¾è®¡å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>æŠŠ WebViewç»„ä»¶çš„å†…å®¹å…¨éƒ¨æ‰“å°åˆ°ä¸€é¡µPDFä¸Š</p>
</li>
<li><p>æŠŠPDFè½¬æ¢æˆå›¾ç‰‡</p>
</li>
</ol>
<p>æ–°æ–¹æ¡ˆçš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"><span class="keyword">import</span> WebKit</span><br><span class="line"></span><br><span class="line"><span class="comment">/// WebViewPrintPageRenderer: use to print the full content of webview into one image</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">WebViewPrintPageRenderer</span>: <span class="title">UIPrintPageRenderer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> formatter: <span class="type">UIPrintFormatter</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> contentSize: <span class="type">CGSize</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// ç”ŸæˆPrintPageRendererå®ä¾‹</span></span><br><span class="line">    <span class="comment">///</span></span><br><span class="line">    <span class="comment">/// - Parameters:</span></span><br><span class="line">    <span class="comment">///   - formatter: WebViewçš„viewPrintFormatter</span></span><br><span class="line">    <span class="comment">///   - contentSize: WebViewçš„ContentSize</span></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(formatter: <span class="type">UIPrintFormatter</span>, contentSize: <span class="type">CGSize</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.formatter = formatter</span><br><span class="line">        <span class="keyword">self</span>.contentSize = contentSize</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">        <span class="keyword">self</span>.addPrintFormatter(formatter, startingAtPageAt: <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> paperRect: <span class="type">CGRect</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">CGRect</span>.<span class="keyword">init</span>(origin: .zero, size: contentSize)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> printableRect: <span class="type">CGRect</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">CGRect</span>.<span class="keyword">init</span>(origin: .zero, size: contentSize)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">printContentToPDFPage</span><span class="params">()</span></span> -&gt; <span class="type">CGPDFPage?</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> data = <span class="type">NSMutableData</span>()</span><br><span class="line">        <span class="type">UIGraphicsBeginPDFContextToData</span>(data, <span class="keyword">self</span>.paperRect, <span class="literal">nil</span>)</span><br><span class="line">        <span class="keyword">self</span>.prepare(forDrawingPages: <span class="type">NSMakeRange</span>(<span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">let</span> bounds = <span class="type">UIGraphicsGetPDFContextBounds</span>()</span><br><span class="line">        <span class="type">UIGraphicsBeginPDFPage</span>()</span><br><span class="line">        <span class="keyword">self</span>.drawPage(at: <span class="number">0</span>, <span class="keyword">in</span>: bounds)</span><br><span class="line">        <span class="type">UIGraphicsEndPDFContext</span>()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> cfData = data <span class="keyword">as</span> <span class="type">CFData</span></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> provider = <span class="type">CGDataProvider</span>.<span class="keyword">init</span>(data: cfData) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> pdfDocument = <span class="type">CGPDFDocument</span>.<span class="keyword">init</span>(provider)</span><br><span class="line">        <span class="keyword">let</span> pdfPage = pdfDocument?.page(at: <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> pdfPage</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">covertPDFPageToImage</span><span class="params">(<span class="number">_</span> pdfPage: CGPDFPage)</span></span> -&gt; <span class="type">UIImage?</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> pageRect = pdfPage.getBoxRect(.trimBox)</span><br><span class="line">        <span class="keyword">let</span> contentSize = <span class="type">CGSize</span>.<span class="keyword">init</span>(width: floor(pageRect.size.width), height: floor(pageRect.size.height))</span><br><span class="line"></span><br><span class="line">        <span class="comment">// usually you want UIGraphicsBeginImageContextWithOptions last parameter to be 0.0 as this will us the device's scale</span></span><br><span class="line">        <span class="type">UIGraphicsBeginImageContextWithOptions</span>(contentSize, <span class="literal">true</span>, <span class="number">2.0</span>)</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> context = <span class="type">UIGraphicsGetCurrentContext</span>() <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        context.setFillColor(<span class="type">UIColor</span>.white.cgColor)</span><br><span class="line">        context.setStrokeColor(<span class="type">UIColor</span>.white.cgColor)</span><br><span class="line">        context.fill(pageRect)</span><br><span class="line"></span><br><span class="line">        context.saveGState()</span><br><span class="line">        context.translateBy(x: <span class="number">0</span>, y: contentSize.height)</span><br><span class="line">        context.scaleBy(x: <span class="number">1.0</span>, y: -<span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line">        context.interpolationQuality = .low</span><br><span class="line">        context.setRenderingIntent(.defaultIntent)</span><br><span class="line">        context.drawPDFPage(pdfPage)</span><br><span class="line">        context.restoreGState()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> image = <span class="type">UIGraphicsGetImageFromCurrentImageContext</span>()</span><br><span class="line">        <span class="type">UIGraphicsEndImageContext</span>()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> image</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// print the full content of webview into one image</span></span><br><span class="line">    <span class="comment">///</span></span><br><span class="line">    <span class="comment">/// - Important: if the size of content is very large, then the size of image will be also very large</span></span><br><span class="line">    <span class="comment">/// - Returns: UIImage?</span></span><br><span class="line">    <span class="keyword">internal</span> <span class="function"><span class="keyword">func</span> <span class="title">printContentToImage</span><span class="params">()</span></span> -&gt; <span class="type">UIImage?</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> pdfPage = <span class="keyword">self</span>.printContentToPDFPage() <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> image = <span class="keyword">self</span>.covertPDFPageToImage(pdfPage)</span><br><span class="line">        <span class="keyword">return</span> image</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIWebView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">takeScreenshotOfFullContent</span><span class="params">(<span class="number">_</span> completion: @escaping <span class="params">(<span class="params">(UIImage?)</span></span></span></span> -&gt; <span class="type">Void</span>)) &#123;</span><br><span class="line">        <span class="keyword">self</span>.scrollView.setContentOffset(<span class="type">CGPoint</span>(x: <span class="number">0</span>, y: <span class="number">0</span>), animated: <span class="literal">false</span>)</span><br><span class="line">        <span class="type">DispatchQueue</span>.main.asyncAfter(deadline: <span class="type">DispatchTime</span>.now() + <span class="number">0.3</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> renderer = <span class="type">WebViewPrintPageRenderer</span>.<span class="keyword">init</span>(formatter: <span class="keyword">self</span>.viewPrintFormatter(), contentSize: <span class="keyword">self</span>.scrollView.contentSize)</span><br><span class="line">            <span class="keyword">let</span> image = renderer.printContentToImage()</span><br><span class="line">            completion(image)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">WKWebView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">takeScreenshotOfFullContent</span><span class="params">(<span class="number">_</span> completion: @escaping <span class="params">(<span class="params">(UIImage?)</span></span></span></span> -&gt; <span class="type">Void</span>)) &#123;</span><br><span class="line">        <span class="keyword">self</span>.scrollView.setContentOffset(<span class="type">CGPoint</span>(x: <span class="number">0</span>, y: <span class="number">0</span>), animated: <span class="literal">false</span>)</span><br><span class="line">        <span class="type">DispatchQueue</span>.main.asyncAfter(deadline: <span class="type">DispatchTime</span>.now() + <span class="number">0.3</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> renderer = <span class="type">WebViewPrintPageRenderer</span>.<span class="keyword">init</span>(formatter: <span class="keyword">self</span>.viewPrintFormatter(), contentSize: <span class="keyword">self</span>.scrollView.contentSize)</span><br><span class="line">            <span class="keyword">let</span> image = renderer.printContentToImage()</span><br><span class="line">            completion(image)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>WebViewPrintPageRenderer</code> æ˜¯è¯¥æ–¹æ¡ˆçš„æ ¸å¿ƒç±»ï¼Œè´Ÿè´£æŠŠ <code>WebViewç»„ä»¶</code>å†…å®¹æ‰“å°åˆ°PDFï¼Œç„¶åæŠŠPDFè½¬æ¢ä¸ºå›¾ç‰‡ã€‚</p>
<p><code>UIWebView</code> å’Œ <code>WKWebView</code> åˆ™å®ç°å¯¹åº”çš„æ‰©å±•ã€‚</p>
<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// example code</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">takeSnapshotOfUIWebView</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.uiWebView.scrollView.takeScreenshotOfFullContent &#123; (image) <span class="keyword">in</span></span><br><span class="line">        <span class="comment">// å¤„ç†image</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">takeSnapshotOfWKWebView</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.wkWebView.scrollView.takeScreenshotOfFullContent &#123; (image) <span class="keyword">in</span></span><br><span class="line">        <span class="comment">// å¤„ç†image</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ç§æŠ€æœ¯æ–¹æ¡ˆä¼˜åŠ£å¯¹æ¯”"><a href="#ä¸‰ç§æŠ€æœ¯æ–¹æ¡ˆä¼˜åŠ£å¯¹æ¯”" class="headerlink" title="ä¸‰ç§æŠ€æœ¯æ–¹æ¡ˆä¼˜åŠ£å¯¹æ¯”"></a>ä¸‰ç§æŠ€æœ¯æ–¹æ¡ˆä¼˜åŠ£å¯¹æ¯”</h2><p>é‚£ä¹ˆï¼Œè¿™ä¸‰ç§æŠ€æœ¯æ–¹æ¡ˆå„è‡ªå­˜åœ¨ä»€ä¹ˆä¼˜ç¼ºç‚¹å‘¢ï¼Œé€‚ç”¨ä»€ä¹ˆåœºæ™¯å‘¢ï¼Ÿ</p>
<ul>
<li>æ–¹æ¡ˆä¸€ï¼šåªé€‚ç”¨ <code>UIWebView</code>ï¼›è‹¥ç½‘é¡µå†…å®¹å¾ˆå¤šï¼Œç”Ÿæˆé•¿æˆªå›¾æ—¶ï¼Œä¼šå ç”¨è¿‡å¤šå†…å­˜ã€‚ æ‰€ä»¥ï¼Œè¯¥æ–¹æ¡ˆåªé€‚åˆä¸éœ€è¦æ”¯æŒ <code>WKWebView</code>ï¼Œ ä¸”ç½‘é¡µå†…å®¹ä¸ä¼šå¤ªå¤šçš„åœºæ™¯ã€‚</li>
<li>æ–¹æ¡ˆäºŒï¼šé€‚ç”¨ <code>UIWebView</code> å’Œ <code>WKWebView</code>ï¼Œä¸”ç‰¹åˆ«é€‚åˆ <code>WKWebView</code>ã€‚ç”±äºé‡‡ç”¨åˆ†é¡µç”Ÿæˆæˆªå›¾æœºåˆ¶ï¼Œæœ‰æ•ˆå‡å°‘å†…å­˜å ç”¨ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªæ–¹æ¡ˆå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šè‹¥ç½‘é¡µå­˜åœ¨ <code>position: fixed</code> çš„å…ƒç´ ï¼ˆå¦‚ç½‘é¡µå¤´éƒ¨å›ºå®šçš„å¯¼èˆªæ ï¼‰ï¼Œè¯¥å…ƒç´ ä¼šé‡å¤å‡ºç°åœ¨ç”Ÿæˆçš„é•¿å›¾ä¸Šã€‚</li>
<li>æ–¹æ¡ˆä¸‰ï¼šé€‚ç”¨ <code>UIWebView</code> å’Œ <code>WKWebView</code>ã€‚å…¶ä¸­æœ€é‡è¦çš„ä¸€æ­¥â€”â€”â€œæŠŠWebViewå†…å®¹æ‰“å°åˆ°PDFâ€ æ˜¯ç”±iOSç³»ç»Ÿå®ç°ï¼Œæ‰€ä»¥è¯¥æ–¹æ¡ˆçš„æ€§èƒ½åœ¨ç†è®ºä¸Šæ˜¯å¯ä»¥å¾—åˆ°ä¿éšœçš„ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªæ–¹æ¡ˆå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šåœ¨æŠŠç½‘é¡µå†…å®¹æ‰“å°åˆ°PDFæ—¶ï¼ŒiOSç³»ç»Ÿè·å–çš„ <code>contentSize</code> æ¯”WebViewçš„å®é™…<code>contentSize</code> è¦å¤§ï¼Œä»è€Œå¯¼è‡´ç”Ÿæˆçš„å›¾ç‰‡åœ¨é è¿‘åº•éƒ¨çš„å†…å®¹éƒ¨åˆ†å’Œå®é™…å­˜åœ¨ä¸€ç‚¹å·®å¼‚ã€‚å…·ä½“å¯ä»¥ä¸‹è½½è¿è¡Œæˆ‘çš„é•¿æˆªå›¾åº“ <a href="https://github.com/YK-Unit/SnapshotKit" target="_blank" rel="noopener">SnapshotKit</a> çš„ Demoï¼Œé€šè¿‡å…¶ä¸­çš„ <code>UIWebView</code> å’Œ <code>WKWebView</code> æˆªå›¾ç¤ºä¾‹æŸ¥çœ‹å…·ä½“æˆªå›¾æ•ˆæœã€‚</li>
</ul>
<p>ä»¥ä¸Šä¸‰ä¸ªæ–¹æ¡ˆï¼Œæ€»çš„æ¥è¯´ï¼Œè§£å†³äº†éƒ¨åˆ†åœºæ™¯çš„éœ€æ±‚ï¼Œä½†éƒ½ä¸å¤Ÿå®Œç¾ï¼Œä»éœ€åšè¿›ä¸€æ­¥çš„ä¼˜åŒ–ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>2018</tag>
      </tags>
  </entry>
  <entry>
    <title>Flutterï¼šç½‘æ˜“æ™ºé€ APPçš„JSONå’Œæ¨¡å‹ç±»ç›¸äº’è½¬æ¢æ–¹æ¡ˆ</title>
    <url>/2019/Flutter%EF%BC%9A%E7%BD%91%E6%98%93%E6%99%BA%E9%80%A0APP%E7%9A%84JSON%E5%92%8C%E6%A8%A1%E5%9E%8B%E7%B1%BB%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2%E6%96%B9%E6%A1%88/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸ºå‡å°‘æ‰‹å†™å®ç°JSONå’Œæ¨¡å‹ç±»ç›¸äº’è½¬æ¢çš„åºåˆ—åŒ–ã€ååºåˆ—åŒ–ä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å®˜æ–¹æ¨èçš„<a href="https://github.com/dart-lang/json_serializable" target="_blank" rel="noopener">json_serializable</a>æ–¹æ¡ˆã€‚</p>
<p>åŒæ—¶ä¸ºäº†è§£å†³<code>json_serializable</code>æ–¹æ¡ˆéœ€è¦æ‰‹åŠ¨å†™ä¸ºæ¨¡å‹ç±»å†™<code>from/to json</code>çš„ä»£ç çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä»£ç ç‰‡æ®µçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ä¸‹é¢å°†ä¼šå¯¹è¯¥æ–¹æ¡ˆè¿›è¡Œå…·ä½“æè¿°ã€‚</p>
<blockquote>
<ul>
<li>è¯¥æ–¹æ¡ˆåŒæ—¶é€‚ç”¨äºVSCodeå’ŒAndroid Studioï¼›</li>
<li>ä¸‹æ–‡åœ¨æè¿°è¯¥æ–¹æ¡ˆæ—¶ï¼Œåªä»‹ç»äº†VSCodeç«¯çš„å®æ–½æ­¥éª¤ï¼›</li>
<li>åœ¨Android Studioè½åœ°è¯¥æ–¹æ¡ˆæ—¶ï¼Œåªéœ€è¦æŠŠæ¶‰åŠVSCodeç«¯çš„å®æ–½å¯¹ç­‰è½¬æ¢ä¸ºAndroid Studioç«¯çš„å®æ–½å³å¯ï¼šæ¯”å¦‚â€œä¸ºVSCodeæ·»åŠ ä»£ç ç‰‡æ®µâ€è½¬æ¢ä¸ºâ€œä¸ºAndroid Studioæ·»åŠ ä»£ç ç‰‡æ®µâ€ã€‚</li>
</ul>
</blockquote>
<a id="more"></a>

<h2 id="ä¸€ã€-ä¸ºVSCodeæ·»åŠ ä»£ç ç‰‡æ®µ"><a href="#ä¸€ã€-ä¸ºVSCodeæ·»åŠ ä»£ç ç‰‡æ®µ" class="headerlink" title="ä¸€ã€ ä¸ºVSCodeæ·»åŠ ä»£ç ç‰‡æ®µ"></a>ä¸€ã€ ä¸ºVSCodeæ·»åŠ ä»£ç ç‰‡æ®µ</h2><p>è¯·æŒ‰ç…§ä»¥ä¸‹é¡ºåºä¸ºVSCodeåˆ›å»ºä»£ç æ¨¡æ¿<code>dart_model_class.code-snippets</code>:</p>
<ol>
<li><p>æ‰“å¼€ File -&gt; Preferences -&gt; User Snippets ( åœ¨macOSä¸Š Code -&gt; Preferences -&gt; User Snippets)</p>
</li>
<li><p>é€‰æ‹© New Global Snippets file é€‰é¡¹ï¼Œç‚¹å‡»é€‰æ‹©</p>
</li>
<li><p>åœ¨å¼¹çª—æ¡†å†…è¾“å…¥<code>dart_model_class.code-snippets</code>ï¼Œç„¶åä¿å­˜</p>
</li>
<li><p>åœ¨ä»£ç ç¼–è¾‘æ é‡Œç¼–è¾‘åˆšæ‰åˆ›å»ºçš„<code>dart_model_class.code-snippets</code>æ–‡ä»¶ï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
 <figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"dmc import"</span>: &#123;</span><br><span class="line">    <span class="attr">"prefix"</span>: <span class="string">"dmc import"</span>,</span><br><span class="line">    <span class="attr">"description"</span>: <span class="string">"add the imports for dart model class"</span>,</span><br><span class="line">    <span class="attr">"body"</span>: [</span><br><span class="line">      <span class="string">""</span>,</span><br><span class="line">      <span class="string">"import 'package:json_annotation/json_annotation.dart';"</span>,</span><br><span class="line">      <span class="string">"part '$&#123;1:$TM_FILENAME_BASE&#125;.g.dart';"</span>,</span><br><span class="line">      <span class="string">""</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"from/to json"</span>: &#123;</span><br><span class="line">    <span class="attr">"prefix"</span>: <span class="string">"dmc class"</span>,</span><br><span class="line">    <span class="attr">"description"</span>: <span class="string">"generate the dart model class template code"</span>,</span><br><span class="line">    <span class="attr">"body"</span>: [</span><br><span class="line">      <span class="string">"@JsonSerializable()"</span>,</span><br><span class="line">	  <span class="string">"class $&#123;1:ClassName&#125; &#123;"</span>,</span><br><span class="line">	  <span class="string">""</span>,</span><br><span class="line">	  <span class="string">"    // deserialize json to an instance"</span>,</span><br><span class="line">	  <span class="string">"    factory $&#123;1:ClassName&#125;.fromJson(Map&lt;String, dynamic&gt; json) =&gt; _$$&#123;1:ClassName&#125;FromJson(json);"</span>,</span><br><span class="line">	  <span class="string">"    // serialize an instance to a map"</span>,</span><br><span class="line">	  <span class="string">"    Map&lt;String, dynamic&gt; toJson() =&gt; _$$&#123;1:ClassName&#125;ToJson(this);"</span>,</span><br><span class="line">	  <span class="string">""</span>,</span><br><span class="line">	  <span class="string">"    // TODO: add a member for your class"</span>,</span><br><span class="line">	  <span class="string">""</span>,</span><br><span class="line">	  <span class="string">"&#125;"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ol>
<h2 id="äºŒã€ä¸ºFlutteré¡¹ç›®æ·»åŠ ä¾èµ–"><a href="#äºŒã€ä¸ºFlutteré¡¹ç›®æ·»åŠ ä¾èµ–" class="headerlink" title="äºŒã€ä¸ºFlutteré¡¹ç›®æ·»åŠ ä¾èµ–"></a>äºŒã€ä¸ºFlutteré¡¹ç›®æ·»åŠ ä¾èµ–</h2><p>åœ¨pubspec.yamlä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="comment"># Your other regular dependencies here</span></span><br><span class="line">  <span class="attr">json_annotation:</span> <span class="string">^3.0.0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dev_dependencies:</span></span><br><span class="line">  <span class="comment"># Your other dev_dependencies here</span></span><br><span class="line">  <span class="attr">build_runner:</span> <span class="string">^1.0.0</span></span><br><span class="line">  <span class="attr">json_serializable:</span> <span class="string">^3.2.0</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€ä½¿ç”¨ä»£ç ç‰‡æ®µåˆ›å»ºæ¨¡å‹ç±»"><a href="#ä¸‰ã€ä½¿ç”¨ä»£ç ç‰‡æ®µåˆ›å»ºæ¨¡å‹ç±»" class="headerlink" title="ä¸‰ã€ä½¿ç”¨ä»£ç ç‰‡æ®µåˆ›å»ºæ¨¡å‹ç±»"></a>ä¸‰ã€ä½¿ç”¨ä»£ç ç‰‡æ®µåˆ›å»ºæ¨¡å‹ç±»</h2><ol>
<li><p>é€šè¿‡ä»£ç ç‰‡æ®µ<code>dmc import</code>æ·»åŠ ä¾èµ–ï¼š</p>
 <figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// <span class="markdown">FileName: item.dart</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:json_annotation/json_annotation.dart'</span>;</span><br><span class="line"><span class="keyword">part</span> <span class="string">'item.g.dart'</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>é€šè¿‡ä»£ç ç‰‡æ®µ<code>dmc class</code>æ·»åŠ æ¨¡æ¿æ¨¡å‹ç±»ï¼š</p>
 <figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="meta">@JsonSerializable</span>()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassName</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// deserialize json to an instance</span></span><br><span class="line">   <span class="keyword">factory</span> ClassName.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; json) =&gt; _$ClassNameFromJson(json);</span><br><span class="line">   <span class="comment">// serialize an instance to a map</span></span><br><span class="line">   <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; toJson() =&gt; _$ClassNameToJson(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// <span class="doctag">TODO:</span> add your member</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–è¾‘æ¨¡æ¿ç±»ï¼ŒæŠŠ<code>ClassName</code>ä¿®æ”¹ä½ çš„æ¨¡å‹ç±»åç§°ï¼Œå¹¶æ ¹æ®JSONæ·»åŠ å¯¹åº”æˆå‘˜ï¼Œæœ€åå¦‚ä¸‹ï¼š</p>
 <figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">   <span class="comment">/// <span class="markdown">FileName: item.dart</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:json_annotation/json_annotation.dart'</span>;</span><br><span class="line"><span class="keyword">part</span> <span class="string">'item.g.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@JsonSerializable</span>()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// deserialize json to an instance</span></span><br><span class="line">   <span class="keyword">factory</span> Item.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; json) =&gt; _$ItemFromJson(json);</span><br><span class="line">   <span class="comment">// serialize an instance to a map</span></span><br><span class="line">   <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; toJson() =&gt; _$ItemToJson(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// <span class="doctag">TODO:</span> add a member for your class</span></span><br><span class="line">    <span class="built_in">int</span> cout;</span><br><span class="line"></span><br><span class="line">    Item();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>å®Œæ•´æ•ˆæœå¯çœ‹æ­¤åŠ¨å›¾ï¼š</p>
<p><img src="/2019/Flutter%EF%BC%9A%E7%BD%91%E6%98%93%E6%99%BA%E9%80%A0APP%E7%9A%84JSON%E5%92%8C%E6%A8%A1%E5%9E%8B%E7%B1%BB%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2%E6%96%B9%E6%A1%88/readme/code-snippets-example.gif" alt="image"></p>
<h2 id="å››ã€è¿è¡Œbuild-runnerä¸ºæ‰€æœ‰æ¨¡å‹ç±»ç”Ÿæˆå¯¹åº”çš„JSONè§£æç±»"><a href="#å››ã€è¿è¡Œbuild-runnerä¸ºæ‰€æœ‰æ¨¡å‹ç±»ç”Ÿæˆå¯¹åº”çš„JSONè§£æç±»" class="headerlink" title="å››ã€è¿è¡Œbuild_runnerä¸ºæ‰€æœ‰æ¨¡å‹ç±»ç”Ÿæˆå¯¹åº”çš„JSONè§£æç±»"></a>å››ã€è¿è¡Œ<code>build_runner</code>ä¸ºæ‰€æœ‰æ¨¡å‹ç±»ç”Ÿæˆå¯¹åº”çš„JSONè§£æç±»</h2><p>åœ¨Flutteræ ¹ç›®å½•ä¸‹è¿è¡Œ<code>flutter packages pub run build_runner build</code>ï¼Œä¸ºå½“å‰å·¥ç¨‹ä¸­æ‰€æœ‰æ‰€æœ‰æ¨¡å‹ç±»ç”Ÿæˆå¯¹åº”çš„JSONè§£æç±»ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2019</tag>
        <tag>å¤§å‰ç«¯&quot;</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title>FPæ¢ç´¢</title>
    <url>/2020/FP%E6%8E%A2%E7%B4%A2/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬æ–‡ä¸»è¦æ˜¯å¯¹è®¡ç®—æœºç§‘å­¦é¢†åŸŸä¸­çš„å‡½æ•°å¼ç¼–ç¨‹ï¼ˆè‹±è¯­ï¼šFunctional Programmingï¼‰èŒƒå¼çš„ç†è®ºã€ç‰¹æ€§åŠç‰¹æ€§çš„å®ç°æ–¹æ¡ˆè¿›è¡Œæ¢ç´¢ã€‚</p>
<a id="more"></a>

<h2 id="å¦‚ä½•å®ç°-Fist-Class-Function"><a href="#å¦‚ä½•å®ç°-Fist-Class-Function" class="headerlink" title="å¦‚ä½•å®ç° Fist-Class Function"></a>å¦‚ä½•å®ç° Fist-Class Function</h2><p>å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<code>Fist-Class Function</code>ï¼Œå³å‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘ï¼Œå¯ä»¥ä½œä¸ºåˆ«çš„å‡½æ•°çš„å‚æ•°ã€å‡½æ•°çš„è¿”å›å€¼ï¼Œèµ‹å€¼ç»™å˜é‡æˆ–å­˜å‚¨åœ¨æ•°æ®ç»“æ„ä¸­ã€‚</p>
<p>å®ç°<code>Fist-Class Function</code>çš„æ–¹æ¡ˆä¸»è¦æœ‰3ç§ï¼š</p>
<ul>
<li><p>æŒ‡é’ˆï¼ˆPointerï¼‰</p>
<ul>
<li><p>å®ç°ï¼šä½¿ç”¨å‡½æ•°æŒ‡é’ˆä»£æ›¿å‡½æ•°è¿›è¡Œä¸€ç­‰å…¬æ°‘çš„ç›¸å…³æ“ä½œï¼ˆå…¥å‚ã€èµ‹å€¼ç­‰ï¼‰ã€‚</p>
</li>
<li><p>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ã€‚</p>
</li>
<li><p>ç¼ºç‚¹ï¼šåªé€‚åˆæ”¯æŒæŒ‡é’ˆçš„ç¼–ç¨‹è¯­è¨€ï¼›å‡½æ•°éœ€è¦æå‰å®šä¹‰ä¸”æ— æ³•ç›´æ¥è®¿é—®å‡½æ•°å¤–éƒ¨ç¯å¢ƒï¼ˆæŒ‡é’ˆå˜é‡å®šä¹‰å¤„çš„ç¯å¢ƒï¼‰çš„å±€éƒ¨å˜é‡ã€‚</p>
</li>
</ul>
</li>
<li><p>å‡½æ•°å¯¹è±¡ï¼ˆFunction Objectï¼‰</p>
<ul>
<li><p>å®ç°ï¼šä½¿ç”¨å¯¹è±¡æ¨¡æ‹Ÿå‡½æ•°ï¼Œç„¶åä½¿ç”¨å¯¹è±¡ä»£æ›¿å‡½æ•°è¿›è¡Œä¸€ç­‰å…¬æ°‘çš„ç›¸å…³æ“ä½œï¼ˆå…¥å‚ã€èµ‹å€¼ç­‰ï¼‰ã€‚</p>
</li>
<li><p>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼›å¯æºå¸¦çŠ¶æ€ã€‚</p>
</li>
<li><p>ç¼ºç‚¹ï¼šå‡½æ•°éœ€è¦æå‰å®šä¹‰ä¸”æ— æ³•ç›´æ¥è®¿é—®å‡½æ•°å¤–éƒ¨ç¯å¢ƒï¼ˆå‡½æ•°å¯¹è±¡å˜é‡å®šä¹‰å¤„çš„ç¯å¢ƒï¼‰çš„å±€éƒ¨å˜é‡ï¼ˆå¯¹äºä¸æ”¯æŒåŒ¿åç±»æ–¹å¼çš„ç¼–ç¨‹è¯­è¨€ï¼‰ï¼›ä»£ç å½¢å¼ä¸Šå’Œå‡½æ•°å®šä¹‰ç›¸å·®è¾ƒå¤šã€‚</p>
</li>
</ul>
</li>
<li><p>é—­åŒ…ï¼ˆClosureï¼‰</p>
<ul>
<li><p>å®ç°ï¼šæ„é€ ä¸€ä¸ªåä¸ºé—­åŒ…çš„æ•°æ®ç»“æ„å®ä½“å­˜å‚¨å‡½æ•°çš„æŒ‡é’ˆå’Œå‡½æ•°ä¾èµ–çš„ç¯å¢ƒï¼ˆç¯å¢ƒçš„ä½œç”¨æ˜¯ä¸ºå‡½æ•°ä¸­çš„è‡ªç”±å˜é‡æä¾›ç»‘å®šä¿¡æ¯ï¼‰ï¼Œç„¶åä½¿ç”¨é—­åŒ…ä»£æ›¿å‡½æ•°è¿›è¡Œä¸€ç­‰å…¬æ°‘çš„ç›¸å…³æ“ä½œï¼ˆå…¥å‚ã€èµ‹å€¼ç­‰ï¼‰ã€‚</p>
</li>
<li><p>ä¼˜ç‚¹ï¼šå‡½æ•°å¯ä»¥åœ¨ä½¿ç”¨æ—¶æ‰å®šä¹‰ï¼›å‡½æ•°å¯ç›´æ¥è®¿é—®å‡½æ•°å¤–éƒ¨ç¯å¢ƒï¼ˆé—­åŒ…å®šä¹‰å¤„çš„ç¯å¢ƒï¼‰çš„å±€éƒ¨å˜é‡ï¼›ä»£ç å½¢å¼ä¸Šå’Œå‡½æ•°å®šä¹‰ç›¸è¿‘ï¼›é—­åŒ…ç”±ç¼–è¯‘å™¨åœ¨è¯æ³•åˆ†æé˜¶æ®µè‡ªåŠ¨æ„é€ ç”Ÿæˆï¼ˆæŒ‡é’ˆå’Œå‡½æ•°å¯¹è±¡éœ€è¦æ‰‹åŠ¨æ„é€ ï¼‰</p>
</li>
<li><p>ç¼ºç‚¹ï¼šå®ç°ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦ç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘å™¨åœ¨è¯æ³•é—­åŒ…è§£æçš„æ“ä½œä¸Šå¢åŠ ä¸ºé—­åŒ…å¢åŠ â€œæ•è·â€å˜é‡çš„ç‰¹æ€§ã€‚</p>
</li>
</ul>
</li>
</ul>
<h2 id="å®ç°æ–¹æ¡ˆä¹‹å‡½æ•°å¯¹è±¡ï¼ˆFunction-Objectï¼‰"><a href="#å®ç°æ–¹æ¡ˆä¹‹å‡½æ•°å¯¹è±¡ï¼ˆFunction-Objectï¼‰" class="headerlink" title="å®ç°æ–¹æ¡ˆä¹‹å‡½æ•°å¯¹è±¡ï¼ˆFunction Objectï¼‰"></a>å®ç°æ–¹æ¡ˆä¹‹å‡½æ•°å¯¹è±¡ï¼ˆFunction Objectï¼‰</h2><p>å‡½æ•°å¯¹è±¡çš„è®¾è®¡æ€æƒ³æ˜¯ï¼šæ„é€ ä¸€ä¸ªå…·å¤‡å‡½æ•°ç‰¹å¾çš„å¯¹è±¡ä»£æ›¿æ™®é€šå‡½æ•°ï¼Œç„¶ååƒè°ƒç”¨æ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨å¯¹è±¡ã€‚</p>
<p>è€Œä¸Šè¿°ä¸­æ‰€è°“â€œå‡½æ•°ç‰¹å¾â€ï¼Œå…¶å®šä¹‰å’Œå®ç°ç”±å…·ä½“ç”±è¯­è¨€è®¾è®¡è€…ç¡®å®šï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¯¥ç‰¹å¾è¡¨ç°ä¸ºï¼šï¼ˆåŸºäºç±»çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼‰å¯¹è±¡éœ€è¦å®ç°æˆ–è€…<code>override</code>æŒ‡å®šçš„æ–¹æ³•ã€‚</p>
<p>æ¯”å¦‚ï¼Œåœ¨C++ ä¸­ï¼Œå‡½æ•°å¯¹è±¡ç”±<code>override</code>äº†è¿ç®—ç¬¦æ–¹æ³•<code>operator()</code>çš„ç±»è¡¨ç¤ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;     // std::cout</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;    // std::sort</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;       // std::vector</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;     // std::ostream_iterator</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// comparator predicate: returns true if a &lt; b, false otherwise</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">IntComparator</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> &amp;a, <span class="keyword">const</span> <span class="keyword">int</span> &amp;b)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a &lt; b;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; items &#123; <span class="number">4</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span> &#125;;</span><br><span class="line">    <span class="built_in">std</span>::sort(items.<span class="built_in">begin</span>(), items.<span class="built_in">end</span>(), IntComparator());</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::copy(items.<span class="built_in">begin</span>(), items.<span class="built_in">end</span>(), <span class="built_in">std</span>::ostream_iterator&lt;<span class="keyword">int</span>&gt;(<span class="built_in">std</span>::<span class="built_in">cout</span>, <span class="string">" "</span>)); <span class="comment">// -&gt; 1 2 3 4</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆæ¯”å¦‚ï¼Œåœ¨Java ä¸­ï¼Œå‡½æ•°å¯¹è±¡ç”±åªæœ‰ä¸€ä¸ªæ–¹æ³•çš„æ¥å£ï¼ˆæ¯”å¦‚æœ€å¸¸è§çš„<code>Comparator Interface</code>ã€<code>Callable Interface</code>å’Œ<code>Runnable Interface</code>ç­‰ï¼‰è¡¨ç¤ºï¼Œè¯¥æ¥å£åœ¨å®ç°ä¸Šå¤šè¡¨ç°ä¸ºåŒ¿åç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Integer[] array = &#123;<span class="number">4</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>&#125;;</span><br><span class="line">    Comparator&lt;Integer&gt; numComparator = <span class="keyword">new</span> Comparator&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer num1, Integer num2)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> num1.compareTo(num2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Arrays.sort(array, numComparator);</span><br><span class="line">    </span><br><span class="line">    System.out.println(Arrays.toString(array)); <span class="comment">// -&gt; [1, 2, 3, 4]</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Function_object" target="_blank" rel="noopener external nofollow noreferrer">WiKi-ã€ŠFunction objectã€‹</a></li>
</ul>
<h2 id="å®ç°æ–¹æ¡ˆä¹‹é—­åŒ…ï¼ˆClosureï¼‰"><a href="#å®ç°æ–¹æ¡ˆä¹‹é—­åŒ…ï¼ˆClosureï¼‰" class="headerlink" title="å®ç°æ–¹æ¡ˆä¹‹é—­åŒ…ï¼ˆClosureï¼‰"></a>å®ç°æ–¹æ¡ˆä¹‹é—­åŒ…ï¼ˆClosureï¼‰</h2><blockquote>
<p>ä¸‹é¢å¯¹é—­åŒ…çš„æè¿°æŠ›å¼€äº†é—­åŒ…çš„å‘å±•å†å²å’Œé—­åŒ…åœ¨æ•°å­¦é¢†åŸŸçš„æ¦‚å¿µï¼Œä»…ä»…æ˜¯ä»è®¡ç®—æœºç§‘å­¦çš„å·¥ç¨‹è§’åº¦è¿›è¡Œæè¿°ã€‚</p>
</blockquote>
<p>å‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘ï¼Œè¦åƒæ•´æ•°ã€å­—ç¬¦ä¸²è¿™äº›æ™®é€šæ•°æ®ä¸€æ ·åœ¨ä½¿ç”¨æ—¶æ‰è¿›è¡Œå®šä¹‰ï¼Œå°±å¿…é¡»è¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼šè‡ªç”±å˜é‡çš„ç»‘å®šçš„é—®é¢˜ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªå‡½æ•°åˆ›å»ºåï¼Œå…¶ä½¿ç”¨äº†ä¸€ä¸ªå®šä¹‰åœ¨å‡½æ•°ä½“å¤–çš„å˜é‡ï¼ˆå³è‡ªç”±å˜é‡ï¼‰ï¼Œå½“è¯¥å‡½æ•°è„±ç¦»å½“å‰ç¯å¢ƒåï¼Œä¼ é€’åˆ°å¦ä¸€ä¸ªç¯å¢ƒè¿è¡Œæ—¶ï¼Œè¯¥å¦‚ä½•è·å¾—è¿™ä¸ªè‡ªç”±å˜é‡å…³è”çš„æ•°æ®ï¼Ÿ</p>
<blockquote>
<p>è‡ªç”±å˜é‡æ˜¯æŒ‡ï¼šå‡½æ•°ä½“ä¸­çš„é™¤äº†å‚æ•°å’Œå±€éƒ¨å˜é‡ä¹‹å¤–çš„å˜é‡ï¼›ç®€å•è¯´å°±æ˜¯å®šä¹‰åœ¨å‡½æ•°ä½“å¤–çš„å˜é‡ã€‚</p>
<p>ç»‘å®šæ˜¯æŒ‡ï¼šæŠŠæ ‡è¯†ç¬¦ä¸å®ä½“ï¼ˆæ•°æ®å’Œ/æˆ–ä»£ç ï¼‰å…³è”èµ·æ¥ã€‚</p>
<p>è‡ªç”±å˜é‡çš„ç»‘å®šæ˜¯æŒ‡ï¼šæŠŠä»£è¡¨è‡ªç”±å˜é‡çš„æ ‡è¯†ç¬¦å’Œæ•°æ®å…³è”èµ·æ¥ï¼Œç®€å•ç†è§£å°±æ˜¯ç»™è‡ªç”±å˜é‡æŒ‡å®šå€¼</p>
</blockquote>
<p>ä¸‹é¢å°†é€šè¿‡ä¸€ä¸ªç®€åŒ–çš„åœºæ™¯ä¾‹å­å¯¹è¯¥é—®é¢˜è¿›è¡Œè¯¦ç»†è¯´æ˜ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; å‡è®¾å­˜åœ¨ä¸€ä¸ªæ”¯æŒè¿è¡Œä¸‹åˆ—çš„ä¼ªä»£ç çš„è®¡ç®—ç³»ç»Ÿ</span><br><span class="line">&#x2F;&#x2F; å‡è®¾å½“å‰è®¡ç®—ç³»ç»Ÿæ”¯æŒç›´æ¥ä¼ é€’å‡½æ•°ä¼ é€’åˆ°ä¸åŒä½œç”¨åŸŸ</span><br><span class="line">&#x2F;&#x2F; å‡è®¾å½“å‰è®¡ç®—ç³»ç»Ÿå­˜åœ¨æœ‰2ä¸ªä½œç”¨åŸŸï¼šSCOPE-1 å’Œ SCOPE-2</span><br><span class="line"></span><br><span class="line">+--------------------+   </span><br><span class="line">| &#x2F;&#x2F; SCOPE-1         |  </span><br><span class="line">|                    |</span><br><span class="line">| y &#x3D; 1;             |</span><br><span class="line">| f(x) &#123;             |</span><br><span class="line">|   retrun x + y;    |</span><br><span class="line">| &#125;;                 |</span><br><span class="line">|                    |</span><br><span class="line">| f(1); &#x2F;&#x2F; -&gt; 2      |</span><br><span class="line">+--------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+--------------------+   </span><br><span class="line">| &#x2F;&#x2F; SCOPE-2         |  </span><br><span class="line">|                    |</span><br><span class="line">|                    |</span><br><span class="line">|                    |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>SCOPE-1</code>ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªå±€éƒ¨å˜é‡<code>y</code>å’Œä¸€ä¸ªå‡½æ•°<code>f</code>ï¼Œ<code>y</code>æ˜¯<code>f</code>çš„è‡ªç”±å˜é‡ï¼Œåœ¨ç¦»å¼€<code>SCOPE-1</code>åï¼Œ<code>y</code>å°±ä¸å­˜åœ¨äº†â€”â€”è¿™æ„å‘³ç€å‡½æ•°<code>f</code>ä¼ é€’åˆ°<code>SCOPE-2</code>åï¼Œä¼šå› æ— æ³•ç¡®å®š<code>y</code>ç»‘å®šçš„å€¼ï¼Œä»è€Œå¯¼è‡´è¿ç®—å‡ºé”™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+--------------------+   </span><br><span class="line">| &#x2F;&#x2F; SCOPE-1         |  </span><br><span class="line">|                    |</span><br><span class="line">| y &#x3D; 1;             |</span><br><span class="line">|                    |</span><br><span class="line">| +----------------+ |</span><br><span class="line">| |f(x) &#123;          | |</span><br><span class="line">| |  retrun x + y; |-|----\</span><br><span class="line">| |&#125;;              | |    |</span><br><span class="line">| +----------------+ |    |</span><br><span class="line">|                    |    |</span><br><span class="line">| f(1); &#x2F;&#x2F; -&gt; 2      |    |</span><br><span class="line">+--------------------+    |</span><br><span class="line">                          |</span><br><span class="line">                          | pass function f</span><br><span class="line">                          |</span><br><span class="line">+--------------------+    |   </span><br><span class="line">| &#x2F;&#x2F; SCOPE-2         |    |  </span><br><span class="line">|                    |&lt;---&#x2F;</span><br><span class="line">| f(1); &#x2F;&#x2F; -&gt; error  |</span><br><span class="line">|                    |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆè¯¥å¦‚ä½•è§£å†³å‘¢ï¼ŸæŠŠå‡½æ•°<code>f</code>å’Œè‡ªç”±å˜é‡<code>y</code>æ‰“åŒ…ä¸€èµ·ï¼Œä¼ é€’åˆ°<code>SCOPE-2</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+--------------------+   </span><br><span class="line">| &#x2F;&#x2F; SCOPE-1         |  </span><br><span class="line">|                    |</span><br><span class="line">| +----------------+ |</span><br><span class="line">| |y &#x3D; 1;          | |</span><br><span class="line">| |f(x) &#123;          | |</span><br><span class="line">| |  retrun x + y; |-|----\</span><br><span class="line">| |&#125;;              | |    |</span><br><span class="line">| +----------------+ |    |</span><br><span class="line">|                    |    |</span><br><span class="line">| f(1); &#x2F;&#x2F; -&gt; 2      |    |</span><br><span class="line">+--------------------+    |</span><br><span class="line">                          |</span><br><span class="line">                          | pass closure &quot;f&quot;</span><br><span class="line">                          |</span><br><span class="line">+--------------------+    |   </span><br><span class="line">| &#x2F;&#x2F; SCOPE-2         |    |  </span><br><span class="line">|                    |&lt;---&#x2F;</span><br><span class="line">| f(1); &#x2F;&#x2F; -&gt; 2      |</span><br><span class="line">|                    |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure>

<p>å®ç°è¿™ç§æ‰“åŒ…çš„æŠ€æœ¯ç§°ä¸ºé—­åŒ…ï¼Œè€ŒåŒæ—¶æ‰“åŒ…çš„äº§ç‰©ä¹Ÿç§°ä¹‹ä¸ºé—­åŒ…ã€‚</p>
<p>åœ¨å…·ä½“å®ç°ä¸Šï¼Œé—­åŒ…çš„æŠ€æœ¯æ–¹æ¡ˆå¤§è‡´å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>æ„é€ ä¸€ä¸ªç¯å¢ƒï¼Œå­˜å‚¨è‡ªç”±å˜é‡çš„ç»‘å®šä¿¡æ¯â€”â€”è¿™åœ¨æœ¯è¯­ä¸Šï¼Œåˆç§°è‡ªç”±å˜é‡è¢«â€œæ•è·â€äº†ï¼›</p>
<blockquote>
<ul>
<li>ç»‘å®šä¿¡æ¯åŒ…æ‹¬è‡ªç”±å˜é‡çš„ç¬¦å·å’Œè‡ªç”±å˜é‡çš„å€¼ï¼Œæ¯”å¦‚<code>{y: 2}</code>ï¼›</li>
<li>å­˜å‚¨è‡ªç”±å˜é‡çš„å€¼çš„æ–¹å¼å¯ä»¥æ˜¯å€¼å¤åˆ¶ä¹Ÿå¯ä»¥æ˜¯å¼•ç”¨ï¼Œå…·ä½“ç”±è¯­è¨€è®¾è®¡è€…ç¡®å®šï¼›</li>
</ul>
</blockquote>
</li>
<li><p>æ„é€ ä¸€ä¸ªæ•°æ®ç»“æ„å®ä½“ï¼Œå­˜å‚¨å‡½æ•°çš„æŒ‡é’ˆå’Œè¯¥ç¯å¢ƒâ€”â€”è¿™ä¸ªæ•°æ®ç»“æ„å®ä½“å°±æ˜¯é—­åŒ…ï¼›</p>
</li>
<li><p>å¯¹å‡½æ•°è¿›è¡Œè½¬æ¢å¤„ç†ï¼ŒåŒ…æ‹¬æŠŠé—­åŒ…ä½œä¸ºå…¶å‚æ•°ï¼Œä»¥åŠæŠŠå‡½æ•°ä½“ä¸­çš„è‡ªç”±å˜é‡è½¬åŒ–ä¸ºå±€éƒ¨å˜é‡ï¼ˆå±€éƒ¨å˜é‡çš„å€¼æ ¹æ®è‡ªç”±å˜é‡çš„ç¬¦å·ä»ç¯å¢ƒä¸­è·å¾—ï¼‰ï¼›</p>
</li>
</ol>
<p>å¯¹äºæ”¯æŒé—­åŒ…çš„ç¼–ç¨‹è¯­è¨€ï¼Œä»¥ä¸Šçš„æ­¥éª¤ç”±ç¼–è¯‘å™¨åœ¨è¿›è¡Œè¯æ³•åˆ†ææ—¶è‡ªåŠ¨å®Œæˆï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚</p>
<p>å¦‚æœæ‰‹åŠ¨å®ç°ï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿä¸‹é¢ä½¿ç”¨Cè¯­è¨€æ¨¡æ‹Ÿå®ç°ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">closure_f_env</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">closure_f</span> &#123;</span></span><br><span class="line">    <span class="keyword">void</span> *fp;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> _<span class="title">closure_f_env</span> <span class="title">env</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">f(x) &#123;</span></span><br><span class="line"><span class="comment">  return x + y;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> _f_impl(struct _closure_f *cp, <span class="keyword">int</span> x) &#123;</span><br><span class="line">    <span class="keyword">int</span> y = cp-&gt;env.y;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">struct _closure_f <span class="title">scope_1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> y = <span class="number">1</span>;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> _<span class="title">closure_f_env</span> <span class="title">env</span> = &#123;</span>y&#125;;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> _<span class="title">closure_f</span> <span class="title">f</span> = &#123;</span>&amp;_f_impl, env&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> (*fp)(struct _closure_f *, <span class="keyword">int</span>) = f.fp;</span><br><span class="line">    <span class="keyword">int</span> result = fp(&amp;f, <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\nscope_1: "</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, result); <span class="comment">// -&gt; 2</span></span><br><span class="line">    <span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scope_2</span><span class="params">(struct _closure_f f)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> (*fp)(struct _closure_f *, <span class="keyword">int</span>) = f.fp;</span><br><span class="line">    <span class="keyword">int</span> result = fp(&amp;f, <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\nscope_2: "</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, result); <span class="comment">// -&gt; 2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> _<span class="title">closure_f</span> <span class="title">f</span> = <span class="title">scope_1</span>();</span></span><br><span class="line">    scope_2(f);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<ul>
<li><a href="https://www.jianshu.com/p/c22db2a91989" target="_blank" rel="noopener external nofollow noreferrer">ã€Šã€é—­åŒ…ã€‘ä½ çœŸçš„ç†è§£é—­åŒ…å’Œlambdaè¡¨è¾¾å¼å—ã€‹</a></li>
<li><a href="https://en.wikipedia.org/wiki/Closure_(computer_programming)" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠClosure (computer programming)ã€‹</a></li>
<li><a href="https://lotabout.me/2016/thoughts-of-closure/" target="_blank" rel="noopener external nofollow noreferrer">ã€Šå†è°ˆé—­åŒ…ã€‹</a></li>
<li><a href="http://yungkcx.github.io/jekyll/update/2017/02/07/About-Closure.html" target="_blank" rel="noopener external nofollow noreferrer">ã€Šå…³äºç¼–ç¨‹è¯­è¨€ä¸­çš„é—­åŒ…ã€‹</a></li>
<li><a href="http://matt.might.net/articles/closure-conversion/" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠClosure conversion: How to compile lambdaã€‹</a></li>
<li><a href="https://www.kimsereylam.com/racket/lisp/2019/02/06/lambda-calculus-and-closure.html" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠLambda Calculus And Closureã€‹</a></li>
<li><a href="http://banjiewen.net/the-function-of-function-in-lisp.html" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠPaper: The Function of FUNCTION in LISPã€‹</a></li>
<li><a href="https://www.cs.utexas.edu/ftp/garbage/cs345/schintro-v14/schintro_64.html" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠLambda and Lexical Scope (Hunk M)ã€‹</a></li>
<li><a href="https://personal.utdallas.edu/~gupta/courses/apl/lambda.pdf" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠA Tutorial Introduction to the Lambda Calculusã€‹</a></li>
<li><a href="http://www.cs.cornell.edu/courses/cs611/2000fa/slides/lec07.pdf" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠCS 611<br>Advanced Programming Languages: Lecture 7: Lambda calculusï¼ˆPPTï¼‰ã€‹</a></li>
<li><a href="https://liujiacai.net/blog/2014/10/12/lambda-calculus-introduction/" target="_blank" rel="noopener external nofollow noreferrer">ã€Šç¼–ç¨‹è¯­è¨€çš„åŸºçŸ³â€”â€”Lambda calculusã€‹</a></li>
</ul>
<h3 id="lambda-ä¸-closure-çš„åŒºåˆ«"><a href="#lambda-ä¸-closure-çš„åŒºåˆ«" class="headerlink" title="lambda ä¸ closure çš„åŒºåˆ«"></a>lambda ä¸ closure çš„åŒºåˆ«</h3><p>åœ¨ç¼–ç¨‹è¯­è¨€é¢†åŸŸï¼Œä»åº•å±‚å®ç°å±‚é¢ä¸Šçœ‹ï¼š</p>
<ul>
<li><p>lambdaç­‰åŒåŒ¿åå‡½æ•°</p>
<blockquote>
<p>å¯¹äºæ”¯æŒlambdaçš„ç¼–ç¨‹è¯­è¨€æ¥è®²ï¼Œlambdaç¬¬ä¸€è¯­ä¹‰æ˜¯ï¼šæ”¯æŒä½¿ç”¨lambdaè¡¨è¾¾å¼ç”ŸæˆåŒ¿åå‡½æ•°ï¼Œlambdaç¬¬äºŒè¯­ä¹‰æ˜¯ï¼šä½¿ç”¨lambdaä»£ç§°åŒ¿åå‡½æ•°</p>
</blockquote>
</li>
<li><p>closureæ˜¯ç”±å‡½æ•°å’Œå…¶è¿è¡Œç¯å¢ƒæ„æˆçš„å®ä½“</p>
</li>
</ul>
<p>åœ¨ç¼–ç¨‹è¯­è¨€é¢†åŸŸï¼Œä»åº”ç”¨å±‚é¢ä¸Šçœ‹ï¼Œç”±äºæ”¯æŒclosureçš„ç¼–ç¨‹è¯­è¨€ä¸€èˆ¬ä¹Ÿæ”¯æŒlambdaï¼Œåˆ›å»ºclosureæ—¶å¤šä½¿ç”¨lambdaçš„æ–¹å¼ï¼Œæ‰€ä»¥åœ¨è¿™äºŒè€…ç»å¸¸ä¸€èµ·å‡ºç°çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†ç®€åŒ–æ¦‚å¿µï¼ŒæŠŠclosureç­‰åŒlambdaï¼Œæœªå°ä¸å¯ã€‚</p>
<h3 id="æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰"><a href="#æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰" class="headerlink" title="æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰"></a>æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰</h3><p>åœ¨æ•°å­¦è§’åº¦ï¼ŒæŸ¯é‡ŒåŒ–å°±æ˜¯ä¸€ä¸ªé€æ¬¡æ¶ˆå…ƒçš„è¿‡ç¨‹ã€‚å½“æŠŠå‡½æ•°çš„å…ƒå…¨æ¶ˆæ‰ï¼Œå°±å¾—åˆ°äº†å€¼ã€‚å€¼å°±æ˜¯é›¶å…ƒå‡½æ•°ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">äºŒå…ƒå‡½æ•°ï¼š</span><br><span class="line">f(x,y)&#x3D;x+y</span><br><span class="line"></span><br><span class="line">åœ¨x&#x3D;1æ—¶ï¼Œå¸¦å…¥å¾—ï¼š</span><br><span class="line">g(y)&#x3D;f(1,y)&#x3D;1+y</span><br></pre></td></tr></table></figure>

<p>åœ¨ç¼–ç¨‹è§’åº¦ï¼ŒæŸ¯é‡ŒåŒ–å¯ç”¨äºæŠŠä¸€ä¸ªå¤šå‚å‡½æ•°è½¬æ¢ä¸ºç”±å¤šä¸ªå•å‚å‡½æ•°ç»„æˆçš„è¿é”å‡½æ•°ï¼Œæ¯”å¦‚åœ¨JavaScriptä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// f(x, y) = x + y</span></span><br><span class="line"><span class="keyword">var</span> fxy = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"f(1,2) = "</span>, fxy(<span class="number">1</span>)(<span class="number">2</span>)); <span class="comment">// -&gt; f(1,2) = 3</span></span><br></pre></td></tr></table></figure>

<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<ul>
<li><a href="https://www.zhihu.com/question/30097211" target="_blank" rel="noopener external nofollow noreferrer">ã€Šå¦‚ä½•ç†è§£functional programmingé‡Œçš„curryingä¸partial application?ã€‹</a></li>
<li><a href="https://zh.wikipedia.org/wiki/æŸ¯é‡ŒåŒ–" target="_blank" rel="noopener external nofollow noreferrer">WiKi-ã€ŠæŸ¯é‡ŒåŒ–ã€‹</a></li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2020</tag>
        <tag>åŸºç¡€ç†è®º</tag>
        <tag>Review</tag>
        <tag>éç»ˆç¨¿</tag>
      </tags>
  </entry>
  <entry>
    <title>git submoduleç‰ˆæœ¬æ£€æµ‹å·¥å…·ï¼šgit_submodule_version_checker</title>
    <url>/2019/git%20submodule%E7%89%88%E6%9C%AC%E6%A3%80%E6%B5%8B%E5%B7%A5%E5%85%B7%EF%BC%9Agit_submodule_version_checker/readme/</url>
    <content><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æœ€è¿‘é¡¹ç›®ç”±äºä¸€äº›ç‰¹æ®Šéœ€è¦ï¼Œä½¿ç”¨äº†gitçš„submoduleså·¥å…·æ¥å¼•å…¥ä¸€ä¸ªå­é¡¹ç›®åˆ°ä¸»é¡¹ç›®ä¸­ã€‚ç„¶è€Œè€ƒè™‘submoduleså·¥å…·åœ¨å›¢é˜Ÿåä½œå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå®¹æ˜“å‡ºç°å­é¡¹ç›®ç‰ˆæœ¬ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œäºæ˜¯ç ”å‘äº†<a href="https://github.com/YK-Unit/git_submodule_version_checker" target="_blank" rel="noopener">git_submodule_version_checker</a>è¿™æ¬¾å·¥å…·æ¥è§£å†³ã€‚</p>
<blockquote>
<p>1ã€å…³äºgitçš„submoduleså·¥å…·çš„ä»‹ç»å¯ä»¥ç‚¹å‡»é˜…è¯»<a href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠGit å·¥å…· - å­æ¨¡å—ã€‹</a>ã€‚</p>
<p>2ã€å…³äºgitçš„submoduleså·¥å…·çš„ä¼˜ç¼ºç‚¹ï¼Œæœ‰å…´è¶£çš„è¯·ç›´æ¥Googleå§ï¼Œç›®å‰ç½‘ä¸Šå·²ç»å¾ˆå¤šèµ„æ–™äº†ã€‚æ€»å¾—æ¥è¯´ï¼Œå…¶æœ€å¤§çš„ï¼ˆå¯èƒ½ä¹Ÿæ˜¯å”¯ä¸€çš„ï¼‰ä¼˜ç‚¹æ˜¯ï¼šå…è®¸å¼€å‘è€…å°†ä¸€ä¸ªå­é¡¹ç›®çš„gitä»“åº“ä½œä¸ºä¸»é¡¹ç›®git ä»“åº“çš„å­ç›®å½•ï¼Œå¹¶è®©å­é¡¹ç›®ä¿æŒæäº¤çš„ç‹¬ç«‹ï¼›è€Œå…¶çªå‡ºçš„ç¼ºç‚¹ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p>
<ul>
<li><p>ä¸»é¡¹ç›®ä»“åº“ä¸è®°å½•å­é¡¹ç›®ä»“åº“çš„æ–‡ä»¶å˜åŠ¨ï¼Œåªè®°å½•å­é¡¹ç›®ä»“åº“çš„commitIdï¼Œåœ¨è¿™ä¸ªèƒŒæ™¯ä¸‹ï¼Œå›¢é˜Ÿåä½œå¼€å‘è¿‡ç¨‹ä¸­å®¹æ˜“äº§ç”Ÿå­é¡¹ç›®ç‰ˆæœ¬ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå…·ä½“è¡¨ç°å¦‚ä¸‹ï¼š</p>
<ul>
<li>å›¢é˜Ÿåä½œå¼€å‘æ—¶ï¼Œè‹¥æœ‰æˆå‘˜æ›´æ–°äº†å­é¡¹ç›®ï¼Œä½†æ˜¯ä½ <code>git pull</code>åï¼Œå´æ²¡æœ‰è¿è¡Œ<code>git submodule update --remote</code>æ›´æ–°å­é¡¹ç›®æœ¬åœ°ä»“åº“ï¼Œé‚£ä¹ˆä½ ææœ‰å¯èƒ½å†æ¬¡æŠŠæ—§çš„å­é¡¹ç›®ç‰ˆæœ¬ä¿¡æ¯ï¼ˆå­é¡¹ç›®ä»“åº“ä¾ç„¶æŒ‡å‘ä¸€ä¸ªæ—§çš„commitIdï¼‰æäº¤è‡³ä¸»é¡¹ç›®</li>
<li>å›¢é˜Ÿåä½œå¼€å‘æ—¶ï¼Œè‹¥ä½ åœ¨æœ¬åœ°æ”¹åŠ¨äº†å­é¡¹ç›®ï¼Œå¹¶åœ¨ä¸»é¡¹ç›®ä¸­æäº¤å¹¶æ¨é€äº†å­é¡¹ç›®ç‰ˆæœ¬ä¿¡æ¯ï¼Œä½†å´æ²¡æœ‰æ¨é€å­é¡¹ç›®ä»“åº“ä¸Šçš„æ”¹åŠ¨ï¼Œè¿™æ—¶å…¶ä»–æˆå‘˜åœ¨æ‹‰å–æ›´æ–°åï¼Œè¿è¡Œ<code>git submodule update</code>æ—¶ï¼Œä¼šé‡åˆ°â€œæ‰¾ä¸åˆ°æ‰€å¼•ç”¨çš„å­æ¨¡å—æäº¤â€çš„é”™è¯¯æç¤º<ul>
<li>æ¯æ¬¡æ›´æ–°å­é¡¹ç›®ä»“åº“ï¼Œå­é¡¹ç›®ä»“åº“éƒ½ä¼šå›åˆ°æ¸¸ç¦»çŠ¶æ€ï¼Œåœ¨è¿™ä¸ªèƒŒæ™¯ä¸‹ï¼Œ ä¼šäº§ç”Ÿçš„é—®é¢˜æœ‰ï¼š</li>
</ul>
</li>
<li>è‹¥ä½ å·²ç»åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œåœ¨æ›´æ–°åï¼Œéœ€è¦æ‰‹åŠ¨åˆ‡æ¢åˆ†æ”¯ï¼›</li>
<li>è‹¥ä½ å¯¹å­é¡¹ç›®åšäº†ä¿®æ”¹ï¼Œä½†æ˜¯å¿˜è®°äº†æäº¤ï¼Œè¿™æ—¶å€™æ‰§è¡Œæ›´æ–°ï¼Œä¼šå¯¼è‡´ä¿®æ”¹è¢«ä¸¢å¤±ï¼›</li>
</ul>
</li>
<li><p>å­é¡¹ç›®ä»“åº“æ€»æ˜¯éœ€è¦æ‰‹åŠ¨æ›´æ–°ï¼ˆä¸è¿‡å¯ä»¥é€šè¿‡è‡ªåŠ¨åŒ–å·¥å…·ç¼–å†™å¸®åŠ©è§£å†³æ­¤é—®é¢˜ï¼‰</p>
</li>
</ul>
</blockquote>
<a id="more"></a>

<h2 id="git-submodule-version-checker"><a href="#git-submodule-version-checker" class="headerlink" title="git_submodule_version_checker"></a>git_submodule_version_checker</h2><p><a href="https://github.com/YK-Unit/git_submodule_version_checker" target="_blank" rel="noopener">git_submodule_version_checker</a>å·¥å…·ä½¿ç”¨shellç¼–å†™ï¼Œå…¶æ£€æµ‹åˆ¤æ–­ä¸€ä¸ªå­é¡¹ç›®çš„ç‰ˆæœ¬æ˜¯å¦ä¸€è‡´çš„æ€è·¯å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>è·å–å½“å‰å­é¡¹ç›®çš„æœ¬åœ°ä»“åº“å½“å‰æŒ‡å‘çš„commitIdï¼š<code>submodules_head_commit_id</code></p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git submodule status `&#123;pwd&#125;`/SUBMODULE_PATH | awk '&#123;print $1&#125;'</span><br></pre></td></tr></table></figure>
</li>
<li><p>è·å–ä¸»é¡¹ç›®è®°å½•çš„å½“å‰å­é¡¹ç›®çš„ç‰ˆæœ¬commitIdï¼š<code>submodules_associated_commit_id</code></p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git ls-tree master `&#123;pwd&#125;`/SUBMODULE_PATH | awk '&#123;print $3&#125;'</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ¤æ–­<code>submodules_associated_commit_id</code>æ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ºç©ºï¼Œè¯´æ˜å½“å‰å­é¡¹ç›®ä¸ºæ–°å¢å­æ¨¡å—ï¼Œéœ€è¦æç¤ºå¼€å‘è€…åœ¨ä¸»é¡¹ç›®ä¸­è¿›è¡Œæäº¤ï¼›è‹¥ä¸ä¸ºç©ºï¼Œåˆ™å°†2ä¸ªcommitIdè¿›è¡Œæ¯”è¾ƒï¼Œè‹¥äºŒè€…ä¸€è‡´ï¼Œåˆ™è¯´æ˜å½“å‰å­é¡¹ç›®çš„ç‰ˆæœ¬æ˜¯ä¸€è‡´çš„</p>
</li>
</ol>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh  </span></span><br><span class="line"></span><br><span class="line">function check_submodules_version()</span><br><span class="line">&#123;</span><br><span class="line"><span class="meta">	#</span><span class="bash"> <span class="built_in">echo</span> -e <span class="string">"\033[å­—èƒŒæ™¯é¢œè‰²;å­—ä½“é¢œè‰²m å­—ç¬¦ä¸² \033[0m"</span></span></span><br><span class="line">	color_prefix_red="\033[0;31m"</span><br><span class="line">	color_suffix="\033[0m"</span><br><span class="line"></span><br><span class="line">	project_dir=$1</span><br><span class="line">	cd $project_dir</span><br><span class="line">	color_project_dir=$color_prefix_red$project_dir$color_suffix</span><br><span class="line">	echo "cd to repo '$color_project_dir' done"</span><br><span class="line"></span><br><span class="line">	echo "check the version of submodules now ..."</span><br><span class="line"></span><br><span class="line">	cur_branch=$(git symbolic-ref --short -q HEAD)</span><br><span class="line"><span class="meta">	#</span><span class="bash"><span class="built_in">echo</span> <span class="string">"current branch: <span class="variable">$cur_branch</span>"</span></span></span><br><span class="line"></span><br><span class="line">	temp_has_bad_submodule="$project_dir/.temp_has_bad_submodule"</span><br><span class="line">	rm -f temp_has_bad_submodule</span><br><span class="line">	touch temp_has_bad_submodule</span><br><span class="line"></span><br><span class="line">	echo "Here is the all submodules:"</span><br><span class="line"></span><br><span class="line">	git submodule status | while read -r line</span><br><span class="line">	do </span><br><span class="line"><span class="meta">		#</span><span class="bash"> 1. è·å–å½“å‰å­é¡¹ç›®çš„æœ¬åœ°ä»“åº“å½“å‰æŒ‡å‘çš„commitIdï¼šsubmodules_head_commit_id</span></span><br><span class="line">		eval `echo $line | awk '&#123;</span><br><span class="line">	    	printf("submodules_head_commit_id=%s; submodule_name=%s", $1, $2)</span><br><span class="line">		&#125;'`</span><br><span class="line"><span class="meta">		#</span><span class="bash"><span class="built_in">echo</span> <span class="string">"<span class="variable">$submodule_name</span>: <span class="variable">$submodules_head_commit_id</span>"</span> </span></span><br><span class="line"></span><br><span class="line"><span class="meta">		#</span><span class="bash"> gradle æ‰§è¡Œ <span class="string">'git submodule status'</span> æ—¶ï¼Œsubmodule_name å‰é¢å¸¦æœ‰ <span class="string">'../'</span>ï¼Œéå¸¸å¥‡æ€ª</span></span><br><span class="line"><span class="meta">		#</span><span class="bash"> è¿™ä¸ªæ­£æ˜¯ç”¨äºåˆ é™¤ <span class="string">'../'</span></span></span><br><span class="line">		if [[ $submodule_name == ../* ]]</span><br><span class="line">		then</span><br><span class="line">			submodule_name=$&#123;submodule_name:3&#125;</span><br><span class="line">		fi</span><br><span class="line"></span><br><span class="line"><span class="meta">		#</span><span class="bash"> 2. è·å–ä¸»é¡¹ç›®è®°å½•çš„å½“å‰å­é¡¹ç›®çš„ç‰ˆæœ¬commitIdï¼šsubmodules_associated_commit_id</span></span><br><span class="line">		submodule_path="$project_dir/$submodule_name"</span><br><span class="line">		eval `git ls-tree $cur_branch $submodule_path  | awk '&#123;</span><br><span class="line">	    	printf("submodules_associated_commit_id=%s", $3)</span><br><span class="line">		&#125;'`</span><br><span class="line"></span><br><span class="line">		color_submodules_associated_commit_id=$color_prefix_red$submodules_associated_commit_id$color_suffix</span><br><span class="line">		color_submodules_head_commit_id=$color_prefix_red$submodules_head_commit_id$color_suffix</span><br><span class="line"></span><br><span class="line">		color_tips=$color_prefix_red"[â˜…]"$color_suffix</span><br><span class="line">		color_right=$color_prefix_red"[âœ“]"$color_suffix</span><br><span class="line">		color_wrong=$color_prefix_red"[âœ—]"$color_suffix</span><br><span class="line"></span><br><span class="line"><span class="meta">		#</span><span class="bash"> 3. åˆ¤æ–­`submodules_associated_commit_id`æ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ºç©ºï¼Œè¯´æ˜å½“å‰å­é¡¹ç›®ä¸ºæ–°å¢å­æ¨¡å—ï¼Œéœ€è¦æç¤ºå¼€å‘è€…åœ¨ä¸»é¡¹ç›®ä¸­è¿›è¡Œæäº¤ï¼›</span></span><br><span class="line"><span class="meta">		#</span><span class="bash">    è‹¥ä¸ä¸ºç©ºï¼Œåˆ™å°†2ä¸ªcommitIdè¿›è¡Œæ¯”è¾ƒï¼Œè‹¥äºŒè€…ä¸€è‡´ï¼Œåˆ™è¯´æ˜å½“å‰å­é¡¹ç›®çš„ç‰ˆæœ¬æ˜¯ä¸€è‡´çš„</span></span><br><span class="line">		if [ -z "$submodules_associated_commit_id" ]</span><br><span class="line">		then</span><br><span class="line">			echo "$color_tips $submodule_name: a new submodule, and is waiting to be committed"</span><br><span class="line">		else</span><br><span class="line">			if [ $submodules_associated_commit_id = $submodules_head_commit_id ]</span><br><span class="line">			then </span><br><span class="line">				echo "$color_right $submodule_name: associatedCommitId($color_submodules_associated_commit_id) == headCommitId($color_submodules_head_commit_id)"</span><br><span class="line">			else </span><br><span class="line">				echo "$color_wrong $submodule_name: associatedCommitId($color_submodules_associated_commit_id) != headCommitId($color_submodules_head_commit_id)"</span><br><span class="line">				echo true &gt; temp_has_bad_submodule</span><br><span class="line">			fi</span><br><span class="line">		fi</span><br><span class="line"></span><br><span class="line">	done</span><br><span class="line"></span><br><span class="line">	read has_bad_submodule &lt; temp_has_bad_submodule</span><br><span class="line">	rm -f temp_has_bad_submodule</span><br><span class="line"></span><br><span class="line">	echo "check the version of submodules done !!!"</span><br><span class="line"></span><br><span class="line">	if [ "$has_bad_submodule" = true ]</span><br><span class="line">	then</span><br><span class="line">		fix_cmd="git submodule update --init --recursive"</span><br><span class="line">		color_fix_cmd=$color_prefix_red$fix_cmd$color_suffix</span><br><span class="line">		color_sad=$color_prefix_red"(ToT)"$color_suffix</span><br><span class="line">		echo "$color_sad This main repo has bad submodules, please run this command to fix it: $color_fix_cmd"</span><br><span class="line"><span class="meta">		#</span><span class="bash"> 1 = <span class="literal">false</span></span></span><br><span class="line">    	return 1</span><br><span class="line">	else</span><br><span class="line">		color_happy=$color_prefix_red"(^_^)"$color_suffix</span><br><span class="line">		echo "$color_happy This main repo has good submodules, you can have a joy now..."</span><br><span class="line">    	# 0 = true</span><br><span class="line">    	return 0</span><br><span class="line">	fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">test</span>: å‡è®¾git_submodule_version_checker.shè„šæœ¬æ”¾ç½®åœ¨ä¸»å·¥ç¨‹gitä»“åº“æ ¹ç›®å½•ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚./script/git_submodule_version_checker.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash">project_dir=$(<span class="built_in">cd</span> `dirname <span class="variable">$0</span>`; <span class="built_in">cd</span> ..; <span class="built_in">pwd</span>)</span></span><br><span class="line">if [ -n "$1" ]</span><br><span class="line">then</span><br><span class="line">    project_dir=$1</span><br><span class="line">else</span><br><span class="line">	echo "usage: sh PATH_TO/git_submodule_version_checker.sh PATH_TO_MAIN_GIT_REPO "</span><br><span class="line">	exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">check_submodules_version $project_dir</span><br></pre></td></tr></table></figure>

<h2 id="å¦‚ä½•æ¥å…¥åˆ°ç§»åŠ¨ç«¯é¡¹ç›®"><a href="#å¦‚ä½•æ¥å…¥åˆ°ç§»åŠ¨ç«¯é¡¹ç›®" class="headerlink" title="å¦‚ä½•æ¥å…¥åˆ°ç§»åŠ¨ç«¯é¡¹ç›®"></a>å¦‚ä½•æ¥å…¥åˆ°ç§»åŠ¨ç«¯é¡¹ç›®</h2><p>ä¸‹é¢å°†ä¼šé€šè¿‡iOSç«¯å’ŒAndroidç«¯çš„ç¤ºä¾‹å·¥ç¨‹ï¼Œæ¼”ç¤ºå¦‚ä½•æ¥å…¥<code>git_submodule_version_checker</code>åˆ°ç§»åŠ¨ç«¯ä¸»é¡¹ç›®å·¥ç¨‹ä¸­ã€‚</p>
<h3 id="å…³äºæ£€æµ‹å·¥å…·çš„è¿è¡Œæ—¶æœº"><a href="#å…³äºæ£€æµ‹å·¥å…·çš„è¿è¡Œæ—¶æœº" class="headerlink" title="å…³äºæ£€æµ‹å·¥å…·çš„è¿è¡Œæ—¶æœº"></a>å…³äºæ£€æµ‹å·¥å…·çš„è¿è¡Œæ—¶æœº</h3><p>åœ¨iOSç«¯å’ŒAndroidç«¯é¡¹ç›®çš„ç¤ºä¾‹å·¥ç¨‹ä¸­ï¼Œ<code>git_submodule_version_checker</code>çš„è¿è¡Œæ—¶æœºéƒ½è®¾ç½®åœ¨å·¥ç¨‹ç¼–è¯‘å‰ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦è°ƒæ•´ä½ å–œæ¬¢çš„è¿è¡Œæ—¶æœºã€‚</p>
<p>åœ¨iOSç«¯å’ŒAndroidç«¯é¡¹ç›®çš„ç¤ºä¾‹å·¥ç¨‹ä¸­ï¼Œæ¯æ¬¡å¯¹å·¥ç¨‹è¿›è¡Œç¼–è¯‘å‰ï¼Œéƒ½ä¼šè°ƒç”¨<code>git_submodule_version_checker</code>å¯¹å­é¡¹ç›®çš„ç‰ˆæœ¬è¿›è¡Œæ£€æŸ¥ï¼Œè‹¥å½“å‰ä¸»é¡¹ç›®å­˜åœ¨ç‰ˆæœ¬ä¸ä¸€è‡´çš„å­é¡¹ç›®ï¼Œåˆ™ç¼–è¯‘ä¼šä»¥å¤±è´¥ç»“æŸã€‚</p>
<h3 id="iOSç«¯ç¤ºä¾‹"><a href="#iOSç«¯ç¤ºä¾‹" class="headerlink" title="iOSç«¯ç¤ºä¾‹"></a>iOSç«¯ç¤ºä¾‹</h3><p>iOSç«¯ä¸»é¡¹ç›®å·¥ç¨‹æ¥å…¥æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>ä¸‹è½½<a href="https://github.com/YK-Unit/git_submodule_version_checker/archive/master.zip" target="_blank" rel="noopener">git_submodule_version_checker</a>ï¼Œæ”¾ç½®åˆ°ä¸»å·¥ç¨‹æ ¹ç›®å½•ï¼Œå¦‚å›¾ï¼š</p>
<p> <img src="/2019/git%20submodule%E7%89%88%E6%9C%AC%E6%A3%80%E6%B5%8B%E5%B7%A5%E5%85%B7%EF%BC%9Agit_submodule_version_checker/readme/iOS-Project-Root-Dir.png" alt=""></p>
</li>
<li><p>ç”¨Xcodeæ‰“å¼€ä¸»å·¥ç¨‹çš„ï¼Œé€‰æ‹©<code>ä¸»å·¥ç¨‹Target &gt; Build Phase &gt; +</code>ï¼Œå¦‚å›¾æ‰€ç¤ºæ–°å»ºä¸€ä¸ªåä¸º<code>[CP] Check Git Submodule Version</code>çš„<code>Run Script Phase</code>ï¼š</p>
<p> <img src="/2019/git%20submodule%E7%89%88%E6%9C%AC%E6%A3%80%E6%B5%8B%E5%B7%A5%E5%85%B7%EF%BC%9Agit_submodule_version_checker/readme/Run-Script-Phase.png" alt=""></p>
</li>
</ol>
<ul>
<li><p><code>Run Script Phase</code>ä»£ç ï¼š</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root_dir=$SRCROOT</span><br><span class="line">sh $root_dir/git_submodule_version_checker/git_submodule_version_checker.sh $root_dir</span><br><span class="line">if [ $? != 0 ]</span><br><span class="line">then </span><br><span class="line">echo "error: This main repo has bad submodules, please run 'git submodule update --init --recursive' to fix it" &gt;&amp;2</span><br><span class="line">exit 1</span><br><span class="line">fi</span><br><span class="line">echo "SUCCESS"</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ³¨æ„å’Œçº¢æ¡†ä¸€æ ·ï¼Œåé€‰<code>Show environment variables in build log</code>å’Œ<code>Run script only when installing</code></p>
</li>
</ul>
<h3 id="Androidç«¯ç¤ºä¾‹"><a href="#Androidç«¯ç¤ºä¾‹" class="headerlink" title="Androidç«¯ç¤ºä¾‹"></a>Androidç«¯ç¤ºä¾‹</h3><p>Androidç«¯ä¸»é¡¹ç›®å·¥ç¨‹æ¥å…¥æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>ä¸‹è½½<a href="https://github.com/YK-Unit/git_submodule_version_checker/archive/master.zip" target="_blank" rel="noopener">git_submodule_version_checker</a>ï¼Œæ”¾ç½®åˆ°ä¸»å·¥ç¨‹æ ¹ç›®å½•ï¼Œå¦‚å›¾ï¼š</p>
<p> <img src="/2019/git%20submodule%E7%89%88%E6%9C%AC%E6%A3%80%E6%B5%8B%E5%B7%A5%E5%85%B7%EF%BC%9Agit_submodule_version_checker/readme/Android-Project-Root-Dir.png" alt=""></p>
</li>
</ol>
<ol start="2">
<li><p>ç”¨Android Studio æ‰“å¼€ä¸»å·¥ç¨‹ï¼Œé€‰æ‹©<code>ä¸»å·¥ç¨‹ &gt; app &gt; build.gradle</code>ï¼Œå¦‚å›¾æ‰€ç¤ºæ·»åŠ åä¸º<code>check_git_submodule_version</code>çš„<code>task</code>ï¼Œå¹¶ä¸º<code>preBuild</code>è¿™ä¸ªtaskè®¾ç½®ä¾èµ–ï¼š</p>
<p> <img src="/2019/git%20submodule%E7%89%88%E6%9C%AC%E6%A3%80%E6%B5%8B%E5%B7%A5%E5%85%B7%EF%BC%9Agit_submodule_version_checker/readme/build.gradle.png" alt=""></p>
<p>ä¸Šè¿°æ·»åŠ çš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task check_git_submodule_version(<span class="string">type:</span> Exec) &#123;</span><br><span class="line">    <span class="keyword">def</span> root_dir = getRootDir()</span><br><span class="line">    executable <span class="string">"sh"</span></span><br><span class="line">    args <span class="string">"$root_dir/git_submodule_version_checker/git_submodule_version_checker.sh"</span>, <span class="string">"$root_dir"</span></span><br><span class="line"></span><br><span class="line">    ignoreExitValue <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    doLast &#123;</span><br><span class="line">        logger.lifecycle(<span class="string">"check result: $execResult"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(execResult.exitValue == <span class="number">0</span>) &#123;</span><br><span class="line">            logger.lifecycle(<span class="string">'SUCCESS'</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GradleException(<span class="string">"This main repo has bad submodules, please run \'git submodule update --init --recursive\' to fix it."</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">preBuild.dependsOn check_git_submodule_version</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="ç¤ºä¾‹é“¾æ¥"><a href="#ç¤ºä¾‹é“¾æ¥" class="headerlink" title="ç¤ºä¾‹é“¾æ¥"></a>ç¤ºä¾‹é“¾æ¥</h3><ul>
<li><a href="https://github.com/YK-Unit/git_submodule_version_checker_example_iOS" target="_blank" rel="noopener">iOS Example</a></li>
<li><a href="https://github.com/YK-Unit/git_submodule_version_checker_example_Android" target="_blank" rel="noopener">Android Example</a></li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://stackoverflow.com/questions/3983829/how-can-i-get-a-git-submodules-associated-commit-id-from-a-past-commit-in-the-p?noredirect=1&lq=1" target="_blank" rel="noopener">ã€ŠHow can I get a git submoduleâ€™s associated commit ID from a past commit in the parent clone?ã€‹</a></li>
<li><a href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠGit å·¥å…· - å­æ¨¡å—ã€‹</a></li>
<li><a href="https://blog.devtang.com/2013/05/08/git-submodule-issues/" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠGit submoduleçš„å‘ã€‹</a></li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>å¤§å‰ç«¯</tag>
        <tag>2019</tag>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Flrçš„äº§å“è§‚å’Œå¼€å‘è§‚</title>
    <url>/2020/Flr%E7%9A%84%E4%BA%A7%E5%93%81%E8%A7%82%E5%92%8C%E5%BC%80%E5%8F%91%E8%A7%82/readme/</url>
    <content><![CDATA[<p><img src="/2020/Flr%E7%9A%84%E4%BA%A7%E5%93%81%E8%A7%82%E5%92%8C%E5%BC%80%E5%8F%91%E8%A7%82/readme/flr.png" alt="Flr"></p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><a href="https://blog.yorkfish.me/2020/Flr%EF%BC%9A%E4%B8%80%E4%B8%AA%E5%87%BA%E8%89%B2%E7%9A%84Flutter%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B/2020/Flr%E7%9A%84%E4%BA%A7%E5%93%81%E8%A7%82%E5%92%8C%E5%BC%80%E5%8F%91%E8%A7%82/readme/">Flr</a> æ˜¯æˆ‘ä¸»å¯¼çš„å’Œç»„ç»‡å›¢é˜Ÿå¯¹å¤–å¼€æºçš„ç¬¬ä¸€æ¬¾ä½œå“â€”â€”ä¸€ä¸ªç”¨äºå¸®åŠ©ç®¡ç†Flutterèµ„æºçš„å¼€å‘å·¥å…·ç³»åˆ—äº§å“ï¼ŒåŒ…æ‹¬ï¼š </p>
<ul>
<li><a href="https://github.com/Fly-Mix/flr-as-plugin" target="_blank" rel="noopener">flr-as-plugin</a>ï¼š<code>Flr</code>çš„Android Studioæ’ä»¶ç‰ˆæœ¬</li>
<li><a href="https://github.com/Fly-Mix/flr-vscode-extension" target="_blank" rel="noopener">flr-vscode-extension</a>ï¼š<code>Flr</code>çš„VSCodeæ’ä»¶ç‰ˆæœ¬</li>
<li><a href="https://github.com/Fly-Mix/flr-cli" target="_blank" rel="noopener">flr-cli</a>ï¼š<code>Flr</code>çš„å‘½ä»¤è¡Œç‰ˆæœ¬</li>
</ul>
<p>åœ¨è¿™é‡Œï¼Œä¸»è¦åˆ†äº«ä¸€ä¸‹<code>Flr</code>èƒŒåçš„äº§å“è§‚å’Œå¼€å‘è§‚ã€‚</p>
<a id="more"></a>

<h2 id="Flrçš„äº§å“è§‚"><a href="#Flrçš„äº§å“è§‚" class="headerlink" title="Flrçš„äº§å“è§‚"></a>Flrçš„äº§å“è§‚</h2><p><code>Flr</code>çš„äº§å“è§‚ä¸»è¦ä½“ç°åœ¨â€œäº§å“çŸ©é˜µç­–ç•¥â€å’Œâ€œäº§å“è¿è¥ç­–ç•¥â€è¿™2ç‚¹ä¸Šï¼Œä¸‹é¢å¯¹è¿™2ç‚¹åˆ†åˆ«åšå…·ä½“çš„åˆ†äº«ã€‚</p>
<h3 id="äº§å“çŸ©é˜µç­–ç•¥"><a href="#äº§å“çŸ©é˜µç­–ç•¥" class="headerlink" title="äº§å“çŸ©é˜µç­–ç•¥"></a>äº§å“çŸ©é˜µç­–ç•¥</h3><p><code>Flr</code>çš„äº§å“çŸ©é˜µç»„æˆå¦‚ä¸‹ï¼š</p>
<ul>
<li><a href="https://github.com/Fly-Mix/flr-as-plugin" target="_blank" rel="noopener">flr-as-plugin</a>ï¼š<code>Flr</code>çš„Android Studioæ’ä»¶ç‰ˆæœ¬</li>
<li><a href="https://github.com/Fly-Mix/flr-vscode-extension" target="_blank" rel="noopener">flr-vscode-extension</a>ï¼š<code>Flr</code>çš„VSCodeæ’ä»¶ç‰ˆæœ¬</li>
<li><a href="https://github.com/Fly-Mix/flr-cli" target="_blank" rel="noopener">flr-cli</a>ï¼š<code>Flr</code>çš„å‘½ä»¤è¡Œç‰ˆæœ¬</li>
</ul>
<p><code>Flr</code>çš„äº§å“çŸ©é˜µç­–ç•¥ä¸»è¦æ˜¯2ç‚¹ï¼š</p>
<ul>
<li>æ„å»ºå¼€å‘åœºæ™¯æ”¯æŒå…¨é¢çš„äº§å“çŸ©é˜µ</li>
<li>æ„å»ºå…·å¤‡å®¹ç¾èƒ½åŠ›çš„äº§å“çš„çŸ©é˜µ</li>
</ul>
<h4 id="æ„å»ºå¼€å‘åœºæ™¯æ”¯æŒå…¨é¢çš„äº§å“çŸ©é˜µ"><a href="#æ„å»ºå¼€å‘åœºæ™¯æ”¯æŒå…¨é¢çš„äº§å“çŸ©é˜µ" class="headerlink" title="æ„å»ºå¼€å‘åœºæ™¯æ”¯æŒå…¨é¢çš„äº§å“çŸ©é˜µ"></a>æ„å»ºå¼€å‘åœºæ™¯æ”¯æŒå…¨é¢çš„äº§å“çŸ©é˜µ</h4><p>Flutterçš„å¼€å‘åœºæ™¯ä¸»è¦æœ‰ï¼š</p>
<ol>
<li><p>ä½¿ç”¨Android Studioè¿›è¡ŒFlutterå¼€å‘</p>
</li>
<li><p>ä½¿ç”¨VSCodeè¿›è¡ŒFlutterå¼€å‘</p>
</li>
<li><p>ä½¿ç”¨å…¶ä»–æ–‡æœ¬ç¼–è¾‘å·¥å…·ï¼ˆå¦‚Emacsï¼‰è¿›è¡ŒFlutterå¼€å‘</p>
</li>
<li><p>ä½¿ç”¨CIå·¥å…·å¯¹Flutterå·¥ç¨‹è¿›è¡Œè‡ªåŠ¨æ„å»º</p>
</li>
</ol>
<blockquote>
<p>Flutterå®˜æ–¹æ¨èçš„IDEä¸»è¦æœ‰Android Studioå’ŒVSCodeä¸¤ç§ã€‚</p>
<p>è¯¦ç»†å¯è§<a href="https://flutter.cn/docs/get-started/editor" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠFlutterç¼–è¾‘å·¥å…·è®¾å®šã€‹</a></p>
</blockquote>
<p> å¯¹åº”ä¸Šè¿°äº§å“çŸ©é˜µï¼š</p>
<ol>
<li><p><code>flr-as-plugin</code>ç”¨äºæ»¡è¶³å¼€å‘åœºæ™¯ä¸€</p>
</li>
<li><p><code>flr-vscode-extension</code>ç”¨äºæ»¡è¶³å¼€å‘åœºæ™¯äºŒ</p>
</li>
<li><p><code>flr-cli</code>ä¸»è¦ç”¨äºæ»¡è¶³å¼€å‘åœºæ™¯ä¸‰å’Œå¼€å‘åœºæ™¯å›› </p>
</li>
</ol>
<p>é€šè¿‡å®æ–½è¿™ä¸ªç­–ç•¥ï¼Œ<code>Flr</code>å°†èƒ½è·å¾—ä»¥ä¸‹å¥½å¤„ï¼š</p>
<ul>
<li>æ”¯æŒå…¨é¢ï¼Œæœ‰åŠ©å…¨é¢å é¢†å¸‚åœºï¼ˆæ­¤å¤„çš„å¸‚åœºç‰¹æŒ‡Flutterèµ„æºç®¡ç†å¼€å‘å·¥å…·è¿™ä¸ªå‚ç›´é¢†åŸŸå¸‚åœºï¼‰</li>
<li>å½¢æˆå®£ä¼ äº®ç‚¹ï¼Œæœ‰åŠ©å®£ä¼ æ¨å¹¿äº§å“</li>
<li>å½¢æˆæŠ¤åŸæ²³ï¼Œç›´æ¥æå‡åæ¥æŒ‘æˆ˜è€…çš„ç«äº‰é—¨æ§›</li>
</ul>
<h4 id="æ„å»ºå…·å¤‡å®¹ç¾èƒ½åŠ›çš„äº§å“çš„çŸ©é˜µ"><a href="#æ„å»ºå…·å¤‡å®¹ç¾èƒ½åŠ›çš„äº§å“çš„çŸ©é˜µ" class="headerlink" title="æ„å»ºå…·å¤‡å®¹ç¾èƒ½åŠ›çš„äº§å“çš„çŸ©é˜µ"></a>æ„å»ºå…·å¤‡å®¹ç¾èƒ½åŠ›çš„äº§å“çš„çŸ©é˜µ</h4><p>   æ­¤å¤„æ‰€è¿°çš„â€œç¾éš¾â€ï¼Œä¸»è¦æ˜¯æŒ‡Android Studioæˆ–è€…VSCodeè¿›è¡Œäº†breakingå¼çš„ç‰ˆæœ¬å‡çº§åï¼Œæ’ä»¶å› ä¸ºå…¼å®¹æ€§é—®é¢˜å¯¼è‡´è¿è¡Œå¤±è´¥æˆ–è€…è¿è¡Œå¼‚å¸¸ã€‚<br>   å½“å‘ç”Ÿæ­¤ç§â€œç¾éš¾â€åï¼Œä¸Šè¿°äº§å“çŸ©é˜µä¸­çš„<code>flr-cli</code>å¯ä»¥ä½œä¸º<code>flr-as-plugin</code>å’Œ<code>flr-vscode-extension</code>çš„â€œå¤‡èƒâ€ï¼Œå¸®åŠ©å¼€å‘è€…æ­£å¸¸å®Œæˆå¼€å‘ä»»åŠ¡ï¼Œé¡ºåˆ©è¿‡æ¸¡åˆ°æ’ä»¶æ–°ç‰ˆæœ¬çš„å‘å¸ƒã€‚</p>
<h3 id="äº§å“è¿è¥ç­–ç•¥"><a href="#äº§å“è¿è¥ç­–ç•¥" class="headerlink" title="äº§å“è¿è¥ç­–ç•¥"></a>äº§å“è¿è¥ç­–ç•¥</h3><p><code>Flr</code>çš„äº§å“è¿è¥ç­–ç•¥ä¸»è¦æ˜¯2ç‚¹ï¼š</p>
<ul>
<li><p>çªå‡º<code>Flr</code>çš„å…¨å¹³å°æ”¯æŒç‰¹æ€§ï¼Œå¼ºè°ƒæ”¯æŒâ€œAndroid Studioâ€ã€â€œVSCodeâ€ã€â€œå‘½ä»¤è¡Œâ€</p>
<p> æ³¨æ„ï¼Œæ­¤å¤„ä½¿ç”¨â€œå¹³å°â€ä»£æ›¿ä¸Šè¿°çš„â€œåœºæ™¯â€ï¼Œä¸€æ˜¯å› ä¸º<code>Flr</code>çš„ç›®æ ‡ç”¨æˆ·æ˜¯å¼€å‘è€…ï¼Œç›¸æ¯”â€œåœºæ™¯â€ï¼Œâ€œå¹³å°â€ä¸â€œå¼€å‘è€…â€å…·æœ‰æ›´æ·±çš„â€œäº²ç¼˜æ€§â€ï¼Œç®€å•æ¥è¯´å°±æ˜¯â€œå…¨å¹³å°â€æ¯”â€œå…¨åœºæ™¯â€æ›´å®¹æ˜“è·å¾—ç›®æ ‡ç”¨æˆ·çš„ç†è§£ï¼›äºŒæ˜¯å› ä¸ºåœ¨å­—çœ¼ä¸Šï¼Œâ€œå¹³å°â€è¿™ä¸ªè¯æ¯”â€œåœºæ™¯â€æ›´æœ‰â€œéœ‡æ’¼åŠ›â€ï¼Œç®€å•æ¥è¯´å°±æ˜¯æ˜¾å¾—â€œæ›´ç‰›é€¼â€ã€‚</p>
</li>
<li><p>çªå‡º<code>Flr</code>çš„å¥å£®æ€§ï¼Œå¼ºè°ƒæ”¯æŒå„ç§å¼‚å¸¸åœºæ™¯</p>
<p> ä¸è¿‡ï¼Œè¿™ä¸€ç‚¹ä¸»è¦ä½“ç°åœ¨<code>Flr</code>ç›¸å…³äº§å“çš„ç‰¹æ€§è¯´æ˜ä¸Šï¼Œè€Œä¸æ˜¯åœ¨æ—¥å¸¸å®£ä¼ ä¸Šï¼Œå› ä¸ºâ€œäº‹å®èƒœäºé›„è¾©â€â€”â€”åœ¨ç›®æ ‡ç”¨æˆ·å¤´è„‘åŸ‹ä¸‹è¿™ä¸ªç§å­åï¼Œç­‰ç›®æ ‡ç”¨æˆ·åœ¨äº‹å®ä¸­è¿›è¡Œå‘ç°å’Œè·å¾—è¯æ˜å³å¯ã€‚</p>
</li>
<li><p>å¯¹å¤–è¾“å‡ºFlrçš„æ ‡å‡†ï¼Œæ¯”å¦‚æ¨èçš„èµ„æºç»„ç»‡ç»“æ„</p>
</li>
</ul>
<h2 id="Flrçš„å¼€å‘è§‚"><a href="#Flrçš„å¼€å‘è§‚" class="headerlink" title="Flrçš„å¼€å‘è§‚"></a>Flrçš„å¼€å‘è§‚</h2><p>Flrçš„å¼€å‘è§‚ä¸»è¦ä½“ç°åœ¨å…¶æ‰€é‡‡ç”¨çš„å¼€å‘ç­–ç•¥ä¸Šï¼š</p>
<ul>
<li><p>æ„å»º<code>Flr</code>æ ¸å¿ƒé€»è¾‘é¡¹ç›®â€”â€”<a href="https://github.com/Fly-Mix/flr-core" target="_blank" rel="noopener">flr-core</a>ï¼Œä»¥ä¿è¯<code>flr-as-plugin</code>ã€<code>flr-vscode-extension</code>ã€<code>flr-cli</code>åœ¨æ ¸å¿ƒé€»è¾‘ä¸Šä¿æŒä¸€è‡´ï¼Œåœ¨è¾“å‡ºäº§ç‰©ä¸Šä¿æŒä¸€è‡´</p>
<blockquote>
<ul>
<li>â€œè¾“å‡ºäº§ç‰©â€åŒ…æ‹¬ï¼šæ–‡ä»¶è¾“å‡ºã€æ—¥å¿—è¾“å‡ºã€äº¤äº’è¾“å‡º</li>
<li>ç°é˜¶æ®µï¼Œä¿è¯â€œæ–‡ä»¶è¾“å‡ºâ€ä¸€è‡´æ˜¯ç¬¬ä¸€è¦æ±‚</li>
</ul>
</blockquote>
</li>
<li><p>æ„å»ºæµ‹è¯•ç”¨ä¾‹æ–‡æ¡£ï¼ˆè¯¦ç»†è§<code>flr-core</code>å„åˆ†æ”¯ç‰ˆæœ¬ä¸‹çš„<code>CLD/assets/flr-use-case.xmind</code>ï¼‰ï¼Œä»¥ä¿è¯<code>flr-as-plugin</code>ã€<code>flr-vscode-extension</code>ã€<code>flr-cli</code>çš„å¥å£®æ€§</p>
</li>
<li><p>ä»¥<code>flr-cli</code>çš„â€œæ–‡ä»¶è¾“å‡ºâ€ä½œä¸ºæµ‹è¯•ç»“æœåŸºå‡†ï¼Œä»¥æå‡<code>flr-as-plugin</code>ã€<code>flr-vscode-extension</code>çš„æµ‹è¯•é€Ÿåº¦å’Œè¿›ä¸€æ­¥æå‡è¿™äºŒè€…çš„å¥å£®æ€§</p>
</li>
<li><p><code>flr-cli</code>ä½œä¸ºæ–°ç‰¹æ€§çš„å®éªŒç”°ï¼Œåœ¨è®ºè¯æ–°ç‰¹æ€§çš„å¯è¡Œæ€§åï¼Œå†å¼•è¿›åˆ°<code>flr-as-plugin</code>ã€<code>flr-vscode-extension</code></p>
<blockquote>
<p><code>flr-cli</code>é‡‡ç”¨<code>Ruby</code>å¼€å‘ï¼Œå¯å¿«é€Ÿå®ç°æ–°ç‰¹æ€§ï¼Œä»¥å¯Ÿçœ‹ç‰¹æ€§æ•ˆæœ</p>
</blockquote>
</li>
</ul>
]]></content>
      <categories>
        <category>äººæ–‡</category>
      </categories>
      <tags>
        <tag>äººæ–‡</tag>
        <tag>2020</tag>
      </tags>
  </entry>
  <entry>
    <title>Flrï¼šä¸€ä¸ªå‡ºè‰²çš„Flutterèµ„æºç®¡ç†å·¥å…·</title>
    <url>/2020/Flr%EF%BC%9A%E4%B8%80%E4%B8%AA%E5%87%BA%E8%89%B2%E7%9A%84Flutter%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/readme/</url>
    <content><![CDATA[<p><img src="/2020/Flr%EF%BC%9A%E4%B8%80%E4%B8%AA%E5%87%BA%E8%89%B2%E7%9A%84Flutter%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/readme/flr.png" alt="Flr"></p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½œä¸ºä¸€åFlutterå¼€å‘è€…ï¼Œå¦‚æœä½ æ­£åœ¨çƒ¦æ¼å¦‚ä½•ç®€å•å¿«æ·åœ°åœ¨<code>pubspec.yaml</code>ä¸­ä¸ºå¤šå¼ å›¾ç‰‡ã€æ–‡æœ¬ã€å­—ä½“èµ„æºæ·»åŠ å£°æ˜ï¼Œå¦‚æœä½ æ­£åœ¨çƒ¦æ¼å¦‚ä½•ç®€å•å®‰å…¨åœ°åœ¨ä»£ç ä¸­å¼•ç”¨èµ„æºï¼Œé‚£ä¹ˆç°åœ¨ä½ å¯ä»¥å¾ˆç®€å•åœ°è§£å†³è¿™äº›é—®é¢˜äº†â€”â€”åªè¦ä½ ä½¿ç”¨äº†<code>Flr</code>ã€‚</p>
<h2 id="Flrç®€ä»‹"><a href="#Flrç®€ä»‹" class="headerlink" title="Flrç®€ä»‹"></a>Flrç®€ä»‹</h2><p><code>Flr</code>ï¼Œè¯»ä½œ<code>Flutter-R</code>ï¼Œæ˜¯ä¸€ä¸ªç”±ç½‘æ˜“ä¸¥é€‰æ™ºé€ å›¢é˜Ÿç ”å‘çš„ï¼Œç”¨äºç®¡ç†Flutterèµ„æºçš„å¼€å‘å·¥å…·ã€‚</p>
<p><code>Flr</code>å¯ä»¥å¸®åŠ©Flutterå¼€å‘è€…åœ¨ä¿®æ”¹é¡¹ç›®èµ„æºåï¼Œè‡ªåŠ¨ä¸ºèµ„æºæ·»åŠ å£°æ˜åˆ°<code>pubspec.yaml</code>ä»¥åŠç”Ÿæˆ<code>r.g.dart</code>æ–‡ä»¶ã€‚å€ŸåŠ©<code>r.g.dart</code>ï¼ŒFlutterå¼€å‘è€…å¯ä»¥åœ¨ä»£ç ä¸­é€šè¿‡èµ„æºIDå‡½æ•°çš„æ–¹å¼åº”ç”¨èµ„æºï¼Œä¾‹å¦‚ï¼š</p>
<a id="more"></a>

<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_r_demo/r.g.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// test_sameName.png</span></span><br><span class="line"><span class="keyword">var</span> normalImageWidget = Image(</span><br><span class="line">  width: <span class="number">200</span>,</span><br><span class="line">  height: <span class="number">120</span>,</span><br><span class="line">  image: R.image.test_sameName(),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// test_sameName.gif</span></span><br><span class="line"><span class="keyword">var</span> gifImageWidget = Image(</span><br><span class="line">  image: R.mage.test_sameName_gif(),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// test.svg</span></span><br><span class="line"><span class="keyword">var</span> svgImageWidget = Image(</span><br><span class="line">  width: <span class="number">100</span>,</span><br><span class="line">  height: <span class="number">100</span>,</span><br><span class="line">  image: R.svg.test(width: <span class="number">100</span>, height: <span class="number">100</span>),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// test.json</span></span><br><span class="line"><span class="keyword">var</span> jsonString = <span class="keyword">await</span> R.text.test_json();</span><br><span class="line"></span><br><span class="line"><span class="comment">// test.yaml</span></span><br><span class="line"><span class="keyword">var</span> yamlString = <span class="keyword">await</span> R.text.test_yaml();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Amiri Font Style</span></span><br><span class="line"><span class="keyword">var</span> amiriTextStyle = TextStyle(fontFamily: R.fontFamily.amiri);</span><br></pre></td></tr></table></figure>

<h2 id="Flrç‰¹æ€§"><a href="#Flrç‰¹æ€§" class="headerlink" title="Flrç‰¹æ€§"></a>Flrç‰¹æ€§</h2><p>æˆªæ­¢åˆ°ç›®å‰ï¼Œ<code>Flr</code>å·²ç»æ”¯æŒä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>æ”¯æŒâ€œè‡ªåŠ¨æ·»åŠ èµ„æºå£°æ˜åˆ° <code>pubspec.yaml</code> å’Œè‡ªåŠ¨ç”Ÿæˆ<code>r.g.dart</code>æ–‡ä»¶â€çš„è‡ªåŠ¨åŒ–æœåŠ¡ï¼Œè¯¥æœåŠ¡å¯ä»¥é€šè¿‡æ‰‹åŠ¨è§¦å‘ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç›‘æ§èµ„æºå˜åŒ–è§¦å‘</li>
<li>æ”¯æŒ<code>R.x</code>ï¼ˆå¦‚ <code>R.image.test()</code>ï¼Œ<code>R.svg.test(width: 100, height: 100)</code>ï¼Œ<code>R.txt.test_json()</code>ï¼‰çš„ä»£ç ç»“æ„</li>
<li>æ”¯æŒå¤„ç†å›¾ç‰‡èµ„æºï¼ˆ <code>.png</code>ã€ <code>.jpg</code>ã€ <code>.jpeg</code>ã€<code>.gif</code>ã€ <code>.webp</code>ã€<code>.icon</code>ã€<code>.bmp</code>ã€<code>.wbmp</code>ã€<code>.svg</code> ï¼‰</li>
<li>æ”¯æŒå¤„ç†æ–‡æœ¬èµ„æºï¼ˆ<code>.txt</code>ã€<code>.json</code>ã€<code>.yaml</code>ã€<code>.xml</code>ï¼‰</li>
<li>æ”¯æŒå¤„ç†å­—ä½“èµ„æºï¼ˆ<code>.ttf</code>ã€<code>.otf</code>ã€<code>.ttc</code>ï¼‰</li>
<li>æ”¯æŒå¤„ç†<a href="https://flutter.dev/docs/development/ui/assets-and-images#asset-variants" target="_blank" rel="noopener external nofollow noreferrer">å›¾ç‰‡èµ„æºå˜ä½“</a></li>
<li>æ”¯æŒå¤„ç†å¸¦æœ‰åå‘³é“çš„æ–‡ä»¶åçš„èµ„æºï¼š<ul>
<li>æ–‡ä»¶åå¸¦æœ‰éæ³•å­—ç¬¦ï¼Œå¦‚ç©ºæ ¼ã€<code>~</code>ã€<code>#</code> ç­‰ï¼ˆéæ³•å­—ç¬¦æ˜¯æŒ‡ä¸åœ¨åˆæ³•å­—ç¬¦é›†åˆå†…çš„å­—ç¬¦ï¼›åˆæ³•å­—ç¬¦é›†åˆçš„å­—ç¬¦æœ‰ï¼š<code>0-9</code>ã€<code>A-Z</code>ã€ <code>a-z</code>ã€ <code>_</code>ã€<code>+</code>ã€<code>-</code>ã€<code>.</code>ã€<code>Â·</code>ã€ <code>!</code>ã€ <code>@</code>ã€ <code>&amp;</code>ã€<code>$</code>ã€<code>ï¿¥</code>ï¼‰</li>
<li>æ–‡ä»¶åä»¥æ•°å­—æˆ–è€…<code>_</code>æˆ–è€…<code>$</code>å­—ç¬¦å¼€å¤´</li>
</ul>
</li>
<li>æ”¯æŒå¤„ç†æ–‡ä»¶åç›¸åŒä½†è·¯å¾„ä¸åŒçš„èµ„æº</li>
</ul>
<h2 id="Flrå·¥å…·"><a href="#Flrå·¥å…·" class="headerlink" title="Flrå·¥å…·"></a>Flrå·¥å…·</h2><p>ä¸ºäº†æ›´å¥½åœ°æ»¡è¶³Flutterå¼€å‘è€…çš„ä½¿ç”¨éœ€æ±‚ï¼Œæˆ‘ä»¬æä¾›äº†ä»¥ä¸‹3ä¸ªç‰ˆæœ¬çš„<code>Flr</code>å·¥å…·ï¼š</p>
<ol>
<li><p><strong>Flr Android Studio Plugin</strong> ç‰ˆæœ¬</p>
<ul>
<li><p>GitHub:  <a href="https://github.com/Fly-Mix/flr-as-plugin" target="_blank" rel="noopener">https://github.com/Fly-Mix/flr-as-plugin</a></p>
</li>
<li><p>Plugin Homepage: <a href="https://plugins.jetbrains.com/plugin/13789-flr" target="_blank" rel="noopener external nofollow noreferrer">https://plugins.jetbrains.com/plugin/13789-flr</a></p>
</li>
<li><p>flr-as-plugin Usage Example Gif: </p>
<p><img src="/2020/Flr%EF%BC%9A%E4%B8%80%E4%B8%AA%E5%87%BA%E8%89%B2%E7%9A%84Flutter%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/readme/flr_as_plugin-usage-example.gif" alt="flr_as_plugin-usage-example"></p>
</li>
</ul>
</li>
<li><p><strong>Flr CLI</strong> ç‰ˆæœ¬</p>
<ul>
<li><p>GitHub: <a href="https://github.com/Fly-Mix/flr-cli" target="_blank" rel="noopener">https://github.com/Fly-Mix/flr-cli</a></p>
</li>
<li><p>CLI Homepage: <a href="https://rubygems.org/gems/flr" target="_blank" rel="noopener external nofollow noreferrer">https://rubygems.org/gems/flr</a></p>
</li>
<li><p>flr-cli Usage Example Gif:</p>
<p><img src="/2020/Flr%EF%BC%9A%E4%B8%80%E4%B8%AA%E5%87%BA%E8%89%B2%E7%9A%84Flutter%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/readme/flr_cli-usage-example.gif" alt="flr_cli-usage-example"></p>
</li>
</ul>
</li>
<li><p><strong>Flr VSCode Extension</strong> ç‰ˆæœ¬</p>
<ul>
<li><p>GitHub: <a href="https://github.com/Fly-Mix/flr-vscode-extension" target="_blank" rel="noopener">https://github.com/Fly-Mix/flr-vscode-extension</a></p>
</li>
<li><p>Extension Homepage: <a href="https://marketplace.visualstudio.com/items?itemName=LincolnLaw.flr" target="_blank" rel="noopener external nofollow noreferrer">https://marketplace.visualstudio.com/items?itemName=LincolnLaw.flr</a></p>
</li>
<li><p>flr-vscode-extension Usage Example:</p>
<p><img src="/2020/Flr%EF%BC%9A%E4%B8%80%E4%B8%AA%E5%87%BA%E8%89%B2%E7%9A%84Flutter%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/readme/flr_vscode_extension-usage.jpg" alt="flr_vscode_extension-usage"></p>
</li>
</ul>
</li>
</ol>
<p>æœ€åï¼Œå¸Œæœ›è¯¥å·¥å…·å¯ä»¥å¸®åŠ©å„ä¸ªFlutterå¼€å‘è€…æå‡Flutterçš„å¼€å‘æ•ˆç‡ã€‚ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿é€šè¿‡GitHubæˆ–è€…é‚®ä»¶åé¦ˆç»™æˆ‘ä»¬ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>å¤§å‰ç«¯</tag>
        <tag>Flutter</tag>
        <tag>2020</tag>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Futureå’ŒPromiseçš„åŒºåˆ«</title>
    <url>/2020/Future%E5%92%8CPromise%E7%9A%84%E5%8C%BA%E5%88%AB/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Futureæ¨¡å‹å’ŒPromiseæ¨¡å‹æ˜¯å¹¶å‘ç¼–ç¨‹é¢†åŸŸä¸­çš„ä¸¤ç§ç›¸è¿‘çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼ŒFutureå’ŒPromiseåˆ™æ˜¯å¹¶å‘ç¼–ç¨‹è¯­è¨€åˆ†åˆ«å¯¹Futureæ¨¡å‹å’ŒPromiseæ¨¡å‹è¿›è¡Œå®ç°åçš„äº§ç‰©ã€‚</p>
<p>Futureå’ŒPromiseä¹‹é—´ï¼Œæ—¢æœ‰ç›¸åŒä¹‹å¤„ï¼Œä¹Ÿæœ‰ä¸åŒä¹‹å¤„ã€‚</p>
<a id="more"></a>

<h2 id="Futureå’ŒPromiseçš„ç›¸åŒç‚¹"><a href="#Futureå’ŒPromiseçš„ç›¸åŒç‚¹" class="headerlink" title="Futureå’ŒPromiseçš„ç›¸åŒç‚¹"></a>Futureå’ŒPromiseçš„ç›¸åŒç‚¹</h2><p>Futureå’ŒPromiseçš„è®¾è®¡ç†å¿µæ˜¯ä¸€è‡´çš„ï¼šä½œä¸ºä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡çš„è¿è¡Œç»“æœçš„å ä½ç¬¦å¯¹è±¡ä¾›å¼€å‘è€…ä½¿ç”¨ã€‚</p>
<blockquote>
<p>A future or promise represents the future value of an asynchronous task.</p>
</blockquote>
<p>Futureå’ŒPromiseç»™å¼€å‘è€…å¸¦æ¥çš„å¥½å¤„æ˜¯ç›¸åŒçš„ï¼š</p>
<ul>
<li><p>ç®€åŒ–äº†å¼‚æ­¥ç¼–ç¨‹ï¼Œè®©å¼€å‘è€…â€œæ‘†è„±â€å¯¹çº¿ç¨‹çš„ä¾èµ–å’Œå…³æ³¨ï¼Œåªä¸“æ³¨äºå¼‚æ­¥ä»»åŠ¡ï¼ˆå¼‚æ­¥ä¸šåŠ¡ä»£ç ï¼‰çš„ç¼–ç å³å¯</p>
<blockquote>
<ul>
<li>ã€è®©å¼€å‘è€…â€œæ‘†è„±â€å¯¹çº¿ç¨‹çš„ä¾èµ–å’Œå…³æ³¨ã€‘è¿™ä¸ªæ˜¯ç›¸å¯¹ä¼ ç»Ÿçš„â€œå¤šçº¿ç¨‹æ¨¡å‹â€è€Œè¨€ã€‚åœ¨ä¼ ç»Ÿçš„â€œå¤šçº¿ç¨‹æ¨¡å‹â€ä¸­ï¼Œç¼–å†™å¼‚æ­¥ä¸šåŠ¡ä»£ç ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹ï¼Œè‹¥éœ€è¦é«˜æ•ˆçš„å¹¶å‘æ€§èƒ½ï¼Œåˆ™è¿˜éœ€è¦å¼€å‘è€…é€šè¿‡çº¿ç¨‹æ± ç­‰æ‰‹æ®µæ‰‹åŠ¨ç®¡ç†çº¿ç¨‹</li>
<li>äº‹å®ä¸Šï¼Œè¿›è¡Œäº†é«˜çº§æŠ½è±¡çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹éƒ½æœ‰è¿™ç§å¥½å¤„ï¼Œæ¯”å¦‚Objective-Cä¸­çš„GCDã€NSOperationã€‚</li>
</ul>
</blockquote>
</li>
<li><p>æä¾›äº†æ›´ä¼˜é›…ã€å¥½ç”¨çš„å¼‚æ­¥ç¼–ç¨‹ï¼Œæ¯”å¦‚ï¼šå¼‚æ­¥ä»£ç åŒæ­¥åŒ–ï¼Œé“¾å¼è°ƒç”¨ï¼Œä»»åŠ¡ç»„åˆï¼Œæ‘†è„±å›è°ƒåœ°ç‹±ç­‰</p>
</li>
</ul>
<h2 id="Futureå’ŒPromiseçš„ä¸åŒç‚¹"><a href="#Futureå’ŒPromiseçš„ä¸åŒç‚¹" class="headerlink" title="Futureå’ŒPromiseçš„ä¸åŒç‚¹"></a>Futureå’ŒPromiseçš„ä¸åŒç‚¹</h2><p>Futureå’ŒPromiseçš„åŒºåˆ«æ˜¯ï¼š</p>
<ul>
<li><p>çŠ¶æ€ä¸ä¸€æ ·</p>
<p>  Futureçš„çŠ¶æ€æœ‰2ç§ï¼š</p>
<ul>
<li><p>uncompletedï¼šæœªå®ŒæˆçŠ¶æ€ï¼ŒFutureçš„åˆå§‹åŒ–çŠ¶æ€</p>
</li>
<li><p>completedï¼šå®ŒæˆçŠ¶æ€ï¼Œæœ‰å¯èƒ½æ“ä½œæˆåŠŸä¹Ÿå¯èƒ½æ“ä½œå¤±è´¥</p>
<blockquote>
<p>å…¶ä¸­ï¼Œcompletedæ ¹æ®ç»“æœåˆåˆ†ä¸º2ç§ï¼š</p>
<ul>
<li>completing with a value</li>
<li>completing with an error</li>
</ul>
</blockquote>
<p>Promiseçš„çŠ¶æ€æœ‰3ç§ï¼š</p>
</li>
<li><p>pendingï¼šå¾…å®šçŠ¶æ€ï¼ŒPromiseçš„åˆå§‹åŒ–çŠ¶æ€</p>
</li>
<li><p>fulfilledï¼šæ»¡è¶³çŠ¶æ€ï¼Œæ„å‘³ç€æ“ä½œæˆåŠŸ</p>
</li>
<li><p>rejectedï¼šæ‹’ç»çŠ¶æ€ï¼Œæ„å‘³ç€æ“ä½œå¤±è´¥</p>
</li>
</ul>
</li>
<li><p>çŠ¶æ€ä¿®æ”¹æœºåˆ¶ä¸ä¸€æ ·</p>
<ul>
<li><p>Futureçš„çŠ¶æ€ç”±å†…éƒ¨è‡ªè¡Œç®¡ç†ï¼šå½“å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆæˆ–è€…æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºé”™è¯¯ï¼Œä¸€ä¸ªFutureå°±è‡ªåŠ¨ä»uncompletedçŠ¶æ€å˜ä¸ºcompletedçŠ¶æ€</p>
</li>
<li><p>Promiseçš„çŠ¶æ€ç”±å¤–éƒ¨å¼€å‘è€…æ‰‹åŠ¨ç®¡ç†ï¼šå¼€å‘è€…æ ¹æ®æ§åˆ¶æµé€»è¾‘ï¼Œè°ƒç”¨æŒ‡å®šå‡½æ•°ï¼ˆ<code>fulfill</code>ã€<code>reject</code>ï¼‰æ¥æ˜¾å¼ä¿®æ”¹çš„ä¸€ä¸ªPromiseçš„çŠ¶æ€</p>
<blockquote>
<ul>
<li><code>fulfill</code>å‡½æ•°çš„ä½œç”¨æ˜¯ï¼šä¿®æ”¹Promiseçš„çŠ¶æ€ä¸ºfulfilledï¼ŒåŒæ—¶è¿”å›ç»“æœå€¼</li>
<li><code>reject</code>å‡½æ•°çš„ä½œç”¨æ˜¯ï¼šä¿®æ”¹Promiseçš„çŠ¶æ€ä¸ºrejectedï¼ŒåŒæ—¶è¿”å›é”™è¯¯ä¿¡æ¯<br>åœ¨æ”¯æŒPromiseçš„ä¸åŒç¼–ç¨‹è¯­è¨€ä¸­ï¼Œ<code>fulfill</code>ã€<code>reject</code>å‡½æ•°å¯èƒ½æœ‰å…¶ä»–åç§°ï¼Œæ¯”å¦‚åœ¨JavaScriptä¸­ï¼ŒäºŒè€…å¯¹åº”å«<code>resolve</code>å’Œ<code>reject</code></li>
</ul>
</blockquote>
</li>
</ul>
</li>
<li><p>ç»“æœè¿”å›æœºåˆ¶ä¸ä¸€æ ·</p>
<ul>
<li><p>Futureé€šè¿‡returnæ–¹å¼è¿”å›ç»“æœ</p>
</li>
<li><p>Promiseé€šè¿‡æŒ‡å®šå‡½æ•°ï¼ˆ<code>fulfill</code>ã€<code>reject</code>æ¥å£ï¼‰è¿”å›</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>ä»çŠ¶æ€ä¿®æ”¹æœºåˆ¶å’Œç»“æœè¿”å›æœºåˆ¶è¿™2ç‚¹æ¥è¯´ï¼Œå¯ä»¥è®¤ä¸ºFutureå’ŒPromiseä¹‹é—´è¿˜æœ‰ä¸€ä¸ªåŒºåˆ«ï¼šè¯»å†™æƒé™ä¸ä¸€æ ·â€”â€”Futureåªè¯»ï¼ŒPromiseå¯å†™ã€‚å…·ä½“åœ°è¯´ï¼Œç›¸å¯¹Futureï¼ŒPromiseå…è®¸ç”¨æˆ·ä¿®æ”¹çŠ¶æ€å’Œè¿”å›ç»“æœã€‚</p>
</blockquote>
<h2 id="Futureå’ŒPromiseçš„ç¤ºä¾‹"><a href="#Futureå’ŒPromiseçš„ç¤ºä¾‹" class="headerlink" title="Futureå’ŒPromiseçš„ç¤ºä¾‹"></a>Futureå’ŒPromiseçš„ç¤ºä¾‹</h2><p>ä¸‹é¢æä¾›äº†Futureç¤ºä¾‹å’ŒPromiseç¤ºä¾‹ï¼Œå¸®åŠ©ç†è§£ä¸Šè¿°æ‰€è®²çš„äºŒè€…çš„ä¸åŒç‚¹ï¼š</p>
<blockquote>
<ul>
<li>Futureç¤ºä¾‹ä½¿ç”¨Dartç¼–å†™</li>
<li>Promiseç¤ºä¾‹ä½¿ç”¨JavaScriptç¼–å†™</li>
<li>åœ¨çº¿è¿è¡Œç¤ºä¾‹ä»£ç ï¼š<a href="https://repl.it" target="_blank" rel="noopener external nofollow noreferrer">https://repl.it</a>ï¼ˆ<code>repl.it</code>æ˜¯ä¸€ä¸ªä¸ºå„ç§ç¼–ç¨‹è¯­è¨€æä¾›çº¿ä¸Šç¼–ç¨‹ç¯å¢ƒçš„ç½‘ç«™ï¼‰</li>
</ul>
</blockquote>
<ul>
<li><p>Futureç¤ºä¾‹ï¼ˆby Dartï¼‰</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Future&lt;<span class="built_in">String</span>&gt; sendEcho(text) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>), () &#123;</span><br><span class="line">    <span class="keyword">if</span> (text == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="comment">// the Future becomes completed status after throw(error)</span></span><br><span class="line">      <span class="keyword">throw</span> <span class="string">"text can't be null"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (text == <span class="string">""</span>) &#123;</span><br><span class="line">      <span class="comment">// the Future becomes completed status after return</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Future.error(<span class="string">"text can't be empty string"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// the Future becomes completed status after return</span></span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">echo(text) &#123;</span><br><span class="line">  sendEcho(text).then((value) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"get echo: <span class="subst">$value</span>"</span>);</span><br><span class="line">  &#125;).catchError((error) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"get error: <span class="subst">$error</span>"</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"echo now ..."</span>);</span><br><span class="line">  echo(<span class="string">"hello"</span>);</span><br><span class="line">  echo(<span class="string">""</span>);</span><br><span class="line">  echo(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo now ...</span><br><span class="line">get echo: hello</span><br><span class="line">get error: text can&#39;t be empty string</span><br><span class="line">get error: text can&#39;t be null</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Promiseç¤ºä¾‹ï¼ˆby JavaScriptï¼‰</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendEcho</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (text == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// the Promise is still pending status after throw(error)</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"text can't be null"</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (text == <span class="string">""</span>) &#123;</span><br><span class="line">        <span class="comment">// the Promise becomes rejected status after reject(reason)</span></span><br><span class="line">        reject(<span class="string">"text can't be empty string"</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// the Promise becomes fulfilled status after resolve(value)</span></span><br><span class="line">      resolve(text)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">echo</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  sendEcho(text).then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"get echo: "</span>, value)</span><br><span class="line">  &#125;).catch(</span><br><span class="line">    (reason) =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"get error: "</span>, reason);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"echo now ..."</span>)</span><br><span class="line">echo(<span class="string">"hello"</span>)</span><br><span class="line">echo(<span class="string">""</span>)</span><br><span class="line">echo(<span class="literal">null</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo now ...</span><br><span class="line">get echo: hello</span><br><span class="line">get error: text can&#39;t be empty string</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://en.wikipedia.org/wiki/Futures_and_promises" target="_blank" rel="noopener external nofollow noreferrer">WiKi-ã€ŠFutures and promisesã€‹</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1135972" target="_blank" rel="noopener external nofollow noreferrer">ã€Šæ¼«è°ˆå¹¶å‘ç¼–ç¨‹ï¼šFutureæ¨¡å‹ï¼ˆJavaã€Clojureã€Scalaå¤šè¯­è¨€è§’åº¦åˆ†æï¼‰ã€‹</a></li>
<li><a href="http://dist-prog-book.com/chapter/2/futures.html" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠFutures and Promisesã€‹</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠMDN web docs: Promiseã€‹</a></li>
<li><a href="https://blog.makeex.com/2016/04/30/best-romantic-abstract-promise-and-future/" target="_blank" rel="noopener external nofollow noreferrer">ã€Šæœ€æµªæ¼«çš„æŠ½è±¡ Promise &amp; Futureã€‹</a></li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2020</tag>
        <tag>åŸºç¡€ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>OOPï¼šæ–¹æ³•ï¼ˆmethodï¼‰å’Œå‡½æ•°ï¼ˆfunctionï¼‰çš„åŒºåˆ«</title>
    <url>/2020/OOP%EF%BC%9A%E6%96%B9%E6%B3%95%EF%BC%88method%EF%BC%89%E5%92%8C%E5%87%BD%E6%95%B0%EF%BC%88function%EF%BC%89%E7%9A%84%E5%8C%BA%E5%88%AB/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨é¢å‘å¯¹è±¡é¢†åŸŸä¸­ï¼Œæ–¹æ³•ï¼ˆmethodï¼‰å’Œå‡½æ•°ï¼ˆfunctionï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«å’Œå…³è”å‘¢ï¼Ÿ</p>
<h2 id="æ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ«"><a href="#æ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ«" class="headerlink" title="æ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ«"></a>æ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ«</h2><p>åœ¨é¢å‘å¯¹è±¡é¢†åŸŸä¸­ï¼Œæ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ«æ˜¯ï¼š</p>
<ol>
<li><p>å®šä¹‰ä¸ä¸€æ ·</p>
<ul>
<li>å‡½æ•°æ˜¯æŒ‡ä¸€æ®µå¯ä»¥ç›´æ¥è¢«å…¶åç§°è°ƒç”¨çš„ä»£ç å—</li>
<li>æ–¹æ³•æŒ‡çš„æ˜¯ä¸€æ®µè¢«å®ƒå…³è”çš„å¯¹è±¡é€šè¿‡å®ƒçš„åå­—è°ƒç”¨çš„ä»£ç å—</li>
</ul>
</li>
<li><p>ä¸å¯¹è±¡çš„å…³ç³»ä¸ä¸€æ ·</p>
<ul>
<li>å‡½æ•°ç‹¬ç«‹äºå¯¹è±¡</li>
<li>æ–¹æ³•ä¾é™„åœ¨å¯¹è±¡ä¹‹ä¸Šï¼Œå¯ä»¥åœ¨ä»£ç å—å†…ç›´æ¥å¤„ç†å¯¹è±¡ä¸Šçš„æˆå‘˜æ•°æ®</li>
</ul>
</li>
<li><p>ä¼ é€’çš„æ•°æ®ï¼ˆæ¯”å¦‚å‚æ•°ï¼‰ä¸ä¸€æ ·</p>
<ul>
<li>ä¼ é€’ç»™å‡½æ•°çš„æ•°æ®éƒ½æ˜¯æ˜æ–‡æ˜ç¡®çš„</li>
<li>ä¼ é€’ç»™æ–¹æ³•çš„æ•°æ®æœ‰éƒ¨åˆ†æ˜¯éšå¼çš„ï¼Œå…¶ä¸­éšå¼éƒ¨åˆ†çš„æ•°æ®ä¸»è¦æ˜¯è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡å®ä¾‹</li>
</ul>
</li>
<li><p>å¯è®¿é—®èŒƒå›´ä¸ä¸€æ ·</p>
<ul>
<li>ä¸€èˆ¬æ¥è¯´ï¼ˆåœ¨ä¸è€ƒè™‘moduleã€packageç­‰ä½œç”¨åŸŸçš„è®¾è®¡æƒ…å†µä¸‹ï¼‰ï¼Œå‡½æ•°çš„å¯è®¿é—®èŒƒå›´æ˜¯å…¨å±€æ€§çš„ï¼Œå³å¯ä»¥åœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹è®¿é—®åˆ°</li>
<li>æ–¹æ³•çš„å¯è®¿é—®èŒƒå›´ç”±å…¶è®¿é—®ä¿®é¥°ç¬¦å†³å®šï¼ŒåŸºæœ¬ä¸Šå…¶èŒƒå›´éƒ½å±€é™åœ¨æ‰€ä¾èµ–çš„å¯¹è±¡å†…</li>
</ul>
</li>
</ol>
<a id="more"></a>

<h2 id="æ–¹æ³•å’Œå‡½æ•°çš„å…³è”"><a href="#æ–¹æ³•å’Œå‡½æ•°çš„å…³è”" class="headerlink" title="æ–¹æ³•å’Œå‡½æ•°çš„å…³è”"></a>æ–¹æ³•å’Œå‡½æ•°çš„å…³è”</h2><p>åœ¨é¢å‘å¯¹è±¡é¢†åŸŸä¸­ï¼Œæ–¹æ³•å’Œå‡½æ•°çš„å…³è”æ˜¯ï¼šåœ¨æ¦‚å¿µä¸Šï¼Œæ–¹æ³•å¯ç®€å•è§†ä½œå‡½æ•°çš„ç‰¹ä¾‹â€”â€”æ–¹æ³•å°±æ˜¯å¯¹è±¡çš„å‡½æ•°ã€‚</p>
<h2 id="C-æ ‡å‡†ä¸ºä½•æ²¡æœ‰ä½¿ç”¨â€œæ–¹æ³•â€è€Œæ˜¯ä½¿ç”¨â€œæˆå‘˜å‡½æ•°â€"><a href="#C-æ ‡å‡†ä¸ºä½•æ²¡æœ‰ä½¿ç”¨â€œæ–¹æ³•â€è€Œæ˜¯ä½¿ç”¨â€œæˆå‘˜å‡½æ•°â€" class="headerlink" title="C++æ ‡å‡†ä¸ºä½•æ²¡æœ‰ä½¿ç”¨â€œæ–¹æ³•â€è€Œæ˜¯ä½¿ç”¨â€œæˆå‘˜å‡½æ•°â€"></a>C++æ ‡å‡†ä¸ºä½•æ²¡æœ‰ä½¿ç”¨â€œæ–¹æ³•â€è€Œæ˜¯ä½¿ç”¨â€œæˆå‘˜å‡½æ•°â€</h2><p>C++æ ‡å‡†ä¸ºä½•æ²¡æœ‰ä½¿ç”¨â€œæ–¹æ³•â€è¿™ä¸ªæœ¯è¯­è€Œæ˜¯é€‰æ‹©ä½¿ç”¨äº†â€œæˆå‘˜å‡½æ•°â€è¿™ä¸ªæœ¯è¯­å‘¢ï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜æ²¡æœ‰æ­£å¼çš„ã€å®˜æ–¹çš„ç­”æ¡ˆã€‚æˆ‘çš„ä¸ªäººç†è§£åˆ™æ˜¯ï¼š</p>
<ul>
<li><p>è¿™å¯èƒ½å’Œç¼–ç¨‹è¯­è¨€è®¾è®¡è§‚ç›¸å…³ï¼šå¯¹äºC++<br>ä½œè€…æ¥è¯´ï¼Œé‡‡ç”¨â€œæˆå‘˜å‡½æ•°â€å¯ä»¥å‡å°‘ä¸€ä¸ªæœ¯è¯­æ¦‚å¿µï¼Œé™ä½å¤æ‚æ€§</p>
</li>
<li><p>è¿™ä¹Ÿå¯èƒ½å’Œç¼–ç¨‹è¯­è¨€çš„åº•å±‚å®ç°çš„è®¾è®¡ç›¸å…³ï¼šC++ çš„ä¸€ä¸ªå…³é”®ç›®æ ‡æ˜¯å°½é‡åœ°èŠ‚çœé¢å¤–å¼€é”€ï¼Œç‰¹åˆ«æ˜¯å†…å­˜çš„å¼€é”€ï¼Œä¸ºæ­¤ï¼Œåœ¨ C++ ä»£ç å’Œç¡¬ä»¶ä¹‹é—´ï¼ŒC++ æ²¡æœ‰åšé¢å¤–çš„æŠ½è±¡ã€è™šæ‹Ÿæˆ–è€…å…¶ä»–çš„æ•°å­¦æ¨¡å‹ï¼Œè€Œæ˜¯ç›´æ¥æŠŠåŸºæœ¬ç±»å‹ï¼ˆchar, int, double ç­‰ï¼‰æ˜ å°„åˆ°å†…å­˜ä¸­çš„å®ä½“â€”â€”æ¯”å¦‚å­—èŠ‚ï¼ˆByteï¼‰ã€å­—ï¼ˆWordï¼‰ï¼ŒæŠŠæœ‰ç±»å‹çš„å¯¹è±¡æ˜ å°„åˆ°å†…å­˜ä¸­ä¸€å—è¿ç»­ç©ºé—´å†…ã€‚åœ¨å¤„ç†ç±»çš„æ–¹æ³•ï¼ˆæ­¤å¤„ä½¿ç”¨é¢å‘å¯¹è±¡æœ¯è¯­ï¼‰æ—¶ï¼Œå¹¶æ²¡æœ‰åšé¢å¤–æŠ½è±¡ï¼Œè€Œæ˜¯å’Œå¤„ç†æ™®é€šå‡½æ•°ä¸€æ ·ï¼šåšç›´æ¥çš„å†…å­˜æ˜ å°„ï¼ˆåœ¨å†…å­˜ä¸Šéƒ½æ˜¯ä¸€æ®µè¿ç»­çš„æŒ‡ä»¤ï¼‰ã€‚é‚£ä¹ˆï¼Œåœ¨åº•å±‚å®ç°è¿™ä¸ªå±‚é¢ä¸Šï¼Œä»¥åŠæ²¡æœ‰åšé¢å¤–çš„æŠ½è±¡ã€è™šæ‹Ÿçš„æƒ…å†µä¸‹ï¼Œç±»çš„æ–¹æ³•å’Œæ™®é€šå‡½æ•°æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œä½¿ç”¨â€œæˆå‘˜å‡½æ•°â€çš„æœ¯è¯­ä¼¼ä¹ä¼˜äºâ€œæ–¹æ³•â€è¿™ä¸ªæœ¯è¯­äº†ã€‚</p>
<blockquote>
<p>å…³äºC++ çš„ç±»çš„ä¸€ä¸ªå¾®å¦™é—®é¢˜ï¼š</p>
<p>ä¸€ä¸ªå¸¸è§çš„æ··æ·†å…¶å®åªæ˜¯ä¸€ä¸ªå¾®å¦™çš„æœ¯è¯­é—®é¢˜ï¼šç”±äºå®ƒçš„æ¼”åŒ–æ¥è‡ªCï¼Œåœ¨C++ ä¸­çš„æœ¯è¯­å¯¹è±¡å’ŒCè¯­è¨€ä¸€æ ·æ˜¯æ„å‘³ç€å­˜å‚¨å™¨åŒºåŸŸï¼Œè€Œä¸æ˜¯ç±»çš„å®ä½“ï¼Œåœ¨å…¶å®ƒç»å¤§å¤šæ•°çš„é¢å‘å¯¹è±¡è¯­è¨€ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨Cå’ŒC++ä¸­ï¼Œè¯­å¥int i;å®šä¹‰ä¸€ä¸ªintç±»å‹çš„å¯¹è±¡ï¼Œè¿™å°±æ˜¯å˜é‡çš„å€¼iå°†åœ¨æŒ‡æ´¾æ—¶ï¼Œæ‰€å­˜å…¥çš„å­˜å‚¨å™¨åŒºåŸŸã€‚</p>
<p>æºè‡ªï¼š<a href="https://zh.wikipedia.org/wiki/C%2B%2B#C++ä¸­çš„ç‰¹è‰²" target="_blank" rel="noopener external nofollow noreferrer">ç»´åŸº -ã€ŠC++ã€‹</a></p>
</blockquote>
</li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://stackoverflow.com/questions/155609/whats-the-difference-between-a-method-and-a-function?page=1&tab=votes#tab-top" target="_blank" rel="noopener">stackoverflow -ã€ŠWhatâ€™s the difference between a method and a function?ã€‹</a></li>
<li><a href="https://blog.csdn.net/notsaltedfish/article/details/75174556" target="_blank" rel="noopener external nofollow noreferrer">ã€Šæ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ«ã€‹</a></li>
<li><a href="https://www.cnblogs.com/wancy86/p/7271850.html" target="_blank" rel="noopener external nofollow noreferrer">ã€Šæ–¹æ³•ï¼ˆmethodï¼‰å’Œå‡½æ•°ï¼ˆfunctionï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿã€‹</a></li>
<li><a href="https://zh.wikipedia.org/wiki/C%2B%2B#C++ä¸­çš„ç‰¹è‰²" target="_blank" rel="noopener external nofollow noreferrer">ç»´åŸº -ã€ŠC++ã€‹</a></li>
<li><a href="https://liam.page/2017/04/09/Foundations-of-Cpp/" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠC++ çš„å‡ ä¸ªåŸºæœ¬åŸç†å’ŒæŠ€æœ¯ã€‹</a></li>
<li><a href="http://cs.ioc.ee/etaps12/invited/stroustrup-slides.pdf" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠFoundations of C++ï¼ˆPPTç‰ˆæœ¬ï¼‰ã€‹</a></li>
<li><a href="http://www.stroustrup.com/ETAPS-corrected-draft.pdf" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠFoundations of C++ï¼ˆè®ºæ–‡ç‰ˆæœ¬ï¼‰ã€‹</a></li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>2020</tag>
        <tag>åŸºç¡€ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>Objective-Cçš„ä¸€é“é¢˜ï¼š[self class] ä¸ [super class]</title>
    <url>/2020/Objective-C%E7%9A%84%E4%B8%80%E9%81%93%E9%A2%98%EF%BC%9A%5Bself%20class%5D%20%E4%B8%8E%20%5Bsuper%20class%5D/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¿™æ˜¯ä¸€é“ä»æ­¤ç¯‡åšå®¢<a href="https://halfrost.com/objc_runtime_isa_class/" target="_blank" rel="noopener external nofollow noreferrer">ã€Šç¥ç»ç—…é™¢ Objective-C Runtime å…¥é™¢ç¬¬ä¸€å¤©â€”â€” isa å’Œ Classã€‹</a>çœ‹åˆ°çš„é¢˜ç›®ï¼š</p>
<blockquote>
<p>é—®ï¼šä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ?</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@implementation Son : Father</span><br><span class="line">- (id)init</span><br><span class="line">&#123;</span><br><span class="line">    self &#x3D; [super init];</span><br><span class="line">    if (self)</span><br><span class="line">    &#123;</span><br><span class="line">        NSLog(@&quot;%@&quot;, NSStringFromClass([self class]));</span><br><span class="line">        NSLog(@&quot;%@&quot;, NSStringFromClass([super class]));</span><br><span class="line">    &#125;</span><br><span class="line">return self;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ç­”æ¡ˆæ˜¯ï¼š è¾“å‡ºçš„éƒ½æ˜¯<code>Son</code>ã€‚</p>
<p>å¯¹æ­¤ï¼Œåšå®¢ä½œè€…ç»™å‡ºçš„ç†ç”±æ˜¯ï¼š</p>
<blockquote>
<p>selfå’Œsuperçš„åŒºåˆ«ï¼š</p>
<p>selfæ˜¯ç±»çš„ä¸€ä¸ªéšè—å‚æ•°ï¼Œæ¯ä¸ªæ–¹æ³•çš„å®ç°çš„ç¬¬ä¸€ä¸ªå‚æ•°å³ä¸ºselfã€‚</p>
<p>superå¹¶ä¸æ˜¯éšè—å‚æ•°ï¼Œå®ƒå®é™…ä¸Šåªæ˜¯ä¸€ä¸ªâ€ç¼–è¯‘å™¨æ ‡ç¤ºç¬¦â€ï¼Œå®ƒè´Ÿè´£å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå½“è°ƒç”¨æ–¹æ³•æ—¶ï¼Œå»è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯æœ¬ç±»ä¸­çš„æ–¹æ³•ã€‚</p>
<p>åœ¨è°ƒç”¨[super class]çš„æ—¶å€™ï¼Œruntimeä¼šå»è°ƒç”¨objc_msgSendSuperæ–¹æ³•ï¼Œè€Œä¸æ˜¯objc_msgSend</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">OBJC_EXPORT void objc_msgSendSuper(void &#x2F;* struct objc_super *super, SEL op, ... *&#x2F; )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;&#x2F; Specifies the superclass of an instance. </span><br><span class="line">struct objc_super &#123;</span><br><span class="line">    &#x2F;&#x2F;&#x2F; Specifies an instance of a class.</span><br><span class="line">    __unsafe_unretained id receiver;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;&#x2F; Specifies the particular superclass of the instance to message. </span><br><span class="line">#if !defined(__cplusplus)  &amp;&amp;  !__OBJC2__</span><br><span class="line">    &#x2F;* For compatibility with old objc-runtime.h header *&#x2F;</span><br><span class="line">    __unsafe_unretained Class class;</span><br><span class="line">#else</span><br><span class="line">    __unsafe_unretained Class super_class;</span><br><span class="line">#endif</span><br><span class="line">    &#x2F;* super_class is the first class to search *&#x2F;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åœ¨objc_msgSendSuperæ–¹æ³•ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªobjc_superçš„ç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“é‡Œé¢æœ‰ä¸¤ä¸ªå˜é‡ï¼Œä¸€ä¸ªæ˜¯æ¥æ”¶æ¶ˆæ¯çš„receiverï¼Œä¸€ä¸ªæ˜¯<br>å½“å‰ç±»çš„çˆ¶ç±»super_classã€‚</p>
<p>å…¥é™¢è€ƒè¯•ç¬¬ä¸€é¢˜é”™è¯¯çš„åŸå› å°±åœ¨è¿™é‡Œï¼Œè¯¯è®¤ä¸º[super class]æ˜¯è°ƒç”¨çš„[super_class class]ã€‚</p>
<p>objc_msgSendSuperçš„å·¥ä½œåŸç†åº”è¯¥æ˜¯è¿™æ ·çš„:<br>ä»objc_superç»“æ„ä½“æŒ‡å‘çš„superClassçˆ¶ç±»çš„æ–¹æ³•åˆ—è¡¨å¼€å§‹æŸ¥æ‰¾selectorï¼Œæ‰¾åˆ°åä»¥objc-&gt;receiverå»è°ƒç”¨çˆ¶ç±»çš„è¿™ä¸ªselectorã€‚æ³¨æ„ï¼Œæœ€åçš„è°ƒç”¨è€…æ˜¯objc-&gt;receiverï¼Œè€Œä¸æ˜¯super_classï¼</p>
<p>é‚£ä¹ˆobjc_msgSendSuperæœ€åå°±è½¬å˜æˆ</p>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„è¿™é‡Œæ˜¯ä»çˆ¶ç±»å¼€å§‹msgSendï¼Œè€Œä¸æ˜¯ä»æœ¬ç±»å¼€å§‹ï¼Œè°¢è°¢@Josscii å’Œä»–åŒäº‹å…±åŒæŒ‡ç‚¹å‡ºæ­¤å¤„æè¿°çš„ä¸å¦¥ã€‚</span></span><br><span class="line">objc_msgSend(objc_super-&gt;receiver, <span class="keyword">@selector</span>(<span class="keyword">class</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">/// Specifies an instance of a class.  è¿™æ˜¯ç±»çš„ä¸€ä¸ªå®ä¾‹</span></span><br><span class="line">    __<span class="keyword">unsafe_unretained</span> <span class="keyword">id</span> receiver;   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”±äºæ˜¯å®ä¾‹è°ƒç”¨ï¼Œæ‰€ä»¥æ˜¯å‡å·æ–¹æ³•</span></span><br><span class="line">- (Class)<span class="keyword">class</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> object_getClass(<span class="keyword">self</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±äºæ‰¾åˆ°äº†çˆ¶ç±»NSObjecté‡Œé¢çš„classæ–¹æ³•çš„IMPï¼Œåˆå› ä¸ºä¼ å…¥çš„å…¥å‚objc_super-&gt;receiver = selfã€‚selfå°±æ˜¯sonï¼Œè°ƒç”¨classï¼Œæ‰€ä»¥çˆ¶ç±»çš„æ–¹æ³•classæ‰§è¡ŒIMPä¹‹åï¼Œè¾“å‡ºè¿˜æ˜¯sonï¼Œæœ€åè¾“å‡ºä¸¤ä¸ªéƒ½ä¸€æ ·ï¼Œéƒ½æ˜¯è¾“å‡ºsonã€‚</p>
</blockquote>
<p>å…¶å®ï¼Œä¸Šè¿°çš„è§£ç­”åªç­”å¯¹äº†ä¸€å¤§åŠï¼Œè¿˜æœ‰ä¸€å°åŠæ²¡æ­£ç¡®ã€‚æ²¡æ­£ç¡®çš„éƒ¨åˆ†ä¸»è¦åœ¨äºå¯¹<code>objc_msgSend</code>å’Œ<code>objc_msgSendSuper</code>çš„å·¥ä½œåŸç†ç†è§£é”™è¯¯ï¼Œä»¥åŠå¯¹æ–¹æ³•å®ç°çš„å‡½æ•°åŸå‹çš„å¿½ç•¥ã€‚</p>
<p>ä¸‹é¢å°†ä¼šå¯¹æ­¤è¿›è¡Œé‡æ–°è§£ç­”ã€‚</p>
<a id="more"></a>

<h2 id="æ–°è§£"><a href="#æ–°è§£" class="headerlink" title="æ–°è§£"></a>æ–°è§£</h2><p>Objective-C æ˜¯ä¸€é—¨åŸºäºæ¶ˆæ¯è½¬å‘æœºåˆ¶çš„åŠ¨æ€ç¼–ç¨‹è¯­è¨€ï¼Œæ‰€æœ‰çš„æ–¹æ³•è°ƒç”¨éƒ½ä¼šè½¬æ¢ä¸ºæ¶ˆæ¯å‘é€ã€‚æ‰€ä»¥ï¼Œ<code>[self class]</code>å’Œ<code>[super class]</code>ä¼šè¢«ç¼–è¯‘å™¨åˆ†åˆ«è½¬æ¢ä¸º<code>objc_msgSend(self, @selector(class))</code>å’Œ<code>objc_msgSendSuper(objc_super, @selector(class))</code>ã€‚</p>
<blockquote>
<p>å…·ä½“åœ°æ˜¯è½¬æ¢ä¸ºä»¥ä¸‹çš„C++ ä»£ç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// [self class]</span></span><br><span class="line">((Class (*)(id, SEL))(<span class="keyword">void</span> *)objc_msgSend)((id)self, sel_registerName(<span class="string">"class"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// [super class]</span></span><br><span class="line">((Class (*)(__rw_objc_super *, SEL))(<span class="keyword">void</span> *)objc_msgSendSuper)((__rw_objc_super)&#123;(id)self, (id)class_getSuperclass(objc_getClass(<span class="string">"Son"</span>))&#125;, sel_registerName(<span class="string">"class"</span>));</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‰§è¡Œ<code>clang -rewrite-objc xx.m -o xx.cpp</code>å³å¯è½¬æ¢ã€‚</p>
</blockquote>
</blockquote>
<p><code>objc_msgSend</code>ä¼šæ ¹æ®<code>SEL</code>ä»å½“å‰å¯¹è±¡å¼€å§‹æŸ¥æ‰¾å¯¹åº”çš„æ–¹æ³•å®ç°ï¼ŒæŸ¥æ‰¾åˆ°æ–¹æ³•å®ç°åï¼Œå°±ä¼šç›´æ¥è·³è½¬åˆ°æ–¹æ³•å®ç°ã€‚</p>
<p><code>objc_msgSendSuper</code>ä¼šæ ¹æ®<code>SEL</code>ä»å½“å‰å¯¹è±¡çš„çˆ¶ç±»å¼€å§‹æŸ¥æ‰¾å¯¹åº”çš„æ–¹æ³•å®ç°ï¼ŒæŸ¥æ‰¾åˆ°æ–¹æ³•å®ç°åï¼Œå°±ä¼šç›´æ¥è·³è½¬åˆ°æ–¹æ³•å®ç°ã€‚</p>
<blockquote>
<p><code>objc_msgSend</code>çš„å…·ä½“å·¥ä½œåŸç†è¯·çœ‹ä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;********************************************************************</span><br><span class="line"> *</span><br><span class="line"> * id objc_msgSend(id self, SEL _cmd, ...);</span><br><span class="line"> * IMP objc_msgLookup(id self, SEL _cmd, ...);</span><br><span class="line"> * </span><br><span class="line"> * objc_msgLookup ABI:</span><br><span class="line"> * IMP returned in r12</span><br><span class="line"> * Forwarding returned in Z flag</span><br><span class="line"> * r9 reserved for our use but not used</span><br><span class="line"> *</span><br><span class="line"> ********************************************************************&#x2F;</span><br><span class="line"></span><br><span class="line">	ENTRY _objc_msgSend</span><br><span class="line">	</span><br><span class="line">	cbz	r0, LNilReceiver_f</span><br><span class="line"></span><br><span class="line">	ldr	r9, [r0]		&#x2F;&#x2F; r9 &#x3D; self-&gt;isa</span><br><span class="line">	GetClassFromIsa			&#x2F;&#x2F; r9 &#x3D; class</span><br><span class="line">	CacheLookup NORMAL, _objc_msgSend</span><br><span class="line">	&#x2F;&#x2F; cache hit, IMP in r12, eq already set for nonstret forwarding</span><br><span class="line">	bx	r12			&#x2F;&#x2F; call imp</span><br><span class="line"></span><br><span class="line">	CacheLookup2 NORMAL, _objc_msgSend</span><br><span class="line">	&#x2F;&#x2F; cache miss</span><br><span class="line">	ldr	r9, [r0]		&#x2F;&#x2F; r9 &#x3D; self-&gt;isa</span><br><span class="line">	GetClassFromIsa			&#x2F;&#x2F; r9 &#x3D; class</span><br><span class="line">	b	__objc_msgSend_uncached</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>objc_msgSendSuper</code>çš„å…·ä½“å·¥ä½œåŸç†è¯·çœ‹ä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;********************************************************************</span><br><span class="line"> * id objc_msgSendSuper(struct objc_super *super, SEL op, ...)</span><br><span class="line"> *</span><br><span class="line"> * struct objc_super &#123;</span><br><span class="line"> *     id receiver;</span><br><span class="line"> *     Class cls;	&#x2F;&#x2F; the class to search</span><br><span class="line"> * &#125;</span><br><span class="line"> ********************************************************************&#x2F;</span><br><span class="line"></span><br><span class="line">	ENTRY _objc_msgSendSuper</span><br><span class="line">	</span><br><span class="line">	ldr	r9, [r0, #CLASS]	&#x2F;&#x2F; r9 &#x3D; struct super-&gt;class</span><br><span class="line">	CacheLookup NORMAL, _objc_msgSendSuper</span><br><span class="line">	&#x2F;&#x2F; cache hit, IMP in r12, eq already set for nonstret forwarding</span><br><span class="line">	ldr	r0, [r0, #RECEIVER]	&#x2F;&#x2F; load real receiver</span><br><span class="line">	bx	r12			&#x2F;&#x2F; call imp</span><br><span class="line"></span><br><span class="line">	CacheLookup2 NORMAL, _objc_msgSendSuper</span><br><span class="line">	&#x2F;&#x2F; cache miss</span><br><span class="line">	ldr	r9, [r0, #CLASS]	&#x2F;&#x2F; r9 &#x3D; struct super-&gt;class</span><br><span class="line">	ldr	r0, [r0, #RECEIVER]	&#x2F;&#x2F; load real receiver</span><br><span class="line">	b	__objc_msgSend_uncached</span><br><span class="line">	</span><br><span class="line">	END_ENTRY _objc_msgSendSuper</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒObjective-Cæ ¹æ®æ–¹æ³•çš„è°ƒç”¨è€…å’Œæ–¹æ³•çš„è¿”å›ç»“æœï¼Œæä¾›äº†ä¸åŒçš„æ¶ˆæ¯å‘é€å‡½æ•°ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>è°ƒç”¨è€…æ˜¯å¯¹è±¡çš„çˆ¶ç±»ï¼ˆan objectâ€™s superclass, using the super keywordï¼‰ï¼Œè¿”å›ç»“æœç±»å‹ä¸ºç»“æ„ä½“æ•°æ®ç±»å‹ï¼ˆ data structures return typesï¼‰çš„æ¶ˆæ¯ä½¿ç”¨<code>objc_msgSendSuper_stret</code>å‘é€</li>
<li>è°ƒç”¨è€…æ˜¯å¯¹è±¡çš„çˆ¶ç±»ï¼ˆan objectâ€™s superclass, using the super keywordï¼‰çš„æ¶ˆæ¯ä½¿ç”¨<code>objc_msgSendSuper</code>å‘é€</li>
<li>è°ƒç”¨è€…æ˜¯å¯¹è±¡çš„ï¼ˆan objectï¼‰ï¼Œè¿”å›ç»“æœç±»å‹ä¸ºç»“æ„ä½“æ•°æ®ç±»å‹ï¼ˆ data structures return typesï¼‰çš„æ¶ˆæ¯ä½¿ç”¨<code>objc_msgSend_stret</code>å‘é€</li>
<li>è°ƒç”¨è€…æ˜¯å¯¹è±¡çš„ï¼ˆan objectï¼‰ï¼Œè¿”å›ç»“æœç±»å‹ä¸ºæµ®ç‚¹æ•°ç±»å‹ï¼ˆ some float return typesï¼‰çš„æ¶ˆæ¯ä½¿ç”¨<code>objc_msgSend_fpret</code>å‘é€</li>
<li>è°ƒç”¨è€…æ˜¯å¯¹è±¡çš„ï¼ˆan objectï¼‰ï¼Œè¿”å›ç»“æœä¸ºå¤æ‚æµ®ç‚¹æ•°ç±»å‹ï¼ˆsome complex float return typesï¼‰çš„æ¶ˆæ¯ä½¿ç”¨<code>objc_msgSend_fp2ret</code>å‘é€</li>
<li>å‰©ä½™æ¶ˆæ¯ä½¿ç”¨<code>objc_msgSend</code>å‘é€</li>
</ul>
<p>å…¶ä¸­ï¼Œå…³äº<code>objc_msgSend_fpret</code>å’Œ<code>objc_msgSend_fp2ret</code>çš„æ›´å¤šç»†èŠ‚ï¼Œè¯·çœ‹ä¸‹é¢å¼•è‡ªæºä»£ç ä¸­çš„æ³¨é‡Šï¼š</p>
<blockquote>
<p> Floating-point-returning Messaging Primitives</p>
<p> Use these functions to call methods that return floating-point values<br> on the stack.<br> Consult your local function call ABI documentation for details.</p>
<p> arm:    objc_msgSend_fpret not used<br> i386:   objc_msgSend_fpret used for <code>float</code>, <code>double</code>, <code>long double</code>.<br> x86-64: objc_msgSend_fpret used for <code>long double</code>.</p>
<p> arm:    objc_msgSend_fp2ret not used<br> i386:   objc_msgSend_fp2ret not used<br> x86-64: objc_msgSend_fp2ret used for <code>_Complex long double</code>.</p>
<p> These functions must be cast to an appropriate function pointer type<br> before being called. </p>
</blockquote>
</blockquote>
<p>ç”±äº<code>class</code>æ–¹æ³•åœ¨<code>NSObject</code>å¤„ï¼Œæœ€ç»ˆ<code>objc_msgSend(self, @selector(class))</code>å’Œ<code>objc_msgSendSuper(objc_super, @selector(class))</code>æŸ¥æ‰¾åˆ°æ˜¯åŒä¸€ä¸ªæ–¹æ³•å®ç°ã€‚</p>
<p>åœ¨Objective-C ä¸­ï¼Œæ–¹æ³•å®ç°çš„å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// A pointer to the function of a method implementation. </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> !OBJC_OLD_DISPATCH_PROTOTYPES</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*IMP)</span><span class="params">(<span class="keyword">void</span> <span class="comment">/* id, SEL, ... */</span> )</span></span>; </span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="keyword">typedef</span> id _Nullable (*IMP)(id _Nonnull, SEL _Nonnull, ...); </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<p><code>IMP</code>ä¸ºæ–¹æ³•å®ç°çš„å‡½æ•°åŸå‹ï¼Œå…¶æœ‰2ä¸ªå›ºå®šçš„å‚æ•°ï¼š<code>id</code>å’Œ<code>SEL</code>ï¼Œå…¶ä¸­<code>id</code>æ˜¯è¿è¡Œæ—¶æ¥æ”¶æ¶ˆæ¯ï¼ˆå³è¿›è¡Œæ–¹æ³•è°ƒç”¨ï¼‰çš„å¯¹è±¡å®ä¾‹ã€‚</p>
<p><code>objc_msgSend(self, @selector(class))</code>å’Œ<code>objc_msgSendSuper(objc_super, @selector(class))</code>ä¼ é€’ç»™<code>class</code>è¿™ä¸ªæ–¹æ³•çš„<code>IMP</code>çš„å‚æ•°<code>id</code>éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œæ‰€ä»¥æœ€ç»ˆäºŒè€…çš„è¾“å‡ºæ˜¯ç›¸åŒçš„ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://github.com/0xxd0/objc4" target="_blank" rel="noopener">objc-runtimeæºç </a></li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>2020</tag>
        <tag>åŸºç¡€ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>Why has Class-MetaClass design in Objective-Cï¼Ÿ</title>
    <url>/2020/Why%20has%20Class-MetaClass%20design%20in%20Objective-C%EF%BC%9F/readme/</url>
    <content><![CDATA[<p>ä¸ºä»€ä¹ˆObjective-Cä¸­æœ‰Classå’ŒMetaClassè¿™ç§è®¾è®¡ï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜æŸæ—¥åœ¨<a href="https://juejin.im/entry/59bb8b895188257e70531bf9" target="_blank" rel="noopener">æ˜é‡‘</a>ä¸Šçœ‹åˆ°çš„ã€‚æˆ‘è®¤ä¸ºè¿™ä¸æ˜¯ä¸€ä¸ªæŠ€æœ¯é¢†åŸŸçš„é—®é¢˜ï¼Œè€Œæ˜¯ç¼–ç¨‹è¯­è¨€çš„è®¾è®¡é€‰æ‹©é¢†åŸŸçš„é—®é¢˜ã€‚</p>
<p>åœ¨Objective-Cç¼–ç¨‹è¯­è¨€çš„è®¾è®¡ä¸­ï¼Œç±»ï¼ˆClassï¼‰æ—¢æ˜¯ä¸€ä¸ªç”¨äºæè¿°å¯¹è±¡å®ä¾‹ï¼ˆobjectï¼‰çš„å±æ€§å’Œè¡Œä¸ºçš„å·¥å…·ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆObjectï¼‰ï¼Œæœ‰è‡ªèº«çš„å±æ€§å’Œè¡Œä¸ºï¼›é‚£ç±»ï¼ˆClassï¼‰çš„å±æ€§å’Œè¡Œä¸ºä½¿ç”¨ä»€ä¹ˆæ¥æè¿°å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼šå…ƒç±»ï¼ˆMetaClassï¼‰ã€‚åªä¸è¿‡å…ƒç±»ï¼ˆMetaClassï¼‰å¤„äºç¼–ç¨‹è¯­è¨€çš„å®ç°åº•å±‚ï¼Œå¯¹å¼€å‘è€…æ˜¯é€æ˜çš„ã€‚</p>
<p>é‚£å–æ¶ˆæ‰å…ƒç±»ï¼ˆMetaClassï¼‰å¯ä»¥å—ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼šå¯ä»¥ã€‚ä½†æ˜¯è¿™éœ€è¦ä»è¯¥ç¼–ç¨‹è¯­è¨€çš„è®¾è®¡ä¸Šåšæ ¹æœ¬çš„è°ƒæ•´ï¼šå–æ¶ˆæ‰â€œç±»ï¼ˆClassï¼‰ä¹Ÿæ˜¯å¯¹è±¡ï¼ˆObjectï¼‰â€çš„è®¾è®¡ï¼ŒæŠŠç±»ï¼ˆClassï¼‰åŒæ—¶å½“ä½œæè¿°å¯¹è±¡å®ä¾‹ï¼ˆobjectï¼‰å’Œç±»ï¼ˆClassï¼‰è‡ªèº«çš„å±æ€§å’Œè¡Œä¸ºçš„å·¥å…·ã€‚é‡‡ç”¨ä¸æ­¤ç±»ä¼¼çš„è®¾è®¡çš„ç¼–ç¨‹è¯­è¨€ä¹Ÿå­˜åœ¨ï¼Œæ¯”å¦‚C++ã€‚</p>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>2020</tag>
        <tag>åŸºç¡€ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸ºä½•é‡å¯ä¸ªäººåšå®¢ï¼Ÿ</title>
    <url>/2020/%E4%B8%BA%E4%BD%95%E9%87%8D%E5%90%AF%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%9F/readme/</url>
    <content><![CDATA[<p>ä¸ºä½•é‡å¯ä¸ªäººåšå®¢ï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜å¾ˆæ—©å°±æƒ³å‘æ–‡è¡¨è¾¾äº†ï¼Œå¦‚ä»Šæ—¶æœºç»ˆäºåˆ°äº†â€”â€”åœ¨è¿™ä¸ªäººåšå®¢é‡å»ºå®Œæ¯•çš„æ—¶å€™ï¼Œå¯ä»¥å¥½å¥½çš„æ¥å¯¹æ­¤è¯´è¯´äº†ã€‚</p>
<p>é‡å¯ä¸ªäººåšå®¢çš„å¿µå¤´æºè‡ª18å¹´8æœˆç®€ä¹¦åˆ›ä½œå¹³å°å‘çš„ä¸€åˆ™å…¬å‘Šï¼š</p>
<p><img src="/2020/%E4%B8%BA%E4%BD%95%E9%87%8D%E5%90%AF%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%9F/readme/%E7%AE%80%E4%B9%A6%E5%85%AC%E5%91%8A.png" alt="ç®€ä¹¦å…¬å‘Š"></p>
<p>ç¿»é˜…ã€Šç½‘ç»œå®‰å…¨æ³•ã€‹ï¼Œå¹¶æ²¡æœ‰å‡ºç°è¦æ±‚ç»‘å®šâ€œå¾®ä¿¡â€çš„æ˜æ–‡è¦æ±‚ï¼Œè€Œè¡Œä¸šå†…ï¼Œâ€œç½‘ç»œè¿è¥è€…â€ï¼ˆä½¿ç”¨å›½æ³•é‡Œçš„ç§°æ³•ï¼‰çš„å¸¸è§„åšæ³•ä¹Ÿåªæ˜¯è¦æ±‚ç”¨æˆ·ç»‘å®šæ‰‹æœºå·å³å¯â€”â€”å¾ˆæ˜æ˜¾åœ°ï¼Œç®€ä¹¦è¿™æ˜¯åœ¨å‡å€Ÿå›½æ³•ï¼Œæµ‘æ°´æ‘¸é±¼ï¼Œæ„šå¼„ç”¨æˆ·ã€‚</p>
<p>å¦ç™½è€Œè¨€ï¼Œç®€ä¹¦æ˜¯æˆ‘å¾ˆå–œæ¬¢çš„ä¸€ä¸ªå†™ä½œå¹³å°ï¼Œå®ƒçš„ä¼˜ç§€å†™ä½œä½“éªŒï¼Œç”šè‡³è®©æˆ‘åšäº†åœæ­¢æ­å»ºä¸ªäººåšå®¢ï¼Œä¸“æ³¨äºå†™ä½œæœ¬èº«çš„å†³å®šâ€”â€”è¿™åœ¨å½“æ—¶çš„ç®€ä¹¦ä¸ªäººä»‹ç»ä¸Šå¯è§ä¸€æ–‘ï¼š</p>
<p><img src="/2020/%E4%B8%BA%E4%BD%95%E9%87%8D%E5%90%AF%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%9F/readme/%E4%B8%AA%E4%BA%BA%E4%BB%8B%E7%BB%8D.png" alt="ç®€ä¹¦ä¸ªäººä»‹ç»"></p>
<p>ç„¶è€Œï¼Œç”šæ˜¯æ²¡æƒ³åˆ°ç®€ä¹¦å¯¹ç”¨æˆ·å¦‚æ­¤æ¯«æ— å°Šé‡å’Œæ•¬ç•ï¼Œæ‰€ä»¥åœ¨é‚£ä¹‹åï¼Œå†³å®šäº†è¿ç§»åˆ°<a href="https://juejin.im/user/569db819816dfa005959d881" target="_blank" rel="noopener">æ˜é‡‘</a>ä¸Šè¿›è¡Œå†™ä½œã€‚</p>
<p>é‚£ï¼Œæ—¢ç„¶å·²ç»æœ‰å¦ä¸€ä¸ªå¹³å°ä¾›å†™ä½œäº†ï¼Œä¸ºä½•è¿˜æ˜¯è¦é‡å¯ä¸ªäººåšå®¢å‘¢ï¼Ÿ</p>
<p>ä¸ºä½•â€œè¦â€å‘¢ï¼Ÿ</p>
<p>äººç”Ÿæ¥ä¹‹æ—¶æ˜¯å–„è¿˜æ˜¯æ¶ï¼Œè¿™æ— æ³•å®šè®ºã€‚ä½†æ˜¯ï¼Œäººç”Ÿæ¥ä¹‹åï¼Œå´æ— æ³•ä¿è¯è‡ªèº«ä¸ä½œæ¶ã€‚å¹³å°æ˜¯äººæ­å»ºçš„ï¼Œè‡ªæ˜¯å¹³å°ä¹Ÿæ— æ³•ä¿è¯è‡ªèº«ä¸ä½œæ¶ã€‚æ‰€ä»¥å¿…é¡»é‡å¯ä¸ªäººåšå®¢ï¼Œå¯¹è‡ªå·±çš„æ–‡ç« è¿›è¡Œå¤‡ä»½ï¼Œä»¥åœ¨æ‰€å¯„èº«çš„å†™ä½œå¹³å°åœ¨ä½œæ¶ä¹‹æ—¶ï¼Œæœ‰è·¯å¯é€€ã€‚</p>
]]></content>
      <categories>
        <category>äººæ–‡</category>
      </categories>
      <tags>
        <tag>2020</tag>
      </tags>
  </entry>
  <entry>
    <title>Windowsä¸Unix/Linuxçš„åŒºåˆ«</title>
    <url>/2020/Windows%E4%B8%8EUnix:Linux%E7%9A%84%E5%8C%BA%E5%88%AB/readme/</url>
    <content><![CDATA[<h2 id="åœ¨äº§å“å±‚é¢ï¼ŒWindowsä¸Unix-Linuxçš„åŒºåˆ«"><a href="#åœ¨äº§å“å±‚é¢ï¼ŒWindowsä¸Unix-Linuxçš„åŒºåˆ«" class="headerlink" title="åœ¨äº§å“å±‚é¢ï¼ŒWindowsä¸Unix/Linuxçš„åŒºåˆ«"></a>åœ¨äº§å“å±‚é¢ï¼ŒWindowsä¸Unix/Linuxçš„åŒºåˆ«</h2><p>åœ¨äº§å“å±‚é¢ä¸Šï¼ŒWindowsä¸Unix/Linuxçš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨äºŒè€…æœåŠ¡çš„å¯¹è±¡å’Œåº”ç”¨åœºæ™¯ä¸Šï¼š</p>
<ul>
<li>Windowsç³»ç»Ÿçš„æœåŠ¡å¯¹è±¡ä¸»è¦æ˜¯ï¼ˆæˆ–è€…è¯´ä¼˜å…ˆæ˜¯ï¼‰ä¸ªäººè®¡ç®—æœºç”¨æˆ·ï¼Œä¸»è¦ç”¨äºä¸ºä¸ªäººè®¡ç®—æœºç”¨æˆ·æä¾›åŠå…¬ï¼ˆå¦‚æ–‡æ¡£ç¼–å†™ã€ç”»å›¾ï¼‰ã€å¨±ä¹ï¼ˆä¸Šç½‘æµè§ˆã€è§†é¢‘æ’­æ”¾ï¼‰ã€æ²Ÿé€šï¼ˆIMèŠå¤©ï¼‰ç­‰æœåŠ¡ã€‚</li>
<li>Unix/Linuxç³»ç»ŸæœåŠ¡å¯¹è±¡ä¸»è¦æ˜¯ï¼ˆæˆ–è€…è¯´ä¼˜å…ˆæ˜¯ï¼‰ä¼ä¸šç”¨æˆ·ï¼Œä¸»è¦ä¸ºä¼ä¸šç”¨æˆ·æä¾›è®¡ç®—ä»»åŠ¡çš„æœåŠ¡ï¼Œå¦‚ç½‘ç»œè®¿é—®æœåŠ¡ã€æ•°æ®ç”Ÿæˆã€æ•°æ®å­˜å‚¨ç­‰ã€‚</li>
</ul>
<p>åœ¨äººæœºå…³è”å±‚é¢ä¸Šï¼Œï¼ŒWindowsä¸Unix/Linuxçš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨äºŒè€…ä¸äººå’Œæœºå™¨çš„å…³è”ç¨‹åº¦ä¸Šï¼š</p>
<ul>
<li>Windowsç³»ç»Ÿæ›´é è¿‘äººè¿™ä¸€ç«¯ï¼Œå…¶ä¼˜å…ˆè€ƒè™‘äººçš„æ“ä½œè¡Œä¸ºï¼Œå¹¶åœ¨ç³»ç»Ÿè®¾è®¡ä¸Šä¼˜å…ˆè€ƒè™‘é€‚åº”äººçš„æ“ä½œè¡Œä¸ºï¼Œä»è€Œä¸ºäººæ“ä½œæœºå™¨æ—¶æä¾›è‰¯å¥½çš„çŸ­æ—¶å»¶æœåŠ¡</li>
<li>Unix/Linuxç³»ç»Ÿæ›´é è¿‘æœºå™¨è¿™ä¸€ç«¯ï¼Œå…¶ä¼˜å…ˆè€ƒè™‘çš„æ˜¯å¤šä¸ªè®¡ç®—ä»»åŠ¡çš„è¿è¡Œï¼Œç„¶ååœ¨ç³»ç»Ÿè®¾è®¡ä¸Šä¼˜å…ˆè€ƒè™‘CPUè¿è¡Œå¤šä¸ªè®¡ç®—ä»»åŠ¡çš„é«˜æ•ˆæ€§ï¼Œä»è€Œä¸ºå®¢æˆ·ç«¯æä¾›æœ€å¤§çš„æ•°æ®åå</li>
</ul>
<p>åœ¨æ¡Œé¢ç³»ç»Ÿå±‚é¢ä¸Šï¼ŒWindowsæ˜¯ä¸€ä¸ªæ¡Œé¢ç³»ç»Ÿï¼ŒUnix/Linuxåˆ™ä¸æ˜¯ä¸€ä¸ªæ¡Œé¢ç³»ç»Ÿã€‚</p>
<p><img src="/2020/Windows%E4%B8%8EUnix:Linux%E7%9A%84%E5%8C%BA%E5%88%AB/readme/Linux-VS-Windows.png" alt="Linux-VS-Windows"></p>
<a id="more"></a>

<h2 id="ä¸ºä»€ä¹ˆåœ¨GUIåœºæ™¯ä¸­ï¼ŒWindowsæ¯”Unix-Linuxæ“ä½œæµç•…"><a href="#ä¸ºä»€ä¹ˆåœ¨GUIåœºæ™¯ä¸­ï¼ŒWindowsæ¯”Unix-Linuxæ“ä½œæµç•…" class="headerlink" title="ä¸ºä»€ä¹ˆåœ¨GUIåœºæ™¯ä¸­ï¼ŒWindowsæ¯”Unix/Linuxæ“ä½œæµç•…"></a>ä¸ºä»€ä¹ˆåœ¨GUIåœºæ™¯ä¸­ï¼ŒWindowsæ¯”Unix/Linuxæ“ä½œæµç•…</h2><p>äº§å“ç†å¿µçš„ä¸åŒï¼Œå¯¼è‡´Windowsç³»ç»Ÿå’ŒUnix/Linuxç³»ç»Ÿåœ¨è¿›è¡ŒGUIè®¾è®¡å’Œè¿›ç¨‹è°ƒåº¦è®¾è®¡æ—¶ï¼Œé‡‡å–äº†ä¸åŒçš„è®¾è®¡æ–¹æ¡ˆï¼Œè€Œæ–¹æ¡ˆçš„ä¸åŒï¼Œå¯¼è‡´äº†åœ¨GUIåœºæ™¯ä¸‹Windowsæ¯”Unix/Linuxæ“ä½œæµç•…çš„ç»“æœã€‚</p>
<p>åœ¨GUIè®¾è®¡æ–¹é¢ï¼š</p>
<ul>
<li>Windowsç³»ç»Ÿï¼šGUIç¨‹åºæ˜¯ä¸€ä¸ªç³»ç»Ÿçº§åˆ«çš„â€œåº”ç”¨ç¨‹åºâ€ï¼Œå…¶æ˜¯ç›´æ¥é›†æˆåœ¨ç³»ç»Ÿå±‚é¢ï¼Œå±äºç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚</li>
<li>Unix/Linuxç³»ç»Ÿï¼šGUIç¨‹åºæ˜¯ä¸€ä¸ªåº”ç”¨å±‚çº§åˆ«çš„ç‹¬ç«‹çš„ç¨‹åºã€‚</li>
</ul>
<p>åœ¨è¿›ç¨‹è°ƒåº¦è®¾è®¡æ–¹é¢ï¼š</p>
<ul>
<li>Windowsç³»ç»Ÿçš„è¿›ç¨‹è°ƒåº¦è®¾è®¡ä¼˜å…ˆè€ƒè™‘äº†ç”¨æˆ·çš„æ“ä½œè¡Œä¸ºï¼ŒæŠŠè¿›ç¨‹çš„åŠ¨æ€ä¼˜å…ˆçº§å’Œäº¤äº’äº‹ä»¶åšäº†å¼ºå…³è”ã€‚</li>
<li>Unix/Linuxç³»ç»Ÿåœ¨è¿›ç¨‹è°ƒåº¦è®¾è®¡ä¸Šï¼ŒæŠŠè¿›ç¨‹çš„åŠ¨æ€ä¼˜å…ˆçº§å’Œäº¤äº’äº‹ä»¶åšçš„æ˜¯å¼±å…³è”ï¼Œå³äº¤äº’äº‹ä»¶å¯¹è¿›ç¨‹çš„ä¼˜å…ˆçº§æé«˜çš„å½±å“å æ¯”å¾ˆä½ã€‚</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œç›¸æ¯”Unix/Linuxç³»ç»Ÿï¼ŒWindowsç³»ç»Ÿä¼˜å…ˆå“åº”äº¤äº’äº‹ä»¶ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://blog.csdn.net/dog250/article/details/96362789" target="_blank" rel="noopener external nofollow noreferrer">ã€Šä¸ºä»€ä¹ˆWindows/iOSæ“ä½œå¾ˆæµç•…è€ŒLinux/Androidå´å¾ˆå¡é¡¿å‘¢ã€‹</a></li>
<li><a href="https://blog.csdn.net/dog250/article/details/96500186" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠLinuxæ¡Œé¢GUIç³»ç»Ÿçš„è°ƒåº¦å™¨åº”è¯¥æ€ä¹ˆåšæ‰ä¸å¡é¡¿å‘¢ï¼Ÿã€‹</a></li>
</ul>
]]></content>
      <categories>
        <category>äººæ–‡</category>
      </categories>
      <tags>
        <tag>2020</tag>
      </tags>
  </entry>
  <entry>
    <title>å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç‚¹å‡»Appï¼ˆAppå¯åŠ¨æµç¨‹ï¼‰</title>
    <url>/2020/%E5%BD%93%E7%94%A8%E6%88%B7%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%82%B9%E5%87%BBApp%EF%BC%88App%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%EF%BC%89/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç‚¹å‡»iPhoneæ‰‹æœºå±å¹•ä¸Šçš„ä¸€ä¸ªApp å›¾æ ‡æ—¶ï¼Œè¯¥APPå°†ä¼šè¢«iOSåŠ è½½å¯åŠ¨èµ·æ¥ã€‚</p>
<p>ä¸‹é¢å°†ä¼šè®²è¿°è¿™åŠ è½½å¯åŠ¨èƒŒåçš„ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>Appçš„å¯åŠ¨ç±»å‹</li>
<li>Appå†·å¯åŠ¨çš„å®Œæ•´è¿‡ç¨‹</li>
<li>Appçš„å†·å¯åŠ¨ä¼˜åŒ–æ‰‹æ®µ</li>
<li>å¯æ‰§è¡Œæ–‡ä»¶çš„ä»‹ç»</li>
</ul>
<p><img src="/2020/%E5%BD%93%E7%94%A8%E6%88%B7%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%82%B9%E5%87%BBApp%EF%BC%88App%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%EF%BC%89/readme/iOS-App-Launch.svg" alt="image"></p>
]]></content>
      <categories>
        <category>çŸ¥è¯†å¤ç›˜</category>
      </categories>
      <tags>
        <tag>2020</tag>
        <tag>EveryThingFromTheFirstClick(iOS Version)</tag>
      </tags>
  </entry>
  <entry>
    <title>åŒæ­¥(synchronous)/å¼‚æ­¥(asynchronous)è°ƒç”¨å’Œé˜»å¡(blocking)/éé˜»å¡(non-blocking)è°ƒç”¨</title>
    <url>/2020/%E5%90%8C%E6%AD%A5(synchronous):%E5%BC%82%E6%AD%A5(asynchronous)%E8%B0%83%E7%94%A8%E5%92%8C%E9%98%BB%E5%A1%9E(blocking):%E9%9D%9E%E9%98%BB%E5%A1%9E(non-blocking)%E8%B0%83%E7%94%A8/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬æ–‡ä¸»è¦ä»‹ç»åŒæ­¥(synchronous)/å¼‚æ­¥(asynchronous)è°ƒç”¨å’Œé˜»å¡(blocking)/éé˜»å¡(non-blocking)è°ƒç”¨çš„æ¦‚å¿µä»¥åŠåœ¨ç°å®ä¸­ä¼šå‡ºç°çš„ç»„åˆåœºæ™¯ã€‚</p>
<a id="more"></a>

<h2 id="åŒæ­¥-synchronous-å¼‚æ­¥-asynchronous-è°ƒç”¨"><a href="#åŒæ­¥-synchronous-å¼‚æ­¥-asynchronous-è°ƒç”¨" class="headerlink" title="åŒæ­¥(synchronous)/å¼‚æ­¥(asynchronous)è°ƒç”¨"></a>åŒæ­¥(synchronous)/å¼‚æ­¥(asynchronous)è°ƒç”¨</h2><p>è¿›ç¨‹/çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿä¸€ä¸ªå¤–éƒ¨è°ƒç”¨ï¼Œè‹¥éœ€è¦ç­‰å¾…è¯¥è°ƒç”¨è¿”å›æ‰èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œåˆ™ç§°ä¹‹ä¸ºåŒæ­¥è°ƒç”¨ï¼›è‹¥ä¸éœ€è¦ç­‰å¾…è¯¥è°ƒç”¨è¿”å›ï¼Œå°±å¯ä»¥ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œåˆ™ç§°ä¹‹ä¸ºå¼‚æ­¥è°ƒç”¨</p>
<h2 id="é˜»å¡-blocking-éé˜»å¡-non-blocking-è°ƒç”¨"><a href="#é˜»å¡-blocking-éé˜»å¡-non-blocking-è°ƒç”¨" class="headerlink" title="é˜»å¡(blocking)/éé˜»å¡(non-blocking)è°ƒç”¨"></a>é˜»å¡(blocking)/éé˜»å¡(non-blocking)è°ƒç”¨</h2><p>è¿›ç¨‹/çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿä¸€ä¸ªå¤–éƒ¨è°ƒç”¨ï¼Œè‹¥è¯¥è°ƒç”¨å¯¼è‡´å½“å‰è¿›ç¨‹/çº¿ç¨‹é˜»å¡ï¼Œåˆ™ç§°ä¹‹ä¸ºé˜»å¡è°ƒç”¨ï¼Œå¦åˆ™ç§°ä¹‹ä¸ºéé˜»å¡è°ƒç”¨ã€‚</p>
<blockquote>
<p>é˜»å¡ï¼šæºè‡ªæ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹/çº¿ç¨‹çŠ¶æ€çš„æè¿°æ¦‚å¿µï¼Œå…¶å®šä¹‰ä¸ºï¼šæ“ä½œç³»ç»ŸæŠŠè¿›ç¨‹/çº¿ç¨‹ä»â€œè¿è¡Œï¼ˆrunningï¼‰çŠ¶æ€â€æŒ‚èµ·ä¸ºâ€œé˜»å¡ï¼ˆblockedï¼‰çŠ¶æ€â€ï¼ˆåˆç§°â€œç­‰å¾…ï¼ˆwaitingï¼‰çŠ¶æ€â€ï¼‰ã€‚å½“è¿›ç¨‹/çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€ï¼Œåˆ™æ„å‘³ç€å…¶å¤„äºæš‚åœè¿è¡ŒçŠ¶æ€ï¼Œæš‚æ—¶ä¸ä¼šè¢«CPUè°ƒåº¦æ‰§è¡Œã€‚</p>
<p>æ³¨æ„ï¼šåœ¨æ“ä½œç³»ç»Ÿé¢†åŸŸï¼Œâ€œé˜»å¡ï¼ˆblockedï¼‰â€å’Œâ€œç­‰å¾…ï¼ˆwaitingï¼‰â€çš„è¯­ä¹‰ç›¸åŒï¼Œä½†æ˜¯åœ¨å…¶ä»–é¢†åŸŸï¼Œæ¯”å¦‚JVMï¼ŒäºŒè€…çš„è¯­ä¹‰æ˜¯ä¸ä¸€æ ·çš„ã€‚å¦å¤–ï¼Œåœ¨ç†è§£â€œé˜»å¡â€å’Œâ€œéé˜»å¡â€æ—¶ï¼Œä¸èƒ½ç®€å•åœ°ä»å…¶å­—é¢æ„æ€æ¥ç†è§£ï¼Œè€Œæ˜¯ä»æ“ä½œç³»ç»Ÿå¯¹å…¶çš„åŸºæœ¬å®šä¹‰æ¥ç†è§£</p>
<p>Qï¼šè¿›ç¨‹/çº¿ç¨‹ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿé˜»å¡ï¼Ÿ</p>
<p>Aï¼šè¿›ç¨‹/çº¿ç¨‹ä¸»åŠ¨è°ƒç”¨ <code>wait()</code> æˆ– <code>sleep()</code> ç­‰æŒ‚èµ·è‡ªå·±çš„æ“ä½œï¼Œ æˆ–è€…è°ƒç”¨ <code>System Call</code>æ“ä½œï¼ˆ<code>System Call</code> å› ä¸ºæ¶‰åŠåˆ°äº† I/O æ“ä½œï¼Œ ä¸èƒ½ç«‹å³å®Œæˆï¼‰</p>
<p>PSï¼šæ­¤å¤„å‚è€ƒè‡ª<a href="https://www.zhihu.com/question/19732473/answer/241673170" target="_blank" rel="noopener external nofollow noreferrer">ã€Šæ€æ ·ç†è§£é˜»å¡éé˜»å¡ä¸åŒæ­¥å¼‚æ­¥çš„åŒºåˆ«ï¼Ÿ - è§è§çš„å›ç­”ã€‹</a></p>
</blockquote>
<h2 id="åŒæ­¥-synchronous-å¼‚æ­¥-asynchronous-å’Œé˜»å¡-blocking-éé˜»å¡-non-blocking-çš„ç»„åˆ"><a href="#åŒæ­¥-synchronous-å¼‚æ­¥-asynchronous-å’Œé˜»å¡-blocking-éé˜»å¡-non-blocking-çš„ç»„åˆ" class="headerlink" title="åŒæ­¥(synchronous)/å¼‚æ­¥(asynchronous)å’Œé˜»å¡(blocking)/éé˜»å¡(non-blocking)çš„ç»„åˆ"></a>åŒæ­¥(synchronous)/å¼‚æ­¥(asynchronous)å’Œé˜»å¡(blocking)/éé˜»å¡(non-blocking)çš„ç»„åˆ</h2><p>åœ¨è¿›ç¨‹/çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿä¸€ä¸ªå¤–éƒ¨è°ƒç”¨æ—¶ï¼Œæœ‰æ—¶å€™ä¼šäº§ç”ŸåŒæ­¥(synchronous)/å¼‚æ­¥(asynchronous)å’Œé˜»å¡(blocking)/éé˜»å¡(non-blocking)çš„ç»„åˆåœºæ™¯ã€‚</p>
<h3 id="å¼‚æ­¥è¿›ç¨‹-çº¿ç¨‹è°ƒç”¨"><a href="#å¼‚æ­¥è¿›ç¨‹-çº¿ç¨‹è°ƒç”¨" class="headerlink" title="å¼‚æ­¥è¿›ç¨‹/çº¿ç¨‹è°ƒç”¨"></a>å¼‚æ­¥è¿›ç¨‹/çº¿ç¨‹è°ƒç”¨</h3><p>å¸¸è§æƒ…å†µä¸‹ï¼Œå½“è¿™ä¸ªå¤–éƒ¨è°ƒç”¨æ˜¯ä¸€ä¸ª<strong>å¤–éƒ¨è¿›ç¨‹/çº¿ç¨‹è°ƒç”¨</strong>æ—¶ï¼Œæœ€å®¹æ˜“å‡ºç°ä»¥ä¸‹ç»„åˆåœºæ™¯ï¼š</p>
<ul>
<li><p>åŒæ­¥é˜»å¡è°ƒç”¨ï¼šå½“å‰è¿›ç¨‹/çº¿ç¨‹åœ¨ç­‰å¾…è°ƒç”¨è¿”å›ï¼Œè¢«è°ƒç”¨æ–¹è¿›ç¨‹/çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€</p>
<p>  å¦‚åœ¨JSä¸­ä½¿ç”¨<code>async/await</code>æœºåˆ¶ï¼Œè°ƒç”¨æ–¹åŒæ­¥è°ƒç”¨ä¸€ä¸ªè¯»å–ç£ç›˜æ–‡ä»¶çš„å¼‚æ­¥çº¿ç¨‹</p>
</li>
</ul>
<ul>
<li><p>åŒæ­¥éé˜»å¡è°ƒç”¨ï¼šå½“å‰è¿›ç¨‹/çº¿ç¨‹åœ¨ç­‰å¾…è°ƒç”¨è¿”å›ï¼Œè¢«è°ƒç”¨æ–¹è¿›ç¨‹/çº¿ç¨‹å¤„äºéé˜»å¡çŠ¶æ€</p>
<p>  å¦‚åœ¨JSä¸­ä½¿ç”¨<code>async/await</code>æœºåˆ¶ï¼Œè°ƒç”¨æ–¹åŒæ­¥è°ƒç”¨ä¸€ä¸ªè®¡ç®—å“ˆå¸Œå€¼çš„å¼‚æ­¥çº¿ç¨‹</p>
</li>
<li><p>å¼‚æ­¥é˜»å¡è°ƒç”¨ï¼šå½“å‰è¿›ç¨‹/çº¿ç¨‹ä¸ç­‰å¾…è°ƒç”¨è¿”å›ï¼Œè¢«è°ƒç”¨æ–¹è¿›ç¨‹/çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€</p>
<p>  å¦‚è°ƒç”¨æ–¹å¼‚æ­¥è°ƒç”¨ä¸€ä¸ªè¯»å–ç£ç›˜æ–‡ä»¶çš„å¼‚æ­¥çº¿ç¨‹</p>
</li>
<li><p>å¼‚æ­¥éé˜»å¡è°ƒç”¨ï¼šå½“å‰è¿›ç¨‹/çº¿ç¨‹ä¸ç­‰å¾…è°ƒç”¨è¿”å›ï¼Œè¢«è°ƒç”¨æ–¹è¿›ç¨‹/çº¿ç¨‹å¤„äºéé˜»å¡çŠ¶æ€</p>
<p>  å¦‚è°ƒç”¨æ–¹å¼‚æ­¥è°ƒç”¨ä¸€ä¸ªå‘é€httpè¯·æ±‚çš„å¼‚æ­¥çº¿ç¨‹</p>
</li>
</ul>
<h3 id="æŒ‚èµ·æ“ä½œè°ƒç”¨å’ŒSystem-Callæ“ä½œè°ƒç”¨"><a href="#æŒ‚èµ·æ“ä½œè°ƒç”¨å’ŒSystem-Callæ“ä½œè°ƒç”¨" class="headerlink" title="æŒ‚èµ·æ“ä½œè°ƒç”¨å’ŒSystem Callæ“ä½œè°ƒç”¨"></a>æŒ‚èµ·æ“ä½œè°ƒç”¨å’Œ<code>System Call</code>æ“ä½œè°ƒç”¨</h3><blockquote>
<ul>
<li><p>æŒ‚èµ·æ“ä½œè°ƒç”¨ï¼šæ˜¯æŒ‡ä¼šå¯¼è‡´å½“å‰è¿›ç¨‹/çº¿ç¨‹æŒ‚èµ·çš„è°ƒç”¨ï¼Œå¦‚<code>wait()</code> æˆ– <code>sleep()</code></p>
</li>
<li><p><code>System Call</code>æ“ä½œè°ƒç”¨ï¼šæ˜¯æŒ‡ç³»ç»Ÿçº§åˆ«çš„è°ƒç”¨ï¼Œå¦‚ä¸­æ–­ç±»å‡½æ•°</p>
</li>
</ul>
</blockquote>
<p>å¸¸è§æƒ…å†µä¸‹ï¼Œå½“è¿™ä¸ªå¤–éƒ¨è°ƒç”¨æ˜¯ä¸€ä¸ª<strong>å¤–éƒ¨è¿›ç¨‹/çº¿ç¨‹è°ƒç”¨</strong>æ—¶ï¼Œæœ€å®¹æ˜“å‡ºç°ä»¥ä¸‹ç»„åˆåœºæ™¯ï¼š</p>
<ul>
<li><p>åŒæ­¥é˜»å¡è°ƒç”¨ï¼šå½“å‰è¿›ç¨‹/çº¿ç¨‹åœ¨ç­‰å¾…è°ƒç”¨è¿”å›ï¼Œå¹¶ä¸”å¤„äºé˜»å¡çŠ¶æ€</p>
<p>  å¦‚è°ƒç”¨æ–¹è°ƒç”¨<code>sleep(5)</code></p>
</li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><ul>
<li><a href="https://www.zhihu.com/question/19732473" target="_blank" rel="noopener external nofollow noreferrer">ã€Šæ€æ ·ç†è§£é˜»å¡éé˜»å¡ä¸åŒæ­¥å¼‚æ­¥çš„åŒºåˆ«ï¼Ÿã€‹</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1005527" target="_blank" rel="noopener external nofollow noreferrer">ã€Šä¸€ç§ç†è§£åŒæ­¥/å¼‚æ­¥ï¼Œé˜»å¡/éé˜»å¡ï¼ŒLinux IO æ¨¡å‹ï¼Œselect /poll /epoll çš„æ–¹æ³•ã€‹</a></li>
<li><a href="https://juejin.im/entry/58ae4636b123db0052b1caf8" target="_blank" rel="noopener">ã€Šæ·±å…¥ç†è§£å¹¶å‘ / å¹¶è¡Œï¼Œé˜»å¡ / éé˜»å¡ï¼ŒåŒæ­¥ / å¼‚æ­¥ã€‹</a></li>
<li><a href="https://github.com/calidion/calidion.github.io/issues/40" target="_blank" rel="noopener">ã€ŠåŒæ­¥ï¼Œå¼‚æ­¥ï¼Œé˜»å¡ï¼Œéé˜»å¡ç­‰å…³ç³»è½»æ¾ç†è§£ã€‹</a></li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>OS</tag>
        <tag>2020</tag>
        <tag>åŸºç¡€ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç‚¹å‡»UIViewï¼ˆå…³äºiOSç¡¬ä»¶äº‹ä»¶çš„é‚£äº›äº‹ï¼‰</title>
    <url>/2020/%E5%BD%93%E7%94%A8%E6%88%B7%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%82%B9%E5%87%BBUIView%EF%BC%88%E5%85%B3%E4%BA%8EiOS%E7%A1%AC%E4%BB%B6%E4%BA%8B%E4%BB%B6%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%EF%BC%89/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å½“Appå¯åŠ¨åï¼Œç”¨æˆ·ç¬¬ä¸€æ¬¡ç‚¹å‡»Appå†…çš„ä¸€ä¸ªè§†å›¾ï¼Œè¿™æ—¶å€™å°†ä¼šäº§ç”Ÿä¸€ä¸ªç‚¹å‡»äº‹ä»¶ã€‚</p>
<p>ä¸‹é¢å°†ä¼šè®²è¿°è¿™ç‚¹å‡»äº‹ä»¶èƒŒåçš„ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>ç‚¹å‡»äº‹ä»¶å¦‚ä½•ä»ç¡¬ä»¶å±‚ä¼ é€’åˆ°App</li>
<li>Appå¦‚ä½•æŸ¥æ‰¾åˆ°æœ€ä½³å“åº”è€…ï¼ˆhit-tested viewï¼‰</li>
<li>AppæŸ¥æ‰¾åˆ°æœ€ä½³å“åº”è€…ï¼ˆhit-tested viewï¼‰åï¼Œå¦‚ä½•æŠŠç‚¹å‡»äº‹ä»¶ä¼ é€’ç»™æœ€ä½³å“åº”è€…ï¼ˆhit-tested viewï¼‰</li>
<li>æœ€ä½³å“åº”è€…ï¼ˆhit-tested viewï¼‰ä½œä¸ºç¬¬ä¸€å“åº”è€…ï¼ˆfirst responderï¼‰ï¼Œå¦‚ä½•å¯¹äº‹ä»¶è¿›è¡Œå“åº”å’Œä¼ é€’ï¼Ÿ</li>
<li>å¼‚å¸¸åœºæ™¯çš„å†²çªè§£å†³<ul>
<li>æ‰‹åŠ¿ä¸ç‚¹å‡»å†²çª</li>
<li>å¤šä¸ªæ‰‹åŠ¿å†²çª</li>
<li>è®©å¤šä¸ªUIViewå“åº”åŒä¸€ä¸ªç‚¹å‡»äº‹ä»¶</li>
</ul>
</li>
</ul>
<h2 id="iOSè®¾å¤‡äº‹ä»¶çš„ç±»å‹"><a href="#iOSè®¾å¤‡äº‹ä»¶çš„ç±»å‹" class="headerlink" title="iOSè®¾å¤‡äº‹ä»¶çš„ç±»å‹"></a>iOSè®¾å¤‡äº‹ä»¶çš„ç±»å‹</h2><ul>
<li>Touch Events(è§¦æ‘¸äº‹ä»¶)</li>
<li>Motion Events(è¿åŠ¨äº‹ä»¶ï¼Œæ¯”å¦‚é‡åŠ›æ„Ÿåº”å’Œæ‘‡ä¸€æ‘‡ç­‰)</li>
<li>Remote Events(è¿œç¨‹äº‹ä»¶ï¼Œæ¯”å¦‚ç”¨è€³æœºä¸Šå¾—æŒ‰é”®æ¥æ§åˆ¶æ‰‹æœº)</li>
</ul>
<h2 id="å¯ä»¥å¤„ç†è§¦æ‘¸äº‹ä»¶çš„ç±»æœ‰å“ªäº›"><a href="#å¯ä»¥å¤„ç†è§¦æ‘¸äº‹ä»¶çš„ç±»æœ‰å“ªäº›" class="headerlink" title="å¯ä»¥å¤„ç†è§¦æ‘¸äº‹ä»¶çš„ç±»æœ‰å“ªäº›"></a>å¯ä»¥å¤„ç†è§¦æ‘¸äº‹ä»¶çš„ç±»æœ‰å“ªäº›</h2><ul>
<li>UIResponderçš„å­ç±»ï¼ˆUIApplicationï¼ŒUIWindowï¼ŒUIViewControllerå’ŒUIViewï¼‰</li>
<li>UIGestureRecognizerçš„å­ç±»</li>
<li>UIControlçš„å­ç±»ï¼ˆUIButtonï¼ŒUISegmentedControlï¼ŒUISwitchï¼‰</li>
</ul>
<blockquote>
<ul>
<li>UIResponderæ˜¯iOSä¸­ç”¨äºå¤„ç†ç”¨æˆ·äº‹ä»¶çš„APIï¼Œå¯ä»¥å¤„ç†è§¦æ‘¸äº‹ä»¶ã€æŒ‰å‹äº‹ä»¶(3D touch)ã€è¿œç¨‹æ§åˆ¶äº‹ä»¶ã€ç¡¬ä»¶è¿åŠ¨äº‹ä»¶ã€‚ å¯ä»¥é€šè¿‡touchesBeganã€pressesBeganã€motionBeganã€remoteControlReceivedWithEventç­‰æ–¹æ³•ï¼Œè·å–åˆ°å¯¹åº”çš„å›è°ƒæ¶ˆæ¯ã€‚UIResponderä¸åªç”¨æ¥æ¥æ”¶äº‹ä»¶ï¼Œè¿˜å¯ä»¥å¤„ç†å’Œä¼ é€’å¯¹åº”çš„äº‹ä»¶ï¼Œå¦‚æœå½“å‰å“åº”è€…ä¸èƒ½å¤„ç†ï¼Œåˆ™è½¬å‘ç»™å…¶ä»–åˆé€‚çš„å“åº”è€…å¤„ç†ã€‚</li>
<li>UIConotrolæ˜¯UIViewï¼ˆUIResponderï¼‰çš„å­ç±»ï¼Œç›¸æ¯”äºUIResponderï¼Œå…¶å¢åŠ äº†target-actionçš„ç‰¹åˆ«è®¾è®¡ã€‚</li>
</ul>
</blockquote>
<h2 id="UIConotrolã€UIGestureRecognizerã€-UIResponderçš„è§¦æ‘¸äº‹ä»¶å“åº”ä¼˜å…ˆçº§æ’å"><a href="#UIConotrolã€UIGestureRecognizerã€-UIResponderçš„è§¦æ‘¸äº‹ä»¶å“åº”ä¼˜å…ˆçº§æ’å" class="headerlink" title="UIConotrolã€UIGestureRecognizerã€ UIResponderçš„è§¦æ‘¸äº‹ä»¶å“åº”ä¼˜å…ˆçº§æ’å"></a>UIConotrolã€UIGestureRecognizerã€ UIResponderçš„è§¦æ‘¸äº‹ä»¶å“åº”ä¼˜å…ˆçº§æ’å</h2><ul>
<li>UIResponderä¼˜å…ˆçº§æœ€ä½</li>
<li>UIConotrolçš„ä¼˜å…ˆçº§å¤§äºå…¶çˆ¶è§†å›¾ä¸ŠUIGestureRecognizerï¼Œå°äºæ·»åŠ åœ¨å…¶è‡ªèº«ä¸Šçš„UIGestureRecognizer</li>
</ul>
<h2 id="è§¦æ‘¸äº‹ä»¶å¦‚ä½•ä»ç¡¬ä»¶å±‚è½¬å‘åˆ°App"><a href="#è§¦æ‘¸äº‹ä»¶å¦‚ä½•ä»ç¡¬ä»¶å±‚è½¬å‘åˆ°App" class="headerlink" title="è§¦æ‘¸äº‹ä»¶å¦‚ä½•ä»ç¡¬ä»¶å±‚è½¬å‘åˆ°App"></a>è§¦æ‘¸äº‹ä»¶å¦‚ä½•ä»ç¡¬ä»¶å±‚è½¬å‘åˆ°App</h2><ol>
<li><p>è§¦æ‘¸å‘ç”Ÿæ—¶ï¼Œç³»ç»Ÿå†…æ ¸ç”Ÿæˆè§¦æ‘¸äº‹ä»¶ï¼Œç„¶åäº¤ç”±ç»™IOKitè¿›ç¨‹</p>
</li>
<li><p>IOKitè¿›ç¨‹æŠŠè§¦æ‘¸äº‹ä»¶å°è£…æˆIOHIDEventå¯¹è±¡ï¼Œé€šè¿‡IPCï¼ˆmach portï¼‰å‘é€ç»™SpringBoardè¿›ç¨‹ã€‚</p>
</li>
<li><p>SpringBoardè¿›ç¨‹é€šè¿‡IPCï¼ˆmach portï¼‰å‘é€IOHIDEventå¯¹è±¡ç»™å½“å‰Appè¿›ç¨‹ã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè‹¥å½“å‰å‰å°æ— Appè¿è¡Œï¼Œåˆ™SpringBoardè¿›ç¨‹ä¼šæŠŠè¯¥IOHIDEventå¯¹è±¡å‘é€ç»™æ¡Œé¢ç³»ç»Ÿå¤„ç†ã€‚</p>
</blockquote>
</li>
<li><p>Appè¿›ç¨‹çš„mach portæ”¶åˆ°IOHIDEventåï¼Œä¼šå”¤é†’ä¸»çº¿ç¨‹çš„runloopï¼Œè§¦å‘source1å›è°ƒï¼›source1å›è°ƒåˆè§¦å‘ä¸€ä¸ªsource0å›è°ƒï¼Œå°†æ¥æ”¶åˆ°çš„IOHIDEventå¯¹è±¡å°è£…æˆUIEventå¯¹è±¡ï¼Œå‘é€ç»™Appè¿›ç¨‹çš„UIApplicationå¯¹è±¡å¤„ç†ã€‚</p>
</li>
</ol>
<h2 id="UIApplicationæ”¶åˆ°è§¦æ‘¸äº‹ä»¶ï¼ˆUIEventï¼‰åçš„å¤„ç†æµç¨‹"><a href="#UIApplicationæ”¶åˆ°è§¦æ‘¸äº‹ä»¶ï¼ˆUIEventï¼‰åçš„å¤„ç†æµç¨‹" class="headerlink" title="UIApplicationæ”¶åˆ°è§¦æ‘¸äº‹ä»¶ï¼ˆUIEventï¼‰åçš„å¤„ç†æµç¨‹"></a>UIApplicationæ”¶åˆ°è§¦æ‘¸äº‹ä»¶ï¼ˆUIEventï¼‰åçš„å¤„ç†æµç¨‹</h2><ol>
<li><p>UIApplicationå¯¹è±¡é€šè¿‡ <code>hit-tesing</code> æœºåˆ¶æŸ¥æ‰¾æœ€ä½³å“åº”è§†å›¾ï¼ˆ<code>hit-tested view</code>ï¼‰ã€‚</p>
</li>
<li><p>ç¡®å®šè§¦æ‘¸äº‹ä»¶çš„ç¬¬ä¸€å“åº”è€…ï¼ˆfirst-responderï¼‰â€”â€”ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ€ä½³å“åº”è§†å›¾ï¼ˆhit-tested viewï¼‰å°†ä¼šæ˜¯è§¦æ‘¸äº‹ä»¶çš„ç¬¬ä¸€å“åº”è€…ï¼ˆfirst-responderï¼‰ã€‚</p>
<p> å…·ä½“åœ°ï¼Œæ ¹æ®æœ€ä½³å“åº”è§†å›¾ï¼ˆ<code>hit-tested view</code>ï¼‰çš„ç±»å‹å’Œæ—¢å®šçš„UIConotrolã€UIGestureRecognizerã€ UIResponderçš„è§¦æ‘¸äº‹ä»¶å“åº”ä¼˜å…ˆçº§æ’å ï¼Œç¡®å®šç¬¬ä¸€å“åº”è€…ï¼ˆfirst-responderï¼‰ï¼š</p>
<ul>
<li><p><code>hit-tested view</code>æ˜¯UIControlç±»å‹ï¼Œ<code>hit-tested view</code>è‡ªèº«æ²¡æœ‰UIGestureRecognizerï¼Œåˆ™ç¬¬ä¸€å“åº”è€…æ˜¯<code>hit-tested view</code></p>
</li>
<li><p><code>hit-tested view</code>æ˜¯UIControlç±»å‹ï¼Œ<code>hit-tested view</code>è‡ªèº«æœ‰UIGestureRecognizerï¼Œåˆ™ç¬¬ä¸€å“åº”è€…æ˜¯<code>hit-tested view</code>ä¸Šçš„UIGestureRecognizerï¼Œç¬¬äºŒå“åº”è€…æ˜¯<code>hit-tested view</code></p>
</li>
<li><p><code>hit-tested view</code>æ˜¯UIResponderç±»å‹ï¼Œ<code>hit-tested view</code>è‡ªèº«å’Œå…¶åé¢çš„å“åº”è€…è§†å›¾ä¸Šéƒ½æ²¡æœ‰UIGestureRecognizerï¼Œåˆ™ç¬¬ä¸€å“åº”è€…æ˜¯<code>hit-tested view</code></p>
</li>
<li><p><code>hit-tested view</code>æ˜¯UIResponderç±»å‹ï¼Œ<code>hit-tested view</code>è‡ªèº«æˆ–è€…å’Œå…¶åé¢çš„å“åº”è€…è§†å›¾ä¸Šæœ‰UIGestureRecognizerï¼Œåˆ™ç¬¬ä¸€å“åº”è€…æ˜¯<code>hit-tested view</code>ä¸Šæˆ–è€…å’Œå…¶åé¢çš„å“åº”è€…è§†å›¾ä¸Šçš„UIGestureRecognizerï¼Œç¬¬äºŒå“åº”è€…æ˜¯<code>hit-tested view</code></p>
<blockquote>
<p>åœ¨è¿›è¡Œ<code>hit-tesing</code>è¿‡ç¨‹ä¸­ï¼Œ<code>UIEvent</code>ä¼šæ”¶é›†è¿™è¿‡ç¨‹å‘ç°çš„<code>UIGestureRecognizer</code>åˆ°å®ƒçš„<code>_allTouchesMutable-_gestureRecognizers</code>ä¸­</p>
<p><img src="/2020/%E5%BD%93%E7%94%A8%E6%88%B7%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%82%B9%E5%87%BBUIView%EF%BC%88%E5%85%B3%E4%BA%8EiOS%E7%A1%AC%E4%BB%B6%E4%BA%8B%E4%BB%B6%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%EF%BC%89/readme/_allTouchesMutable-_gestureRecognizers.png" alt="image"></p>
</blockquote>
</li>
</ul>
</li>
<li><p>UIApplicationå¯¹è±¡é€šè¿‡<code>sendEvent:</code>æŠŠè§¦æ‘¸äº‹ä»¶ï¼ˆUIEventï¼‰å‘é€ç»™ç¬¬ä¸€å“åº”è€…ï¼ˆfirst-responderï¼‰æˆ–è€…æœ€ä½³å“åº”è§†å›¾ï¼ˆhit-tested viewï¼‰ï¼›æœ€ä½³å“åº”è§†å›¾ï¼ˆhit-tested viewï¼‰æ”¶åˆ°äº‹ä»¶åä¼šæ²¿ç€å…¶å“åº”é“¾å†³ç­–å¤„ç†è¯¥è§¦æ‘¸äº‹ä»¶ï¼ˆUIEventï¼‰ã€‚</p>
<p> å…·ä½“åœ°ï¼ŒUIApplicationå¯¹è±¡å°†äº‹ä»¶é€šè¿‡<code>sendEvent:</code> ä¼ é€’ç»™äº‹ä»¶æ‰€å±çš„UIWindowå¯¹è±¡ï¼ŒUIWindowå¯¹è±¡æ ¹æ®ç¬¬ä¸€å“åº”è€…çš„ç±»å‹ï¼Œé‡‡ç”¨ä¸åŒçš„é€»è¾‘ä½¿ç”¨ <code>sendEvent:</code>æŠŠè§¦æ‘¸äº‹ä»¶åˆ†å‘ç»™å‘é€ç»™ç¬¬ä¸€å“åº”è€…ï¼ˆfirst-responderï¼‰æˆ–è€…æœ€ä½³å“åº”è§†å›¾ï¼ˆhit-tested viewï¼‰ï¼š</p>
<ul>
<li><p>è‹¥ç¬¬ä¸€å“åº”è€…ï¼ˆfirst-responderï¼‰æ˜¯æœ€ä½³å“åº”è§†å›¾ï¼ˆhit-tested viewï¼‰ï¼Œåˆ™äº‹ä»¶ç›´æ¥å‘é€ç»™æœ€ä½³å“åº”è§†å›¾ï¼ˆhit-tested viewï¼‰</p>
</li>
<li><p>è‹¥ç¬¬ä¸€å“åº”è€…ï¼ˆfirst-responderï¼‰UIGestureRecognizerï¼Œåˆ™æœ€ä½³å“åº”è§†å›¾ï¼ˆhit-tested viewï¼‰æ˜¯ç¬¬äºŒå“åº”è€…ï¼Œç„¶åäº‹ä»¶ä¼šå…ˆå‘ç»™UIGestureRecognizerï¼Œå†å‘ç»™æœ€ä½³å“åº”è§†å›¾ï¼ˆhit-tested viewï¼‰ï¼›UIGestureRecognizeræ”¶åˆ°äº‹ä»¶åï¼Œä¼šå¼€å§‹å¯¹äº‹ä»¶è¿›è¡Œè¯†åˆ«ï¼Œè¯†åˆ«è¿‡ç¨‹ä¸­ï¼Œäº‹ä»¶ä¼šç»§ç»­åˆ†å‘ç»™æœ€ä½³å“åº”è§†å›¾ï¼ˆhit-tested viewï¼‰ï¼›å½“UIGestureRecognizerè¯†åˆ«å‡ºäº‹ä»¶ä¸ºå…¶å¯¹åº”çš„æ‰‹åŠ¿åä¼šè§¦å‘<code>target-action</code>è°ƒç”¨ï¼Œå¹¶ä¸”äº‹ä»¶å°†åœæ­¢åˆ†å‘ç»™æœ€ä½³å“åº”è§†å›¾ï¼ˆhit-tested viewï¼‰</p>
<blockquote>
<p>æ‰‹åŠ¿è¯†åˆ«è¿‡ç¨‹ä¸­æˆ–è€…è¯†åˆ«æˆåŠŸåï¼Œå¯åˆ†åˆ«é€šè¿‡è®¾ç½®UIGestureRecognizerçš„<code>delaysTouchesBegan</code>å±æ€§å’Œ<code>cancelsTouchesInView</code>å±æ€§æ¥æ§åˆ¶æ˜¯å¦åˆ†å‘äº‹ä»¶ç»™æœ€ä½³å“åº”è§†å›¾ï¼ˆhit-tested viewï¼‰</p>
</blockquote>
<p><img src="/2020/%E5%BD%93%E7%94%A8%E6%88%B7%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%82%B9%E5%87%BBUIView%EF%BC%88%E5%85%B3%E4%BA%8EiOS%E7%A1%AC%E4%BB%B6%E4%BA%8B%E4%BB%B6%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%EF%BC%89/readme/sendEvent.png" alt="image"></p>
</li>
</ul>
</li>
</ol>
<h2 id="hit-tesing-æœºåˆ¶æ˜¯ä»€ä¹ˆ"><a href="#hit-tesing-æœºåˆ¶æ˜¯ä»€ä¹ˆ" class="headerlink" title="hit-tesing æœºåˆ¶æ˜¯ä»€ä¹ˆ"></a><code>hit-tesing</code> æœºåˆ¶æ˜¯ä»€ä¹ˆ</h2><p><img src="/2020/%E5%BD%93%E7%94%A8%E6%88%B7%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%82%B9%E5%87%BBUIView%EF%BC%88%E5%85%B3%E4%BA%8EiOS%E7%A1%AC%E4%BB%B6%E4%BA%8B%E4%BB%B6%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%EF%BC%89/readme/hit-tesing.png" alt="image"></p>
<ol>
<li><p>å½“æ‰‹æŒ‡æ¥è§¦å±å¹•ï¼ŒUIApplicationæ¥æ”¶åˆ°æ‰‹æŒ‡çš„è§¦æ‘¸äº‹ä»¶ä¹‹åï¼Œå°±ä¼šå»è°ƒç”¨UIWindowçš„<code>hitTest: withEvent:</code>æ–¹æ³•</p>
<blockquote>
<p>å¦‚æœå­˜åœ¨å¤šä¸ªUIWindowï¼Œåˆ™ä»KeyWindowå¼€å§‹éå†UIWindowæ•°ç»„</p>
</blockquote>
</li>
<li><p>åœ¨<code>hitTest: withEvent:</code>æ–¹æ³•ä¸­ä¼šè°ƒç”¨<code>pointInside: withEvent:</code>å»åˆ¤æ–­å½“å‰ç‚¹å‡»çš„pointæ˜¯å¦å±äºUIWindowèŒƒå›´å†…ï¼Œå¦‚æœæ˜¯ï¼Œå°±ä¼šä»¥å€’åºçš„æ–¹å¼éå†å®ƒçš„å­è§†å›¾ï¼Œå³è¶Šåæ·»åŠ çš„è§†å›¾ï¼Œè¶Šå…ˆéå†</p>
</li>
<li><p>å­è§†å›¾ä¹Ÿè°ƒç”¨è‡ªèº«çš„<code>hitTest: withEvent:</code>æ–¹æ³•ï¼Œæ¥æŸ¥æ‰¾æœ€ä½³å“åº”è§†å›¾ï¼Œè‹¥æŸä¸ªå­è§†å›¾å°±æ˜¯æœ€ä½³å“åº”è§†å›¾ï¼Œåˆ™è¿”å›è¯¥å­è§†å›¾ï¼›è‹¥æœ€ç»ˆæ²¡æœ‰ä»»ä½•ä¸€ä¸ªå­è§†å›¾æ˜¯æœ€ä½³å“åº”è§†å›¾ï¼Œå°±è¿”å›nil</p>
</li>
</ol>
<h2 id="hitTest-withEvent-æ–¹æ³•çš„å†…éƒ¨é€»è¾‘"><a href="#hitTest-withEvent-æ–¹æ³•çš„å†…éƒ¨é€»è¾‘" class="headerlink" title="hitTest: withEvent:æ–¹æ³•çš„å†…éƒ¨é€»è¾‘"></a><code>hitTest: withEvent:</code>æ–¹æ³•çš„å†…éƒ¨é€»è¾‘</h2><ol>
<li><p>åˆ¤æ–­å½“å‰è§†å›¾æ˜¯å¦æ»¡è¶³å“åº”æ¡ä»¶ï¼š</p>
<ul>
<li>å¯äº¤äº’ï¼š <code>userInteractionEnabled = YES</code></li>
<li>ééšè—ï¼š<code>hidden = NO</code></li>
<li>é€æ˜åº¦å¤§äº0ï¼š<code>alpha &gt; 0.01</code></li>
<li>è§¦æ‘¸ç‚¹çš„ä½ç½®åœ¨è§†å›¾èŒƒå›´å†…ï¼šé€šè¿‡<code>pointInside: withEvent:</code>æ–¹æ³•åˆ¤æ–­è§¦æ‘¸ç‚¹æ˜¯å¦åœ¨è§†å›¾çš„åæ ‡èŒƒå›´å†…</li>
</ul>
</li>
<li><p>è‹¥æ»¡è¶³å“åº”æ¡ä»¶ï¼Œåˆ™å€’åºéå†å…¶å­è§†å›¾æŸ¥æ‰¾æœ€ä½³å“åº”è§†å›¾ï¼Œè‹¥å­˜åœ¨æ›´ä½•æ—¶çš„å­è§†å›¾ï¼Œå°±è¿”å›å­è§†å›¾ï¼Œå¦åˆ™è¿”å›è‡ªèº«</p>
</li>
</ol>
<p>å…·ä½“ä»£ç é€»è¾‘å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="built_in">UIView</span> *)hitTest:(<span class="built_in">CGPoint</span>)point withEvent:(<span class="built_in">UIEvent</span> *)event &#123;</span><br><span class="line">    <span class="comment">//3ç§çŠ¶æ€æ— æ³•å“åº”äº‹ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>.isUserInteractionEnabled || <span class="keyword">self</span>.isHidden || <span class="keyword">self</span>.alpha &lt;= <span class="number">0.01</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">     <span class="comment">//è§¦æ‘¸ç‚¹è‹¥ä¸åœ¨å½“å‰è§†å›¾ä¸Šåˆ™æ— æ³•å“åº”äº‹ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span> pointInside:point withEvent:event]) &#123;</span><br><span class="line">         <span class="comment">//ä»åå¾€å‰éå†å­è§†å›¾æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">UIView</span> *subView <span class="keyword">in</span> [<span class="keyword">self</span>.subviews reverseObjectEnumerator]) &#123;</span><br><span class="line">            <span class="comment">// åæ ‡ç³»çš„è½¬æ¢,æŠŠè§¦æ‘¸ç‚¹åœ¨å½“å‰è§†å›¾ä¸Šåæ ‡è½¬æ¢ä¸ºåœ¨å­è§†å›¾ä¸Šçš„åæ ‡</span></span><br><span class="line">            <span class="built_in">CGPoint</span> convertedPoint = [subView convertPoint:point fromView:<span class="keyword">self</span>];</span><br><span class="line">             <span class="comment">//è¯¢é—®å­è§†å›¾å±‚çº§ä¸­çš„æœ€ä½³å“åº”è§†å›¾</span></span><br><span class="line">            <span class="built_in">UIView</span> *hitTestView = [subView hitTest:convertedPoint withEvent:event];</span><br><span class="line">            <span class="keyword">if</span> (hitTestView) &#123;</span><br><span class="line">                 <span class="comment">//å¦‚æœå­è§†å›¾ä¸­æœ‰æ›´åˆé€‚çš„å°±è¿”å›</span></span><br><span class="line">                <span class="keyword">return</span> hitTestView;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="comment">//æ²¡æœ‰åœ¨å­è§†å›¾ä¸­æ‰¾åˆ°æ›´åˆé€‚çš„å“åº”è§†å›¾ï¼Œé‚£ä¹ˆè‡ªèº«å°±æ˜¯æœ€åˆé€‚çš„</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å“åº”é“¾æ˜¯ä»€ä¹ˆ"><a href="#å“åº”é“¾æ˜¯ä»€ä¹ˆ" class="headerlink" title="å“åº”é“¾æ˜¯ä»€ä¹ˆ"></a>å“åº”é“¾æ˜¯ä»€ä¹ˆ</h2><p>å“åº”é“¾æ˜¯ä¸€ä¸ªä»¥ç¬¬ä¸€å“åº”è€…å¯¹è±¡ä¸ºèµ·ç‚¹ï¼Œä»¥AppDelegateå¯¹è±¡ä¸ºç»ˆç‚¹ï¼Œä»¥å“åº”è€…å¯¹è±¡ï¼ˆUIResponderå¯¹è±¡ï¼‰çš„<code>nextResponder</code>å±æ€§ä½œä¸ºè¿æ¥ä¸Šä¸€ä¸ªå’Œä¸‹ä¸€ä¸ªå“åº”è€…å¯¹è±¡å·¥å…·çš„ï¼Œä¸€ä¸ªå•å‘çš„ï¼Œå“åº”è€…å¯¹è±¡é“¾æ¡ã€‚</p>
<blockquote>
<p>æ¯ä¸€ä¸ªå“åº”è€…å¯¹è±¡ï¼ˆUIResponderå¯¹è±¡ï¼‰éƒ½æœ‰ä¸€ä¸ª<code>nextResponder</code>å±æ€§ï¼Œç”¨äºè·å–å“åº”é“¾ä¸­å½“å‰å¯¹è±¡çš„ä¸‹ä¸€ä¸ªå“åº”è€…ã€‚å› æ­¤ï¼Œä¸€æ—¦äº‹ä»¶çš„æœ€ä½³å“åº”è€…ç¡®å®šäº†ï¼Œè¿™ä¸ªäº‹ä»¶æ‰€å¤„çš„å“åº”é“¾å°±ç¡®å®šäº†ã€‚</p>
</blockquote>
<h2 id="å“åº”è€…å¯¹è±¡çš„nextResponderæ˜¯ä»€ä¹ˆ"><a href="#å“åº”è€…å¯¹è±¡çš„nextResponderæ˜¯ä»€ä¹ˆ" class="headerlink" title="å“åº”è€…å¯¹è±¡çš„nextResponderæ˜¯ä»€ä¹ˆ"></a>å“åº”è€…å¯¹è±¡çš„<code>nextResponder</code>æ˜¯ä»€ä¹ˆ</h2><p>ä¸åŒå“åº”è€…å¯¹è±¡ï¼ˆ<code>UIView</code>ã€<code>UIViewController</code>ã€<code>UIWindow</code>ã€<code>UIApplication</code>ï¼‰ï¼Œå…¶é»˜è®¤çš„<code>nextResponder</code>å®ç°å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>UIView</p>
<p>  è‹¥è§†å›¾æ˜¯æ§åˆ¶å™¨çš„æ ¹è§†å›¾ï¼Œåˆ™å…¶<code>nextResponder</code>ä¸ºæ§åˆ¶å™¨å¯¹è±¡ï¼›å¦åˆ™ï¼Œå…¶<code>nextResponder</code>ä¸ºçˆ¶è§†å›¾ã€‚</p>
</li>
<li><p>UIViewController</p>
<p>  è‹¥æ§åˆ¶å™¨çš„è§†å›¾æ˜¯windowçš„æ ¹è§†å›¾ï¼Œåˆ™å…¶<code>nextResponder</code>ä¸ºçª—å£å¯¹è±¡ï¼›è‹¥æ§åˆ¶å™¨æ˜¯ä»åˆ«çš„æ§åˆ¶å™¨presentå‡ºæ¥çš„ï¼Œåˆ™å…¶<code>nextResponder</code>ä¸ºpresenting view controllerã€‚</p>
</li>
<li><p>UIWindow</p>
<p>  <code>nextResponder</code>ä¸ºUIApplicationå¯¹è±¡ã€‚</p>
</li>
<li><p>UIApplication</p>
<p>  è‹¥å½“å‰åº”ç”¨çš„app delegateæ˜¯ä¸€ä¸ªUIResponderå¯¹è±¡ï¼Œä¸”ä¸æ˜¯UIViewã€UIViewControlleræˆ–appæœ¬èº«ï¼Œåˆ™UIApplicationçš„nextResponderä¸ºapp delegateã€‚</p>
</li>
</ul>
<p>å®˜ç½‘å¯¹äºå“åº”é“¾çš„ç¤ºä¾‹å±•ç¤º:</p>
<p><img src="/2020/%E5%BD%93%E7%94%A8%E6%88%B7%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%82%B9%E5%87%BBUIView%EF%BC%88%E5%85%B3%E4%BA%8EiOS%E7%A1%AC%E4%BB%B6%E4%BA%8B%E4%BB%B6%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%EF%BC%89/readme/nextResponder.png" alt="image"></p>
<h2 id="UIResponderç±»å‹å“åº”è€…å¦‚ä½•å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Ÿ"><a href="#UIResponderç±»å‹å“åº”è€…å¦‚ä½•å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Ÿ" class="headerlink" title="UIResponderç±»å‹å“åº”è€…å¦‚ä½•å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Ÿ"></a>UIResponderç±»å‹å“åº”è€…å¦‚ä½•å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Ÿ</h2><p>UIResponderç±»å‹å“åº”è€…å¯¹äºæ¥æ”¶åˆ°çš„äº‹ä»¶æœ‰3ç§æ“ä½œï¼š</p>
<ul>
<li>ä¸æ‹¦æˆªï¼Œé»˜è®¤æ“ä½œï¼šäº‹ä»¶ä¼šè‡ªåŠ¨æ²¿ç€é»˜è®¤çš„å“åº”é“¾å¾€ä¸‹ä¼ é€’</li>
<li>æ‹¦æˆªï¼Œä¸å†å¾€ä¸‹åˆ†å‘äº‹ä»¶ï¼šé‡å†™ <code>touchesBegan:withEvent:</code> è¿›è¡Œäº‹ä»¶å¤„ç†ï¼Œä¸è°ƒç”¨çˆ¶ç±»çš„ <code>touchesBegan:withEvent:</code></li>
<li>æ‹¦æˆªï¼Œç»§ç»­å¾€ä¸‹åˆ†å‘äº‹ä»¶ï¼šé‡å†™ <code>touchesBegan:withEvent:</code> è¿›è¡Œäº‹ä»¶å¤„ç†ï¼ŒåŒæ—¶è°ƒç”¨çˆ¶ç±»çš„ <code>touchesBegan:withEvent:</code> å°†äº‹ä»¶å¾€ä¸‹ä¼ é€’</li>
</ul>
<h2 id="UIControlç±»å‹å“åº”è€…å¦‚ä½•å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Ÿ"><a href="#UIControlç±»å‹å“åº”è€…å¦‚ä½•å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Ÿ" class="headerlink" title="UIControlç±»å‹å“åº”è€…å¦‚ä½•å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Ÿ"></a>UIControlç±»å‹å“åº”è€…å¦‚ä½•å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Ÿ</h2><p>UIControlæ˜¯UIResponderçš„å­ç±»ï¼Œå…¶å†…éƒ¨é‡å†™äº†touchç›¸å…³çš„æ–¹æ³•ï¼Œå½“å…¶æ”¶åˆ°è§¦æ‘¸äº‹ä»¶åï¼Œä¼šå¯¹äº‹ä»¶è¿›è¡Œè¯†åˆ«ï¼Œè‹¥ç¬¦åˆå“åº”æ¡ä»¶ï¼Œä¼šè§¦å‘target-actionè¿›è¡Œå“åº”ï¼š</p>
<p>å½“UIControlç›‘å¬åˆ°éœ€è¦å¤„ç†çš„äº¤äº’äº‹ä»¶æ—¶ï¼Œä¼šè°ƒç”¨<code>sendAction:to:forEvent:</code> å°†targetã€actionä»¥åŠeventå¯¹è±¡å‘é€ç»™å…¨å±€åº”ç”¨ï¼ŒApplicationå¯¹è±¡å†é€šè¿‡ <code>sendAction:to:from:forEvent:</code> å‘targetå‘é€actionã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<p>UIControlå¯¹è±¡æ‰§è¡Œ<code>addTarget:action:forControlEvents:</code> æ—¶ï¼Œè‹¥targetä¼ ç©ºï¼Œé‚£ä¹ˆå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼ŒUIApplicationå¯¹è±¡ä»<code>hited-view</code>å¼€å§‹æ²¿ç€å“åº”é“¾ä»ä¸Šå¾€ä¸‹å¯»æ‰¾èƒ½å“åº”actionçš„å¯¹è±¡ã€‚</p>
</blockquote>
<p><img src="/2020/%E5%BD%93%E7%94%A8%E6%88%B7%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%82%B9%E5%87%BBUIView%EF%BC%88%E5%85%B3%E4%BA%8EiOS%E7%A1%AC%E4%BB%B6%E4%BA%8B%E4%BB%B6%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%EF%BC%89/readme/sendAction.png" alt="image"></p>
<h2 id="å¦‚ä½•æ‰‹åŠ¨æ§åˆ¶è§¦æ‘¸äº‹ä»¶çš„æµå‘"><a href="#å¦‚ä½•æ‰‹åŠ¨æ§åˆ¶è§¦æ‘¸äº‹ä»¶çš„æµå‘" class="headerlink" title="å¦‚ä½•æ‰‹åŠ¨æ§åˆ¶è§¦æ‘¸äº‹ä»¶çš„æµå‘"></a>å¦‚ä½•æ‰‹åŠ¨æ§åˆ¶è§¦æ‘¸äº‹ä»¶çš„æµå‘</h2><p>ä¸€èˆ¬æœ‰2ä¸ªæ–¹æ¡ˆï¼š</p>
<ol>
<li>é‡å†™ï¼ˆOverrideï¼‰<code>hit-testing</code>çš„é€»è¾‘ï¼Œå…·ä½“åœ°å°±æ˜¯é‡å†™<code>UIResponder</code>å­ç±»çš„<code>hitTest: withEvent:</code>æ–¹æ³•æˆ–è€…<code>pointInside: withEvent:</code>æ–¹æ³•ï¼Œæ§åˆ¶è¿”å›çš„æœ€ä½³å“åº”è§†å›¾</li>
<li>é‡å†™ï¼ˆOverrideï¼‰è§¦æ‘¸äº‹ä»¶åœ¨å“åº”é“¾çš„ä¼ é€’é€»è¾‘ï¼Œæ§åˆ¶è§¦æ‘¸äº‹ä»¶çš„åˆ†å‘ï¼Œå…·ä½“åœ°å°±æ˜¯é‡å†™<code>UIResponder</code>å­ç±»çš„<code>touchesBegan:withEvent:</code>æ–¹æ³•ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚å¢åŠ å“åº”é€»è¾‘å’Œè°ƒç”¨çˆ¶ç±»çš„<code>touchesBegan:withEvent:</code>æ–¹æ³•ï¼Œä»¥æ§åˆ¶æ˜¯å¦æŠŠäº‹ä»¶ä¼ é€’ç»™<code>nextResponder</code></li>
</ol>
<blockquote>
<p>é¢˜ç›®å˜å½¢ï¼šå¦‚ä½•è®©å¤šä¸ªè§†å›¾å“åº”è§¦æ‘¸äº‹ä»¶</p>
</blockquote>
<h2 id="å¦‚ä½•æ‰©å¤§è§†å›¾çš„ç‚¹å‡»èŒƒå›´"><a href="#å¦‚ä½•æ‰©å¤§è§†å›¾çš„ç‚¹å‡»èŒƒå›´" class="headerlink" title="å¦‚ä½•æ‰©å¤§è§†å›¾çš„ç‚¹å‡»èŒƒå›´"></a>å¦‚ä½•æ‰©å¤§è§†å›¾çš„ç‚¹å‡»èŒƒå›´</h2><p>é‡è½½è§†å›¾çš„<code>hitTest: withEvent:</code>æ–¹æ³•æˆ–è€…<code>pointInside: withEvent:</code>æ–¹æ³•</p>
<h2 id="å¦‚ä½•è®©å¤šä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨å¹¶å­˜"><a href="#å¦‚ä½•è®©å¤šä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨å¹¶å­˜" class="headerlink" title="å¦‚ä½•è®©å¤šä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨å¹¶å­˜"></a>å¦‚ä½•è®©å¤šä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨å¹¶å­˜</h2><p>é‡è½½æ‰‹åŠ¿è¯†åˆ«å™¨çš„UIGestureRecognizerDelegateçš„<code>gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:</code>æ–¹æ³•</p>
<blockquote>
<p>é¢˜ç›®å˜å½¢ï¼šè§£å†³å³æ»‘è¿”å›æ‰‹åŠ¿å’ŒUIScrollViewä¸­çš„æ‰‹åŠ¿å†²çª</p>
</blockquote>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://juejin.im/entry/59a7b6e4f265da246f381d37" target="_blank" rel="noopener">ã€ŠiOSè§¦æ‘¸äº‹ä»¶å…¨å®¶æ¡¶ã€‹</a></li>
<li><a href="https://juejin.im/post/5d0e1e236fb9a07ee16931aa" target="_blank" rel="noopener">ã€ŠiOSäº‹ä»¶å¤„ç†ï¼Œçœ‹æˆ‘å°±å¤Ÿäº†~ã€‹</a></li>
<li><a href="https://juejin.im/post/6844903952773808136" target="_blank" rel="noopener">ã€Šã€iOSé¢è¯•ç²®é£Ÿã€‘UIè§†å›¾â€”iOSäº‹ä»¶çš„ä¼ é€’æœºåˆ¶ã€‹</a></li>
</ul>
]]></content>
      <categories>
        <category>çŸ¥è¯†å¤ç›˜</category>
      </categories>
      <tags>
        <tag>2020</tag>
        <tag>EveryThingFromTheFirstClick(iOS Version)</tag>
      </tags>
  </entry>
  <entry>
    <title>å½“ç¬¬ä¸€å¼ å›¾ç‰‡åŠ è½½æ¸²æŸ“æ—¶ï¼ˆæ¸²æŸ“åŸç†+å›¾ç‰‡è§£ç ï¼‰</title>
    <url>/2020/%E5%BD%93%E7%AC%AC%E4%B8%80%E5%BC%A0%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E6%B8%B2%E6%9F%93%E6%97%B6%EF%BC%88%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86+%E5%9B%BE%E7%89%87%E8%A7%A3%E7%A0%81%EF%BC%89/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><h2 id="UIImageå’ŒUIImageView"><a href="#UIImageå’ŒUIImageView" class="headerlink" title="UIImageå’ŒUIImageView"></a>UIImageå’ŒUIImageView</h2><p>UIImage å’Œ UIImageView çš„è§’è‰²ç±»ä¼¼äº MVC æ¶æ„æ¨¡å¼ä¸­çš„æ•°æ®å’Œè§†å›¾ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="/2020/%E5%BD%93%E7%AC%AC%E4%B8%80%E5%BC%A0%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E6%B8%B2%E6%9F%93%E6%97%B6%EF%BC%88%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86+%E5%9B%BE%E7%89%87%E8%A7%A3%E7%A0%81%EF%BC%89/readme/UIIamgeView-Model.png" alt="image"></p>
<p>UIImage æ˜¯ iOS ä¸­å¤„ç†å›¾åƒçš„é«˜çº§ç±»ã€‚åˆ›å»ºä¸€ä¸ª UIImage å®ä¾‹åªä¼šåŠ è½½ Data Bufferï¼Œå°†å›¾åƒæ˜¾ç¤ºåˆ°å±å¹•ä¸Šæ‰ä¼šè§¦å‘è§£ç ï¼Œä¹Ÿå°±æ˜¯ Data Buffer è§£ç ä¸º Image Bufferã€‚Image Buffer ä¹Ÿå…³è”åœ¨ UIImage ä¸Šã€‚</p>
<blockquote>
<ul>
<li><p>Data Buffer æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„åŸå§‹æ•°æ®ï¼Œå›¾åƒå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ ¼å¼ä¿å­˜ï¼Œå¦‚ jpgã€pngã€‚Data Buffer çš„ä¿¡æ¯ä¸èƒ½ç”¨æ¥æè¿°å›¾åƒçš„åƒç´ ä¿¡æ¯ã€‚</p>
</li>
<li><p>Image Buffer æ˜¯å›¾åƒåœ¨å†…å­˜ä¸­çš„å­˜åœ¨æ–¹å¼ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ æè¿°äº†ä¸€ä¸ªåƒç´ ç‚¹ã€‚Image Buffer çš„å¤§å°å’Œå›¾åƒçš„å¤§å°æˆæ­£æ¯”ã€‚</p>
</li>
</ul>
</blockquote>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://blog.jamchenjun.com/2018/08/22/image-and-graphics-best-practices.html" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠiOS å›¾åƒè§£ç å’Œæœ€ä½³å®è·µã€‹</a></li>
</ul>
<h2 id="UIImageè§£ç "><a href="#UIImageè§£ç " class="headerlink" title="UIImageè§£ç "></a>UIImageè§£ç </h2><p>åœ¨iOSä¸­ï¼ŒUIImageè§£ç åˆ†ä¸º2ç§ï¼š</p>
<ul>
<li><p>éšå¼è§£ç </p>
<p>  å°†å›¾åƒæ˜¾ç¤ºåˆ°å±å¹•ä¸Šä¼šè§¦å‘éšå¼è§£ç ã€‚ï¼ˆå¿…é¡»åŒæ—¶æ»¡è¶³å›¾åƒè¢«è®¾ç½®åˆ° UIImageView ä¸­ã€UIImageView æ·»åŠ åˆ°è§†å›¾ï¼Œæ‰ä¼šè§¦å‘å›¾åƒè§£ç ã€‚)</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">UIImageView</span> *imageView = [[<span class="built_in">UIImageView</span> alloc] init];</span><br><span class="line">[<span class="keyword">self</span>.view addSubview:imageView];</span><br><span class="line">[imageView setImage:image];</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰‹åŠ¨è§£ç </p>
<p>  ä½¿ç”¨iOSæä¾›çš„å›¾å½¢æ¡†æ¶ï¼ˆUIKitã€Core Graphicsã€Image I/Oç­‰ï¼‰æä¾›çš„APIè¿›è¡Œæ‰‹åŠ¨è§£ç </p>
</li>
</ul>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://www.jianshu.com/p/de7b6aede888" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠiOSçš„5ç§å›¾ç‰‡ç¼©ç•¥æŠ€æœ¯ä»¥åŠæ€§èƒ½æ¢è®¨ã€‹</a><h2 id="UIImageä¼˜åŒ–å®è·µ"><a href="#UIImageä¼˜åŒ–å®è·µ" class="headerlink" title="UIImageä¼˜åŒ–å®è·µ"></a>UIImageä¼˜åŒ–å®è·µ</h2></li>
</ul>
<ol>
<li><p>å‡å°‘å†…å­˜å ç”¨</p>
<p> å½“å®é™…æ˜¾ç¤ºçš„å›¾ç‰‡å°ºå¯¸å°äºå›¾ç‰‡çœŸå®å¤§å°æ—¶ï¼Œå¯¹å›¾ç‰‡è¿›è¡Œå‘ä¸‹é‡‡æ ·ï¼Œç”Ÿæˆç¼©ç•¥å›¾ä¾›UIå±‚ä½¿ç”¨ã€‚</p>
</li>
<li><p>ä¼˜åŒ– CPU ä½¿ç”¨</p>
<p> å»ºç«‹åå°çº¿ç¨‹ï¼Œåœ¨CPUç©ºé—²é˜¶æ®µï¼ˆç›‘å¬RunloopçŠ¶æ€ï¼Œè¿›å…¥ä¼‘çœ çŠ¶æ€æ—¶ï¼Œä¸»çº¿ç¨‹å˜ç©ºé—²ï¼‰å¯¹å›¾ç‰‡è¿›è¡Œæå‰è§£ç ã€‚</p>
</li>
</ol>
<h2 id="UIViewçš„æ¸²æŸ“"><a href="#UIViewçš„æ¸²æŸ“" class="headerlink" title="UIViewçš„æ¸²æŸ“"></a>UIViewçš„æ¸²æŸ“</h2><p>åŸºäºCore Animationçš„è§†å›¾æ¸²æŸ“æµæ°´çº¿</p>
<p><img src="/2020/%E5%BD%93%E7%AC%AC%E4%B8%80%E5%BC%A0%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E6%B8%B2%E6%9F%93%E6%97%B6%EF%BC%88%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86+%E5%9B%BE%E7%89%87%E8%A7%A3%E7%A0%81%EF%BC%89/readme/UIView-Render.png" alt="image"></p>
<ol>
<li><p>Commit Transaction</p>
<ul>
<li><p>Layoutï¼ˆå¸ƒå±€ï¼‰ï¼šSet up the views</p>
<p>  æ‰§è¡Œç»†èŠ‚ï¼šè°ƒç”¨<code>layoutSubviews</code>ï¼ˆè‹¥é‡å†™äº†ï¼‰ï¼›åˆ›å»ºViewå’Œæ‰§è¡Œ<code>addSubview:</code>ï¼›å¡«å……å†…å®¹å’Œæ•°æ®æŸ¥æ‰¾ï¼›ä¸€èˆ¬ä¼šé€ æˆCPUå’Œ I/Oç“¶é¢ˆ</p>
<p>  å¯ä¼˜åŒ–æ‰‹æ®µï¼šç®€åŒ–viewçš„å¸ƒå±€å’Œå±‚çº§ï¼›å‡å°‘ä½¿ç”¨xibã€storyboardç­‰</p>
</li>
<li><p>Displayï¼ˆæ˜¾ç¤ºï¼‰ï¼šDraw the views</p>
<p>  æ‰§è¡Œç»†èŠ‚ï¼š è°ƒç”¨ <code>drawRect:</code>ï¼ˆè‹¥é‡å†™äº†ï¼‰ï¼›ç»˜åˆ¶å­—ç¬¦ä¸²ï¼›ä¸€èˆ¬ä¼šé€ æˆCPUå’Œ å†…å­˜ç“¶é¢ˆ</p>
<p>  å¯ä¼˜åŒ–æ‰‹æ®µï¼šå‡å°‘è‡ªå®šä¹‰ç»˜åˆ¶ï¼ˆ<code>drawRect:</code>ï¼‰ï¼Œæˆ–è€…åœ¨è‡ªå®šä¹‰ç»˜åˆ¶ä¸­å‡å°‘å­—ç¬¦ä¸²ã€åœ†è§’layerç­‰å›¾å±‚ç»˜åˆ¶</p>
</li>
<li><p>Prepareï¼ˆå‡†å¤‡ï¼‰ï¼šAdditional Core Animation work</p>
<p>  æ‰§è¡Œç»†èŠ‚ï¼šå›¾ç‰‡è§£ç ï¼›å›¾ç‰‡æ ¼å¼è½¬æ¢ï¼ˆè½¬æ¢GPUä¸æ”¯æŒçš„å›¾ç‰‡ï¼‰ï¼›ä¸€èˆ¬ä¼šé€ æˆCPUå’Œ å†…å­˜ç“¶é¢ˆ</p>
<p>  å¯ä¼˜åŒ–æ‰‹æ®µï¼šå¼‚æ­¥çº¿ç¨‹è§£ç å›¾ç‰‡ï¼›å¯¹å¤§å›¾è¿›è¡Œå‘ä¸‹é‡‡æ ·æ˜¾ç¤ºï¼›ä½¿ç”¨GPUæ”¯æŒçš„å›¾ç‰‡</p>
</li>
<li><p>Commitï¼ˆæäº¤ï¼‰ï¼šPackage up layers and send them to render server</p>
<p>  æ‰§è¡Œç»†èŠ‚ï¼šé€’å½’å¤„ç†Layer-Treeï¼šæ‰“åŒ…Layerä¿¡æ¯å¹¶é€šè¿‡IPCå‘é€åˆ°Render Serverè¿›ç¨‹ï¼›å¦‚æœå›¾å±‚æ ‘å¤ªå¤æ‚ä¼šæ¶ˆè€—å¾ˆå¤§ï¼Œå¯¹æ€§èƒ½æœ‰å¾ˆå¤§çš„å½±å“</p>
<p>  å¯ä¼˜åŒ–æ‰‹æ®µï¼šç®€åŒ–å›¾å±‚æ ‘ï¼ˆå¦‚æœå›¾å±‚æ ‘å¤ªå¤æ‚ä¼šæ¶ˆè€—å¾ˆå¤§ï¼Œå¯¹æ€§èƒ½æœ‰å¾ˆå¤§çš„å½±å“ï¼‰</p>
</li>
</ul>
</li>
<li><p>Decode</p>
</li>
<li><p>DrawCalls</p>
</li>
<li><p>Render</p>
</li>
<li><p>Display</p>
</li>
</ol>
<h2 id="Core-Animation-æ€§èƒ½ä¼˜åŒ–"><a href="#Core-Animation-æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="Core Animation æ€§èƒ½ä¼˜åŒ–"></a>Core Animation æ€§èƒ½ä¼˜åŒ–</h2><ul>
<li><a href="http://zxfcumtcs.github.io/2015/03/21/CoreAnimation/" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠCore Animation æ€§èƒ½ä¼˜åŒ–ã€‹</a></li>
</ul>
<h2 id="Core-Animationæ‰§è¡ŒåŠ¨ç”»æ—¶æ¶‰åŠçš„å›¾å±‚æ ‘ç±»å‹æœ‰å‡ ç§"><a href="#Core-Animationæ‰§è¡ŒåŠ¨ç”»æ—¶æ¶‰åŠçš„å›¾å±‚æ ‘ç±»å‹æœ‰å‡ ç§" class="headerlink" title="Core Animationæ‰§è¡ŒåŠ¨ç”»æ—¶æ¶‰åŠçš„å›¾å±‚æ ‘ç±»å‹æœ‰å‡ ç§"></a>Core Animationæ‰§è¡ŒåŠ¨ç”»æ—¶æ¶‰åŠçš„å›¾å±‚æ ‘ç±»å‹æœ‰å‡ ç§</h2><p><img src="/2020/%E5%BD%93%E7%AC%AC%E4%B8%80%E5%BC%A0%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E6%B8%B2%E6%9F%93%E6%97%B6%EF%BC%88%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86+%E5%9B%BE%E7%89%87%E8%A7%A3%E7%A0%81%EF%BC%89/readme/layer-tree.png" alt="image"></p>
<ul>
<li><p>model layer tree (or simply â€œlayer treeâ€) </p>
<p>  æ¨¡å‹å±‚æ ‘çš„å¯¹è±¡ï¼ˆ<code>modelLayer</code>ï¼‰ç”¨äºå­˜æ”¾åŠ¨ç”»çš„ç›®æ ‡å€¼ï¼ˆæ¯”å¦‚èµ·å§‹å€¼å’Œç»“æŸå€¼ï¼‰ã€‚</p>
</li>
<li><p>presentation tree</p>
<p>  è¡¨ç¤ºå±‚æ ‘çš„å¯¹è±¡ï¼ˆ<code>presentationLayer</code>ï¼‰ç”¨äºç»™ä¸Šå±‚è®¿é—®åŠ¨ç”»è¿‡ç¨‹ä¸­çš„å®æ—¶å€¼ã€‚</p>
</li>
<li><p>render tree</p>
<p>  æ¸²æŸ“æ ‘çš„å¯¹è±¡ï¼ˆ<code>renderLayer</code>ï¼‰ç”¨äºå­˜æ”¾åŠ¨ç”»çš„ç»˜åˆ¶æ•°æ®ï¼Œä¾›å›¾å½¢ç³»ç»Ÿç»˜åˆ¶åŠ¨ç”»ä½¿ç”¨ï¼Œå¯¹ä¸Šå±‚å±è”½ã€‚</p>
<p>  render tree åœ¨ç³»ç»Ÿçš„Render Serverè¿›ç¨‹ä¸­ï¼Œæ˜¯çœŸæ­£å¤„ç†åŠ¨ç”»çš„åœ°æ–¹ã€‚è€Œä¸”çº¿ç¨‹çš„ä¼˜å…ˆçº§ä¹Ÿæ¯”æˆ‘ä»¬ä¸»çº¿ç¨‹ä¼˜å…ˆçº§é«˜ã€‚æ‰€ä»¥æœ‰æ—¶å€™å³ä½¿æˆ‘ä»¬çš„Appä¸»çº¿ç¨‹busyï¼Œä¾ç„¶ä¸ä¼šå½±å“åˆ°æ‰‹æœºå±å¹•çš„ç»˜åˆ¶å·¥ä½œ</p>
</li>
</ul>
<blockquote>
<ul>
<li><code>model layer tree</code>å…¶å®å°±æ˜¯æˆ‘ä»¬å£ä¸­å¸¸è¯´çš„å›¾å±‚æ ‘ï¼ˆ<code>layer tree</code>ï¼‰</li>
<li>é€šè¿‡<code>layer.modelLayer</code>å¯ä»¥è·å¾—ä¸€ä¸ªlayerå¯¹è±¡çš„<code>model layer object</code>ï¼›è€Œäº‹å®ä¸Š<code>layer.modelLayer</code>å°±æ˜¯Layerå¯¹è±¡æœ¬èº«ï¼Œå³<code>layer == layer.modelLayer</code></li>
<li>é€šè¿‡<code>layer.presentationLayer</code>å¯ä»¥è·å¾—ä¸€ä¸ªlayerå¯¹è±¡çš„<code>presentation layer object</code>çš„å‰¯æœ¬</li>
</ul>
</blockquote>
<h2 id="iOS-æ¸²æŸ“æ¡†æ¶"><a href="#iOS-æ¸²æŸ“æ¡†æ¶" class="headerlink" title="iOS æ¸²æŸ“æ¡†æ¶"></a>iOS æ¸²æŸ“æ¡†æ¶</h2><ul>
<li><p>UIKit Framework</p>
<ul>
<li>æ­£å¦‚Appleå®˜æ–¹æ–‡æ¡£å¯¹UIKit Frameworkçš„ä»‹ç»ï¼Œå®ƒä¸»è¦æä¾›äº†ï¼šç•Œé¢å‘ˆç°èƒ½åŠ›ã€äº‹ä»¶å“åº”èƒ½åŠ›ã€é©±åŠ¨RunLoopè¿è¡Œå’Œä¸ç³»ç»Ÿå†…æ ¸é€šä¿¡çš„æ•°æ®ã€‚ç®€å•æ¥è¯´å°±æ˜¯ï¼šä¸»è¦è´Ÿè´£ç•Œé¢å±•ç¤ºã€äº‹ä»¶å“åº”ä»¥åŠæ˜¯RunLoopçš„éœ€æ±‚æ–¹ã€‚UIViewå½“ç„¶æ˜¯å±äºUIKit Frameworkã€‚</li>
</ul>
</li>
<li><p>QuartzCore Framework(CoreAnimation)</p>
<ul>
<li>æ­£å¦‚Appleå®˜æ–¹æ–‡æ¡£å¯¹Quarz Core Frameworkçš„ä»‹ç»ï¼Œå®ƒæä¾›äº†å›¾å½¢å¤„ç†å’Œè§†é¢‘å›¾åƒå¤„ç†çš„èƒ½åŠ›ã€‚ç®€å•æ¥è¯´å°±æ˜¯ï¼šQuartzCore Frameworkè´Ÿè´£æŠŠå›¾å½¢å›¾åƒæœ€ç»ˆæ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼Œè¿™é‡Œæˆ‘è§‰å¾—åº”è¯¥æ˜¯ç‰¹æŒ‡CoreAnimationã€‚ä¸è¦ä»å­—é¢ä¸Šå»ç†è§£CoreAnimationçš„èŒè´£ï¼Œå› ä¸ºå®ƒçš„æ ¸å¿ƒå·¥ä½œä¸å•æ˜¯è´Ÿè´£åŠ¨ç”»çš„åˆ›å»ºå’Œæ‰§è¡Œï¼Œå®ƒè¿˜è´Ÿè´£æŠŠæˆ‘ä»¬ç”¨ä»£ç æ„å»ºçš„ç•Œé¢æ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼Œå®é™…ä¸Šæ˜¯CoreAnimationé€šè¿‡OpenGLESåšçš„ã€‚ï¼ˆåˆ«æ€¥ï¼Œè™½ç„¶è¿™é‡Œé¢çš„æœºç†å¾ˆå¤æ‚ï¼Œä½†æ˜¯åœ¨åé¢ä¼šæåˆ°ï¼‰ã€‚CALayeræ˜¯å±äºQuarzCore Frameworkä¸‹çš„CoreAnimation</li>
</ul>
</li>
<li><p>CoreGraphics Framework</p>
<ul>
<li>å¦‚Appleå®˜æ–¹æ–‡æ¡£å¯¹Core Graphics Frameworkçš„ä»‹ç»ã€‚CoreGraphics Frameworkä¸€ä¸ªåŸºäºCåº“å‡½æ•°çš„é«˜çº§ç»˜ç”»å¼•æ“ï¼Œå®ƒæä¾›äº†éå¸¸å¼ºå¤§çš„è½»é‡çº§2Dæ¸²æŸ“èƒ½åŠ›ã€‚å¯ä»¥ä½¿ç”¨CoreGraphicså¤„ç†åŸºäºpathçš„ç»˜å›¾å·¥ä½œ(å¦‚ï¼ŒCGPath)ã€å˜å½¢æ“ä½œ(å¦‚ï¼ŒCGAffineTransform)ã€é¢œè‰²ç®¡ç†(å¦‚ï¼ŒCGColor)ã€ç¦»å±æ¸²æŸ“(å¦‚ï¼ŒCGBitmapContextCreateImage)ã€æ¸²æŸ“æ¨¡å¼(patterns)ã€æ¸å˜(gradients)ã€é˜´å½±æ•ˆæœã€å›¾å½¢æ•°æ®ç®¡ç†ã€å›¾å½¢åˆ›å»ºã€è’™ç‰ˆä»¥åŠPDFæ–‡æ¡£çš„åˆ›å»ºã€æ˜¾ç¤ºå’Œè§£æã€‚ åƒä¸‡åˆ«å’ŒQuartzCoreæ··æ·†ï¼ŒCoreGraphicsè´Ÿè´£åˆ›å»ºæ˜¾ç¤ºåˆ°å±å¹•ä¸Šçš„æ•°æ®æ¨¡å‹ï¼ŒQuartzCore(CoreAnimation â€“&gt; OpenGLES)è´Ÿè´£æŠŠCoreGraphicsåˆ›å»ºçš„æ•°æ®æ¨¡å‹çœŸæ­£æ˜¾ç¤ºåˆ°å±å¹•ä¸Šã€‚ CGæ‰“å¤´çš„ç±»éƒ½æ˜¯å±äºCoreGraphics Framework</li>
<li>å½“å¼€å‘è€…éœ€è¦åœ¨ è¿è¡Œæ—¶åˆ›å»ºå›¾åƒ æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Core Graphics å»ç»˜åˆ¶ã€‚ä¸ä¹‹ç›¸å¯¹çš„æ˜¯ è¿è¡Œå‰åˆ›å»ºå›¾åƒï¼Œä¾‹å¦‚ç”¨ Photoshop æå‰åšå¥½å›¾ç‰‡ç´ æç›´æ¥å¯¼å…¥åº”ç”¨ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘ä»¬æ›´éœ€è¦ Core Graphics å»åœ¨è¿è¡Œæ—¶å®æ—¶è®¡ç®—ã€ç»˜åˆ¶ä¸€ç³»åˆ—å›¾åƒå¸§æ¥å®ç°åŠ¨ç”»ã€‚</li>
</ul>
</li>
<li><p>Core Image</p>
<ul>
<li>Core Image ä¸ Core Graphics æ°æ°ç›¸åï¼ŒCore Graphics ç”¨äºåœ¨ è¿è¡Œæ—¶åˆ›å»ºå›¾åƒï¼Œè€Œ Core Image æ˜¯ç”¨æ¥å¤„ç† è¿è¡Œå‰åˆ›å»ºçš„å›¾åƒ çš„ã€‚Core Image æ¡†æ¶æ‹¥æœ‰ä¸€ç³»åˆ—ç°æˆçš„å›¾åƒè¿‡æ»¤å™¨ï¼Œèƒ½å¯¹å·²å­˜åœ¨çš„å›¾åƒè¿›è¡Œé«˜æ•ˆçš„å¤„ç†ã€‚</li>
<li>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼ŒCore Image ä¼šåœ¨ GPU ä¸­å®Œæˆå·¥ä½œï¼Œä½†å¦‚æœ GPU å¿™ï¼Œä¼šä½¿ç”¨ CPU è¿›è¡Œå¤„ç†ã€‚</li>
</ul>
</li>
<li><p>OpenGL ES</p>
<ul>
<li>OpenGL ESï¼ˆOpenGL for Embedded Systemsï¼Œç®€ç§° GLESï¼‰ï¼Œæ˜¯ OpenGL çš„å­é›†ã€‚åœ¨å‰é¢çš„ å›¾å½¢æ¸²æŸ“åŸç†ç»¼è¿° ä¸€æ–‡ä¸­æåˆ°è¿‡ OpenGL æ˜¯ä¸€å¥—ç¬¬ä¸‰æ–¹æ ‡å‡†ï¼Œå‡½æ•°çš„å†…éƒ¨å®ç°ç”±å¯¹åº”çš„ GPU å‚å•†å¼€å‘å®ç°ã€‚</li>
</ul>
</li>
<li><p>Metal</p>
<ul>
<li>Metal ç±»ä¼¼äº OpenGL ESï¼Œä¹Ÿæ˜¯ä¸€å¥—ç¬¬ä¸‰æ–¹æ ‡å‡†ï¼Œå…·ä½“å®ç°ç”±è‹¹æœå®ç°ã€‚å¤§å¤šæ•°å¼€å‘è€…éƒ½æ²¡æœ‰ç›´æ¥ä½¿ç”¨è¿‡ Metalï¼Œä½†å…¶å®æ‰€æœ‰å¼€å‘è€…éƒ½åœ¨é—´æ¥åœ°ä½¿ç”¨ Metalã€‚Core Animationã€Core Imageã€SceneKitã€SpriteKit ç­‰ç­‰æ¸²æŸ“æ¡†æ¶éƒ½æ˜¯æ„å»ºäº Metal ä¹‹ä¸Šçš„ã€‚</li>
<li>å½“åœ¨çœŸæœºä¸Šè°ƒè¯• OpenGL ç¨‹åºæ—¶ï¼Œæ§åˆ¶å°ä¼šæ‰“å°å‡ºå¯ç”¨ Metal çš„æ—¥å¿—ã€‚æ ¹æ®è¿™ä¸€ç‚¹å¯ä»¥çŒœæµ‹ï¼ŒApple å·²ç»å®ç°äº†ä¸€å¥—æœºåˆ¶å°† OpenGL å‘½ä»¤æ— ç¼æ¡¥æ¥åˆ° Metal ä¸Šï¼Œç”± Metal æ‹…ä»»çœŸæ­£äºç¡¬ä»¶äº¤äº’çš„å·¥ä½œã€‚</li>
</ul>
</li>
</ul>
<h2 id="UIKit-Frameworkã€QuartzCore-Framework-CoreAnimation-ã€CoreGraphics-Framework-ä¸‰è€…çš„å…³ç³»"><a href="#UIKit-Frameworkã€QuartzCore-Framework-CoreAnimation-ã€CoreGraphics-Framework-ä¸‰è€…çš„å…³ç³»" class="headerlink" title="UIKit Frameworkã€QuartzCore Framework(CoreAnimation)ã€CoreGraphics Framework ä¸‰è€…çš„å…³ç³»"></a>UIKit Frameworkã€QuartzCore Framework(CoreAnimation)ã€CoreGraphics Framework ä¸‰è€…çš„å…³ç³»</h2><p><img src="/2020/%E5%BD%93%E7%AC%AC%E4%B8%80%E5%BC%A0%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E6%B8%B2%E6%9F%93%E6%97%B6%EF%BC%88%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86+%E5%9B%BE%E7%89%87%E8%A7%A3%E7%A0%81%EF%BC%89/readme/UIKit.png" alt="image"></p>
<p>UIKit å»ºç«‹åœ¨ Core Animation åŸºç¡€ä¹‹ä¸Šï¼Œåœ¨ Core Animation ä¹‹ä¸‹æ˜¯ OpenGL ES å’Œ Core Graphicsï¼Œåˆ†åˆ«å¯¹åº” GPU å’Œ CPUã€‚Core Animation æœ¬èº«å¹¶ä¸åšæ¸²æŸ“å·¥ä½œï¼Œè€Œæ˜¯å°†è¿™äº›å·¥ä½œè½¬äº¤ç»™ Graphics Hardware(GPU)å¤„ç†ã€‚</p>
]]></content>
      <categories>
        <category>çŸ¥è¯†å¤ç›˜</category>
      </categories>
      <tags>
        <tag>2020</tag>
        <tag>EveryThingFromTheFirstClick(iOS Version)</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰‹Yå·¥ç¨‹å®è·µä¹‹Podfile.lockç®¡ç†æ–°æ–¹æ¡ˆ</title>
    <url>/2021/%E6%89%8BY%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5%E4%B9%8BPodfile.lock%E7%AE%A1%E7%90%86%E6%96%B0%E6%96%B9%E6%A1%88/readme/</url>
    <content><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>åœ¨iOSå·¥ç¨‹æ¥å…¥<code>CocoaPods</code>åšä¾èµ–ç®¡ç†åï¼Œå¼€å‘è€…å¯¹<code>Podfile.lock</code>çš„ç®¡ç†ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼š</p>
<ol>
<li>ä¸æŠŠ<code>Podfile.lock</code>çº³å…¥ç‰ˆæœ¬ç®¡ç†</li>
<li>æŠŠ<code>Podfile.lock</code>çº³å…¥ç‰ˆæœ¬ç®¡ç†</li>
</ol>
<p>è¿™ä¸¤ç§æ–¹æ¡ˆå„æœ‰ä¼˜åŠ£å’Œå„æœ‰é€‚ç”¨åœºæ™¯ï¼š</p>
<ol>
<li>ç¬¬1ç§æ–¹æ¡ˆä¸å¼ºåˆ¶å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç»Ÿä¸€ç‰ˆæœ¬çš„<code>CocoaPods</code>ï¼Œå¯¹å›¢é˜Ÿæˆå‘˜è¾ƒä¸ºå‹å¥½ï¼Œä½†æ˜¯æ— æ³•ä¿è¯å›¢é˜Ÿæˆå‘˜åœ¨æœ¬åœ°å®‰è£…çš„ä¾èµ–æ˜¯ä¸€è‡´çš„ï¼›å…¶é€‚åˆä¸ªäººæˆ–è€…å‰æœŸå¯¹è§„èŒƒä¸ä½œè¦æ±‚ã€è§„æ¨¡å¾ˆå°çš„å›¢é˜Ÿ</li>
<li>ç¬¬2ç§æ–¹æ¡ˆèƒ½ä¿è¯å›¢é˜Ÿæˆå‘˜åœ¨æœ¬åœ°å®‰è£…çš„ä¾èµ–æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯å´è¦å¼ºåˆ¶å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç»Ÿä¸€ç‰ˆæœ¬çš„<code>CocoaPods</code>ï¼›å…¶é€‚åˆå¯¹è§„èŒƒæœ‰è¦æ±‚çš„å›¢é˜Ÿ</li>
</ol>
<p>åœ¨æˆ‘åŠ å…¥æ‰‹Yå›¢é˜Ÿä¹‹å‰ï¼Œæ‰‹Yå›¢é˜Ÿé€‰ç”¨çš„æ˜¯ç¬¬1ç§æ–¹æ¡ˆã€‚åŸºäºç¬¬1ç§æ–¹æ¡ˆçš„é€‰æ‹©ï¼Œä¸ºäº†èƒ½ä¿è¯å›¢é˜Ÿæˆå‘˜åœ¨æœ¬åœ°å®‰è£…çš„ä¾èµ–æ˜¯ä¸€è‡´çš„ï¼Œæ‰‹Yå›¢é˜Ÿåˆåšäº†ä»¥ä¸‹çš„è§£å†³æªæ–½ï¼š</p>
<blockquote>
<p>Podfileé‡Œçš„æ¯ä¸ªåº“éƒ½å£°æ˜ä¸€ä¸ªå…·åçš„å›ºå®šç‰ˆæœ¬å·ï¼Œå¦‚<code>pod &#39;yyabtestsdk&#39;, &#39;2.1.0-dev.2&#39;</code>ã€<code>pod &#39;yybaseapisdk&#39;, :git=&gt;&#39;https://xxx/yybaseapisdk-ios.git&#39;, :tag =&gt; &#39;7.46.0-dev.8&#39;</code>ã€‚</p>
</blockquote>
<p>éšç€å›¢é˜Ÿçš„å˜å¤§ï¼ˆç°åœ¨iOSä¸šåŠ¡ç«¯å·²æœ‰40+äººï¼‰ï¼Œè¿™ç§æ–¹æ¡ˆçš„å¼Šç«¯é€æ¸æš´éœ²ï¼š</p>
<ul>
<li><p>æ— æ³•ç™¾åˆ†ç™¾ç¡®ä¿ç¼–è¯‘è¿è¡Œé˜¶æ®µï¼Œå›¢é˜Ÿæˆå‘˜çš„æœ¬åœ°å®‰è£…çš„ä¾èµ–æ˜¯ä¸€è‡´çš„</p>
<p>è¿™ä¸ªå¼Šç«¯å¯¹åº”çš„åœºæ™¯æ˜¯ï¼šæœ‰äººæ›´æ–°äº†<code>Podfile</code>ï¼Œå®‰è£…äº†<code>éBreakingChanges</code>çš„ã€æ–°ç‰ˆæœ¬çš„ä¾èµ–åº“ï¼Œå¹¶è¿›è¡Œäº†ä»£ç æ¨é€ï¼›å…¶ä»–äººæ‹‰å–ä»£ç åï¼Œè‹¥ä¸æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡<code>Pod install/update</code>ï¼Œå…¶æœ¬åœ°å®‰è£…çš„ä¾èµ–æ˜¯è½åçš„ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘è¿è¡Œé˜¶æ®µï¼Œç”±äºä»£ç å…¼å®¹ï¼Œè‹¥éå‡ºç°ä¸¥é‡bugï¼Œå…¶ä¸ä¼šå‘ç°å…¶æœ¬åœ°ä¾èµ–éœ€è¦æ›´æ–°ã€‚</p>
</li>
<li><p>å› æœ¬åœ°ä¾èµ–çš„ç‰ˆæœ¬ä¸æ­£ç¡®å¯¼è‡´ç¼–è¯‘å¤±è´¥çš„æ—¶æœºå»¶è¿Ÿå‘ç”Ÿåˆ°äº†ç¼–è¯‘ä¸­åæœŸ</p>
<p>è¿™ä¸ªå¼Šç«¯å¯¹åº”çš„åœºæ™¯æ˜¯ï¼šæœ‰äººæ›´æ–°äº†<code>Podfile</code>ï¼Œå®‰è£…äº†<code>BreakingChanges</code>çš„ã€æ–°ç‰ˆæœ¬çš„ä¾èµ–åº“ï¼Œå¹¶è¿›è¡Œäº†ä»£ç æ¨é€ï¼›å…¶ä»–äººæ‹‰å–ä»£ç åï¼Œè‹¥ä¸æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡<code>Pod install/update</code>ï¼Œå…¶æœ¬åœ°å®‰è£…çš„ä¾èµ–æ˜¯è½åçš„ï¼Œç„¶åå…¶è¿›è¡Œç¼–è¯‘æ—¶ï¼Œç”±äºä»£ç ä¸å…¼å®¹ï¼Œä¼šå‘ç°ç¼–è¯‘å¤±è´¥äº†â€”â€”ä½†æ˜¯è¿™æ—¶å€™ç¼–è¯‘å¤±è´¥çš„æ—¶æœºå¸¸å¸¸æ˜¯å‘ç”Ÿåœ¨ç¼–è¯‘ä¸­åæœŸâ€”â€”åœ¨è®©å¼€å‘è€…è‡³å°‘ç­‰å¾…äº†åå‡ åˆ†é’Ÿåæ‰æŠ›å‡ºç¼–è¯‘å¤±è´¥çš„é”™è¯¯â€”â€”è¿™ç›¸å½“å½±å“å¼€å‘è€…çš„å¿ƒæƒ…å’Œå·¥ä½œæ•ˆç‡ã€‚</p>
<blockquote>
<p>å¯¹äº<code>BreakingChanges</code>çš„ç–‘é—®å¯çœ‹ä¸‹æ–‡çš„ã€ŠQ&amp;Aã€‹</p>
</blockquote>
</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™äº›å¼Šç«¯ï¼Œæœ‰å¿…è¦è€ƒè™‘é‡æ–°æŠŠ<code>Podfile.lock</code>çº³å…¥ç‰ˆæœ¬ç®¡ç†ã€‚é‚£æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ¡ˆï¼Œèƒ½åŒæ—¶è·å¾—ä¸Šè¿°ç¬¬1ç§æ–¹æ¡ˆå’Œç¬¬2ç§æ–¹æ¡ˆçš„æ”¶ç›Šå‘¢ï¼Ÿå…·ä½“æ˜¯ï¼Œå¸Œæœ›æœ‰ä¸€ç§æ–¹æ¡ˆèƒ½æ»¡è¶³ä»¥ä¸‹çš„éœ€æ±‚ï¼š</p>
<ol>
<li>ä¿è¯å›¢é˜Ÿæˆå‘˜æœ¬åœ°å®‰è£…çš„ä¾èµ–æ˜¯ä¸€è‡´çš„</li>
<li>å…è®¸å›¢é˜Ÿæˆå‘˜ä¸ä½¿ç”¨ç»Ÿä¸€ç‰ˆæœ¬çš„<code>CocoaPods</code></li>
<li>æŠŠå› æœ¬åœ°ä¾èµ–çš„ç‰ˆæœ¬ä¸æ­£ç¡®å¯¼è‡´ç¼–è¯‘å¤±è´¥çš„æ—¶æœºä»ç¼–è¯‘ä¸­åæœŸæå‰åˆ°ç¼–è¯‘å‰ï¼Œå¸®åŠ©æå‡å¼€å‘æ•ˆç‡</li>
<li>æ–°æ–¹æ¡ˆå¯¹å½“å‰å›¢é˜Ÿæˆå‘˜æ˜¯é›¶è´Ÿæ‹…ï¼ˆä¸å¼ºåˆ¶å›¢é˜Ÿæˆå‘˜åšä¸å¿…è¦çš„äº‹ã€ä¸è€—è´¹å›¢é˜Ÿæˆå‘˜ä¸å¿…è¦çš„æ³¨æ„åŠ›å’Œç²¾åŠ›ï¼‰</li>
</ol>
<p>ä¸ºæ­¤ï¼Œæˆ‘åˆ¶å®šäº†ä¸€ä¸ªæ–°çš„<code>Podfile.lock</code>ç®¡ç†æ–¹æ¡ˆï¼Œä¸‹é¢å°†ä¼šåšå…·ä½“çš„ä»‹ç»ã€‚</p>
<a id="more"></a>

<h2 id="æ‰‹Yå·¥ç¨‹çš„Podfile-lockç®¡ç†æ–°æ–¹æ¡ˆ"><a href="#æ‰‹Yå·¥ç¨‹çš„Podfile-lockç®¡ç†æ–°æ–¹æ¡ˆ" class="headerlink" title="æ‰‹Yå·¥ç¨‹çš„Podfile.lockç®¡ç†æ–°æ–¹æ¡ˆ"></a>æ‰‹Yå·¥ç¨‹çš„Podfile.lockç®¡ç†æ–°æ–¹æ¡ˆ</h2><p><code>Podfile.lock</code>ç®¡ç†æ–°æ–¹æ¡ˆæ˜¯ï¼šä½¿ç”¨ Podfile.lock æ–‡ä»¶å‰¯æœ¬ Podfile.lock.dumpï¼ˆç›¸æ¯”åŸä»¶ï¼Œä¸è®°å½• CocoaPods ç‰ˆæœ¬ä¿¡æ¯ï¼‰ä»£æ›¿ Podfile.lock æ–‡ä»¶çº³å…¥ç‰ˆæœ¬ç®¡ç†ä»¥ä¿è¯å›¢é˜Ÿå„æˆå‘˜æœ¬åœ°å®‰è£…çš„ä¾èµ–æ˜¯ä¸€è‡´çš„ï¼Œå¹¶ä¿®æ”¹ CocoaPods ä¸­å’Œ Podfile.lock æ–‡ä»¶ç›¸å…³çš„é€»è¾‘ï¼ŒåŒ…æ‹¬ Podfile.lock æ–‡ä»¶çš„è¯»å†™é€»è¾‘å’Œ Manifest.lock çš„æ£€æµ‹é€»è¾‘ï¼ˆManifest.lock æ£€æµ‹è„šæœ¬ã€ŠXcode Run Script Phase - [CP] Check Pods Manifest.lockã€‹ï¼‰ã€‚ç›¸å…³é€»è¾‘çš„ä¿®æ”¹å€ŸåŠ©<code>Ruby</code>å¼ºå¤§çš„<code>Method Swizzling</code>èƒ½åŠ›å®ç°ï¼Œæ•´ä½“æŠ€æœ¯æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<ol>
<li><p>hook <code>CocoaPods</code> çš„è¯»å–<code>Podfile.lock</code>ä¿¡æ¯çš„æ–¹æ³•<code>lockfile</code>ï¼ˆ<code>Pod::Config.lockfile</code>ï¼‰ï¼Œå˜æ›´é€»è¾‘ä¸ºï¼šä» <code>Podfile.lock.dump</code>è¯»å–ä¾èµ–åº“ä¿¡æ¯ï¼Œä»<code>Podfile.lock</code>è¯»å–<code>CocoaPods</code>ç‰ˆæœ¬ä¿¡æ¯ï¼Œä»¥åŠæŠŠ<code>Podfile.lock.dump</code>è®°å½•çš„ä¾èµ–åº“ä¿¡åŒæ­¥åˆ°<code>Podfile.lock</code>ï¼›</p>
</li>
<li><p>hook <code>CocoaPods</code>çš„åˆ›å»º<code>Podfile.lock</code>çš„æ–¹æ³•<code>write_lockfiles</code>ï¼ˆ<code>Pod::Installer.write_lockfiles</code>ï¼‰ï¼Œå°†å…¶é€»è¾‘å˜æ›´ä¸ºï¼šåˆ›å»º<code>Podfile.lock</code>åï¼Œå†åŸºäº<code>Podfile.lock</code>åˆ›å»ºä¸€ä¸ªç§»é™¤äº†<code>CocoaPods</code>ç‰ˆæœ¬ä¿¡æ¯çš„å‰¯æœ¬<code>Podfile.lock.dump</code>ï¼›ç„¶åäººä¸ºæŠŠ<code>Podfile.lock.dump</code>çº³å…¥ç‰ˆæœ¬ç®¡ç†</p>
<blockquote>
<p>ä¸Šè¿°2ä¸ªæ“ä½œæ˜¯ä¸ºäº†æ»¡è¶³éœ€æ±‚1å’Œéœ€æ±‚2ã€‚å¯¹äºæ­¤ä¸¾çš„ç–‘é—®å¯çœ‹ä¸‹æ–‡çš„ã€ŠQ&amp;Aã€‹ã€‚</p>
</blockquote>
</li>
<li><p>hook <code>CocoaPods</code>çš„åˆ›å»º<code>Manifest.lock</code>æ£€æµ‹è„šæœ¬çš„æ–¹æ³•<code>add_check_manifest_lock_script_phase</code>ï¼ˆ<code>Pod::Installer::UserProjectIntegrator::TargetIntegrator.add_check_manifest_lock_script_phase</code>ï¼‰ï¼Œå°†å…¶é€»è¾‘å˜æ›´ä¸ºï¼šåŸºäºæœ¬åœ°çš„<code>Manifest.lock</code>åˆ›å»ºå‰¯æœ¬<code>Manifest.lock.dump</code>ï¼Œå¹¶æ¯”è¾ƒ<code>Manifest.lock.dump</code>æ˜¯å¦å’Œ<code>Podfile.lock.dump</code>ä¸€è‡´ï¼›è‹¥ä¸ä¸€è‡´ï¼Œå°±ä½¿ç”¨<code>Podfile.lock.dump</code>æ›´æ–°æœ¬åœ°çš„ <code>Podfile.lock</code>ï¼Œå¹¶æŠ›å‡ºé”™è¯¯ä¿¡æ¯å’Œä¸­æ–­ç¼–è¯‘</p>
<blockquote>
<p>æ­¤ä¸¾æ˜¯ä¸ºäº†æ»¡è¶³éœ€æ±‚3ã€‚</p>
</blockquote>
</li>
<li><p>åœ¨æ‰§è¡Œ<code>pod install/update</code>æ—¶ï¼Œå®Œæˆä¸Šè¿°çš„hook</p>
</li>
</ol>
<p>ä¸ºäº†åŒæ—¶æ»¡è¶³éœ€æ±‚1å’Œéœ€æ±‚2ï¼Œæ–°æ–¹æ¡ˆé‡‡å–çš„æªæ–½æ˜¯ï¼šåŸºäº<code>Podfile.lock</code>ç”Ÿæˆä¸€ä¸ªä¸è®°å½•<code>CocoaPods</code>ç‰ˆæœ¬ä¿¡æ¯çš„å‰¯æœ¬<code>Podfile.lock.dump</code>ï¼Œå¹¶ä½¿ç”¨<code>Podfile.lock.dump</code>ä»£æ›¿<code>Podfile.lock</code>çº³å…¥ç‰ˆæœ¬ç®¡ç†ã€‚</p>
<p>æŠ€æœ¯æ–¹æ¡ˆå®æ–½å¦‚ä¸‹ï¼š</p>
<ol>
<li>åœ¨å·¥ç¨‹æ ¹ç›®å½•åˆ›å»ºhook <code>CocoaPods</code>çš„ä»£ç <code>PodilePatch_HookPod.rb</code>ï¼š</li>
</ol>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pod::Lockfile</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Update internal cocoapods version.</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">update_internal_cocoapods_version</span><span class="params">(version)</span></span></span><br><span class="line">    internal_data[<span class="string">'COCOAPODS'</span>] = version</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pod::Config</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># <span class="doctag">@return</span> [Lockfile] The Local Lockfile to use for the current execution.</span></span><br><span class="line">  <span class="comment"># <span class="doctag">@return</span> [Nil] If no Lockfile is available.</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">local_lockfile</span></span></span><br><span class="line">    @local_lockfile <span class="params">||</span>= Pod::Lockfile.from_file(lockfile_path) <span class="keyword">if</span> lockfile_path</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Returns the path of the Lockfile.</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># <span class="doctag">@note</span> The Lockfile is named `Podfile.lock.dump`.</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">team_lockfile_path</span></span></span><br><span class="line">    @team_lockfile_path <span class="params">||</span>= installation_root + <span class="string">'Podfile.lock.dump'</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># <span class="doctag">@return</span> [Lockfile] The Team Lockfile to use for the current execution.</span></span><br><span class="line">  <span class="comment"># <span class="doctag">@return</span> [Nil] If no Lockfile is available.</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">team_lockfile</span></span></span><br><span class="line">    @team_lockfile <span class="params">||</span>= Pod::Lockfile.from_file(team_lockfile_path) <span class="keyword">if</span> team_lockfile_path</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># <span class="doctag">@return</span> [bool] If yes The Local Lockfile is did be updated with The Team Lockfile</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="keyword">attr_accessor</span> <span class="symbol">:did_update_local_lockfile</span></span><br><span class="line">  did_update_local_lockfile = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># ç”¨æˆ·æ‹‰å–ä»£ç åï¼Œç«‹å³æ‰§è¡Œ pod installï¼Œè‹¥æœ¬åœ°çš„ Podfile.lock éæœ€æ–°ï¼Œè¿™æ—¶å€™ä¼šå¯¼è‡´å®‰è£…çš„ä¾èµ–æ˜¯æ—§çš„ï¼Œå¹¶ä¸”å¯¼è‡´ Podfile.lock.dump ä¹Ÿå˜æˆæ—§çš„</span></span><br><span class="line">  <span class="comment"># ä¸ºäº†è§£å†³æ­¤é—®é¢˜ï¼Œé’ˆå¯¹æ­¤ç§åœºæ™¯ï¼Œhook Pod::Config.lockfile æ–¹æ³•ï¼Œåœ¨ç”¨æˆ·æ‰§è¡Œ pod install/update æ—¶ï¼Œä» Podfile.lock.dump è¯»å–ä¾èµ–åº“ä¿¡æ¯ï¼Œä» Podfile.lock è¯»å– CocoaPods ç‰ˆæœ¬ä¿¡æ¯ï¼Œä»¥åŠæŠŠ Podfile.lock.dump è®°å½•çš„ä¾èµ–åº“ä¿¡åŒæ­¥åˆ° Podfile.lock</span></span><br><span class="line">  <span class="comment"># modify lockfile method</span></span><br><span class="line">  define_method(<span class="symbol">:lockfile</span>) <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># ä½¿ç”¨ Podfile.lock.dumpï¼ˆä¾èµ–åº“ä¿¡æ¯ï¼‰ å’Œ Podfile.lock ï¼ˆCocoaPodsç‰ˆæœ¬ä¿¡æ¯ï¼‰ç”Ÿæˆ Lockfile</span></span><br><span class="line">    <span class="comment"># ä»¥åŠåŒæ­¥ Podfile.lock.dumpï¼ˆä¾èµ–åº“ä¿¡æ¯ï¼‰åˆ° Podfile.lock</span></span><br><span class="line">    <span class="keyword">if</span> team_lockfile <span class="keyword">and</span> local_lockfile <span class="keyword">and</span> (did_update_local_lockfile == <span class="literal">false</span>)</span><br><span class="line">      puts <span class="string">"read Lockinfo from <span class="subst">#&#123;team_lockfile_path&#125;</span> and <span class="subst">#&#123;lockfile_path&#125;</span>"</span></span><br><span class="line">      <span class="comment"># puts "Generated Lockfile Instances: team_lockfile(#&#123;team_lockfile&#125;) and local_lockfile(#&#123;local_lockfile&#125;)"</span></span><br><span class="line"></span><br><span class="line">      cocoapods_version_str = <span class="string">"<span class="subst">#&#123;local_lockfile.cocoapods_version&#125;</span>"</span></span><br><span class="line">      team_lockfile.update_internal_cocoapods_version(cocoapods_version_str)</span><br><span class="line">      puts <span class="string">"team_lockfile.cocoapods_version: <span class="subst">#&#123;cocoapods_version_str&#125;</span>"</span></span><br><span class="line"></span><br><span class="line">      update_cmd = <span class="string">"cp Podfile.lock.dump Podfile.lock &amp;&amp; echo \"COCOAPODS: <span class="subst">#&#123;cocoapods_version_str&#125;</span>\"&gt;&gt; Podfile.lock"</span></span><br><span class="line">      puts <span class="string">"<span class="subst">#&#123;update_cmd&#125;</span>"</span></span><br><span class="line">      system update_cmd</span><br><span class="line"></span><br><span class="line">      did_update_local_lockfile = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    @lockfile <span class="params">||</span>= team_lockfile</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pod::Installer</span></span></span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">dump_podfile_lock</span><span class="params">()</span></span></span><br><span class="line">    puts <span class="string">"dump Podfile.lock now ..."</span></span><br><span class="line"></span><br><span class="line">    system <span class="string">'cp Podfile.lock Podfile.lock.dump &amp;&amp; sed -i "" "/^COCOAPODS:/"d Podfile.lock.dump'</span></span><br><span class="line">    </span><br><span class="line">    puts <span class="string">"dump Podfile.lock at path(./Podfile.lock.dump) done!!!"</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># å°†æ¥è‹¥å›¢é˜Ÿçš„CocoaPodséƒ½å‡çº§åˆ°v1.10+åï¼Œå¯åœ¨æ–°ç‰¹æ€§ post_integrate hookä¸­æ‰§è¡Œ dump_podfile_lock</span></span><br><span class="line">  <span class="comment"># modify write_lockfiles method</span></span><br><span class="line">  old_write_lockfiles = instance_method(<span class="symbol">:write_lockfiles</span>)</span><br><span class="line">  define_method(<span class="symbol">:write_lockfiles</span>) <span class="keyword">do</span></span><br><span class="line">    old_write_lockfiles.bind(<span class="keyword">self</span>).()</span><br><span class="line">    dump_podfile_lock()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">UserProjectIntegrator::TargetIntegrator</span></span></span><br><span class="line">    <span class="comment"># modify add_check_manifest_lock_script_phase method</span></span><br><span class="line">    define_method(<span class="symbol">:add_check_manifest_lock_script_phase</span>) <span class="keyword">do</span></span><br><span class="line">        phase_name = CHECK_MANIFEST_PHASE_NAME</span><br><span class="line">        native_targets.each <span class="keyword">do</span> <span class="params">|native_target|</span></span><br><span class="line">          phase = UserProjectIntegrator::TargetIntegrator.create_or_update_shell_script_build_phase(native_target, BUILD_PHASE_PREFIX + phase_name)</span><br><span class="line">          native_target.build_phases.unshift(phase).uniq! <span class="keyword">unless</span> native_target.build_phases.first == phase</span><br><span class="line">          phase.shell_script = &lt;&lt;-SH.strip_heredoc</span><br><span class="line">            export LANG=en_US.UTF-<span class="number">8</span></span><br><span class="line">            </span><br><span class="line">            Podfile_lock_dump_file=<span class="string">"$&#123;PODS_PODFILE_DIR_PATH&#125;/Podfile.lock.dump"</span></span><br><span class="line">            <span class="keyword">if</span> [ ! -f $&#123;Podfile_lock_dump_file&#125; ]; <span class="keyword">then</span></span><br><span class="line">                echo <span class="string">"$&#123;Podfile_lock_dump_file&#125; not found"</span> &gt;&amp;<span class="number">2</span></span><br><span class="line">                exit <span class="number">0</span></span><br><span class="line">            fi</span><br><span class="line"></span><br><span class="line">            Manifest_lock_dump_file=<span class="string">"$&#123;PODS_ROOT&#125;/Manifest.lock.dump"</span></span><br><span class="line">            cp <span class="string">"$&#123;PODS_ROOT&#125;/Manifest.lock"</span> $&#123;Manifest_lock_dump_file&#125; &amp;&amp; sed -i <span class="string">""</span> <span class="string">"/^COCOAPODS:/"</span>d $&#123;Manifest_lock_dump_file&#125;</span><br><span class="line">            <span class="keyword">if</span> [ ! -f $&#123;Manifest_lock_dump_file&#125; ]; <span class="keyword">then</span></span><br><span class="line">                echo <span class="string">"$&#123;Manifest_lock_dump_file&#125; not found"</span> &gt;&amp;<span class="number">2</span></span><br><span class="line">                exit <span class="number">0</span></span><br><span class="line">            fi</span><br><span class="line"></span><br><span class="line">            diff $&#123;Podfile_lock_dump_file&#125; $&#123;Manifest_lock_dump_file&#125; &gt; <span class="regexp">/dev/null</span></span><br><span class="line">            <span class="keyword">if</span> [ $? != <span class="number">0</span> ] ; <span class="keyword">then</span></span><br><span class="line">                <span class="comment"># ä½¿ç”¨ Podfile.lock.dump è¦†ç›–æœ¬åœ°çš„ Podfile.lock</span></span><br><span class="line">                cp $&#123;Podfile_lock_dump_file&#125; <span class="string">"$&#123;PODS_PODFILE_DIR_PATH&#125;/Podfile.lock"</span> &amp;&amp; echo <span class="string">"COCOAPODS: $(pod --version)"</span>&gt;&gt; <span class="string">"$&#123;PODS_PODFILE_DIR_PATH&#125;/Podfile.lock"</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># æŠ›å‡ºé”™è¯¯ï¼Œæé†’å¼€å‘è€…</span></span><br><span class="line">                echo <span class="string">"error: The sandbox is not in sync with the Podfile.lock. Run 'pod install' or update your CocoaPods installation.\n(é”™è¯¯: æœ¬åœ°å®‰è£…çš„Podåº“ä¾èµ–éæœ€æ–°ã€‚è¯·æ‰§è¡Œ 'pod install' æˆ–è€…æ›´æ–°ä½ çš„ CocoaPods ç‰ˆæœ¬ã€‚)"</span> &gt;&amp;<span class="number">2</span></span><br><span class="line"></span><br><span class="line">                exit <span class="number">1</span></span><br><span class="line">            fi</span><br><span class="line">            <span class="comment"># This output is used by Xcode 'outputs' to avoid re-running this script phase.</span></span><br><span class="line">            echo <span class="string">"SUCCESS"</span> &gt; <span class="string">"$&#123;SCRIPT_OUTPUT_FILE_0&#125;"</span></span><br><span class="line">          SH</span><br><span class="line">          phase.input_paths = <span class="string">%w($&#123;PODS_PODFILE_DIR_PATH&#125;/Podfile.lock $&#123;PODS_ROOT&#125;/Manifest.lock)</span></span><br><span class="line">          phase.output_paths = [target.check_manifest_lock_script_output_file_path]</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨å·¥ç¨‹çš„<code>Podfile</code>ä¸­å¼•å…¥hookçš„ä»£ç ï¼š</li>
</ol>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># hook pod</span></span><br><span class="line">require_relative <span class="string">'PodilePatch_HookPod'</span></span><br><span class="line"></span><br><span class="line">target <span class="string">'Demo'</span> <span class="keyword">do</span></span><br><span class="line">  pod <span class="string">'AFNetworking'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>æŠ€æœ¯æ–¹æ¡ˆå®æ–½å®Œæ¯•åï¼ŒæŒ‰ç…§ä¸šç•Œä»¥å¾€æŠŠ<code>Podfile.lock</code>çº³å…¥ç‰ˆæœ¬ç®¡ç†åçš„æ–¹å¼åšå·¥ç¨‹å¼€å‘å³å¯ï¼š<code>pod install</code> first alwaysã€‚</p>
<h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><h3 id="ä½•ä¸ºBreakingChangesç‰ˆæœ¬çš„ä¾èµ–åº“ï¼Ÿ"><a href="#ä½•ä¸ºBreakingChangesç‰ˆæœ¬çš„ä¾èµ–åº“ï¼Ÿ" class="headerlink" title="ä½•ä¸ºBreakingChangesç‰ˆæœ¬çš„ä¾èµ–åº“ï¼Ÿ"></a>ä½•ä¸º<code>BreakingChanges</code>ç‰ˆæœ¬çš„ä¾èµ–åº“ï¼Ÿ</h3><p><code>BreakingChanges</code>ç‰ˆæœ¬çš„ä¾èµ–åº“ï¼Œå…¶ä»£ç æ˜¯ä¸å…¼å®¹çš„ï¼Œå…¶å¸¸è§çš„ä¸€ä¸ªç‰¹å¾å°±æ˜¯ï¼šAPIä¸å…¼å®¹ï¼Œæ¯”å¦‚æ—§ç‰ˆæœ¬çš„API<code>f(a,b)</code>åœ¨æ–°ç‰ˆæœ¬å˜æˆäº†<code>f(a,b,c)</code>ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠPodfile-lockçº³å…¥ç‰ˆæœ¬ç®¡ç†ï¼Œè€Œæ˜¯ä½¿ç”¨å…¶å‰¯æœ¬Pofile-lock-dumpï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠPodfile-lockçº³å…¥ç‰ˆæœ¬ç®¡ç†ï¼Œè€Œæ˜¯ä½¿ç”¨å…¶å‰¯æœ¬Pofile-lock-dumpï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠPodfile.lockçº³å…¥ç‰ˆæœ¬ç®¡ç†ï¼Œè€Œæ˜¯ä½¿ç”¨å…¶å‰¯æœ¬Pofile.lock.dumpï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠPodfile.lockçº³å…¥ç‰ˆæœ¬ç®¡ç†ï¼Œè€Œæ˜¯ä½¿ç”¨å…¶å‰¯æœ¬Pofile.lock.dumpï¼Ÿ</h3><p><code>Podfile.lock</code>çº³å…¥ç‰ˆæœ¬ç®¡ç†åï¼Œè‹¥å›¢é˜Ÿæˆå‘˜å®‰è£…çš„<code>CocoaPods</code>ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶ä¼šç”±äºè®°å½•çš„<code>CocoaPods</code>ç‰ˆæœ¬ä¿¡æ¯ä¸ä¸€è‡´ï¼Œå¸¸å¸¸å¼•èµ·ç‰ˆæœ¬å†²çªâ€”â€”è¿™å¯¼è‡´å›¢é˜Ÿæˆå‘˜æ¯æ¬¡æ›´æ–°ä¾èµ–æ—¶éƒ½å¯èƒ½è¦è§£å†³ä¸€æ¬¡è¿™ç§å†²çªï¼Œè€—è´¹å›¢é˜Ÿæˆå‘˜ä¸å¿…è¦çš„ç²¾åŠ›ã€‚</p>
<p>é‚£æ˜¯å¦å¯ä»¥åœ¨ç”Ÿæˆ<code>Podfile.lock</code>æ—¶ï¼Œç§»é™¤<code>CocoaPods</code>ç‰ˆæœ¬ä¿¡æ¯å‘¢ï¼Ÿ</p>
<p>åœ¨è¡¨é¢ä¸Šï¼Œè¿™èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œè¿™æ ·åšï¼Œä¼šå¯¼è‡´åœ¨æ‰§è¡Œ<code>pod install</code>æ—¶ï¼Œå³ä½¿æœ¬åœ°çš„ä¾èµ–å·²ç»æ˜¯æœ€æ–°çš„ï¼Œç”±äº<code>CocoaPods</code>ç‰ˆæœ¬ä¿¡æ¯ç¼ºå¤±ï¼Œ<code>CocoaPods</code>éƒ½ä¼šä¸ºé‡æ–°å®‰è£…ä¸€æ¬¡æ‰€æœ‰çš„ä¾èµ–ï¼Œæµªè´¹äº†å›¢é˜Ÿæˆå‘˜çš„æ—¶é—´ã€‚</p>
<h3 id="é™¤äº†ä¸Šè¿°æ–¹æ¡ˆï¼Œæ˜¯å¦è¿˜æœ‰å…¶ä»–ç®¡ç†æ–¹æ¡ˆå—ï¼Ÿ"><a href="#é™¤äº†ä¸Šè¿°æ–¹æ¡ˆï¼Œæ˜¯å¦è¿˜æœ‰å…¶ä»–ç®¡ç†æ–¹æ¡ˆå—ï¼Ÿ" class="headerlink" title="é™¤äº†ä¸Šè¿°æ–¹æ¡ˆï¼Œæ˜¯å¦è¿˜æœ‰å…¶ä»–ç®¡ç†æ–¹æ¡ˆå—ï¼Ÿ"></a>é™¤äº†ä¸Šè¿°æ–¹æ¡ˆï¼Œæ˜¯å¦è¿˜æœ‰å…¶ä»–ç®¡ç†æ–¹æ¡ˆå—ï¼Ÿ</h3><p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚è¿™é‡Œåˆ†äº«å¦å¤–ä¸¤ç§æŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<p>ç¬¬1ç§æŠ€æœ¯æ–¹æ¡ˆï¼šä½¿ç”¨<a href="https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E5%B1%9E%E6%80%A7" target="_blank" rel="noopener external nofollow noreferrer">Git Attributes</a>ï¼Œè‡ªå®šä¹‰<code>smudge</code>å’Œ<code>clean</code>å­è¿‡æ»¤å™¨ï¼Œè®©<code>git</code>â€œå¿½ç•¥â€<code>Podfile.lock</code>ä¸­è®°å½•<code>CocoaPodsç‰ˆæœ¬ä¿¡æ¯</code>çš„æ–‡æœ¬è¡Œã€‚å…·ä½“å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>å·¥ç¨‹æ ¹ç›®å½•åˆ›å»º<code>.gitattributes</code>ï¼Œå¹¶æ·»åŠ è‡ªå®šä¹‰è¿‡æ»¤å™¨æ‰§è¡Œè§„åˆ™ï¼š</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo "Podfile.lock filter=ignorePodVersion" &gt; .gitattributes</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸º<code>ignorePodVersion</code>è¿‡æ»¤å™¨åˆ†åˆ«è®¾ç½®<code>smudge</code>å’Œ<code>clean</code>å­è¿‡æ»¤å™¨ï¼š</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git config --local filter.ignorePodVersion.smudge 'sed -i "" "/^COCOAPODS:/"d Podfile.lock &amp;&amp; echo "COCOAPODS: $(pod --version)" &gt;&gt; Podfile.lock'</span><br><span class="line"></span><br><span class="line">git config --local filter.ignorePodVersion.clean 'sed -i "" "/^COCOAPODS:/"d Podfile.lock</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li><p><code>smudge</code>å­è¿‡æ»¤å™¨ä¼šåœ¨æ–‡ä»¶è¢«æ£€å‡ºæ—¶è§¦å‘<br><img src="https://git-scm.com/book/en/v2/images/smudge.png" alt=" â€œsmudgeâ€è¿‡æ»¤å™¨ä¼šåœ¨æ–‡ä»¶è¢«æ£€å‡ºæ—¶è§¦å‘"></p>
</li>
<li><p><code>clean</code>å­è¿‡æ»¤å™¨ä¼šåœ¨æ–‡ä»¶è¢«æš‚å­˜æ—¶è§¦å‘<br>  <img src="https://git-scm.com/book/en/v2/images/clean.png" alt="â€œcleanâ€è¿‡æ»¤å™¨ä¼šåœ¨æ–‡ä»¶è¢«æš‚å­˜æ—¶è§¦å‘"></p>
</li>
</ul>
</blockquote>
</li>
</ol>
<p>ä½†æ˜¯è¿™ç§æ–¹æ¡ˆï¼Œä¼šè€—è´¹å›¢é˜Ÿæˆå‘˜ä¸å¿…è¦çš„æ³¨æ„åŠ›ï¼šæ¯æ¬¡<code>checkout</code>ä»£ç æ—¶ï¼Œ<code>Podfile.lock</code>éƒ½è¢«<code>git</code>æ ‡è®°ä¸º<code>modified</code>ï¼Œå›¢é˜Ÿæˆå‘˜åœ¨ç»ˆç«¯æˆ–è€…SourceTreeæäº¤ä»£ç æ—¶ï¼Œç”±äºè¿™ä¸ªå˜æ›´ä¸æ˜¯å‡ºè‡ªå›¢é˜Ÿæˆå‘˜è‡ªèº«æ“ä½œå¯¼è‡´çš„ï¼Œå›¢é˜Ÿæˆå‘˜éš¾å…ç–‘æƒ‘ï¼Œç»§è€Œè€—è´¹ä¸€äº›æ³¨æ„åŠ›å’Œç²¾åŠ›å»ç†è§£è¿™ä¸ªäº‹æƒ…â€”â€”è€Œè¿™æ­£æ˜¯æˆ‘åŠªåŠ›å»é¿å…ç»™å›¢é˜Ÿæˆå‘˜çš„è´Ÿæ‹…ä¹‹ä¸€ã€‚</p>
<p>ç¬¬2ç§æŠ€æœ¯æ–¹æ¡ˆï¼šä½¿ç”¨<code>bundler</code>å’Œ<code>Gemfile</code>ã€‚<code>bundler</code>ç›¸å½“äº<code>CocoaPods</code>ï¼Œ<code>Gemfile</code>ç›¸å½“äº<code>Podfile</code>ï¼Œè¿™2ä¸ªæ˜¯<code>Ruby</code>å¼€å‘ä¸­ç”¨äºç®¡ç†ä¾èµ–çš„å·¥å…·â€”â€”æˆ‘ä»¬å¯å€ŸåŠ©å®ƒä»¬å¸®åŠ©ç»Ÿä¸€ç®¡ç†å½“å‰é¡¹ç›®çš„<code>Ruby</code>å·¥å…·é“¾ç‰ˆæœ¬ï¼Œä»è€Œæ»¡è¶³ä¸Šè¿°çš„éœ€æ±‚1ã€2ã€3ã€‚å…·ä½“å®æ–½å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>å®‰è£…<code>bundler</code>ï¼Œå¹¶åœ¨å·¥ç¨‹æ ¹ç›®å½•ä¸‹åˆ›å»º<code>Gemfile</code>ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo gem install bundler</span><br><span class="line">cd path/to/project_root_dir</span><br><span class="line"><span class="meta">#</span><span class="bash"> create Gemfile</span></span><br><span class="line">bundle init</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¾‘<code>Gemfile</code>ï¼Œå¹¶æ·»åŠ é¡¹ç›®æ‰€éœ€çš„<code>Ruby</code>å·¥å…·é“¾ç‰ˆæœ¬ä¿¡æ¯ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># frozen_string_literal: true</span></span><br><span class="line"></span><br><span class="line">source <span class="string">"https://rubygems.org"</span></span><br><span class="line"></span><br><span class="line">git_source(<span class="symbol">:github</span>) &#123;<span class="params">|repo_name|</span> <span class="string">"https://github.com/<span class="subst">#&#123;repo_name&#125;</span>"</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ‰€éœ€çš„ Rubyå·¥å…·é“¾</span></span><br><span class="line">gem <span class="string">'cocoapods'</span>, <span class="string">"1.10.1"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å·¥ç¨‹æ ¹ç›®å½•æ‰§è¡Œ<code>sudo bundle install</code>ï¼Œå®‰è£…é¡¹ç›®æ‰€éœ€çš„<code>Ruby</code>å·¥å…·é“¾ï¼Œå¹¶æŒ‰éœ€æŠŠç”Ÿæˆçš„<code>Gemfile.lock</code>çº³å…¥ç‰ˆæœ¬ç®¡ç†</p>
<blockquote>
<p>æ³¨æ„ï¼šæ¯æ¬¡æ›´æ–°äº†æ‰€éœ€çš„<code>Ruby</code>å·¥å…·é“¾ç‰ˆæœ¬ï¼Œéƒ½éœ€è¦æ‰§è¡Œä¸€æ¬¡<code>sudo bundle install</code></p>
</blockquote>
</li>
<li><p>å®‰è£…æˆåŠŸåï¼Œå¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨<code>bundle exec pod install/update</code>ä»£æ›¿<code>pod install/update</code>ä¸ºå·¥ç¨‹å®‰è£…<code>pod</code>ä¾èµ–</p>
</li>
</ol>
<p>ç”±äºéœ€è¦å¼•å…¥<code>bundler</code>å’Œ<code>Gemfile</code>ï¼Œä»¥åŠä½¿ç”¨<code>bundler exec pod install/update</code>ä»£æ›¿<code>pod install/update</code>ï¼Œè¿™æ–œåœ¨æˆ‘çœ‹æ¥ä¸ç¬¦åˆæˆ‘çš„éœ€æ±‚4ï¼Œæ•…æ²¡æœ‰é‡‡å–æ­¤æ–¹æ¡ˆã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šä¸€èˆ¬æ¥è¯´ï¼Œå·¥å…·é“¾ç‰ˆæœ¬æ¯”è¾ƒç¨³å®šï¼Œå…¶å˜æ›´é¢‘ç‡è¿œè¿œä½äºå·¥ç¨‹ä»£ç ä¾èµ–çš„ç‰ˆæœ¬å˜åŒ–ã€‚å…¶ä»–å›¢é˜Ÿåœ¨è¯„ä¼°å¼•å…¥<code>bundler</code>å’Œ<code>Gemfile</code>ç»™å›¢é˜Ÿæˆå‘˜å¸¦æ¥çš„è´Ÿæ‹…æ—¶ï¼Œåº”æ ¹æ®è‡ªå·±å½“å‰å›¢é˜Ÿçš„æƒ…å†µï¼ˆæ¯”å¦‚äººæ•°ã€æŠ€æœ¯æ ˆç­‰ï¼‰è¿›è¡Œè¯„ä¼°ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>æ•™ç¨‹</tag>
        <tag>2021</tag>
        <tag>å·¥ç¨‹å®è·µ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰‹Yå¼€å‘è§„èŒƒåŒ–å»ºè®¾ä¸€ï¼šCommit Message è§„èŒƒå»ºè®¾</title>
    <url>/2021/%E6%89%8BY%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E5%8C%96%E5%BB%BA%E8%AE%BE%E4%B8%80%EF%BC%9ACommit%20Message%20%E8%A7%84%E8%8C%83%E5%BB%BA%E8%AE%BE/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æˆ‘äº2020å¹´å¹´ä¸­åŠ å…¥äº†æ‰‹æœºYY iOSå›¢é˜Ÿï¼Œé‚£æ—¶å‘ç°å›¢é˜Ÿæˆå‘˜åœ¨ç‰¹æ€§é˜¶æ®µæ‰€å†™çš„<code>Commit Message</code>æ¯”è¾ƒéšæ„ï¼›åœ¨é›†æˆé˜¶æ®µï¼Œåˆ™æ¯”è¾ƒç»Ÿä¸€ï¼š</p>
<p><img src="/2021/%E6%89%8BY%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E5%8C%96%E5%BB%BA%E8%AE%BE%E4%B8%80%EF%BC%9ACommit%20Message%20%E8%A7%84%E8%8C%83%E5%BB%BA%E8%AE%BE/readme/old-commit-msgs.awebp" alt="image.png"></p>
<blockquote>
<p>è¿™é‡Œç®€è¦ä»‹ç»ä¸€ä¸‹æ‰‹Yå›¢é˜Ÿé‡‡ç”¨çš„<code>Git</code>åˆ†æ”¯ç®¡ç†æ¨¡å‹å’Œ<code>YY GitLab Server</code>ç«¯å¯¹<code>maint</code>åˆ†æ”¯å®æ–½çš„<code>Commit Message</code>è§„èŒƒã€‚</p>
<p>æ‰‹Yå›¢é˜Ÿé‡‡ç”¨çš„<code>Git</code>åˆ†æ”¯ç®¡ç†æ¨¡å‹æ˜¯ä¸€ç§åŸºäºä¸»å¹²çš„åˆ†æ”¯æ¨¡å‹ï¼š<code>master-maint-feature</code>ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li><code>master</code>åˆ†æ”¯æ˜¯ä¸»å¹²åˆ†æ”¯ï¼Œç”¨äºå­˜æ”¾å¯¹å¤–å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œæ°¸ä¹…å­˜åœ¨ï¼Œå±äºé•¿ç”Ÿå‘½å‘¨æœŸ</li>
<li><code>maint</code>åˆ†æ”¯æ˜¯é›†æˆåˆ†æ”¯ï¼Œä»<code>master</code>åˆ†æ”¯æ‹‰å‡ºï¼Œç”¨äºé›†æˆç‰¹æ€§å’Œå‘å¸ƒç‰ˆæœ¬ï¼Œå­˜åœ¨äºé›†æˆé˜¶æ®µï¼ˆåœ¨æ­¤é˜¶æ®µï¼Œå›¢é˜Ÿæˆå‘˜éƒ½å¾€è¯¥åˆ†æ”¯æäº¤å’Œåªæäº¤ä¿®å¤ä»£ç ï¼‰ï¼Œå±äºä¸­ç”Ÿå‘½å‘¨æœŸï¼ˆç‰ˆæœ¬å‘å¸ƒåï¼Œåˆå¹¶å›<code>master</code>åˆ†æ”¯ï¼Œè¿™ä¹‹åä¸€èˆ¬è¿˜ä¼šå­˜åœ¨ä¸€æ®µæ—¶é—´ï¼‰</li>
<li><code>feature</code>åˆ†æ”¯æ˜¯ç‰¹æ€§åˆ†æ”¯ï¼Œä»<code>master</code>åˆ†æ”¯æ‹‰å‡ºï¼Œç”¨äºå¼€å‘ç‰¹æ€§ï¼Œå­˜åœ¨äºç‰¹æ€§é˜¶æ®µï¼ˆåœ¨æ­¤é˜¶æ®µï¼Œå›¢é˜Ÿæˆå‘˜éƒ½å¾€è¯¥åˆ†æ”¯æäº¤ç‰¹æ€§ä»£ç ã€ä¿®å¤ä»£ç ç­‰ï¼‰ï¼Œå±äºçŸ­ç”Ÿå‘½å‘¨æœŸï¼ˆç‰¹æ€§é›†æˆä¹‹æ—¥ï¼Œåˆå¹¶å›<code>master</code>åˆ†æ”¯ï¼Œç„¶åè¢«åˆ é™¤ï¼‰</li>
</ul>
<p><code>YY GitLab Server</code>ç«¯å¯¹<code>maint</code>åˆ†æ”¯å®æ–½çš„<code>Commit Message</code>è§„èŒƒæ˜¯ï¼Œè¦æ±‚æäº¤æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[bug id &lt;bugId&gt;] &lt;subject&gt; review by [&lt;reviewer&gt;]</span><br></pre></td></tr></table></figure>

</blockquote>
<p>ä¸ºäº†ä½¿å¾—æ‰‹Yå·¥ç¨‹çš„<code>Commit Message</code>è§„èŒƒå˜å¾—å®Œæ•´ï¼ˆä»»æ„é˜¶æ®µéƒ½æœ‰è§„èŒƒï¼‰å’Œå®Œå–„ï¼Œä»è€Œå¸®åŠ©å›¢é˜Ÿæ›´å¥½åœ°å‘å±•å’Œæ›´å¥½åœ°ç»´æŠ¤å·¥ç¨‹ï¼Œæˆ‘æ ¹æ®å›¢é˜Ÿå®é™…æƒ…å†µå’Œéœ€æ±‚ï¼Œåˆ¶å®šå’Œè½åœ°äº†ä¸€å¥—åˆé€‚æ‰‹Yçš„æ–°çš„<code>Commit Message</code>è§„èŒƒã€‚æˆªæ­¢åˆ°ç›®å‰ï¼Œè¯¥è§„èŒƒå·²ç»è¿è¡Œå¿«ä¸€å¹´ï¼Œç»™å›¢é˜Ÿå’Œå·¥ç¨‹å¸¦æ¥äº†æ˜¾è‘—çš„æ”¶ç›Šï¼š</p>
<ul>
<li>å¸®åŠ©å›¢é˜Ÿæˆå‘˜å»ºç«‹æ›´å¥½çš„è§„èŒƒæ„è¯†</li>
<li>å¸®åŠ©å›¢é˜Ÿæ–°æˆå‘˜æ›´å¥½åœ°ç†è§£<code>Commit</code>å’Œ<code>å†å²ä»£ç </code></li>
<li>å¸®åŠ©å›¢é˜Ÿæˆå‘˜æ›´å¿«åœ°å¯¹å½“å‰<code>Commit</code>è¿›è¡Œ<code>Code Review</code></li>
<li>è®©å·¥ç¨‹å˜å¾—æ›´å¥½ç»´æŠ¤</li>
<li>å…¶ä»–ç­‰ç­‰</li>
</ul>
<p>æ–°<code>Commit Message</code>è§„èŒƒåœ¨ç»è¿‡å®è·µçš„éªŒæ”¶åï¼Œä½œä¸ºä¸€ä¸ªè´Ÿè´£çš„å¼€å‘å›¢é˜Ÿï¼Œæˆ‘ä»¬è§‰å¾—å¯ä»¥å¯¹å¤–åˆ†äº«æˆ‘ä»¬çš„è¿™ä¸ªæ–°çš„<code>Commit Message</code>è§„èŒƒï¼Œä»¥åŠåˆ†äº«æˆ‘ä»¬å¦‚ä½•å»ä¿éšœæ–°<code>Commit Message</code>è§„èŒƒçš„å®æ–½ã€‚</p>
<a id="more"></a>

<h2 id="æ–°-Commit-Message-è§„èŒƒ"><a href="#æ–°-Commit-Message-è§„èŒƒ" class="headerlink" title="æ–° Commit Message è§„èŒƒ"></a>æ–° Commit Message è§„èŒƒ</h2><p>ä¾æ®æ‰‹Yçš„å·¥ä½œæµå’Œæ—¢å­˜çš„<code>Commit Message</code>è§„èŒƒï¼Œæ–°çš„<code>Commit Message</code>è§„èŒƒæŒ‰ç…§é›†æˆæ—¶é—´ç‚¹å‰ååˆ†ä¸º2ä¸ªç‰ˆæœ¬ï¼š</p>
<ul>
<li><code>Feature Commit Message</code>è§„èŒƒï¼šåº”ç”¨äº<code>feature</code>åˆ†æ”¯ï¼ˆæ¯”å¦‚<code>yymobile_7.41_composite_feature</code>åˆ†æ”¯ï¼‰ï¼ŒåŠŸèƒ½ç‰¹æ€§ç ”å‘é˜¶æ®µ</li>
<li><code>Maint  Commit Message</code>è§„èŒƒï¼šåº”ç”¨äº<code>maint</code>åˆ†æ”¯ï¼ˆæ¯”å¦‚<code>yymobile_7.41_maint</code>åˆ†æ”¯ï¼‰ï¼ŒåŠŸèƒ½ç‰¹æ€§é›†æˆé˜¶æ®µ</li>
</ul>
<p>ä¸‹é¢å°†ä¼šå¯¹è¿™2ä¸ªç‰ˆæœ¬<code>Commit Message</code>è§„èŒƒè¿›è¡Œè¯¦ç»†çš„ä»‹ç»ã€‚</p>
<h3 id="Feature-Commit-Message-è§„èŒƒ"><a href="#Feature-Commit-Message-è§„èŒƒ" class="headerlink" title="Feature Commit Message è§„èŒƒ"></a>Feature Commit Message è§„èŒƒ</h3><p>åœ¨åŠŸèƒ½ç‰¹æ€§ç ”å‘é˜¶æ®µï¼Œ<code>Commit Message</code>ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li><code>header</code>ï¼šå¿…å¡«ï¼›ç”±<code>type</code>ã€<code>scope</code>ã€<code>subject</code>ç»„æˆï¼›ç”¨äºæè¿°<code>Commit</code>çš„ç®€ä»‹å†…å®¹ï¼ˆç±»å‹ã€æ¥æºæˆ–å½±å“èŒƒå›´ã€æ¦‚è¦ï¼‰</li>
<li><code>body</code>ï¼šé€‰å¡«ï¼›ç”¨äºæè¿°<code>Commit</code>çš„ç»†èŠ‚å†…å®¹</li>
<li><code>footer</code>ï¼šé€‰å¡«ï¼›ç”¨äºæè¿°<code>Commit</code>çš„è¡¥å……å†…å®¹</li>
</ol>
<p>å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>å¤‡æ³¨</strong>ï¼šheader ä¸­æ¶‰åŠåˆ°çš„æ‹¬å·<code>()</code>å’Œå†’å·<code>:</code>å‡ä½¿ç”¨è‹±æ–‡æ ‡ç‚¹ç¬¦å·ã€‚</p>
</blockquote>
<p>ä¸‹é¢å°†ä¼šå¯¹<code>Commit Message</code>ä¸­æ¯ä¸ªç»„æˆéƒ¨åˆ†è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚</p>
<h4 id="typeï¼ˆå¿…å¡«ï¼‰"><a href="#typeï¼ˆå¿…å¡«ï¼‰" class="headerlink" title="typeï¼ˆå¿…å¡«ï¼‰"></a>typeï¼ˆå¿…å¡«ï¼‰</h4><p><code>type</code>ç”¨äºæè¿°<code>Commit</code>çš„ç±»å‹ï¼Œç›®å‰å¯é€‰ç±»å‹æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li><code>feat</code>ï¼šæ–°ç‰¹æ€§å¼€å‘ï¼›ä¸šåŠ¡é€»è¾‘ä¿®æ”¹</li>
<li><code>fix</code>ï¼šbugä¿®å¤</li>
<li><code>refactor</code>: ä»£ç é‡æ„ï¼ˆä¸æ¶‰åŠä¸šåŠ¡é€»è¾‘ï¼‰</li>
<li><code>test</code>ï¼šæµ‹è¯•ç›¸å…³çš„å˜åŠ¨ï¼ˆæ¯”å¦‚æ–°å¢æµ‹è¯•ç”¨ä¾‹ï¼‰</li>
<li><code>chore</code>ï¼šæ„å»ºå·¥å…·æˆ–è€…è¾…åŠ©å·¥å…·å‡çº§ï¼›æºè‡ªæ„å»ºå·¥å…·æˆ–è€…è¾…åŠ©å·¥å…·çš„å˜åŠ¨</li>
<li><code>revert</code>ï¼šå›æ»šæ“ä½œ</li>
</ul>
<p>å¼€å‘è€…éœ€è¦æ ¹æ®å®é™…åœºæ™¯é€‰æ‹©åˆé€‚çš„<code>type</code>ã€‚</p>
<blockquote>
<p><strong>å¤‡æ³¨</strong>ï¼šæ¯ä¸ªç±»å‹çš„<code>Commit Message</code>ç¤ºä¾‹è¯·çœ‹ä¸‹é¢çš„ã€ŠFeature Commit Message è§„èŒƒç¤ºä¾‹ã€‹</p>
</blockquote>
<h4 id="scopeï¼ˆå¿…å¡«ï¼‰"><a href="#scopeï¼ˆå¿…å¡«ï¼‰" class="headerlink" title="scopeï¼ˆå¿…å¡«ï¼‰"></a>scopeï¼ˆå¿…å¡«ï¼‰</h4><p><code>scope</code>ç”¨äºæè¿°<code>Commit</code>çš„æ¥æºæˆ–è€…å½±å“èŒƒå›´ã€‚<code>scope</code>çš„æè¿°æ ¼å¼å»ºè®®ä¸ºï¼š</p>
<ul>
<li><code>&lt;éœ€æ±‚å&gt;</code>ï¼šä¾‹å¦‚<code>ã€åˆ˜éœ²ã€‘åŸºç¡€é¢‘é“äºŒæœŸä¼˜åŒ–</code>ï¼›å¸¸ç”¨äº<code>feat</code>åœºæ™¯</li>
<li><code>&lt;bugId&gt;</code>ï¼šä¾‹å¦‚<code>IOSYY-38403</code>ï¼›å¸¸ç”¨äº<code>fix</code>åœºæ™¯ </li>
<li><code>&lt;æ¨¡å—å&gt;-&lt;é¡µé¢å&gt;</code>ï¼šä¾‹å¦‚<code>å…³æ³¨tab-ç›´æ’­é¡µ</code>ï¼›å¸¸ç”¨äº<code>feat/fix/refactor</code>åœºæ™¯</li>
<li><code>&lt;å·¥ç¨‹ç›¸å…³&gt;</code>ï¼šä¾‹å¦‚<code>Fastlane</code>ï¼›å¸¸ç”¨äº<code>chore</code>åœºæ™¯</li>
</ul>
<blockquote>
<p><strong>æç¤º</strong>ï¼šè¯·æ ¹æ®<code>type</code>å’Œå®é™…åœºæ™¯é€‰æ‹©åˆé€‚çš„æè¿°æ ¼å¼</p>
</blockquote>
<h4 id="subjectï¼ˆå¿…å¡«ï¼‰"><a href="#subjectï¼ˆå¿…å¡«ï¼‰" class="headerlink" title="subjectï¼ˆå¿…å¡«ï¼‰"></a>subjectï¼ˆå¿…å¡«ï¼‰</h4><p><code>subject</code>ç”¨äºæè¿°<code>Commit</code>çš„æ¦‚è¦ï¼Œå…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç®€è¦å‡†ç¡®åœ°æè¿°æœ¬æ¬¡æäº¤çš„å˜åŠ¨ï¼Œ<strong>å­—ç¬¦æ•°é‡ä¸è¦è¶…è¿‡ 80</strong></li>
<li><code>type</code>å’Œ<code>subject</code>ä¹‹é—´ä»¥è‹±æ–‡å†’å·<code>:</code>åˆ†éš”</li>
<li>ä¸ä»¥æ ‡ç‚¹ç»“å°¾</li>
</ul>
<h4 id="bodyï¼ˆé€‰å¡«ï¼‰"><a href="#bodyï¼ˆé€‰å¡«ï¼‰" class="headerlink" title="bodyï¼ˆé€‰å¡«ï¼‰"></a>bodyï¼ˆé€‰å¡«ï¼‰</h4><p><code>subject</code>ç”¨äºæè¿°<code>Commit</code>çš„ç»†èŠ‚å†…å®¹ï¼Œå…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š</p>
<ul>
<li>è¯¦ç»†æœ‰æ¡ç†åœ°æè¿°æœ¬æ¬¡æäº¤çš„å˜åŠ¨ï¼Œä¾‹å¦‚å…·ä½“çš„é€»è¾‘å˜æ›´ã€ç›´æ¥å½±å“çš„èŒƒå›´ã€æ½œåœ¨çš„å½±å“èŒƒå›´ç­‰</li>
<li>å¯å†™å¤šè¡Œï¼Œæ¯è¡Œä¸è¶…è¿‡72ä¸ªä¸­æ–‡å­—ç¬¦ï¼Œæ•´ä½“å»ºè®®ä¸è¦è¶…è¿‡200ä¸ªä¸­æ–‡å­—ç¬¦</li>
</ul>
<h4 id="footerï¼ˆé€‰å¡«ï¼‰"><a href="#footerï¼ˆé€‰å¡«ï¼‰" class="headerlink" title="footerï¼ˆé€‰å¡«ï¼‰"></a>footerï¼ˆé€‰å¡«ï¼‰</h4><p><code>footer</code>ç”¨äºæè¿°<code>Commit</code>çš„è¡¥å……å†…å®¹ï¼Œä¾‹å¦‚å…³æ‰çš„<code>Issue</code>å…³è”çš„<code>Isuue URL</code>ã€<code>Report ID</code>ã€<code>Crash ID</code>ç­‰ä¿¡æ¯ï¼Œä¿®å¤çš„<code>bug</code>å…³è”çš„<code>Bug ID</code>ã€<code>Bug URL</code>ã€<code>å¤‡æ³¨ URL</code>ç­‰ä¿¡æ¯ã€‚</p>
<h3 id="Feature-Commit-Message-è§„èŒƒç¤ºä¾‹"><a href="#Feature-Commit-Message-è§„èŒƒç¤ºä¾‹" class="headerlink" title="Feature Commit Message è§„èŒƒç¤ºä¾‹"></a>Feature Commit Message è§„èŒƒç¤ºä¾‹</h3><h4 id="feat-ç±»æ—¥å¿—ç¤ºä¾‹"><a href="#feat-ç±»æ—¥å¿—ç¤ºä¾‹" class="headerlink" title="feat ç±»æ—¥å¿—ç¤ºä¾‹"></a>feat ç±»æ—¥å¿—ç¤ºä¾‹</h4><ol>
<li><p>ç¤ºä¾‹ä¸€</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">feat(ã€åˆ˜éœ²ã€‘åŸºç¡€é¢‘é“äºŒæœŸä¼˜åŒ–): ã€å‘ç°tab-å‘ç°é¡µã€‘æ–°å¢å¼€é»‘èŠå¤©ä¸“åŒºå…¥å£æ¨¡å—</span><br><span class="line"> </span><br><span class="line">PMï¼šåˆ˜éœ²</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¤ºä¾‹äºŒ</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">feat(ã€åˆ˜éœ²ã€‘åŸºç¡€é¢‘é“äºŒæœŸä¼˜åŒ–): ã€å‘ç°tab-å‘ç°é¡µã€‘ä¿®æ”¹æ˜¾ç¤ºå¼€é»‘èŠå¤©ä¸“åŒºå…¥å£çš„é€»è¾‘</span><br><span class="line"></span><br><span class="line">å‘½ä¸­å®éªŒï¼šyy_ios_741_jcpdyh æˆ–è€…å‘½ä¸­å®éªŒï¼šyy_ios_741_jcpdyh_entrance çš„æ—¶å€™éƒ½æ˜¾ç¤ºå…¥å£</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¤ºä¾‹ä¸‰</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">feat(å†…å­˜ç›‘æ§): MemoryDetector-YY SDK ç”± v0.3.6 å‡çº§è‡³ v0.3.7</span><br></pre></td></tr></table></figure>
<h4 id="fix-ç±»æ—¥å¿—ç¤ºä¾‹"><a href="#fix-ç±»æ—¥å¿—ç¤ºä¾‹" class="headerlink" title="fix ç±»æ—¥å¿—ç¤ºä¾‹"></a>fix ç±»æ—¥å¿—ç¤ºä¾‹</h4></li>
<li><p>ç¤ºä¾‹ä¸€</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">fix(IOSYY-38403): ã€çŒœä½ å–œæ¬¢æ–°å¢æ ‡ç­¾ã€‘è¿›å…¥æœç´¢ç•Œé¢æ—¶ï¼ŒçŒœä½ å–œæ¬¢é—ªåŠ¨äº†ä¸€ä¸‹</span><br><span class="line"></span><br><span class="line">é—®é¢˜åŸå› ï¼šå­æ¨¡å—è¯·æ±‚æ•°æ®é˜Ÿåˆ—å¼‚æ­¥è¯·æ±‚æ•°æ®è¿‡ç¨‹ä¸­ï¼ŒYYNewSearchDisplayViewController-viewWillAppearå¤„è®©ã€çƒ­è¯ã€‘å­æ¨¡å—è¯·æ±‚æ•°æ®å¹¶åˆ·æ–°TableViewï¼Œå¯¼è‡´éƒ¨åˆ†æå‰æ”¶åˆ°æ•°æ®çš„å­æ¨¡å—ï¼ˆæ¯”å¦‚ã€çŒœä½ å–œæ¬¢ã€‘å­æ¨¡å—ï¼‰æå‰æ¸²æŸ“å‡ºUIæ¥</span><br><span class="line">è§£å†³æ–¹æ¡ˆï¼šå­æ¨¡å—è¯·æ±‚æ•°æ®é˜Ÿåˆ—å¼‚æ­¥è¯·æ±‚æ•°æ®å®Œæ¯•åï¼ŒYYNewSearchDisplayViewController-viewWillAppearå¤„æ‰å…è®¸è®©ã€çƒ­è¯ã€‘å­æ¨¡å—è¯·æ±‚æ•°æ®</span><br><span class="line">å½±å“èŒƒå›´ï¼šã€æœç´¢é¢„è§ˆé¡µã€‘</span><br><span class="line">æ½œåœ¨å½±å“èŒƒå›´ï¼šæ— </span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¤ºä¾‹äºŒ</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">fix(IOSYY-38411): #41712 é—®é¢˜å¤ç° é¡µé¢æ»‘åŠ¨æ—¶æ ‡ç­¾æ”¹å˜ï¼Œä¸æ˜¾ç¤ºçœç•¥å·</span><br><span class="line"></span><br><span class="line">é—®é¢˜åŸå› ï¼š[label sizeToFit]åœ¨ä¸€äº›iOSç‰ˆæœ¬ä¸Šä¼šç ´ålabelå®ä¾‹çš„constraintsï¼ˆçº¦æŸï¼‰ï¼Œå¯¼è‡´æ˜¾ç¤ºå¼‚å¸¸</span><br><span class="line">è§£å†³æ–¹æ¡ˆï¼šä¸è¦ä½¿ç”¨sizeToFitï¼›å¦å¤–ï¼ŒsizeToFité€‚ç”¨äºæ²¡æœ‰ä½¿ç”¨çº¦æŸçš„åœºæ™¯ä¸‹ï¼Œå…¶å’Œçº¦æŸå±äºä¸¤ç§å¸ƒå±€æ–¹æ¡ˆï¼Œå‰è€…æ˜¯Frameå¸ƒå±€ï¼Œåè€…æ˜¯çº¦æŸå¸ƒå±€</span><br><span class="line">å½±å“èŒƒå›´ï¼šã€å…³æ³¨tab-ç›´æ’­é¡µ-çŒœä½ å–œæ¬¢æ–°å¢æ ‡ç­¾ã€‘ã€æœç´¢é¢„è§ˆé¡µ-çŒœä½ å–œæ¬¢æ¨¡å—-çŒœä½ å–œæ¬¢æ–°å¢æ ‡ç­¾ã€‘</span><br><span class="line">æ½œåœ¨å½±å“èŒƒå›´ï¼šæ— </span><br><span class="line"></span><br><span class="line">æ›´å¤šBugè¯¦æƒ…è§ IOSYY-38411 ä¸‹çš„å¤‡æ³¨ï¼šhttp://project.sysop.duowan.com/browse/IOSYY-38411?focusedCommentId=710520</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¤ºä¾‹ä¸‰</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">fix(YYMobileTarget): ä¿®å¤å·¥ç¨‹çš„Signingé…ç½®</span><br><span class="line"></span><br><span class="line">å‘ç°å·¥ç¨‹çš„Signingé…ç½®è¢«æ”¹ä¸ºäº†Autoæ–¹å¼ï¼Œç°åœ¨ä¿®æ”¹ä¸ºManualæ–¹å¼</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="refactor-ç±»æ—¥å¿—ç¤ºä¾‹"><a href="#refactor-ç±»æ—¥å¿—ç¤ºä¾‹" class="headerlink" title="refactor ç±»æ—¥å¿—ç¤ºä¾‹"></a>refactor ç±»æ—¥å¿—ç¤ºä¾‹</h4><ol>
<li><p>ç¤ºä¾‹ä¸€</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">refactor(é…ç½®ä¸­å¿ƒ-ç›´æ’­é—´): åˆ é™¤æ— ç”¨é…ç½®</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¤ºä¾‹äºŒ</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">refactor(ç¤¼ç‰©-ä»˜è´¹ç¤¼ç‰©å¹¿æ’­): æŠ½å‡ºç¤¼ç‰©å¹¿æ’­é€šç”¨ GiftBroadcastModel</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="test-ç±»æ—¥å¿—ç¤ºä¾‹"><a href="#test-ç±»æ—¥å¿—ç¤ºä¾‹" class="headerlink" title="test ç±»æ—¥å¿—ç¤ºä¾‹"></a>test ç±»æ—¥å¿—ç¤ºä¾‹</h4><ol>
<li><p>ç¤ºä¾‹ä¸€</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">test(UseCases): æ–°å¢ä½¿ç”¨é”™è¯¯å¯†ç ç™»å½•çš„æµ‹è¯•ç”¨ä¾‹</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="chore-ç±»æ—¥å¿—ç¤ºä¾‹"><a href="#chore-ç±»æ—¥å¿—ç¤ºä¾‹" class="headerlink" title="chore ç±»æ—¥å¿—ç¤ºä¾‹"></a>chore ç±»æ—¥å¿—ç¤ºä¾‹</h4><ol>
<li><p>ç¤ºä¾‹ä¸€</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chore(CocoaPods): cocoapods-binary ç”± v0.4.3 å‡çº§è‡³ v0.4.4</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¤ºä¾‹äºŒ</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chore(Fastlane): ä¼˜åŒ–æ„å»ºè„šæœ¬</span><br></pre></td></tr></table></figure>
<h4 id="revert-ç±»æ—¥å¿—ç¤ºä¾‹"><a href="#revert-ç±»æ—¥å¿—ç¤ºä¾‹" class="headerlink" title="revert ç±»æ—¥å¿—ç¤ºä¾‹"></a>revert ç±»æ—¥å¿—ç¤ºä¾‹</h4></li>
<li><p>ç¤ºä¾‹ä¸€</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">revert(YYProject): å›æ»šä¸»å·¥ç¨‹ç§»é™¤ YYWidgetExtension Target çš„æ“ä½œ</span><br><span class="line"> </span><br><span class="line">Revert "fix(YYProject): æš‚æ—¶ä»ä¸»å·¥ç¨‹ç§»é™¤ YYWidgetExtension Targetï¼Œä»¥ç­‰å¾…ä¼ä¸šè¯ä¹¦éƒ¨ç½²å®Œæ¯•ï¼Œé¿å…æœŸé—´ CI æ„å»ºå¤±è´¥" </span><br><span class="line"> </span><br><span class="line">This reverts commit 22fd6f31.</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="Maint-Commit-Message-è§„èŒƒ"><a href="#Maint-Commit-Message-è§„èŒƒ" class="headerlink" title="Maint Commit Message è§„èŒƒ"></a>Maint Commit Message è§„èŒƒ</h3><p>åœ¨åŠŸèƒ½ç‰¹æ€§é›†æˆé˜¶æ®µï¼Œ<code>Commit Message</code>å…¼å®¹æ—¢å®šè§„èŒƒï¼ˆéƒ¨ç½²åœ¨<code>YY GitLab Server</code>ç«¯å¯¹<code>maint</code>åˆ†æ”¯å®æ–½çš„<code>Commit Message</code>è§„èŒƒï¼‰ï¼Œå…¶ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li><code>header</code>ï¼šå¿…å¡«ï¼›ç”±<code>bugId</code>ã€<code>subject</code>ã€<code>reviewer</code>ç»„æˆï¼›ç”¨äºæè¿°<code>Commit</code>çš„ç®€ä»‹å†…å®¹ï¼ˆç±»å‹ã€å½±å“èŒƒå›´ã€æ¦‚è¦ï¼‰</li>
<li><code>body</code>ï¼šé€‰å¡«ï¼›ç”¨äºæè¿°<code>Commit</code>çš„ç»†èŠ‚å†…å®¹</li>
<li><code>footer</code>ï¼šé€‰å¡«ï¼›ç”¨äºæè¿°<code>Commit</code>çš„è¡¥å……å†…å®¹</li>
</ol>
<blockquote>
<p>æ‰‹Yå›¢é˜Ÿè§„å®šï¼Œé›†æˆæµ‹è¯•æœŸé—´ï¼ŒåŸåˆ™ä¸Šåªä¿®å¤Bugï¼Œç¦æ­¢æäº¤ä¼˜åŒ–ã€é‡æ„åŠŸèƒ½ã€‚</p>
</blockquote>
<p>å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[bug id &lt;bugId&gt;] &lt;subject&gt; review by [&lt;reviewer&gt;]</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼š</p>
<ul>
<li><code>bugId</code>ï¼šå¿…å¡«ï¼›ç”¨äºæè¿°<code>Commit</code>å…³è”çš„ Bug ID</li>
<li><code>subject</code>ï¼šå¿…å¡«ï¼›ç”¨äºæè¿° Bug çš„åŸå› æ¦‚è¦ï¼›<strong>å­—ç¬¦æ•°é‡ä¸è¦è¶…è¿‡ 80</strong></li>
<li><code>reviewer</code>ï¼šå¿…å¡«ï¼›ç”¨äºæè¿°å¸®ä½  Code Review çš„åŒäº‹çš„é‚®ç®±ç”¨æˆ·å</li>
<li><code>body</code>ï¼šé€‰å¡«ï¼›å®šä¹‰å’Œè¦æ±‚ä¸ã€ŠFeature Commit Message è§„èŒƒã€‹ä¸­çš„ä¿æŒä¸€è‡´</li>
<li><code>footer</code>ï¼šé€‰å¡«ï¼›å®šä¹‰å’Œè¦æ±‚ä¸ã€ŠFeature Commit Message è§„èŒƒã€‹ä¸­çš„ä¿æŒä¸€è‡´</li>
</ul>
<h3 id="Maint-Commit-Message-è§„èŒƒç¤ºä¾‹"><a href="#Maint-Commit-Message-è§„èŒƒç¤ºä¾‹" class="headerlink" title="Maint Commit Message è§„èŒƒç¤ºä¾‹"></a>Maint Commit Message è§„èŒƒç¤ºä¾‹</h3><ol>
<li><p>ç¤ºä¾‹ä¸€</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[bug id IOSYY-38898] 14ç³»ç»Ÿæ‰‹æœºçƒ­æœæ¦œé¡µé¢ä¸æ˜¾ç¤ºé¡¶éƒ¨bannerå›¾ç‰‡ review by [chenzhiying]</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¤ºä¾‹äºŒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[bug id IOSYY-32551] ã€å´©æºƒç³»ç»Ÿæå•_é¦–æŠ¥7.24.0-developã€‘ review by [chenjianfeng3] </span><br><span class="line">  </span><br><span class="line">This reverts commit e4fe6fb1.</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="æ–°-Commit-Message-è§„èŒƒå®æ–½å’Œä¿éšœ"><a href="#æ–°-Commit-Message-è§„èŒƒå®æ–½å’Œä¿éšœ" class="headerlink" title="æ–° Commit Message è§„èŒƒå®æ–½å’Œä¿éšœ"></a>æ–° Commit Message è§„èŒƒå®æ–½å’Œä¿éšœ</h2><p>æ–°çš„<code>Commit Message</code>è§„èŒƒåˆ¶å®šåï¼Œä¸ºäº†æ£€éªŒå’Œä¿éšœå®æ–½çš„çš„æ•ˆæœï¼Œæˆ‘ä»¬å†³å®šå…ˆåœ¨æ‰‹Yå·¥ç¨‹ä¸Šå®æ–½ï¼šé€šè¿‡ä»¥ç‚¹å¸¦é¢ï¼Œé€æ­¥å¸®åŠ©æ‰‹Yå›¢é˜Ÿæˆå‘˜å»ºç«‹<code>Commit Message</code>è§„èŒƒè§„èŒƒæ„è¯†ã€‚</p>
<p>ä¸ºäº†ä¿éšœå®æ–½çš„çš„æ•ˆæœï¼Œæˆ‘åŒæ­¥ç ”å‘äº†é…å¥—å·¥å…·<code>YYCommitMessageLint</code>ã€‚ä¸ºäº†ä¿éšœå®æ–½è½åœ°æ—¶é˜»åŠ›è¾¾åˆ°æœ€å°ï¼Œ<code>YYCommitMessageLint</code>å»ºç«‹äº†ä¸€ä¸ªç›®æ ‡ï¼šä¸å¯¹é™¤æ‰‹Yå·¥ç¨‹ä¹‹å¤–çš„é¡¹ç›®é€ æˆçº¦æŸå½±å“ï¼Œä»¥åŠæœ€å¤§é™åº¦åœ°æ–¹ä¾¿æ‰‹Yå›¢é˜Ÿæˆå‘˜æ–¹ä¾¿å®‰è£…è¯¥å·¥å…·ã€‚</p>
<p>ä¸ºäº†è¾¾åˆ°ä¸Šè¿°ç›®æ ‡ï¼Œ<code>YYCommitMessageLint</code>è®¾è®¡æˆäº†ä¸€ä¸ª<code>Pod</code>åº“ï¼Œé€šè¿‡<code>CocoaPods</code>æ¥å…¥åˆ°æ‰‹Yå·¥ç¨‹é¡¹ç›®ä¸­ã€‚ä¸‹å›¾æ˜¯<code>YYCommitMessageLint</code>æ¥å…¥iOSé¡¹ç›®çš„æµç¨‹å›¾ï¼š</p>
<p><img src="/2021/%E6%89%8BY%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E5%8C%96%E5%BB%BA%E8%AE%BE%E4%B8%80%EF%BC%9ACommit%20Message%20%E8%A7%84%E8%8C%83%E5%BB%BA%E8%AE%BE/readme/YYCommitMessageLint%E6%8E%A5%E5%85%A5iOS%E9%A1%B9%E7%9B%AE%E6%B5%81%E7%A8%8B%E5%9B%BE.awebp" alt="YYCommitMessageLintæ¥å…¥iOSé¡¹ç›®æµç¨‹å›¾.png"></p>
<p><code>YYCommitMessageLint</code>æ¥å…¥iOSé¡¹ç›®çš„å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>ç¼–è¾‘<code>Podfile</code>ï¼Œæ·»åŠ <code>YYCommitMessageLint</code>çš„ä¾èµ–å£°æ˜ä»£ç </p>
  <figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"> <span class="comment">## è¿™æ˜¯ä¸€ä¸ªè™šæ‹Ÿtargetï¼Œä¸“é—¨ç”¨äºå®‰è£…é€šè¿‡CocoaPodsæ–¹å¼æ¥å…¥å·¥ç¨‹çš„æ„å»ºå·¥å…·ã€è¾…åŠ©å·¥å…·</span></span><br><span class="line">abstract_target <span class="string">'YYChoreBox'</span> <span class="keyword">do</span></span><br><span class="line">  pod <span class="string">'YYCommitMessageLint'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¾‘<code>Podfile</code>ï¼Œæ·»åŠ åŒæ­¥<code>YYCommitMessageLint</code>çš„å‡½æ•°å®šä¹‰</p>
  <figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">syncCommitMessageLint</span><span class="params">()</span></span></span><br><span class="line">  src_root = Dir.pwd</span><br><span class="line">  pods_root = <span class="string">"<span class="subst">#&#123;src_root&#125;</span>/Pods"</span></span><br><span class="line">  lint_dir = <span class="string">"<span class="subst">#&#123;pods_root&#125;</span>/YYCommitMessageLint"</span></span><br><span class="line">  <span class="keyword">if</span> Dir.exists?(lint_dir)</span><br><span class="line">    cmd = <span class="string">"cd <span class="subst">#&#123;lint_dir&#125;</span>/tools/ &amp;&amp; sh <span class="subst">#&#123;lint_dir&#125;</span>/tools/setup_single.sh <span class="subst">#&#123;src_root&#125;</span>"</span></span><br><span class="line">    system(cmd)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¾‘<code>Podfile</code>ï¼Œåœ¨<code>Pod</code>çš„<code>pre_install</code>å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œ<code>syncCommitMessageLint</code></p>
  <figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">pre_install <span class="keyword">do</span> <span class="params">|installer|</span></span><br><span class="line">   syncCommitMessageLint()</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="YYCommitMessageLintçš„å±€é™æ€§"><a href="#YYCommitMessageLintçš„å±€é™æ€§" class="headerlink" title="YYCommitMessageLintçš„å±€é™æ€§"></a><code>YYCommitMessageLint</code>çš„å±€é™æ€§</h3><p><code>YYCommitMessageLint</code>é€‚åˆåº”ç”¨äºå•ä¸ªå·¥ç¨‹åœºæ™¯â€”â€”è¿™æ˜¯å®ƒçš„ä¼˜ç‚¹ä¹Ÿæ˜¯å®ƒçš„ç¼ºç‚¹ã€‚å› æ­¤ï¼Œè‹¥ä½ æœŸæœ›å®ƒçš„ä½œç”¨èŒƒå›´ç”±â€œç‚¹â€æ‰©å±•åˆ°â€œé¢â€æ—¶ï¼Œå°±éœ€è¦å¦å¤–çš„æ”¹é€ æ–¹æ¡ˆäº†â€”â€”ä»Šå¹´å¼€æ˜¥ä»¥æ¥ï¼Œæ‰‹Yå¼€å§‹ç€æ‰‹ä¸šåŠ¡ç»„ä»¶åŒ–ï¼Œæˆ‘ä»¬å¸Œæœ›é‚£äº›ä¸šåŠ¡ç»„ä»¶å·¥ç¨‹ä¹Ÿè¢«çº³å…¥æ–°<code>Commit Message</code>è§„èŒƒçš„çº¦æŸèŒƒå›´å†…ï¼ˆäº‹å®ä¸Šé™¤äº†<code>Commit Message</code>è§„èŒƒï¼Œè¿˜æ–°å¢äº†å…¶ä»–è§„èŒƒï¼‰ï¼Œä¸ºæ­¤ï¼Œæˆ‘å¼€å§‹è®¾è®¡å®ç°äº†æ–°çš„æ–¹æ¡ˆâ€”â€”è¿™ä¸ªæ–¹æ¡ˆå°†ä¼šåœ¨ä¸‹ä¸€æœŸè¿›è¡Œåˆ†äº«ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>æ•™ç¨‹</tag>
        <tag>2021</tag>
        <tag>å·¥ç¨‹å®è·µ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰‹Yå¼€å‘è§„èŒƒåŒ–å»ºè®¾äºŒï¼šæ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒå»ºè®¾</title>
    <url>/2021/%E6%89%8BY%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E5%8C%96%E5%BB%BA%E8%AE%BE%E4%BA%8C%EF%BC%9A%E6%89%8BY%E4%B8%9A%E5%8A%A1%E5%B7%A5%E7%A8%8B%E8%A7%84%E8%8C%83%E5%BB%BA%E8%AE%BE/readme/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¿™ç¯‡æ–‡ç« æ—¢æ˜¯å¯¹ä¸Šç¯‡<a href="https://juejin.cn/post/6980910026151952391" target="_blank" rel="noopener external nofollow noreferrer">ã€Šæ‰‹Yå¼€å‘è§„èŒƒåŒ–å»ºè®¾ä¸€ï¼šCommit Message è§„èŒƒå»ºè®¾ã€‹</a>åœ¨æ–‡ç« ç»“å°¾æŠ›å‡ºçš„é—®é¢˜çš„è§£ç­”ï¼Œä¹Ÿæ˜¯å¯¹å¤–åˆ†äº«å·²ç»åœ¨æ‰‹Yä¸šåŠ¡å›¢é˜Ÿè½åœ°å®æ–½5ä¸ªæœˆï¼ˆè‡ª2021å¹´8æœˆåˆå¼€å§‹ï¼‰äº†çš„ã€Šæ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒã€‹çš„å»ºè®¾ç»éªŒã€‚</p>
<h2 id="ä¸šåŠ¡èƒŒæ™¯"><a href="#ä¸šåŠ¡èƒŒæ™¯" class="headerlink" title="ä¸šåŠ¡èƒŒæ™¯"></a>ä¸šåŠ¡èƒŒæ™¯</h2><p>æˆªæ­¢åˆ°ç›®å‰ï¼Œæ‰‹Yä¸šåŠ¡ç»„ä»¶æ•°é‡å·²ç»è¾¾åˆ°30+ã€‚ä¼´éšç€ä¸šåŠ¡çš„è¿›ä¸€æ­¥å¤æ‚åŒ–ï¼Œå›¢é˜Ÿä¸­å‡ºç°äº†ä¸å°‘æœ‰ç¢ä»£ç è´¨é‡ã€å½±å“æ•ˆç‡çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>éƒ¨åˆ†æ‰‹Yä¸šåŠ¡ç»„ä»¶éšä¾¿å¼•å…¥ä½“ç§¯è¶…æ ‡å›¾ç‰‡èµ„æºï¼Œå¼•èµ·æ‰‹Yå’Œè”è¿SDKä½“ç§¯åŠ£åŒ–</li>
<li>éƒ¨åˆ†å·²åšäºŒè¿›åˆ¶åŒ–çš„æ‰‹Yä¸šåŠ¡ç»„ä»¶ä¸æ­£ç¡®è®¾ç½®ä»£ç æ–‡ä»¶çš„<code>Target Membership</code>ï¼Œå¯¼è‡´æ„å»ºçš„äºŒè¿›åˆ¶äº§ç‰©ä¸¢å¤±å¤´æ–‡ä»¶æˆ–è€…ç¬¦å·ï¼Œé˜»å¡äº†æ‰‹Yçš„æ­£å¸¸å¼€å‘å’Œæ„å»º</li>
<li>éƒ¨åˆ†æ‰‹Yä¸šåŠ¡ç»„ä»¶ä¸è§„èŒƒä½¿ç”¨<code>API</code>ï¼Œå¯¼è‡´æ‰‹Yè¿è¡Œæ—¶å¼‚å¸¸</li>
<li>æ‰‹Yä¸šåŠ¡ç»„ä»¶æäº¤çš„ commit æ—¥å¿—æ ¼å¼å„å¼‚</li>
</ul>
<p>ä¸ºè¿›ä¸€æ­¥æå‡æ‰‹Yçš„ä»£ç è´¨é‡ï¼Œæé«˜å›¢é˜Ÿçš„åä½œå¼€å‘æ•ˆç‡ï¼Œæˆ‘åˆ¶å®šäº†ã€Šæ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒã€‹æ¥å¼•å¯¼å›¢é˜Ÿæˆå‘˜è§„èŒƒå¼€å‘ã€‚</p>
<a id="more"></a>

<h2 id="æ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒç®€ä»‹"><a href="#æ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒç®€ä»‹" class="headerlink" title="æ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒç®€ä»‹"></a>æ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒç®€ä»‹</h2><p>ã€Šæ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒã€‹æ˜¯ç”±ä¸€ç³»åˆ—çš„æ»¡è¶³ä¸šåŠ¡å’Œå›¢é˜Ÿç‰¹å®šéœ€è¦çš„è§„åˆ™ç»„æˆã€‚æˆªæ­¢åˆ°ç›®å‰ï¼Œã€Šæ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒã€‹åŒ…å«äº†ä»¥ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li>no_fat_resource_files</li>
<li>no_unreferenced_code_files</li>
<li>no_conflicting_files</li>
<li>yy_commit_msg_convention</li>
<li>yy_assert_api_first</li>
<li>yy_color_api_first</li>
<li>yy_http_api_first</li>
<li>yy_userdefaults_api_first</li>
<li>yy_dispatch_task_block_api_first</li>
</ul>
<blockquote>
<p>åé¢éšç€å›¢é˜Ÿå’Œä¸šåŠ¡çš„éœ€è¦ï¼Œè§„åˆ™ä¼šæœ‰å¢åˆ æ”¹ã€‚</p>
</blockquote>
<p>ä¸‹é¢å°†ä¼šå¯¹ä»¥ä¸Šè§„åˆ™è¿›è¡Œä¸€ä¸€ä»‹ç»ï¼Œåˆ†äº«è¿™äº›è§„åˆ™çš„æ‰¿è½½ç›®çš„å’Œå†…å®¹ã€‚</p>
<h3 id="no-fat-resource-files"><a href="#no-fat-resource-files" class="headerlink" title="no_fat_resource_files"></a>no_fat_resource_files</h3><ul>
<li>è§„åˆ™ç›®çš„ï¼šé™åˆ¶å·¥ç¨‹éšæ„å¼•å…¥ä½“ç§¯è¶…æ ‡çš„èµ„æºæ–‡ä»¶ï¼Œé˜²æ­¢æ‰‹Yå’Œè”è¿SDKä½“ç§¯åŠ£åŒ–</li>
<li>è§„åˆ™ç®€ä»‹ï¼šå·¥ç¨‹å¼•å…¥çš„å›¾ç‰‡çš„ä½“ç§¯ä¸èƒ½è¶…è¿‡4kbï¼ˆç›´æ’­é—´ä¸šåŠ¡å·¥ç¨‹å¼•å…¥çš„å›¾ç‰‡ä½“ç§¯ä¸èƒ½è¶…è¿‡2.5kbï¼‰</li>
</ul>
<blockquote>
<p>è¯¥è§„åˆ™è§„å®šäº†å·¥ç¨‹å¼•å…¥çš„å›¾ç‰‡ä½“ç§¯ä¸èƒ½è¶…è¿‡4kbï¼Œè€Œç”±äºç™¾åº¦Appå¯¹è”è¿SDKä½“ç§¯æœ‰æ›´ä¸¥è‹›çš„è¦æ±‚ï¼Œè¯¥è§„åˆ™è¦æ±‚ç›´æ’­é—´ä¸šåŠ¡å·¥ç¨‹å¼•å…¥çš„å›¾ç‰‡ä½“ç§¯ä¸èƒ½è¶…è¿‡2.5kbã€‚éšç€ä¸šåŠ¡çš„å˜åŒ–ï¼Œæœªæ¥è¿™2ä¸ªæ•°å­—æœ‰å¯èƒ½æ˜¯ä¼šå˜åŒ–çš„ã€‚</p>
</blockquote>
<h3 id="no-unreferenced-code-files"><a href="#no-unreferenced-code-files" class="headerlink" title="no_unreferenced_code_files"></a>no_unreferenced_code_files</h3><ul>
<li>è§„åˆ™ç›®çš„ï¼šé˜²æ­¢æ®‹ç•™æ— ç”¨ä»£ç æ–‡ä»¶ï¼Œä»¥åŠé¢„é˜²ä¸šåŠ¡ç»„ä»¶å·¥ç¨‹çš„äºŒè¿›åˆ¶äº§ç‰©ç¼ºå¤±å¤´æ–‡ä»¶æˆ–è€…ç¬¦å·ï¼Œé˜»å¡æ‰‹Yçš„æ­£å¸¸å¼€å‘å’Œæ„å»º</li>
<li>è§„åˆ™ç®€ä»‹ï¼šå·¥ç¨‹ç›®å½•ä¸­çš„ä»£ç æ–‡ä»¶ï¼ˆåŒ…æ‹¬æœ‰ï¼šå¤´æ–‡ä»¶ã€å®ç°æ–‡ä»¶ã€åº“æ–‡ä»¶ã€xibæ–‡ä»¶ã€storyboardæ–‡ä»¶ï¼‰éœ€è¦ä¿è¯è®¾ç½®äº†æœ‰æ•ˆçš„<code>Target Membership</code></li>
</ul>
<blockquote>
<p>åœ¨æ‰‹Yä¸šåŠ¡å›¢é˜Ÿä¸­ï¼Œå¯¼è‡´ã€ä¸šåŠ¡ç»„ä»¶å·¥ç¨‹çš„äºŒè¿›åˆ¶äº§ç‰©ç¼ºå¤±å¤´æ–‡ä»¶æˆ–è€…ç¬¦å·ã€‘é—®é¢˜äº§ç”Ÿçš„åŸå› æ˜¯ï¼š<br>æ¯ä¸ªä¸šåŠ¡ç»„ä»¶å·¥ç¨‹åœ¨å®æ–½äºŒè¿›åˆ¶åŒ–åï¼Œéƒ½æœ‰å•ç‹¬çš„äºŒè¿›åˆ¶äº§ç‰©æ„å»ºå·¥ç¨‹ï¼›è€Œå¤§å¤šæ•°åŒå­¦åœ¨åšä¸šåŠ¡ç»„ä»¶å¼€å‘æ—¶ï¼Œéƒ½æ˜¯ä½¿ç”¨<code>Development Pods</code>æ–¹å¼æ¥å…¥åˆ°æ‰‹Yå®¿ä¸»å·¥ç¨‹è¿›è¡Œå¼€å‘ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­æ–°å¢çš„ä»£ç æ–‡ä»¶éƒ½æ²¡æœ‰åŒæ­¥å›äºŒè¿›åˆ¶äº§ç‰©æ„å»ºå·¥ç¨‹ï¼Œä»è€Œå¯¼è‡´äº†ä¸šåŠ¡ç»„ä»¶äºŒè¿›åˆ¶äº§ç‰©ç¼ºå¤±å¤´æ–‡ä»¶æˆ–è€…ç¬¦å·çš„é—®é¢˜ã€‚</p>
<p>é‚£ä¹ˆå¯¹è¿™ä¸ªé—®é¢˜çš„è§£å†³ï¼Œé™¤äº†æ˜¯é€‰æ‹©åœ¨æäº¤ä»£ç æ—¶ï¼Œåš<code>no_unreferenced_code_files</code>è§„åˆ™çš„æ£€æµ‹ï¼Œè¿˜æœ‰å…¶ä»–ä»£æ›¿æ–¹æ¡ˆå—ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼šæœ‰çš„ã€‚è¿™ä¸ªä»£æ›¿æ–¹æ¡ˆå°±æ˜¯åšã€å»å·¥ç¨‹åŒ–ã€‘ã€‚æ‰€è°“çš„ã€å»å·¥ç¨‹åŒ–ã€‘ï¼Œå°±æ˜¯åŸºäºé¡¹ç›®çš„æ–‡ä»¶å¤¹ç»“æ„ï¼Œä½¿ç”¨å·¥ç¨‹è‡ªè¿°æ–‡ä»¶ï¼ˆ<code>project spec file</code>ï¼‰ç”Ÿæˆ Xcode å·¥ç¨‹æ–‡ä»¶ï¼š</p>
<p><img src="/2021/%E6%89%8BY%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E5%8C%96%E5%BB%BA%E8%AE%BE%E4%BA%8C%EF%BC%9A%E6%89%8BY%E4%B8%9A%E5%8A%A1%E5%B7%A5%E7%A8%8B%E8%A7%84%E8%8C%83%E5%BB%BA%E8%AE%BE/readme/%E5%8E%BB%E5%B7%A5%E7%A8%8B%E6%96%87%E4%BB%B6%E5%8C%96.webp" alt="å»å·¥ç¨‹æ–‡ä»¶åŒ–"></p>
<blockquote>
<p>ç›®å‰ä¸šå†…æä¾›å®ç°ã€å»å·¥ç¨‹åŒ–ã€‘çš„å·¥å…·æœ‰ï¼š</p>
<ul>
<li><a href="https://github.com/yonaskolb/XcodeGen" target="_blank" rel="noopener">XcodeGen</a></li>
<li><a href="https://github.com/lyptt/struct" target="_blank" rel="noopener">struct</a></li>
</ul>
</blockquote>
<p>åŸºäºè¿™ä¸ªæ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åœ¨æ„å»ºäºŒè¿›åˆ¶äº§ç‰©æ—¶ï¼Œæ ¹æ®å·¥ç¨‹è‡ªè¿°æ–‡ä»¶ç”Ÿæˆç­‰ä»·äºå¼€å‘æ—¶ç”¨åˆ°çš„ <code>Development Pods</code>å·¥ç¨‹ï¼Œä»è€Œè§£å†³æ‰ä¸Šè¿°é—®é¢˜ã€‚ç›®å‰æ‰‹Yå·²ç»åœ¨éƒ¨åˆ†ä¸šåŠ¡ç»„ä»¶ä¸Šå®æ–½è¯¥æ–¹æ¡ˆã€‚</p>
</blockquote>
<h3 id="no-conflicting-files"><a href="#no-conflicting-files" class="headerlink" title="no_conflicting_files"></a>no_conflicting_files</h3><ul>
<li>è§„åˆ™ç›®çš„ï¼šé˜²æ­¢æ²¡è§£å†³<code>merge conflicts</code>ï¼ˆåˆå¹¶å†²çªï¼‰çš„æ–‡ä»¶é˜»å¡ä»–äººçš„å¼€å‘</li>
<li>è§„åˆ™ç®€ä»‹ï¼šå¼€å‘è€…ä¸èƒ½æäº¤å­˜åœ¨<code>merge conflicts</code>ï¼ˆåˆå¹¶å†²çªï¼‰çš„æ–‡ä»¶åˆ°å·¥ç¨‹ä»“åº“ä¸­</li>
</ul>
<h3 id="yy-commit-msg-convention"><a href="#yy-commit-msg-convention" class="headerlink" title="yy_commit_msg_convention"></a>yy_commit_msg_convention</h3><ul>
<li><p>è§„åˆ™ç›®çš„ï¼šç»Ÿä¸€æ‰‹Yå’Œæ‰‹Yä¸šåŠ¡ç»„ä»¶çš„ Commit æ—¥å¿—è§„èŒƒ</p>
</li>
<li><p>è§„åˆ™ç®€ä»‹ï¼šå¼€å‘è€…æäº¤çš„ Commit æ—¥å¿—éœ€è¦æ»¡è¶³<a href="https://juejin.cn/post/6980910026151952391#heading-1" target="_blank" rel="noopener external nofollow noreferrer">ã€ŠYY Commit æ—¥å¿—è§„èŒƒã€‹</a></p>
<p>  <img src="/2021/%E6%89%8BY%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E5%8C%96%E5%BB%BA%E8%AE%BE%E4%BA%8C%EF%BC%9A%E6%89%8BY%E4%B8%9A%E5%8A%A1%E5%B7%A5%E7%A8%8B%E8%A7%84%E8%8C%83%E5%BB%BA%E8%AE%BE/readme/yy-commit-msg-convention.webp" alt="image.png"></p>
</li>
</ul>
<h3 id="yy-assert-api-first"><a href="#yy-assert-api-first" class="headerlink" title="yy_assert_api_first"></a>yy_assert_api_first</h3><ul>
<li><p>è§„åˆ™ç›®çš„ï¼šè§„èŒƒAPIä½¿ç”¨ï¼Œä¼˜å…ˆä½¿ç”¨ä¸šåŠ¡å®šåˆ¶çš„<code>YY API</code>ä»£æ›¿<code>System API</code>ï¼›ä»¥åŠè®©ä¸šåŠ¡ç»„ä»¶çš„äºŒè¿›åˆ¶åŒ…åœ¨å®¿ä¸»çš„<code>debug</code>ç¯å¢ƒä¸‹å¯è¿è¡Œ<code>Assert</code>ä»£ç </p>
</li>
<li><p>è§„åˆ™ç®€ä»‹ï¼šå·¥ç¨‹è‹¥ä¾èµ–äº†<code>YYAppEnvironment</code>ï¼Œåˆ™è¯¥å·¥ç¨‹çš„ä»£ç åº”ä¼˜å…ˆä½¿ç”¨<code>YYAppAssert API</code>è€Œä¸æ˜¯ <code>NSAssert API</code>ï¼Œæ¯”å¦‚ï¼š</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad case</span></span><br><span class="line"><span class="built_in">NSAssert</span>(<span class="literal">NO</span>, <span class="string">@"unimplemented enum value"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good case</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;YYAppEnvironment/YYAppEnvironment.h&gt;</span></span></span><br><span class="line">YYAppAssert(<span class="literal">NO</span>, <span class="string">@"unimplemented enum value"</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å…³äºè§„åˆ™ç›®çš„æåŠçš„ç¬¬2ç‚¹ï¼šè®©ä¸šåŠ¡ç»„ä»¶çš„äºŒè¿›åˆ¶åŒ…åœ¨å®¿ä¸»çš„<code>debug</code>ç¯å¢ƒä¸‹å¯è¿è¡Œ<code>Assert</code>ä»£ç ï¼Œè¿™é‡Œè¡¥å……ä¸€ä¸‹çŸ¥è¯†ç‚¹ã€‚ç›®å‰ä¸šåŠ¡ç»„ä»¶çš„äºŒè¿›åˆ¶åŒ…éƒ½æ˜¯<code>release</code>ç¼–è¯‘ï¼Œ<code>release</code>ç¼–è¯‘æ—¶ï¼Œä¸šåŠ¡ç»„ä»¶ä¸­<code>NSAssert</code>ä»£ç ä¼šè¢«ç¼–è¯‘å™¨æ¸…ç†æ‰ï¼Œè¿™ä¼šå¯¼è‡´ä¸šåŠ¡ç»„ä»¶çš„äºŒè¿›åˆ¶åŒ…åœ¨å®¿ä¸»çš„<code>debug</code>ç¯å¢ƒä¸‹è¿è¡Œä¼šå¤±æ•ˆï¼Œè¾¾ä¸åˆ°å¼€å‘è€…è°ƒè¯•çš„ç›®çš„ã€‚</p>
<p>ä¸ºæ­¤æˆ‘ä»¬çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ï¼š ä¸šåŠ¡ç»„ä»¶ä½¿ç”¨<code>YYAppAssert API</code>ä»£æ›¿<code>NSAssert API</code>ï¼Œç„¶åå®¿ä¸»æ¥å…¥<code>YYAppAssert</code>æºç ç¼–è¯‘ï¼Œç„¶åä¸šåŠ¡ç»„ä»¶çš„<code>Assert</code>ä»£ç å¯ä»¥å’Œä»¥å‰ä¸€æ ·ï¼Œå®¿ä¸»è¿è¡Œç¯å¢ƒæ˜¯<code>debug</code>ç¯å¢ƒæ—¶ï¼Œ<code>Assert</code>ä»£ç ç”Ÿæ•ˆï¼›å®¿ä¸»ç¯å¢ƒæ˜¯<code>release</code>ç¯å¢ƒæ—¶ï¼Œ<code>Assert</code>ä»£ç ä¸ç”Ÿæ•ˆã€‚</p>
</blockquote>
</li>
</ul>
<h3 id="yy-color-api-first"><a href="#yy-color-api-first" class="headerlink" title="yy_color_api_first"></a>yy_color_api_first</h3><ul>
<li><p>è§„åˆ™ç›®çš„ï¼šè§„èŒƒAPIä½¿ç”¨ï¼Œä¼˜å…ˆä½¿ç”¨ä¸šåŠ¡å®šåˆ¶çš„<code>YY API</code>ä»£æ›¿<code>System API</code>ï¼›ä»¥åŠåå‘æ¨åŠ¨è®¾è®¡åŒäº‹ä¼˜å…ˆä½¿ç”¨è§†è§‰è§„èŒƒä¸Šçš„è‰²è¡¨é¢œè‰²</p>
</li>
<li><p>è§„åˆ™ç®€ä»‹ï¼šå·¥ç¨‹è‹¥ä¾èµ–äº†<code>yybaseapisdk</code>ï¼Œåˆ™è¯¥å·¥ç¨‹çš„ä»£ç åº”ä¼˜å…ˆä½¿ç”¨<code>YYColor API</code>è€Œä¸æ˜¯<code>UIColor API</code>ï¼Œæ¯”å¦‚ï¼š</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad case</span></span><br><span class="line"><span class="built_in">UIColor</span> *bgColor = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line"></span><br><span class="line"><span class="comment">// good case</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;yybaseapisdk/YYColor.h&gt;</span></span></span><br><span class="line"><span class="built_in">UIColor</span> *bgColor = [YYColor B0Color];</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="yy-http-api-first"><a href="#yy-http-api-first" class="headerlink" title="yy_http_api_first"></a>yy_http_api_first</h3><ul>
<li><p>è§„åˆ™ç›®çš„ï¼šè§„èŒƒAPIä½¿ç”¨ï¼Œä¼˜å…ˆä½¿ç”¨ä¸šåŠ¡å®šåˆ¶çš„<code>YY API</code>ä»£æ›¿<code>System API</code></p>
</li>
<li><p>è§„åˆ™ç®€ä»‹ï¼šå·¥ç¨‹è‹¥ä¾èµ–äº†<code>yybaseapisdk</code>ï¼Œåˆ™è¯¥å·¥ç¨‹çš„ä»£ç åº”ä¼˜å…ˆä½¿ç”¨<code>YYNetClient API</code>è€Œä¸æ˜¯ <code>NSURLSession/NSURLConnection API</code>ï¼Œæ¯”å¦‚ï¼š</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad case</span></span><br><span class="line"><span class="built_in">NSURLSession</span> *session = [<span class="built_in">NSURLSession</span> sessionWithConfiguration:[<span class="built_in">NSURLSessionConfiguration</span> defaultSessionConfiguration]];</span><br><span class="line"><span class="built_in">NSURL</span> *imgUrl = [<span class="built_in">NSURL</span> URLWithString:urlStr];</span><br><span class="line"><span class="built_in">NSURLSessionDataTask</span> *task = [session dataTaskWithURL:imgUrl completionHandler:^(<span class="built_in">NSData</span> * _Nullable data, <span class="built_in">NSURLResponse</span> * _Nullable response, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;];</span><br><span class="line">[task resume];</span><br><span class="line"></span><br><span class="line"><span class="comment">// good case</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;yybaseapisdk/YYNetClient.h&gt;</span></span></span><br><span class="line">YYJumpLiveWinRecmdInfoRequest *request = [YYJumpLiveWinRecmdInfoRequest new];</span><br><span class="line">[YYNetClient sendUrl:urlStr</span><br><span class="line">              method:YYHttpRequestMethodGET</span><br><span class="line">             request:request</span><br><span class="line">       responseClass:YYJumpLiveWinRecmdInfoResponse.class</span><br><span class="line">          onFinished:responseBlock];</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="yy-userdefaults-api-first"><a href="#yy-userdefaults-api-first" class="headerlink" title="yy_userdefaults_api_first"></a>yy_userdefaults_api_first</h3><ul>
<li><p>è§„åˆ™ç›®çš„ï¼šè§„èŒƒAPIä½¿ç”¨ï¼Œä¼˜å…ˆä½¿ç”¨ä¸šåŠ¡å®šåˆ¶çš„<code>YY API</code>ä»£æ›¿<code>System API</code></p>
</li>
<li><p>è§„åˆ™ç®€ä»‹ï¼šå·¥ç¨‹è‹¥ä¾èµ–äº†<code>yybaseapisdk</code>ï¼Œåˆ™è¯¥å·¥ç¨‹çš„ä»£ç åº”ä¼˜å…ˆä½¿ç”¨<code>YYUserDefaults API</code>è€Œä¸æ˜¯ <code>NSUserDefaults API</code>ï¼Œæ¯”å¦‚ï¼š</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad case</span></span><br><span class="line"><span class="keyword">id</span> hiddenObj = [[<span class="built_in">NSUserDefaults</span> standardUserDefaults] objectForKey:key];</span><br><span class="line"><span class="built_in">BOOL</span> hidden = (hiddenObj != <span class="literal">nil</span>) ? [hiddenObj boolValue] : <span class="literal">YES</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good case</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;yybaseapisdk/YYUserDefaults.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;yybaseapisdk/YYUserDefaultsDefine.h&gt;</span></span></span><br><span class="line"><span class="built_in">BOOL</span> hidden = [YYUserDefaults yy_boolForKey:key forModule:module];</span><br></pre></td></tr></table></figure>
<h3 id="yy-dispatch-task-block-api-first"><a href="#yy-dispatch-task-block-api-first" class="headerlink" title="yy_dispatch_task_block_api_first"></a>yy_dispatch_task_block_api_first</h3></li>
<li><p>è§„åˆ™ç›®çš„ï¼šè§„èŒƒAPIä½¿ç”¨ï¼Œä¼˜å…ˆä½¿ç”¨ä¸šåŠ¡å®šåˆ¶çš„<code>YY API</code>ä»£æ›¿<code>System API</code></p>
</li>
<li><p>è§„åˆ™ç®€ä»‹ï¼šå·¥ç¨‹è‹¥ä¾èµ–äº†<code>yybaseapisdk</code>ï¼Œåˆ™è¯¥å·¥ç¨‹çš„ä»£ç åº”ä¼˜å…ˆä½¿ç”¨<code>YY Dispatch Task Block API</code>ï¼ˆ<code>dispatch_yy_sync</code>/<code>dispatch_yy_async</code>/<code>dispatch_sys_sync</code>/<code>dispatch_sys_async</code>ï¼‰ è€Œä¸æ˜¯<code>System Dispatch Task Block API</code>ï¼ˆ<code>dispatch_sync</code>/<code>dispatch_async</code>ï¼‰ï¼Œæ¯”å¦‚ï¼š</p>
  <figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad case</span></span><br><span class="line"><span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good case</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;yybaseapisdk/YYDispatchQueue.h&gt;</span></span></span><br><span class="line">dispatch_yy_async(dispatch_get_yy_main_queue(), ^&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="ä¿éšœã€Šæ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒã€‹å®æ–½çš„æŠ€æœ¯æ–¹æ¡ˆ"><a href="#ä¿éšœã€Šæ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒã€‹å®æ–½çš„æŠ€æœ¯æ–¹æ¡ˆ" class="headerlink" title="ä¿éšœã€Šæ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒã€‹å®æ–½çš„æŠ€æœ¯æ–¹æ¡ˆ"></a>ä¿éšœã€Šæ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒã€‹å®æ–½çš„æŠ€æœ¯æ–¹æ¡ˆ</h2><p>ä¸ºä¿è¯ã€Šæ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒã€‹çš„å®æ–½ï¼Œæˆ‘ä»¬ç ”å‘äº†é…å¥—çš„ä¿éšœå·¥å…·ï¼š<code>yy-commit-linter</code>ï¼š</p>
<ol>
<li><code>yy-commit-linter</code>æ˜¯ä¸€ä¸ªåŸºäº<code>Ruby</code>å¼€å‘çš„<code>gem</code>åŒ…</li>
<li>ä¸ºäº†å®ç°<code>yy-commit-linter</code>çš„è‡ªåŠ¨å®‰è£…å’Œå‡çº§ï¼Œæˆ‘ä»¬æŠŠ<code>yy-commit-linter</code>åŒ…è£…æˆä¸€ä¸ª<code>Pod</code>åº“</li>
<li>ç„¶ååœ¨æ‰‹Yä¸»å·¥ç¨‹å®‰è£…<code>Pod</code>åº“æ—¶ï¼Œå®‰è£…<code>yy-commit-linter CLI</code>åˆ°å¼€å‘è€…çš„ç”µè„‘ï¼Œå¹¶è®¾ç½®<code>git global hooks</code>æŒ‡å‘<code>yy-commit-linter git-hooks</code></li>
<li><code>yy-commit-linter git-hooks</code> æ‰¿è½½äº†ã€Šæ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒã€‹çš„æ¯é¡¹æ£€æµ‹ï¼Œå½“å¼€å‘è€…åœ¨æ‰‹Yä¸šåŠ¡å·¥ç¨‹å®Œæˆå¼€å‘æäº¤ä»£ç æ—¶ï¼Œ<code>yy-commit-linter git-hooks</code> å°±ä¼šè¢«è§¦å‘ï¼Œç„¶åä¼šå¯¹æäº¤çš„å†…å®¹è¿›è¡Œæ£€æµ‹ï¼Œç¡®ä¿å¼€å‘è€…éµå®ˆäº†åˆ¶å®šçš„è§„èŒƒ</li>
</ol>
<p><img src="/2021/%E6%89%8BY%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E5%8C%96%E5%BB%BA%E8%AE%BE%E4%BA%8C%EF%BC%9A%E6%89%8BY%E4%B8%9A%E5%8A%A1%E5%B7%A5%E7%A8%8B%E8%A7%84%E8%8C%83%E5%BB%BA%E8%AE%BE/readme/yy-commit-linter%E6%8E%A5%E5%85%A5iOS%E9%A1%B9%E7%9B%AE%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88.webp" alt="image.png"></p>
<h2 id="æ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒFAQ"><a href="#æ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒFAQ" class="headerlink" title="æ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒFAQ"></a>æ‰‹Yä¸šåŠ¡å·¥ç¨‹è§„èŒƒFAQ</h2><h3 id="å¯¹äºæš‚ä¸éœ€è¦åšäºŒè¿›åˆ¶åŒ–çš„ä¸šåŠ¡ç»„ä»¶å·¥ç¨‹ï¼Œå¦‚ä½•ä¸´æ—¶è·³è¿‡no-unreferenced-code-filesè§„åˆ™çš„æ£€æµ‹ï¼Ÿ"><a href="#å¯¹äºæš‚ä¸éœ€è¦åšäºŒè¿›åˆ¶åŒ–çš„ä¸šåŠ¡ç»„ä»¶å·¥ç¨‹ï¼Œå¦‚ä½•ä¸´æ—¶è·³è¿‡no-unreferenced-code-filesè§„åˆ™çš„æ£€æµ‹ï¼Ÿ" class="headerlink" title="å¯¹äºæš‚ä¸éœ€è¦åšäºŒè¿›åˆ¶åŒ–çš„ä¸šåŠ¡ç»„ä»¶å·¥ç¨‹ï¼Œå¦‚ä½•ä¸´æ—¶è·³è¿‡no_unreferenced_code_filesè§„åˆ™çš„æ£€æµ‹ï¼Ÿ"></a>å¯¹äºæš‚ä¸éœ€è¦åšäºŒè¿›åˆ¶åŒ–çš„ä¸šåŠ¡ç»„ä»¶å·¥ç¨‹ï¼Œå¦‚ä½•ä¸´æ—¶è·³è¿‡<code>no_unreferenced_code_files</code>è§„åˆ™çš„æ£€æµ‹ï¼Ÿ</h3><p>é’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œ<code>yy-commit-linter</code>ä¸º<code>no_unreferenced_code_files</code>è§„åˆ™è®¾è®¡å’Œå®ç°äº†åä¸ºã€ç™½åå•å‡­è¯ï¼ˆ<code>white_passport</code>ï¼‰ã€‘çš„ç™½åå•æœºåˆ¶ï¼šè‹¥ä¸šåŠ¡ç»„ä»¶å·¥ç¨‹å­˜åœ¨ç™½åå•å‡­è¯æ–‡ä»¶ï¼Œå³å¯ä¸å—<code>no_unreferenced_code_files</code>è§„åˆ™çš„çº¦æŸã€‚</p>
<p>æ·»åŠ ç™½åå•å‡­è¯æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥ä¸šåŠ¡å·¥ç¨‹æ ¹ç›®å½•</span></span><br><span class="line">cd path/to/yyxxxcomponent-ios</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸ºå½“å‰ä¸šåŠ¡å·¥ç¨‹æ·»åŠ ç™½åå•å‡­è¯ï¼ˆwhite_passportï¼‰</span></span><br><span class="line">yy-commit-linter white_passport</span><br></pre></td></tr></table></figure>

<h3 id="å›¾ç‰‡èµ„æºä½“ç§¯è¶…æ ‡ä½†æ˜¯åˆå¿…é¡»æ”¾ç½®åœ¨æœ¬åœ°æ—¶ï¼Œè¿™æ—¶å€™è¯¥å¦‚ä½•è·³è¿‡no-fat-resource-filesè§„åˆ™çš„æ£€æµ‹ï¼Ÿ"><a href="#å›¾ç‰‡èµ„æºä½“ç§¯è¶…æ ‡ä½†æ˜¯åˆå¿…é¡»æ”¾ç½®åœ¨æœ¬åœ°æ—¶ï¼Œè¿™æ—¶å€™è¯¥å¦‚ä½•è·³è¿‡no-fat-resource-filesè§„åˆ™çš„æ£€æµ‹ï¼Ÿ" class="headerlink" title="å›¾ç‰‡èµ„æºä½“ç§¯è¶…æ ‡ä½†æ˜¯åˆå¿…é¡»æ”¾ç½®åœ¨æœ¬åœ°æ—¶ï¼Œè¿™æ—¶å€™è¯¥å¦‚ä½•è·³è¿‡no_fat_resource_filesè§„åˆ™çš„æ£€æµ‹ï¼Ÿ"></a>å›¾ç‰‡èµ„æºä½“ç§¯è¶…æ ‡ä½†æ˜¯åˆå¿…é¡»æ”¾ç½®åœ¨æœ¬åœ°æ—¶ï¼Œè¿™æ—¶å€™è¯¥å¦‚ä½•è·³è¿‡<code>no_fat_resource_files</code>è§„åˆ™çš„æ£€æµ‹ï¼Ÿ</h3><p>é’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œ<code>yy-commit-linter</code>ä¸º<code>no_fat_resource_files</code>è§„åˆ™è®¾è®¡å’Œå®ç°äº†åä¸ºã€ç™½åå•å£ä»¤ï¼ˆ<code>white_passphrase</code>ï¼‰ã€‘çš„ç™½åå•æœºåˆ¶ï¼šè‹¥è¿è§„çš„å›¾ç‰‡èµ„æºå­˜åœ¨åˆæ³•çš„ç™½åå•å£ä»¤ï¼Œåˆ™å¯ä¸å—<code>no_fat_resource_files</code>è§„åˆ™çš„çº¦æŸã€‚</p>
<p>ä¸ºè¿è§„çš„å›¾ç‰‡èµ„æºæ·»åŠ åˆæ³•çš„ç™½åå•å£ä»¤çš„ç¤ºä¾‹æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å‘è¿è§„çš„å›¾ç‰‡èµ„æºå‘<code>yy-commit-linter</code>çš„æŒæœ‰äººç”³è¯·è·å¾—ä¸“å±ç™½åå•å£ä»¤</li>
<li>åœ¨å·¥ç¨‹æ ¹ç›®å½•ä¸‹ä¸ºè¿è§„çš„å›¾ç‰‡èµ„æºæ·»åŠ ä¸“å±ç™½åå•å£ä»¤ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥ä¸šåŠ¡å·¥ç¨‹æ ¹ç›®å½•</span></span><br><span class="line">cd path/to/yyxxxcomponent-ios</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸ºè¿è§„çš„å›¾ç‰‡èµ„æºæ–‡ä»¶æ·»åŠ åˆ†é…ç»™å®ƒçš„ç™½åå•å£ä»¤ï¼ˆwhite_passphraseï¼‰ xxx1ï¼ˆè‹¥ä½ æœ‰å¤šä¸ªï¼Œåˆ™æ‰§è¡Œå¤šæ¬¡è¯¥æŒ‡ä»¤ï¼‰</span></span><br><span class="line">yy-commit-linter white_passphrase --passphrase xxx1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸ºä¸‹ä¸€ä¸ªè¿è§„çš„å›¾ç‰‡èµ„æºæ–‡ä»¶æ·»åŠ åˆ†é…ç»™å®ƒçš„ç™½åå•å£ä»¤ï¼ˆwhite_passphraseï¼‰xxx2</span></span><br><span class="line">yy-commit-linter white_passphrase --passphrase xxx2</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œå¿…é¡»ä½¿ç”¨System-APIï¼Œè¿™æ—¶å€™è¯¥å¦‚ä½•è·³è¿‡yy-api-firstç³»åˆ—è§„åˆ™çš„æ£€æµ‹ï¼Ÿ"><a href="#ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œå¿…é¡»ä½¿ç”¨System-APIï¼Œè¿™æ—¶å€™è¯¥å¦‚ä½•è·³è¿‡yy-api-firstç³»åˆ—è§„åˆ™çš„æ£€æµ‹ï¼Ÿ" class="headerlink" title="ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œå¿…é¡»ä½¿ç”¨System APIï¼Œè¿™æ—¶å€™è¯¥å¦‚ä½•è·³è¿‡yy_api_firstç³»åˆ—è§„åˆ™çš„æ£€æµ‹ï¼Ÿ"></a>ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œå¿…é¡»ä½¿ç”¨<code>System API</code>ï¼Œè¿™æ—¶å€™è¯¥å¦‚ä½•è·³è¿‡<code>yy_api_first</code>ç³»åˆ—è§„åˆ™çš„æ£€æµ‹ï¼Ÿ</h3><p>é’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œ<code>yy-commit-linter</code>ä¸º<code>yy_api_first</code>ç³»åˆ—è§„åˆ™è®¾è®¡å’Œå®ç°äº†åä¸ºã€ç™½åå•æ ‡ç­¾ï¼ˆ<code>white_label</code>ã€‘çš„ç™½åå•æœºåˆ¶ï¼šè‹¥è¿è§„çš„ä»£ç å­˜åœ¨ä¸€ä¸ªç™½åå•æ ‡ç­¾ï¼Œåˆ™å¯ä¸å—å¯¹åº”çš„<code>yy_api_first</code>è§„åˆ™çš„çº¦æŸã€‚</p>
<p>ã€ç™½åå•æ ‡ç­¾ï¼ˆ<code>white_label</code>ã€‘å½¢å¼ä¸Šæ˜¯ä¸€ä¸ª <code>ignore_yy_api_first</code>æ³¨é‡Šæ ‡ç­¾ã€‚</p>
<p>æ·»åŠ ç™½åå•æ ‡ç­¾ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹1</span></span><br><span class="line"><span class="built_in">NSUserDefaults</span> *userDefaults = [[<span class="built_in">NSUserDefaults</span> alloc] initWithSuiteName:groundIdentifier]; <span class="comment">//ignore_yy_api_first</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹2</span></span><br><span class="line"><span class="built_in">NSUserDefaults</span> *userDefaults = [[<span class="built_in">NSUserDefaults</span> alloc] initWithSuiteName:groundIdentifier]; <span class="comment">/* ignore_yy_api_first */</span></span><br></pre></td></tr></table></figure>

<h3 id="å¦‚æœéœ€è¦ä¸´æ—¶åœç”¨yy-commit-linteræ£€æµ‹åŠŸèƒ½ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†"><a href="#å¦‚æœéœ€è¦ä¸´æ—¶åœç”¨yy-commit-linteræ£€æµ‹åŠŸèƒ½ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†" class="headerlink" title="å¦‚æœéœ€è¦ä¸´æ—¶åœç”¨yy-commit-linteræ£€æµ‹åŠŸèƒ½ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†?"></a>å¦‚æœéœ€è¦ä¸´æ—¶åœç”¨<code>yy-commit-linter</code>æ£€æµ‹åŠŸèƒ½ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†?</h3><p>é’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œ<code>yy-commit-linter</code>ä¸ºæä¾›äº†<code>uninstall</code>åŠŸèƒ½ï¼Œä½†æ˜¯ä¸ºäº†é˜²æ­¢ç”¨æˆ·æ»¥ç”¨ï¼Œè®¾è®¡äº†<code>uninstall</code>å£ä»¤ï¼šæ‰§è¡Œ<code>uninstall</code>å‰ï¼Œéœ€è¦å…ˆå‘<code>yy-commit-linter</code>çš„æŒæœ‰äººç”³è¯·ä¸€ä¸ªå£ä»¤ï¼Œç„¶åæ‰§è¡Œ<code>uninstall</code>æ—¶ï¼Œè¾“å…¥è¯¥å£ä»¤æ‰èƒ½æˆåŠŸ<code>uninstall</code>ã€‚</p>
<p>æ‰§è¡Œ<code>uninstall</code>çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="/2021/%E6%89%8BY%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E5%8C%96%E5%BB%BA%E8%AE%BE%E4%BA%8C%EF%BC%9A%E6%89%8BY%E4%B8%9A%E5%8A%A1%E5%B7%A5%E7%A8%8B%E8%A7%84%E8%8C%83%E5%BB%BA%E8%AE%BE/readme/%E4%B8%B4%E6%97%B6%E5%81%9C%E7%94%A8yy-commit-linter.webp" alt="image.png"></p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>uninstall</code>å£ä»¤å…·æœ‰å®šå‘æ€§ï¼ˆåªå¯¹ç”³è¯·äººç”Ÿæ•ˆï¼‰å’Œæ—¶æ•ˆæ€§ï¼ˆåªåœ¨å½“å¤©æœ‰æ•ˆï¼‰ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>æ•™ç¨‹</tag>
        <tag>2021</tag>
        <tag>å·¥ç¨‹å®è·µ</tag>
      </tags>
  </entry>
</search>
