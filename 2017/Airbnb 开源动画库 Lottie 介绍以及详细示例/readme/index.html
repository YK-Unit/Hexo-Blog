<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="UqKKfD7JNYnd__AMcMlkoOgSvS52v13_zR26UfTIxQ0">
  <meta name="baidu-site-verification" content="g9YOLSrZfL">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.yorkfish.me","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="前言该文章主要介绍了 Lottie是什么，如何为 Lottie 制作动画，以及 Lottie的应用场景。适合设计师和开发者阅读以及结对实践。">
<meta property="og:type" content="article">
<meta property="og:title" content="Airbnb 开源动画库 Lottie 介绍以及详细示例">
<meta property="og:url" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/index.html">
<meta property="og:site_name" content="YorkFish Blog">
<meta property="og:description" content="前言该文章主要介绍了 Lottie是什么，如何为 Lottie 制作动画，以及 Lottie的应用场景。适合设计师和开发者阅读以及结对实践。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/Lottie%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%9B%BE.png">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%8B%96%E5%8A%A8%E5%AE%89%E8%A3%85bodymovin.zxp.png">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/bodymovin.zxp%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F.png">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%89%93%E5%BC%80-">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/bodymovin.png">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%AD%A4%E5%A4%84%E8%AF%B7%E5%BC%80%E5%A7%8B%E4%BD%A0%E7%9A%84%E8%A1%A8%E6%BC%94~.png">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E5%AF%BC%E5%87%BAjson%E6%96%87%E4%BB%B6%E6%B5%81%E7%A8%8B.png">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E5%90%AF%E5%8A%A8(splash)%E5%8A%A8%E7%94%BB.gif">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E4%B8%8A%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E5%8A%A8%E7%94%BB.gif">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E5%8A%A0%E8%BD%BD(loading)%E5%8A%A8%E7%94%BB+%E6%8F%90%E7%A4%BA(tips)%E5%8A%A8%E7%94%BB.gif">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%8C%89%E9%92%AE(button)%E5%8A%A8%E7%94%BB+%E7%A4%BC%E7%89%A9(gift)%E5%8A%A8%E7%94%BB.gif">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB.gif">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/logHierarchyKeypaths%E6%97%A5%E5%BF%97.png">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/Keypath.png">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%B7%BB%E5%8A%A0%E8%A7%86%E5%9B%BE%E5%88%B0Layer%E5%B1%82.gif">
<meta property="og:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/Shape-Layer%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F.jpg">
<meta property="article:published_time" content="2017-08-21T04:34:56.000Z">
<meta property="article:modified_time" content="2017-08-21T04:34:56.000Z">
<meta property="article:author" content="YorkFish">
<meta property="article:tag" content="iOS">
<meta property="article:tag" content="教程">
<meta property="article:tag" content="2017">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/Lottie%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%9B%BE.png">

<link rel="canonical" href="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Airbnb 开源动画库 Lottie 介绍以及详细示例 | YorkFish Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="YorkFish Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">YorkFish Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">KISS</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/left-v.jpg">
      <meta itemprop="name" content="YorkFish">
      <meta itemprop="description" content="Keep IT Simple & Stupid">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YorkFish Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Airbnb 开源动画库 Lottie 介绍以及详细示例
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-08-21 12:34:56" itemprop="dateCreated datePublished" datetime="2017-08-21T12:34:56+08:00">2017-08-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>该文章主要介绍了 Lottie是什么，如何为 Lottie 制作动画，以及 Lottie的应用场景。适合设计师和开发者阅读以及结对实践。</p>
<a id="more"></a>


<h2 id="Lottie-介绍"><a href="#Lottie-介绍" class="headerlink" title="Lottie 介绍"></a>Lottie 介绍</h2><p>Lottie 是 Airbnb 开源的一个动画渲染库，同时支持 Android、iOS、React Native 平台。Lottie 目前只支持渲染播放 After Effects 动画。 <a href="http://airbnb.design/lottie/" target="_blank" rel="noopener external nofollow noreferrer">Lottie</a> 使用从 <a href="https://github.com/bodymovin/bodymovin" target="_blank" rel="noopener">bodymovin</a> (开源的 After Effects 插件)导出的json数据来作为动画数据。所以从动画制作到动画使用的整个工作流程如下：</p>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/Lottie%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="此图引用自http://cdn.trojx.me/blog_pic/lottie_sum.png"></p>
<ol>
<li>设计师使用 After Effects 制作动画，并导出json文件给开发者</li>
<li>各端的开发者通过 Lottie 渲染播放动画</li>
</ol>
<p>截止目前，各平台的 Lottie 支持的 After Effects 特性可从下面网页获得：</p>
<blockquote>
<p><a href="http://airbnb.io/lottie/supported-features.html" target="_blank" rel="noopener external nofollow noreferrer">http://airbnb.io/lottie/supported-features.html</a></p>
</blockquote>
<p><strong>所以，设计师在使用 After Effects 制作动画时，建议先预览上述网页，以知道应该使用哪些特性制作动画，因为若使用 Lottie 还不支持的特性，如3D图层，则 Lottie 会无法正确渲染。</strong></p>
<p>为了推广Lottie，Airbnb 还建立了一个Lottie动画网站，供网友分享自己制作的动画。网站地址为：</p>
<blockquote>
<p><a href="https://www.lottiefiles.com" target="_blank" rel="noopener external nofollow noreferrer">https://www.lottiefiles.com</a></p>
</blockquote>
<h2 id="为-Lottie-制作动画"><a href="#为-Lottie-制作动画" class="headerlink" title="为 Lottie 制作动画"></a>为 Lottie 制作动画</h2><p>为 Lottie 制作动画，需要： After Effects + bodymovin。After Effects制作好动画后，通过插件 bodymovin 导出一份 json文件，然后使用 Lottie 进行渲染播放。下面将会介绍如何安装该插件以及如何导出json文件。</p>
<h3 id="安装-After-Effects"><a href="#安装-After-Effects" class="headerlink" title="安装 After Effects"></a>安装 After Effects</h3><p>PS： 已经安装好 After Effects 的童鞋可以忽略此环节</p>
<p>After Effects 可以从Adobe官网下载安装试用，其目前售价为：3499￥/年，相对来说还是很贵的。对于负担不起的童鞋来说，也可以考虑破解版本。以下是Mac 的破解版本的下载链接：</p>
<blockquote>
<p>百度云盘：<a href="https://pan.baidu.com/s/1eRMCL26" target="_blank" rel="noopener external nofollow noreferrer">https://pan.baidu.com/s/1eRMCL26</a><br>提取密码：xyu5</p>
</blockquote>
<p>下载的文件夹中包含安装文件<code>After Effects CC 2017.dmg</code>以及破解文件<code>Adobe Zii cc2017.app</code>压缩包。安装好 After Effects 后，解压运行Adobe Zii cc2017.app 即可免费使用 After Effects 。但是，建议负担的起的童鞋还是购买正版服务，始终可以得到各种升级服务。</p>
<h3 id="安装-After-Effects-插件-bodymovin"><a href="#安装-After-Effects-插件-bodymovin" class="headerlink" title="安装 After Effects 插件 bodymovin"></a>安装 After Effects 插件 bodymovin</h3><p><strong>1. 下载插件 <code>bodymovin.zxp</code></strong></p>
<ul>
<li>下载 <a href="https://codeload.github.com/bodymovin/bodymovin/zip/master" target="_blank" rel="noopener external nofollow noreferrer">bodymovin压缩文件</a></li>
<li>解压文件，在目录 ‘/build/extension’ 找到 <code>bodymovin.zxp</code></li>
</ul>
<p><strong>2. 安装插件</strong></p>
<ul>
<li><p>下载 After Effects 插件安装器 <a href="http://aescripts.com/learn/zxp-installer/" target="_blank" rel="noopener external nofollow noreferrer">ZXP Installer</a>（有 Windows 和 Mac 版本）</p>
</li>
<li><p>运行 <code>ZXP Installer</code>，按照指示拖动<code>bodymovin.zxp</code> 到其窗口，即可安装完成</p>
<p>  <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%8B%96%E5%8A%A8%E5%AE%89%E8%A3%85bodymovin.zxp.png" alt="拖动安装bodymovin.zxp.png"></p>
<p>安装成功后，如图所示：</p>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/bodymovin.zxp%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F.png" alt="bodymovin.zxp安装成功.png"></p>
</li>
</ul>
<p><strong>3. 重启 After Effects，然后修改 AE 的设置，在 ‘After Effects CC -&gt; Preferences -&gt;  General’ 中打开<br> ‘Allow Scripts to Write Files and Access Network’</strong></p>
<p>   <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%89%93%E5%BC%80-'Allow-Scripts-to-Write-Files-and-Access-Network'.png" alt="打开
 &#39;Allow Scripts to Write Files and Access Network&#39;.png"></p>
<p>   现在可以开始制作你的动画了，制作完毕后，需要使用 bodymovin 时，前往 ‘window -&gt; extensions’ 即可找到 bodymovin：</p>
<p>   <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/bodymovin.png" alt="bodymovin.png"></p>
<h3 id="使用-After-Effects-制作动画"><a href="#使用-After-Effects-制作动画" class="headerlink" title="使用 After Effects 制作动画"></a>使用 After Effects 制作动画</h3><p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%AD%A4%E5%A4%84%E8%AF%B7%E5%BC%80%E5%A7%8B%E4%BD%A0%E7%9A%84%E8%A1%A8%E6%BC%94~.png" alt="此处请开始你的表演~"></p>
<h3 id="使用-bodymovin-导出-json文件"><a href="#使用-bodymovin-导出-json文件" class="headerlink" title="使用 bodymovin 导出 json文件"></a>使用 bodymovin 导出 json文件</h3><p>当动画制作完毕后，运行 bodymovin，选择你要导出的动画，以及保存json文件的目录，点击 ‘Render’ 即可导出，具体流程如图所示：</p>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E5%AF%BC%E5%87%BAjson%E6%96%87%E4%BB%B6%E6%B5%81%E7%A8%8B.png" alt="导出json文件流程.png"></p>
<h3 id="在线预览动画效果"><a href="#在线预览动画效果" class="headerlink" title="在线预览动画效果"></a>在线预览动画效果</h3><p>制作好 After Effects 动画，导出json文件，当然要验证一下 Lottie 能否正确渲染播放了。</p>
<p>Airbnb 提供了  <a href="https://www.lottiefiles.com/ios" target="_blank" rel="noopener external nofollow noreferrer">iOS APP</a> 、<a href="https://www.lottiefiles.com/android" target="_blank" rel="noopener external nofollow noreferrer"> Android APP</a> 以及 <a href="https://www.lottiefiles.com/preview" target="_blank" rel="noopener external nofollow noreferrer">Lottie 动画在线预览网站</a> 供设计师进行动画预览。</p>
<p>在网站预览的话，设计师只要把导出后的 json 文件，拖动到网页的预览框，即可在线看到 Lottie 渲染播放的动画效果。</p>
<p>使用 APP 预览的话，则需要上传 json 文件到服务端，通过链接进行预览。建议设计师上传文件到 Airbnb 建立的分享网站 <a href="https://www.lottiefiles.com" target="_blank" rel="noopener external nofollow noreferrer">lottiefiles.com</a>。</p>
<h2 id="哪些场景适宜使用-Lottie？"><a href="#哪些场景适宜使用-Lottie？" class="headerlink" title="哪些场景适宜使用 Lottie？"></a>哪些场景适宜使用 Lottie？</h2><p>Lottie 作为一个动画渲染库，在探索过程中，笔者认为其比较适宜解决以下场景的问题：</p>
<ul>
<li>启动(splash)动画：典型场景是APP logo动画的播放</li>
<li>上下拉刷新动画：所有APP都必备的功能，利用 Lottie 可以做的更加简单酷炫了</li>
<li>加载(loading)动画：典型场景是网络请求的loading动画</li>
<li>提示(tips)动画：典型场景是空白页的提示</li>
<li>按钮(button)动画：典型场景如switch按钮、编辑按钮、播放按钮等按钮的切换过渡动画</li>
<li>礼物(gift)动画：典型场景是直播类APP的高级动画播放</li>
<li>视图转场动画</li>
</ul>
<p>各场景的示例如下：（以iOS平台为例）</p>
<ul>
<li><p>启动(splash)动画.gif</p>
<p>  <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E5%90%AF%E5%8A%A8(splash)%E5%8A%A8%E7%94%BB.gif" alt="启动(splash)动画.gif"></p>
</li>
<li><p>上下拉刷新动画<br>  <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E4%B8%8A%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E5%8A%A8%E7%94%BB.gif" alt="上下拉刷新动画.gif"></p>
</li>
<li><p>加载(loading)动画+提示(tips)动画<br>  <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E5%8A%A0%E8%BD%BD(loading)%E5%8A%A8%E7%94%BB+%E6%8F%90%E7%A4%BA(tips)%E5%8A%A8%E7%94%BB.gif" alt="加载(loading)动画+提示(tips)动画.gif"></p>
</li>
<li><p>按钮(button)动画+礼物(gift)动画<br>  <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%8C%89%E9%92%AE(button)%E5%8A%A8%E7%94%BB+%E7%A4%BC%E7%89%A9(gift)%E5%8A%A8%E7%94%BB.gif" alt="按钮(button)动画+礼物(gift)动画.gif"></p>
</li>
<li><p>转场动画<br>  <img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB.gif" alt="转场动画.gif"></p>
</li>
</ul>
<h2 id="接入-Lottie"><a href="#接入-Lottie" class="headerlink" title="接入 Lottie"></a>接入 Lottie</h2><p>制作好动画，导出json文件后，iOS、Android、React Native的开发者们就可以像使用静态资源一样使用动画了。接入教程可以看官网教程或者 各平台的 Lottie 项目的github：</p>
<ul>
<li><a href="http://airbnb.io/lottie/" target="_blank" rel="noopener external nofollow noreferrer">官网教程</a></li>
<li><a href="https://github.com/airbnb/lottie-ios" target="_blank" rel="noopener">lottie-ios-git</a></li>
<li><a href="https://github.com/airbnb/lottie-android" target="_blank" rel="noopener">lottie-android-git</a></li>
<li><a href="https://github.com/airbnb/lottie-react-native" target="_blank" rel="noopener">lottie-react-native-git</a></li>
</ul>
<blockquote>
<p>lottie-iOS 的应用示例（包括上述所有例子）可访问：<br><a href="https://github.com/YK-Unit/LottieExample" target="_blank" rel="noopener">https://github.com/YK-Unit/LottieExample</a></p>
</blockquote>
<h2 id="lottie-ios-极速上手手册"><a href="#lottie-ios-极速上手手册" class="headerlink" title="lottie-ios 极速上手手册"></a>lottie-ios 极速上手手册</h2><h3 id="安装-Lottie"><a href="#安装-Lottie" class="headerlink" title="安装 Lottie"></a>安装 Lottie</h3><p>可通过 Cocoapods 或者 Carthage 导入 Lottie。</p>
<ul>
<li>Cocoapods：<code>pod &#39;lottie-ios&#39;</code></li>
<li>Carthage： <code>github &quot;airbnb/lottie-ios&quot; &quot;master&quot;</code></li>
</ul>
<h3 id="加载-Lottie-动画"><a href="#加载-Lottie-动画" class="headerlink" title="加载 Lottie 动画"></a>加载 Lottie 动画</h3><p>Lottie 动画支持从本地或者服务器的json文件加载。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//从本地json加载</span></span><br><span class="line">LOTAnimationView *animationView = [LOTAnimationView animationNamed:<span class="string">@"Lottie"</span>];</span><br><span class="line"><span class="comment">//从本地指定的bundle的json加载</span></span><br><span class="line">LOTAnimationView *animationView = [LOTAnimationView animationNamed:<span class="string">@"Lottie"</span> inBundle:[<span class="built_in">NSBundle</span> YOUR_BUNDLE]];</span><br><span class="line"><span class="comment">//从服务器的json加载</span></span><br><span class="line">LOTAnimationView *animationView = [[LOTAnimationView alloc] initWithContentsOfURL:[<span class="built_in">NSURL</span> URLWithString:URL_TO_JSON]];</span><br><span class="line"></span><br><span class="line">animationView.frame = <span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">[<span class="keyword">self</span>.view addSubview:animationView];</span><br></pre></td></tr></table></figure>

<h3 id="播放-Lottie-动画"><a href="#播放-Lottie-动画" class="headerlink" title="播放 Lottie 动画"></a>播放 Lottie 动画</h3><p>Lottie 动画的播放控制，除了常规的控制，还支持进度播放、帧播放。</p>
<ul>
<li><p>播放、暂停、停止</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">LOTAnimationView *animationView = [LOTAnimationView animationNamed:<span class="string">@"Lottie"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//从上一次的动画位置开始播放</span></span><br><span class="line">[animationView play];</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="comment">//暂停动画播放</span></span><br><span class="line">[animationView pause];</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line"><span class="comment">//停止动画播放，此时动画进度重置为0</span></span><br><span class="line">[animationView stop];</span><br></pre></td></tr></table></figure>
</li>
<li><p>控制进度播放：可参考示例的上下拉刷新动画</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">LOTAnimationView *animationView = [LOTAnimationView animationNamed:<span class="string">@"RefreshHeaderAnim"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//直接播放到指定进度</span></span><br><span class="line">[animationView playToProgress:<span class="number">0.8</span> withCompletion:^(<span class="built_in">BOOL</span> animationFinished) &#123;</span><br><span class="line"><span class="comment">// do something</span></span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">//从进度A播放到进度B</span></span><br><span class="line">[animationView playFromProgress:<span class="number">0</span> toProgress:<span class="number">0.8</span> withCompletion:^(<span class="built_in">BOOL</span> animationFinished) &#123;</span><br><span class="line"><span class="comment">// do something</span></span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">//直接设置当前进度</span></span><br><span class="line">animationView.animationProgress = currentProgress;</span><br></pre></td></tr></table></figure>
</li>
<li><p>控制帧播放：可参考示例的switch按钮动画</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">LOTAnimationView *animationView = [LOTAnimationView animationNamed:<span class="string">@"Switch"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//直接播放到指定帧</span></span><br><span class="line">[animationView playToFrame:@(<span class="number">40</span>) withCompletion:^(<span class="built_in">BOOL</span> animationFinished) &#123;</span><br><span class="line"></span><br><span class="line"> &#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">//从A帧播放到B帧</span></span><br><span class="line">[animationView playFromFrame:@(<span class="number">20</span>) toFrame:@(<span class="number">40</span>) withCompletion:^(<span class="built_in">BOOL</span> animationFinished) &#123;</span><br><span class="line"></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
</li>
<li><p>循环播放动画：可参考示例的Play-Pause按钮动画</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">LOTAnimationView *animationView = [LOTAnimationView animationNamed:<span class="string">@"Play-Pause"</span>];</span><br><span class="line"><span class="comment">//设置循环播放</span></span><br><span class="line">animationView.loopAnimation = <span class="literal">YES</span>;</span><br><span class="line"><span class="comment">//设置自动倒退播放</span></span><br><span class="line">animationView.autoReverseAnimation = <span class="literal">YES</span>;</span><br><span class="line">[animationView playFromFrame:@(<span class="number">90</span>) toFrame:@(<span class="number">180</span>) withCompletion:^(<span class="built_in">BOOL</span> animationFinished) &#123;</span><br><span class="line"></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑某帧的动画对象的属性：可参考示例的switch按钮动画</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span>.switchButton setValue:[<span class="built_in">UIColor</span> orangeColor] forKeypath:<span class="string">@"Background 2.Shape 1.Fill 1.Color"</span> atFrame:@(<span class="number">0</span>)];</span><br><span class="line">[<span class="keyword">self</span>.switchButton setValue:[<span class="built_in">UIColor</span> blueColor] forKeypath:<span class="string">@"Background 2.Shape 1.Fill 1.Color"</span> atFrame:@(<span class="number">13</span>)];</span><br></pre></td></tr></table></figure>

<p>  要修改对象的属性，需要知道属性的路径（Keypath）。获取属性的路径的方法有：</p>
<ul>
<li><p>直接打印对象的所有层级属性，从日志中获取：<br>  <code>[animationView logHierarchyKeypaths];</code> </p>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/logHierarchyKeypaths%E6%97%A5%E5%BF%97.png" alt="logHierarchyKeypaths日志.png"></p>
</li>
<li><p>通过AE文件获得：<code>Background 2.Shape 1.Fill 1.Color</code></p>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/Keypath.png" alt="Keypath.png"></p>
</li>
</ul>
</li>
<li><p>视图控制器转场动画（View Controller Transitions）：可参考示例的转场动画<br>Lottie 提供了 <code>LOTAnimationTransitionController</code>生成 <code>id &lt;UIViewControllerAnimatedTransitioning&gt;</code> 对象。</p>
 <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="meta-keyword">pragma</span> mark - UIViewControllerTransitioningDelegate</span></span><br><span class="line"> - (<span class="keyword">nullable</span> <span class="keyword">id</span> &lt;<span class="built_in">UIViewControllerAnimatedTransitioning</span>&gt;)animationControllerForPresentedController:(<span class="built_in">UIViewController</span> *)presented presentingController:(<span class="built_in">UIViewController</span> *)presenting sourceController:(<span class="built_in">UIViewController</span> *)source &#123;</span><br><span class="line">	</span><br><span class="line">    LOTAnimationTransitionController *animationController = [[LOTAnimationTransitionController alloc] initWithAnimationNamed:<span class="string">@"vcTransition1"</span></span><br><span class="line">                                                                                                              fromLayerNamed:<span class="string">@"outLayer"</span></span><br><span class="line">                                                                                                                toLayerNamed:<span class="string">@"inLayer"</span></span><br><span class="line">                                                                                                     applyAnimationTransform:<span class="literal">NO</span>];</span><br><span class="line">    <span class="keyword">return</span> animationController;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="keyword">id</span> &lt;<span class="built_in">UIViewControllerAnimatedTransitioning</span>&gt;)animationControllerForDismissedController:(<span class="built_in">UIViewController</span> *)dismissed &#123;</span><br><span class="line">    LOTAnimationTransitionController *animationController = [[LOTAnimationTransitionController alloc] initWithAnimationNamed:<span class="string">@"vcTransition2"</span></span><br><span class="line">                                                                                                              fromLayerNamed:<span class="string">@"outLayer"</span></span><br><span class="line">                                                                                                                toLayerNamed:<span class="string">@"inLayer"</span></span><br><span class="line">                                                                                                     applyAnimationTransform:<span class="literal">NO</span>];</span><br><span class="line">    <span class="keyword">return</span> animationController;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="添加视图到-Layer-层：可参考“添加-View-到-Layer-示例”"><a href="#添加视图到-Layer-层：可参考“添加-View-到-Layer-示例”" class="headerlink" title="添加视图到 Layer 层：可参考“添加 View 到 Layer 示例”"></a>添加视图到 Layer 层：可参考“添加 View 到 Layer 示例”</h3><p>Lottie 除了支持动画播放，还支持添加自定义的视图到指定的 Layer ：</p>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/%E6%B7%BB%E5%8A%A0%E8%A7%86%E5%9B%BE%E5%88%B0Layer%E5%B1%82.gif" alt="添加视图到Layer层.gif"></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *layerNames = @[<span class="string">@"Green Solid 1"</span>,<span class="string">@"Shape Layer 1"</span>,<span class="string">@"Shape Layer 2"</span>,<span class="string">@"Shape Layer 3"</span>,<span class="string">@"Shape Layer 4"</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSString</span> *layerName <span class="keyword">in</span> layerNames) &#123;</span><br><span class="line">    <span class="built_in">CGRect</span> subRectViewFrame = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">15</span>, <span class="number">15</span>);</span><br><span class="line">    <span class="built_in">UIView</span> *subRectView = [[<span class="built_in">UIView</span> alloc] initWithFrame:subRectViewFrame];</span><br><span class="line">    subRectViewFrame = [<span class="keyword">self</span>.rectView convertRect:subRectViewFrame toLayerNamed:layerName];</span><br><span class="line">    subRectView.frame = subRectViewFrame;</span><br><span class="line">    subRectView.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">    [<span class="keyword">self</span>.rectView addSubview:subRectView toLayerNamed:layerName applyTransform:<span class="literal">YES</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在AE中，我们一般会用到2种类型的 Layer 来制作动画：Solid Layer（固态图层）和 Shape Layer（形状图层）。图中，绿色的视图元素就是Solid Layer，蓝色、红色、黄色、棕色的视图元素就是 Shape Layer。</p>
<p>细心的读者可以发现，添加同一个 subRectView 到 不同的 Layer ，subRectView 的绘制位置不一样，这是因为不同类型的 Layer 其坐标系统不一样：</p>
<ul>
<li><p>Solid Layer 的坐标原点在左上角位置，向右是X轴正方向，向下是Y轴正方向</p>
</li>
<li><p>Shape Layer 的坐标原点由<code>ShapeLayer-Contents-layer-AnchorPoint</code>（内容图层的锚点位置）决定，X轴和Y轴的正方向则取决于其<code>ShapeLayer-Transform-Scale</code>的值的正负，具体如图所示：</p>
</li>
</ul>
<p><img src="/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/Shape-Layer%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F.jpg" alt="Shape Layer坐标系统.jpg"></p>
<p>在上面演示的Gif图中，<code>Shape Layer 1</code>、<code>Shape Layer 2</code>、<code>Shape Layer 3</code>、<code>Shape Layer 4</code>的坐标原点都在图层中心位置，不同的是其X轴和Y轴的正方向位置。感兴趣的同学，可以下载打开 Demo 里的 <a href="https://github.com/YK-Unit/LottieExample/tree/master/AE-Files" target="_blank" rel="noopener">RectComp.aep</a> 文件，查看对应 Layer 的坐标系统数据，然后你也可以尝试编辑修改对应图层的坐标原点位置和XY轴方向，导出动画数据进行试验。</p>
<p>总得来说，若你要添加视图到Layer，在添加前，最好打开AE文件，查看对应的 Layer 的坐标系统信息。当然，更好的做法还是和AE设计师结对开发动画，这样可以更方便知道各个Layer的信息。</p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>YorkFish
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="https://blog.yorkfish.me/2017/Airbnb%20%E5%BC%80%E6%BA%90%E5%8A%A8%E7%94%BB%E5%BA%93%20Lottie%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%AF%A6%E7%BB%86%E7%A4%BA%E4%BE%8B/readme/" title="Airbnb 开源动画库 Lottie 介绍以及详细示例">https://blog.yorkfish.me/2017/Airbnb 开源动画库 Lottie 介绍以及详细示例/readme/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/iOS/" rel="tag"># iOS</a>
              <a href="/tags/%E6%95%99%E7%A8%8B/" rel="tag"># 教程</a>
              <a href="/tags/2017/" rel="tag"># 2017</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2017/Unicode%E5%92%8CUTF-8%E3%80%81UTF-16/readme/" rel="prev" title="Unicode和UTF-8、UTF-16">
      <i class="fa fa-chevron-left"></i> Unicode和UTF-8、UTF-16
    </a></div>
      <div class="post-nav-item">
    <a href="/2017/private_external_symbol%20VS%20external_symbol/readme/" rel="next" title="private_external_symbol VS external_symbol">
      private_external_symbol VS external_symbol <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Lottie-介绍"><span class="nav-number">2.</span> <span class="nav-text">Lottie 介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为-Lottie-制作动画"><span class="nav-number">3.</span> <span class="nav-text">为 Lottie 制作动画</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装-After-Effects"><span class="nav-number">3.1.</span> <span class="nav-text">安装 After Effects</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装-After-Effects-插件-bodymovin"><span class="nav-number">3.2.</span> <span class="nav-text">安装 After Effects 插件 bodymovin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-After-Effects-制作动画"><span class="nav-number">3.3.</span> <span class="nav-text">使用 After Effects 制作动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-bodymovin-导出-json文件"><span class="nav-number">3.4.</span> <span class="nav-text">使用 bodymovin 导出 json文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在线预览动画效果"><span class="nav-number">3.5.</span> <span class="nav-text">在线预览动画效果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#哪些场景适宜使用-Lottie？"><span class="nav-number">4.</span> <span class="nav-text">哪些场景适宜使用 Lottie？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#接入-Lottie"><span class="nav-number">5.</span> <span class="nav-text">接入 Lottie</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lottie-ios-极速上手手册"><span class="nav-number">6.</span> <span class="nav-text">lottie-ios 极速上手手册</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装-Lottie"><span class="nav-number">6.1.</span> <span class="nav-text">安装 Lottie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#加载-Lottie-动画"><span class="nav-number">6.2.</span> <span class="nav-text">加载 Lottie 动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#播放-Lottie-动画"><span class="nav-number">6.3.</span> <span class="nav-text">播放 Lottie 动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加视图到-Layer-层：可参考“添加-View-到-Layer-示例”"><span class="nav-number">6.4.</span> <span class="nav-text">添加视图到 Layer 层：可参考“添加 View 到 Layer 示例”</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="YorkFish"
      src="/uploads/left-v.jpg">
  <p class="site-author-name" itemprop="name">YorkFish</p>
  <div class="site-description" itemprop="description">Keep IT Simple & Stupid</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">38</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/YK-Unit" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;YK-Unit" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/eipcdio" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;eipcdio" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/YorkFish_" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;YorkFish_" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/users/1505549" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;1505549" rel="noopener" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://juejin.im/user/569db819816dfa005959d881" title="掘金 → https:&#x2F;&#x2F;juejin.im&#x2F;user&#x2F;569db819816dfa005959d881" rel="noopener" target="_blank"><i class="fa fa-fw fa-link"></i>掘金</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jianshu.com/u/1e4e723ece8c" title="简书 → https:&#x2F;&#x2F;www.jianshu.com&#x2F;u&#x2F;1e4e723ece8c" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-fw fa-link"></i>简书</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-fw fa-rss"></i>RSS</a>
      </span>
      <span class="links-of-author-item">
        <a href="/sitemap.xml" title="Sitemap → &#x2F;sitemap.xml"><i class="fa fa-fw fa-sitemap"></i>Sitemap</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2020 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YorkFish</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener external nofollow noreferrer" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
